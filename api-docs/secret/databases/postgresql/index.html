<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-api-docs docs-version-current docs-doc-page docs-doc-id-secret/databases/postgresql" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">PostgreSQL database plugin HTTP API | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/api-docs/secret/databases/postgresql/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-api-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-api-docs-current"><meta data-rh="true" property="og:title" content="PostgreSQL database plugin HTTP API | OpenBao"><meta data-rh="true" name="description" content="The PostgreSQL plugin for OpenBao&#x27;s database secrets engine generates database credentials to access PostgreSQL servers."><meta data-rh="true" property="og:description" content="The PostgreSQL plugin for OpenBao&#x27;s database secrets engine generates database credentials to access PostgreSQL servers."><link data-rh="true" rel="icon" href="/openbao/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/api-docs/secret/databases/postgresql/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/api-docs/secret/databases/postgresql/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/api-docs/secret/databases/postgresql/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.28fe8a88.css">
<script src="/openbao/assets/js/runtime~main.9d852785.js" defer="defer"></script>
<script src="/openbao/assets/js/main.43001c87.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a class="navbar__item navbar__link" href="/openbao/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/api-docs/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/openbao/api-docs/auth/">Auth methods</a><button aria-label="Expand sidebar category &#x27;Auth methods&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/api-docs/">HTTP API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/api-docs/libraries/">Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/api-docs/relatedtools/">Related tools</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/openbao/api-docs/secret/">Secrets engines</a><button aria-label="Collapse sidebar category &#x27;Secrets engines&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/cubbyhole/">Cubbyhole secrets engine (API)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/openbao/api-docs/secret/databases/">Database secrets engine (API)</a><button aria-label="Collapse sidebar category &#x27;Database secrets engine (API)&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/databases/cassandra/">Cassandra database plugin HTTP API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/databases/influxdb/">Influxdb database plugin HTTP API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/databases/mysql-maria/">MySQL/MariaDB database plugin HTTP API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/api-docs/secret/databases/postgresql/">PostgreSQL database plugin HTTP API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/databases/redis/">Redis database plugin HTTP API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/openbao/api-docs/secret/identity/">Identity secrets engine (API)</a><button aria-label="Expand sidebar category &#x27;Identity secrets engine (API)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/kubernetes/">Kubernetes secrets engine (API)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/openbao/api-docs/secret/kv/">KV secrets engine (API)</a><button aria-label="Expand sidebar category &#x27;KV secrets engine (API)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/ldap/">LDAP secrets engine (API)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/pki/">PKI secrets engine (API)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/rabbitmq/">RabbitMQ secrets engine (API)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/ssh/">SSH secrets engine (API)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/totp/">TOTP secrets engine (API)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/transit/">Transit secrets engine (API)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/openbao/api-docs/system/">System backend</a><button aria-label="Expand sidebar category &#x27;System backend&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/openbao/api-docs/secret/"><span itemprop="name">Secrets engines</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/openbao/api-docs/secret/databases/"><span itemprop="name">Database secrets engine (API)</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PostgreSQL database plugin HTTP API</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>PostgreSQL database plugin HTTP API</h1>
<p>The PostgreSQL database plugin is one of the supported plugins for the database
secrets engine. This plugin generates database credentials dynamically based on
configured roles for the PostgreSQL database.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-connection">Configure connection<a href="#configure-connection" class="hash-link" aria-label="Direct link to Configure connection" title="Direct link to Configure connection">​</a></h2>
<p>In addition to the parameters defined by the <a href="/openbao/api-docs/secret/databases/#configure-connection">Database
Backend</a>, this plugin
has a number of parameters to further configure a connection.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/database/config/:name</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h3>
<ul>
<li>
<p><code>connection_url</code> <code>(string: &lt;required&gt;)</code> - Specifies the PostgreSQL DSN. This field
can be templated and supports passing the username and password
parameters in the following format <code>{{field_name}}</code>. Certificate authentication
can be used by setting <code>?sslmode=</code> to be any of the applicable values as outlined in
the <a href="https://www.postgresql.org/docs/11/libpq-ssl.html#LIBPQ-SSL-PROTECTION" target="_blank" rel="noopener noreferrer">Postgres SQL documentation</a>
and giving the SSL credentials in the <code>sslrootcert</code>, <code>sslcert</code> and <code>sslkey</code> credentials.
A templated connection URL is required when using root credential rotation. This field
supports both format string types, URI and keyword/value. Both formats support multiple
host connection strings.
Due to how <code>pgx</code> works, parameters such as <code>sslrootcert</code>, <code>sslcert</code>, <code>sslkey</code> are treated as paths
on the OpenBao server.</p>
</li>
<li>
<p><code>max_open_connections</code> <code>(int: 4)</code> - Specifies the maximum number of open
connections to the database.</p>
</li>
<li>
<p><code>max_idle_connections</code> <code>(int: 0)</code> - Specifies the maximum number of idle
connections to the database. A zero uses the value of <code>max_open_connections</code>
and a negative value disables idle connections. If larger than
<code>max_open_connections</code> it will be reduced to be equal.</p>
</li>
<li>
<p><code>max_connection_lifetime</code> <code>(string: &quot;0s&quot;)</code> - Specifies the maximum amount of
time a connection may be reused. If &lt;= <code>0s</code>, connections are reused forever.</p>
</li>
<li>
<p><code>username</code> <code>(string: &quot;&quot;)</code> - The root credential username used in the connection URL.</p>
</li>
<li>
<p><code>password</code> <code>(string: &quot;&quot;)</code> - The root credential password used in the connection URL.</p>
</li>
<li>
<p><code>username_template</code> <code>(string)</code> - <a href="/openbao/docs/concepts/username-templating/">Template</a> describing how
dynamic usernames are generated.</p>
</li>
<li>
<p><code>disable_escaping</code> <code>(boolean: false)</code> - Turns off the escaping of special characters inside of the username
and password fields. See the <a href="/openbao/docs/secrets/databases/#disable-character-escaping">databases secrets engine docs</a>
for more information. Defaults to <code>false</code>.</p>
</li>
<li>
<p><code>password_authentication</code> <code>(string: &quot;password&quot;)</code> - When set to &quot;scram-sha-256&quot;, passwords will be hashed by OpenBao and stored as-is by PostgreSQL.
Using &quot;scram-sha-256&quot; requires a minimum version of PostgreSQL 10. Available options are &quot;scram-sha-256&quot; and &quot;password&quot;. The default is &quot;password&quot;.
When set to &quot;password&quot;, passwords will be sent to PostgresSQL in plaintext format and may appear in PostgreSQL logs as-is.
For more information, please refer to the <a href="https://www.postgresql.org/docs/current/sql-createrole.html#password" target="_blank" rel="noopener noreferrer">PostgreSQL documentation</a>.</p>
</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Default Username Template</b></summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{{ printf &quot;v-%s-%s-%s-%s&quot; (.DisplayName | truncate 8) (.RoleName | truncate 8) (random 20) (unix_time) | truncate 63 }}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><b>Example Usernames:</b></summary><div><div class="collapsibleContent_i85q"><table><thead><tr><th>Example</th><th></th></tr></thead><tbody><tr><td><code>DisplayName</code></td><td><code>token</code></td></tr><tr><td><code>RoleName</code></td><td><code>myrolename</code></td></tr><tr><td>Username</td><td><code>v-token-myrolena-jNFRlKsZZMxJEx60o66i-1614294836</code></td></tr></tbody></table><table><thead><tr><th>Example</th><th></th></tr></thead><tbody><tr><td><code>DisplayName</code></td><td><code>amuchlonger_dispname</code></td></tr><tr><td><code>RoleName</code></td><td><code>role-name-with-dashes</code></td></tr><tr><td>Username</td><td><code>v-amuchlon-role-nam-LUHU9xqm6YNisikA3iCQ-1614294836</code></td></tr></tbody></table></div></div></details></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-with-uri-format-connection-string">Sample payload with URI-format connection string<a href="#sample-payload-with-uri-format-connection-string" class="hash-link" aria-label="Direct link to Sample payload with URI-format connection string" title="Direct link to Sample payload with URI-format connection string">​</a></h3>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;plugin_name&quot;: &quot;postgresql-database-plugin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;allowed_roles&quot;: &quot;readonly&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;connection_url&quot;: &quot;postgresql://{{username}}:{{password}}@localhost:5432/postgres&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;max_open_connections&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;max_connection_lifetime&quot;: &quot;5s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;username&quot;: &quot;username&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;password&quot;: &quot;password&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-with-keywordvalue-format-connection-string">Sample payload with Keyword/Value-format connection string<a href="#sample-payload-with-keywordvalue-format-connection-string" class="hash-link" aria-label="Direct link to Sample payload with Keyword/Value-format connection string" title="Direct link to Sample payload with Keyword/Value-format connection string">​</a></h3>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;plugin_name&quot;: &quot;postgresql-database-plugin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;allowed_roles&quot;: &quot;readonly&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;connection_url&quot;: &quot;host=localhost port=5432 user={{username}} password={{password}}&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;max_open_connections&quot;: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;max_connection_lifetime&quot;: &quot;5s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;username&quot;: &quot;username&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;password&quot;: &quot;password&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request">Sample request<a href="#sample-request" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h3>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/database/config/postgresql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-strings-with-multiple-hosts">Connection strings with multiple hosts<a href="#connection-strings-with-multiple-hosts" class="hash-link" aria-label="Direct link to Connection strings with multiple hosts" title="Direct link to Connection strings with multiple hosts">​</a></h3>
<p>Postgres supports multiple hosts in the connection string. An example use-case for this might be having
Postgres set up with Replication Manager. However, there are some formatting rules to consider when using
this feature. Please refer to the <a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank" rel="noopener noreferrer">&quot;Specifying Multiple Hosts&quot; section of the
official Postgres documentation</a>
for more information. Below are two small examples.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uri-format-multi-host-string">URI-format Multi-Host string:<a href="#uri-format-multi-host-string" class="hash-link" aria-label="Direct link to URI-format Multi-Host string:" title="Direct link to URI-format Multi-Host string:">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;connection_url&quot;: &quot;postgresql://{{username}}:{{password}}@hostone:5432,hosttwo:5432,hostthree:9999/postgres&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="keywordvalue-format-multi-host-string">Keyword/Value-format Multi-Host string:<a href="#keywordvalue-format-multi-host-string" class="hash-link" aria-label="Direct link to Keyword/Value-format Multi-Host string:" title="Direct link to Keyword/Value-format Multi-Host string:">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;connection_url&quot;: &quot;host=hostone,hosttwo,hostthree port=5432,5432,9999 user={{username}} password={{password}} dbname=postgres&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="statements">Statements<a href="#statements" class="hash-link" aria-label="Direct link to Statements" title="Direct link to Statements">​</a></h2>
<p>Statements are configured during role creation and are used by the plugin to
determine what is sent to the database on user creation, renewing, and
revocation. For more information on configuring roles see the <a href="/openbao/api-docs/secret/databases/#create-role">Role
API</a> in the database secrets engine docs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-1">Parameters<a href="#parameters-1" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h3>
<p>The following are the statements used by this plugin. If not mentioned in this
list the plugin does not support that statement type.</p>
<ul>
<li>
<p><code>creation_statements</code> <code>(list: &lt;required&gt;)</code> – Specifies the database
statements executed to create and configure a user. Must be a
semicolon-separated string, a base64-encoded semicolon-separated string, a
serialized JSON string array, or a base64-encoded serialized JSON string
array. The <code>{{name}}</code>, <code>{{password}}</code> and <code>{{expiration}}</code> values will be
substituted. The generated password will be a random alphanumeric 20 character
string.</p>
</li>
<li>
<p><code>revocation_statements</code> <code>(list: [])</code> – Specifies the database statements to
be executed to revoke a user. Must be a semicolon-separated string, a
base64-encoded semicolon-separated string, a serialized JSON string array, or
a base64-encoded serialized JSON string array. The <code>{{name}}</code> value will be
substituted. If not provided defaults to a generic drop user statement.</p>
</li>
<li>
<p><code>rollback_statements</code> <code>(list: [])</code> – Specifies the database statements to be
executed rollback a create operation in the event of an error. Not every
plugin type will support this functionality. Must be a semicolon-separated
string, a base64-encoded semicolon-separated string, a serialized JSON string
array, or a base64-encoded serialized JSON string array. The <code>{{name}}</code> value
will be substituted.</p>
</li>
<li>
<p><code>renew_statements</code> <code>(list: [])</code> – Specifies the database statements to be
executed to renew a user. Not every plugin type will support this
functionality. Must be a semicolon-separated string, a base64-encoded
semicolon-separated string, a serialized JSON string array, or a
base64-encoded serialized JSON string array. The <code>{{name}}</code> and
<code>{{expiration}}</code> values will be substituted.</p>
</li>
<li>
<p><code>rotation_statements</code> <code>(list: [])</code> – Specifies the database statements to be
executed to rotate the password for a given username. Must be a
semicolon-separated string, a base64-encoded semicolon-separated string, a
serialized JSON string array, or a base64-encoded serialized JSON string
array. The <code>{{name}}</code> and <code>{{password}}</code> values will be substituted. The
generated password will be a random alphanumeric 20 character string.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/databases/postgresql.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/api-docs/secret/databases/mysql-maria/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">MySQL/MariaDB database plugin HTTP API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/api-docs/secret/databases/redis/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis database plugin HTTP API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configure-connection" class="table-of-contents__link toc-highlight">Configure connection</a><ul><li><a href="#parameters" class="table-of-contents__link toc-highlight">Parameters</a></li><li><a href="#sample-payload-with-uri-format-connection-string" class="table-of-contents__link toc-highlight">Sample payload with URI-format connection string</a></li><li><a href="#sample-payload-with-keywordvalue-format-connection-string" class="table-of-contents__link toc-highlight">Sample payload with Keyword/Value-format connection string</a></li><li><a href="#sample-request" class="table-of-contents__link toc-highlight">Sample request</a></li><li><a href="#connection-strings-with-multiple-hosts" class="table-of-contents__link toc-highlight">Connection strings with multiple hosts</a></li></ul></li><li><a href="#statements" class="table-of-contents__link toc-highlight">Statements</a><ul><li><a href="#parameters-1" class="table-of-contents__link toc-highlight">Parameters</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/openbao/docs/">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat Server<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The OpenBao Authors. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>