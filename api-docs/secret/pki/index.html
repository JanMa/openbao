<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-api-docs docs-version-current docs-doc-page docs-doc-id-secret/pki" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">PKI secrets engine (API) | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/api-docs/secret/pki/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-api-docs-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-api-docs-current"><meta data-rh="true" property="og:title" content="PKI secrets engine (API) | OpenBao"><meta data-rh="true" name="description" content="This is the API documentation for the OpenBao PKI secrets engine."><meta data-rh="true" property="og:description" content="This is the API documentation for the OpenBao PKI secrets engine."><link data-rh="true" rel="icon" href="/openbao/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/api-docs/secret/pki/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/api-docs/secret/pki/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/api-docs/secret/pki/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.a7459e73.css">
<script src="/openbao/assets/js/runtime~main.7e48f1b8.js" defer="defer"></script>
<script src="/openbao/assets/js/main.4fbbc033.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a class="navbar__item navbar__link" href="/openbao/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/api-docs/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/api-docs/libraries/">Client Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/api-docs/relatedtools/">Related tools</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/openbao/api-docs/secret/">Secret Engines</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/cubbyhole/">Cubbyhole</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/api-docs/secret/databases/">Databases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/api-docs/secret/identity/">Identity</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/api-docs/secret/kv/">Key/Value</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/kubernetes/">Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/ldap/">LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/api-docs/secret/pki/">PKI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/rabbitmq/">RabbitMQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/ssh/">SSH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/totp/">TOTP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/api-docs/secret/transit/">Transit</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/api-docs/auth/">Auth Methods</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/api-docs/system/">System Backend</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Secret Engines</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">PKI</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>PKI secrets engine (API)</h1>
<p>:::warning</p>
<p><strong>Note</strong>: This engine can use external X.509 certificates as part of TLS or signature validation.
Verifying signatures against X.509 certificates that use SHA-1 is deprecated and is no longer
usable without a workaround. See the
<a href="/openbao/docs/deprecation/faq/#q-what-is-the-impact-of-removing-support-for-x-509-certificates-with-signatures-that-use-sha-1">deprecation FAQ</a>
for more information.</p>
<p>:::</p>
<p>This is the API documentation for the OpenBao PKI secrets engine. For general
information about the usage and operation of the PKI secrets engine, please see
the <a href="/openbao/docs/secrets/pki/">PKI documentation</a>.</p>
<p>This documentation assumes the PKI secrets engine is enabled at the <code>/pki</code> path
in OpenBao. Since it is possible to enable secrets engines at any location, please
update your API calls accordingly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of contents<a href="#table-of-contents" class="hash-link" aria-label="Direct link to Table of contents" title="Direct link to Table of contents">​</a></h2>
<ul>
<li><a href="#notice-about-new-multi-issuer-functionality">Notice About New Multi-Issuer Functionality</a></li>
<li><a href="#acme-certificate-issuance">ACME Certificate Issuance</a>
<ul>
<li><a href="#acme-directories">ACME Directories</a></li>
<li><a href="#get-acme-eab-binding-token">Get ACME EAB Binding Token</a></li>
<li><a href="#list-unused-acme-eab-binding-tokens">List Unused ACME EAB Binding Tokens</a></li>
<li><a href="#delete-unused-acme-eab-binding-tokens">Delete Unused ACME EAB Binding Tokens</a></li>
<li><a href="#get-acme-configuration">Get ACME Configuration</a></li>
<li><a href="#set-acme-configuration">Set ACME Configuration</a></li>
</ul>
</li>
<li><a href="#issuing-certificates">Issuing Certificates</a>
<ul>
<li><a href="#list-roles">List Roles</a></li>
<li><a href="#read-role">Read Role</a></li>
<li><a href="#generate-certificate-and-key">Generate Certificate and Key</a></li>
<li><a href="#sign-certificate">Sign Certificate</a></li>
<li><a href="#sign-intermediate">Sign Intermediate</a></li>
<li><a href="#sign-self-issued">Sign Self-Issued</a></li>
<li><a href="#sign-verbatim">Sign Verbatim</a></li>
<li><a href="#revoke-certificate">Revoke Certificate</a></li>
<li><a href="#revoke-certificate-with-private-key">Revoke Certificate with Private Key</a></li>
<li><a href="#list-revoked-certificates">List Revoked Certificates</a></li>
<li><a href="#list-revocation-requests">List Revocation Requests</a></li>
<li><a href="#list-cross-cluster-revocations">List Cross-Cluster Revocations</a></li>
</ul>
</li>
<li><a href="#accessing-authority-information">Accessing Authority Information</a>
<ul>
<li><a href="#list-issuers">List Issuers</a></li>
<li><a href="#read-issuer-certificate">Read Issuer Certificate</a></li>
<li><a href="#read-default-issuer-certificate-chain">Read Default Issuer Certificate Chain</a></li>
<li><a href="#read-issuer-crl">Read Issuer CRL</a></li>
<li><a href="#ocsp-request">OCSP Request</a></li>
<li><a href="#list-certificates">List Certificates</a></li>
<li><a href="#read-certificate">Read Certificate</a></li>
</ul>
</li>
<li><a href="#managing-keys-and-issuers">Managing Keys and Issuers</a>
<ul>
<li><a href="#list-issuers">List Issuers</a></li>
<li><a href="#list-keys">List Keys</a></li>
<li><a href="#generate-key">Generate Key</a></li>
<li><a href="#generate-root">Generate Root</a></li>
<li><a href="#generate-intermediate-csr">Generate Intermediate CSR</a></li>
<li><a href="#import-ca-certificates-and-keys">Import CA Certificates and Keys</a></li>
<li><a href="#read-issuer">Read Issuer</a></li>
<li><a href="#update-issuer">Update Issuer</a></li>
<li><a href="#revoke-issuer">Revoke Issuer</a></li>
<li><a href="#delete-issuer">Delete Issuer</a></li>
<li><a href="#import-key">Import Key</a></li>
<li><a href="#read-key">Read Key</a></li>
<li><a href="#update-key">Update Key</a></li>
<li><a href="#delete-key">Delete Key</a></li>
<li><a href="#delete-all-issuers-and-keys">Delete All Issuers and Keys</a></li>
</ul>
</li>
<li><a href="#managing-authority-information">Managing Authority Information</a>
<ul>
<li><a href="#list-roles">List Roles</a></li>
<li><a href="#create-update-role">Create/Update Role</a></li>
<li><a href="#read-role">Read Role</a></li>
<li><a href="#delete-role">Delete Role</a></li>
<li><a href="#read-urls">Read URLs</a></li>
<li><a href="#set-urls">Set URLs</a></li>
<li><a href="#read-issuers-configuration">Read Issuers Configuration</a></li>
<li><a href="#set-issuers-configuration">Set Issuers Configuration</a></li>
<li><a href="#read-keys-configuration">Read Keys Configuration</a></li>
<li><a href="#set-keys-configuration">Set Keys Configuration</a></li>
<li><a href="#read-cluster-configuration">Read Cluster Configuration</a></li>
<li><a href="#set-cluster-configuration">Set Cluster Configuration</a></li>
<li><a href="#read-crl-configuration">Read CRL Configuration</a></li>
<li><a href="#set-crl-configuration">Set CRL Configuration</a></li>
<li><a href="#rotate-crls">Rotate CRLs</a></li>
<li><a href="#rotate-delta-crls">Rotate Delta CRLs</a></li>
<li><a href="#combine-crls-from-the-same-issuer">Combining CRLs from the Same Issuer</a></li>
<li><a href="#sign-revocation-list">Sign Revocation List</a></li>
<li><a href="#tidy">Tidy</a></li>
<li><a href="#read-automatic-tidy-configuration">Read Automatic Tidy Configuration</a></li>
<li><a href="#set-automatic-tidy-configuration">Set Automatic Tidy Configuration</a></li>
<li><a href="#tidy-status">Tidy Status</a></li>
<li><a href="#cancel-tidy">Cancel Tidy</a></li>
</ul>
</li>
<li><a href="#cluster-scalability">Cluster Scalability</a></li>
<li><a href="#openbao-cli-with-der-pem-responses">OpenBao CLI with DER/PEM responses</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notice-about-new-multi-issuer-functionality">Notice about new Multi-Issuer functionality<a href="#notice-about-new-multi-issuer-functionality" class="hash-link" aria-label="Direct link to Notice about new Multi-Issuer functionality" title="Direct link to Notice about new Multi-Issuer functionality">​</a></h2>
<p>OpenBao allows a single PKI mount to have multiple Certificate
Authority (CA) certificates (&quot;issuers&quot;) in a single mount, for the purpose
of facilitating rotation. All issuers within a single mount are treated as a
single Authority, meaning that:</p>
<ol>
<li>Certificate Revocation List (CRL) configuration is common to all issuers,</li>
<li>All authority access URLs are common to all issuers,</li>
<li>Issued certificates&#x27; serial numbers will be unique across all issuers.</li>
</ol>
<p>However, since each issuer may have a distinct subject and keys, different
issuers may have different CRLs.</p>
<p>It is <em>strongly</em> encouraged to limit the scope of CAs within a mount and not
to mix different types of CAs (roots and intermediates).</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: Some functionality will not work if a default issuer is not
configured. OpenBao automatically selects the default issuer from the
current issuing certificate on migration from an older OpenBao version.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acme-certificate-issuance">ACME certificate issuance<a href="#acme-certificate-issuance" class="hash-link" aria-label="Direct link to ACME certificate issuance" title="Direct link to ACME certificate issuance">​</a></h2>
<p>OpenBao supports the <a href="https://datatracker.ietf.org/doc/html/rfc8555" target="_blank" rel="noopener noreferrer">ACME certificate lifecycle management
protocol</a> for issuing and
renewing leaf server certificates.</p>
<p>In order to use ACME, a <a href="#set-cluster-configuration">cluster path</a> must be
set and ACME must be <a href="#set-acme-configuration">enabled in its configuration</a>
with the <a href="#acme-required-headers">required headers</a> enabled on the mount
tuning.</p>
<p>Using ACME with a role requires <code>no_store=false</code> to be set on the role; this
allows the certificate to be stored and later fetched through the ACME
protocol.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acme-directories">ACME directories<a href="#acme-directories" class="hash-link" aria-label="Direct link to ACME directories" title="Direct link to ACME directories">​</a></h3>
<p>OpenBao PKI supports the following ACME directories, providing different
restrictions around usage (defaults, a specific issuer and/or a specific
role). To interact with these directories, specify the directory URL in
an ACME client. For example, with the EFF&#x27;s <a href="https://certbot.eff.org/" target="_blank" rel="noopener noreferrer">CertBot</a>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ certbot certonly --server https://localhost:8200/v1/pki/acme/directory ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These endpoints are unauthenticated from an OpenBao authentication model, but
internally authenticated via the ACME protocol.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Default Directory Policy</th><th style="text-align:left">Issuer</th><th style="text-align:left">Role</th></tr></thead><tbody><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/acme/directory</code></td><td style="text-align:left"><code>sign-verbatim</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">Sign-Verbatim</td></tr><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/acme/directory</code></td><td style="text-align:left"><code>role:role_ref</code></td><td style="text-align:left">Specified by the role</td><td style="text-align:left"><code>:role_ref</code></td></tr><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/acme/directory</code></td><td style="text-align:left"><code>sign-verbatim</code></td><td style="text-align:left"><code>:issuer_ref</code></td><td style="text-align:left">Sign-Verbatim</td></tr><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/acme/directory</code></td><td style="text-align:left"><code>role:role_ref</code></td><td style="text-align:left"><code>:issuer_ref</code></td><td style="text-align:left"><code>:role_ref</code></td></tr><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/roles/:role/acme/directory</code></td><td style="text-align:left">(any)</td><td style="text-align:left">Specified by the role</td><td style="text-align:left"><code>:role</code></td></tr><tr><td style="text-align:left"><code>ACME</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/roles/:role/acme/directory</code></td><td style="text-align:left">(any)</td><td style="text-align:left"><code>:issuer_ref</code></td><td style="text-align:left"><code>:role</code></td></tr></tbody></table>
<p>When a role is not specified (for the first two directory URLs, or four lines
in the table), behavior is specified by the <code>default_directory_policy</code> in the
<a href="#set-acme-configuration">ACME configuration</a>.  These directories can also be
forbidden by setting that policy as <code>forbid</code>.  If the policy is <code>sign-verbatim</code>
then <em>any</em> identifier for which the client can prove ownership of will be
issued for.  This is similar to using the <a href="#sign-verbatim">Sign Verbatim</a>
endpoint, but with additional verification that the client has proven
ownership (within the ACME protocol) of the requested certificate
identifiers.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="acme-challenge-types">ACME challenge types<a href="#acme-challenge-types" class="hash-link" aria-label="Direct link to ACME challenge types" title="Direct link to ACME challenge types">​</a></h4>
<p>OpenBao supports the following ACME challenge types presently:</p>
<ul>
<li><code>http-01</code>, supporting both <code>dns</code> and <code>ip</code> identifiers.</li>
<li><code>dns-01</code>, supporting <code>dns</code> identifiers including wildcards.</li>
<li><code>tls-alpn-01</code>, supporting only non-wildcard <code>dns</code> identifiers.</li>
</ul>
<p>A custom DNS resolver used by the server for looking up DNS names for use
with both mechanisms can be added via the <a href="#set-acme-configuration">ACME configuration</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="acme-external-account-bindings">ACME external account bindings<a href="#acme-external-account-bindings" class="hash-link" aria-label="Direct link to ACME external account bindings" title="Direct link to ACME external account bindings">​</a></h4>
<p>ACME External Account Binding (EAB) Policy can enforce that clients need to
have a valid external account binding to OpenBao. Before registering a new account,
an authenticated OpenBao client will need to <a href="#get-acme-eab-binding-token">fetch a new EAB
token</a>. This returns two values: a key identifier
and an HMAC key used by the ACME client to authenticate with EAB. For example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openbao write -f /pki/acme/new-eab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ certbot certonly --server https://localhost:8200/v1/pki/acme/directory \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   --eab-kid &lt;id&gt; --eab-hmac-key &lt;hmac-key&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With or without EAB, requests from the ACME client are not authenticated using
traditional OpenBao authentication, but are instead authenticated through the
ACME protocol. With EAB however, an OpenBao authenticated client will have to
fetch an EAB token and pass it to the ACME client for use on the initial
registration: this binds the ACME client&#x27;s registration to an authenticated
OpenBao endpoint, but not further to the client&#x27;s entity or other information.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Enabling EAB is strongly recommended for public-facing OpenBao
deployments. Use of the <code>VAULT_DISABLE_PUBLIC_ACME</code> environment variable
can be used to enforce all ACME instances have EAB enabled.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="acme-required-headers">ACME required headers<a href="#acme-required-headers" class="hash-link" aria-label="Direct link to ACME required headers" title="Direct link to ACME required headers">​</a></h4>
<p>ACME requires the following response headers (<code>allowed_response_headers</code>)
to be specified by <a href="/openbao/api-docs/system/mounts/#tune-mount-configuration">mount tuning</a>:</p>
<ul>
<li><code>Replay-Nonce</code></li>
<li><code>Link</code></li>
<li><code>Location</code></li>
</ul>
<p>On an existing mount, these can be specified by running the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ openbao secrets tune -allowed-response-headers=Location -allowed-response-headers=Replay-Nonce \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -allowed-response-headers=Link \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     pki/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-acme-eab-binding-token">Get ACME EAB binding token<a href="#get-acme-eab-binding-token" class="hash-link" aria-label="Direct link to Get ACME EAB binding token" title="Direct link to Get ACME EAB binding token">​</a></h3>
<p>This endpoint returns a new ACME binding token. The <code>id</code> response field can
be used as the key identifier and the <code>key</code> response field be used as the
EAB HMAC key in the ACME Client.</p>
<p>Each call to this endpoint will generate and return a new EAB binding token
that is linked to the specific ACME directory it resides under. EAB tokens
are not usable across different ACME directories.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/acme/new-eab</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/acme/new-eab</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/roles/:role/acme/new-eab</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/roles/:role/acme/new-eab</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<p>No parameters.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request">Sample request<a href="#sample-request" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/acme/new-eab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response">Sample response<a href="#sample-response" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;created_on&quot;: &quot;2023-05-24T14:33:00-04:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: &quot;bc8088d9-3816-5177-ae8e-d8393265f7dd&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;hs&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;acme_directory&quot;: &quot;acme/directory&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key&quot;: &quot;MHcCAQE... additional data elided ...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-unused-acme-eab-binding-tokens">List unused ACME EAB binding tokens<a href="#list-unused-acme-eab-binding-tokens" class="hash-link" aria-label="Direct link to List unused ACME EAB binding tokens" title="Direct link to List unused ACME EAB binding tokens">​</a></h3>
<p>This endpoint returns a list of all unused ACME binding tokens; once used,
they will be removed from this list.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/pki/eab</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-1">Sample request<a href="#sample-request-1" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/eab</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-1">Sample response<a href="#sample-response-1" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;bc8088d9-3816-5177-ae8e-d8393265f7dd&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;created_on&quot;: &quot;2023-05-24T14:33:00-04:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;key_type&quot;: &quot;hs&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;acme_directory&quot;: &quot;acme/directory&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;bc8088d9-3816-5177-ae8e-d8393265f7dd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-unused-acme-eab-binding-tokens">Delete unused ACME EAB binding tokens<a href="#delete-unused-acme-eab-binding-tokens" class="hash-link" aria-label="Direct link to Delete unused ACME EAB binding tokens" title="Direct link to Delete unused ACME EAB binding tokens">​</a></h3>
<p>This endpoint allows the deletion of an unused ACME binding token.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/pki/eab/:key_id</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-1">Parameters<a href="#parameters-1" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>key_id</code> <code>(string: &lt;required&gt;)</code> - The id of the EAB binding token to
delete. This is part of the request URL.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-2">Sample request<a href="#sample-request-2" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/eab/bc8088d9-3816-5177-ae8e-d8393265f7dd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-acme-configuration">Get ACME configuration<a href="#get-acme-configuration" class="hash-link" aria-label="Direct link to Get ACME configuration" title="Direct link to Get ACME configuration">​</a></h3>
<p>This endpoint allows reading of the current ACME server configuration used by
this mount.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/acme</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-3">Sample request<a href="#sample-request-3" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/acme</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-2">Sample response<a href="#sample-response-2" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_issuers&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_roles&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default_directory_policy&quot;: &quot;sign-verbatim&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dns_resolver&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;eab_policy&quot;: &quot;not-required&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enabled&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-acme-configuration">Set ACME configuration<a href="#set-acme-configuration" class="hash-link" aria-label="Direct link to Set ACME configuration" title="Direct link to Set ACME configuration">​</a></h3>
<p>This endpoint allows setting the ACME server configuration used by this
mount.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/acme</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-2">Parameters<a href="#parameters-2" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>allowed_issuers</code> <code>(list: [&quot;*&quot;])</code> - Specifies a list issuers allowed to
issue certificates via explicit ACME paths. If an allowed role specifies
an issuer outside this list, it will be allowed. The default value <code>*</code>
allows every issuer within the mount.</p>
</li>
<li>
<p><code>allow_role_ext_key_usage</code> <code>(bool: false)</code> - whether the ExtKeyUsage field
from a role is used, defaults to false meaning that certificate will be
signed with ServerAuth.</p>
</li>
<li>
<p><code>allowed_roles</code> <code>(list: [&quot;*&quot;])</code> - Specifies a list of roles allowed to
issue certificates via explicit ACME paths.  The default value <code>*</code> allows
every role within the mount to be used.  If the <code>default_directory_policy</code>
specifies a role, it must be allowed under this configuration.</p>
</li>
<li>
<p><code>default_directory_policy</code> <code>(string: &quot;sign-verbatim&quot;)</code> - Specifies the
behavior of the default ACME directory.  Can be <code>forbid</code>, <code>sign-verbatim</code>
or a role given by <code>role:&lt;role_name&gt;</code>.  If a role is used, it must be
present in <code>allowed_roles</code>.</p>
</li>
<li>
<p><code>dns_resolver</code> <code>(string: &quot;&quot;)</code> - An optional overriding DNS resolver to
use for challenge verification lookups. When not specified, the default
system resolver will be used. This allows domains on peered networks with
an accessible DNS resolver to be validated.</p>
</li>
<li>
<p><code>eab_policy</code> <code>(string: &quot;not-required&quot;)</code> - Specified policy to enforce
around <a href="#acme-external-account-bindings">External Account Bindings (EABs)</a>.
The allowed values are:</p>
<ul>
<li>
<p><code>not-required</code>, where EABs are not enforced but are validated if
specified.</p>
</li>
<li>
<p><code>new-account-required</code>, where new accounts are required to have EAB
but existing accounts can still be used.</p>
</li>
<li>
<p><code>always-required</code>, where all accounts regardless of age are required
to have EABs set.</p>
</li>
</ul>
</li>
<li>
<p><code>enabled</code> <code>(bool: false)</code> - Whether ACME is enabled on this mount. When
ACME is disabled, all requests to ACME directory URLs will return 404.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload">Sample payload<a href="#sample-payload" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enabled&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-4">Sample request<a href="#sample-request-4" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/acme</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-3">Sample response<a href="#sample-response-3" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_issuers&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_roles&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default_directory_policy&quot;: &quot;sign-verbatim&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;dns_resolver&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;eab_policy&quot;: &quot;not-required&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enabled&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="issuing-certificates">Issuing certificates<a href="#issuing-certificates" class="hash-link" aria-label="Direct link to Issuing certificates" title="Direct link to Issuing certificates">​</a></h2>
<p>The following API endpoints allow users or operators to request certificates
and are all authenticated.</p>
<p>In general, for self-serve use, the <code>/pki/sign/:name</code> and <code>/pki/issue/:name</code>
are sufficient to allow most users to access for ACL purposes. The per-issuer
variants (<code>/pki/issuer/:issuer_ref/sign/:name</code> and
<code>/pki/issuer/:issuer_ref/issue/:name</code>) allow the requester to override the
role&#x27;s chosen issuer, potentially allowing users to request certificates
issued by the wrong parent authority.</p>
<p>Some API endpoints included here are privileged and should only be accessed
by trusted users or operators; these include the various <code>sign-verbatim</code>,
<code>sign-self-signed</code> and <code>sign-intermediate</code> endpoints.</p>
<p>If an issued certificate has been compromised, it should be revoked. The
OpenBao PKI secrets engine presently only allows revocation by serial number;
because this could allow users to deny access to other users, it should be
restricted to operators.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-roles">List roles<a href="#list-roles" class="hash-link" aria-label="Direct link to List roles" title="Direct link to List roles">​</a></h3>
<p>This endpoint returns a list of available roles. Only the role names are
returned, not any values. It is useful to both operators and users.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/pki/roles</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-5">Sample request<a href="#sample-request-5" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/roles</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-4">Sample response<a href="#sample-response-4" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [&quot;dev&quot;, &quot;prod&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-role">Read role<a href="#read-role" class="hash-link" aria-label="Direct link to Read role" title="Direct link to Read role">​</a></h3>
<p>This endpoint queries the role definition. It is useful to both operators and
users.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/roles/:name</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-3">Parameters<a href="#parameters-3" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>name</code> <code>(string: &lt;required&gt;)</code> - Specifies the name of the role to read. This
is part of the request URL.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-6">Sample request<a href="#sample-request-6" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/roles/my-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-5">Sample response<a href="#sample-response-5" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allow_any_name&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allow_ip_sans&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allow_localhost&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allow_subdomains&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_domains&quot;: [&quot;example.com&quot;, &quot;foobar.com&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_uri_sans&quot;: [&quot;example.com&quot;, &quot;spiffe://*&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_other_sans&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1.3.6.1.4.1.311.20.2.3;utf8:devops@example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1.3.6.1.4.1.311.20.2.4;UTF-8:*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;client_flag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;code_signing_flag&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_bits&quot;: 2048,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;rsa&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ttl&quot;: &quot;6h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_ttl&quot;: &quot;12h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;server_flag&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ... additional fields elided ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="generate-certificate"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-certificate-and-key">Generate certificate and key<a href="#generate-certificate-and-key" class="hash-link" aria-label="Direct link to Generate certificate and key" title="Direct link to Generate certificate and key">​</a></h3>
<p>This endpoint generates a new set of credentials (private key and certificate)
based on the role named in the endpoint. The issuing CA certificate and full CA
chain is returned as well, so that only the root CA need be in a client&#x27;s trust
store. Choice of issuing CA is determined first by the role (when using the
<code>/pki/issue/:name</code> path) and then by the path (when using the
<code>/pki/issuer/:issuer_ref/issue/name</code> path).</p>
<p>It is suggested to limit access to the path-overridden issue endpoint (on
<code>/pki/issuer/:issuer_ref/issue/:name</code>).</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: The private key is <em>not</em> stored. If you do not save the private
key from the response, you will need to request a new certificate.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issue/:name</code></td><td style="text-align:left">Role selected</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/issue/:name</code></td><td style="text-align:left">Path selected</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-4">Parameters<a href="#parameters-4" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>name</code> <code>(string: &lt;required&gt;)</code> - Specifies the name of the role to create the
certificate against. This is part of the request URL.</p>
</li>
<li>
<p><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/issue/:name</code> path and
takes its value from the role&#x27;s <code>issuer_ref</code> field.</p></div></div>
<ul>
<li><code>common_name</code> <code>(string: &quot;&quot;)</code> - Specifies the requested CN for the
certificate. If the CN is allowed by role policy, it will be issued. If more
than one <code>common_name</code> is desired, specify the alternative names in the
<code>alt_names</code> list.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: A value for <code>common_name</code> is required when <a href="#require_cn">require_cn</a> is set to <code>true</code></p></div></div>
<ul>
<li>
<p><code>alt_names</code> <code>(string: &quot;&quot;)</code> - Specifies requested Subject Alternative Names, in
a comma-delimited list. These can be host names or email addresses; they will
be parsed into their respective fields. If any requested names do not match
role policy, the entire request will be denied.</p>
</li>
<li>
<p><code>ip_sans</code> <code>(string: &quot;&quot;)</code> - Specifies requested IP Subject Alternative Names,
in a comma-delimited list. Only valid if the role allows IP SANs (which is the
default).</p>
</li>
<li>
<p><code>uri_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested URI Subject Alternative
Names, in a comma-delimited list. If any requested URIs do not match role policy,
the entire request will be denied.</p>
</li>
<li>
<p><code>other_sans</code> <code>(string: &quot;&quot;)</code> - Specifies custom OID/UTF8-string SANs. These
must match values specified on the role in <code>allowed_other_sans</code> (see role
creation for allowed_other_sans globbing rules).
The format is the same as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code> where the
only current valid type is <code>UTF8</code>. This can be a comma-delimited list or a
JSON string slice.</p>
</li>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies requested Time To Live. Cannot be greater
than the role&#x27;s <code>max_ttl</code> value. If not provided, the role&#x27;s <code>ttl</code> value will
be used. Note that the role values default to system values if not explicitly
set. See <code>not_after</code> as an alternative for setting an absolute end date
(rather than a relative one).</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. Can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>; defaults to <code>pem</code>. If <code>der</code>, the output is
base64 encoded. If <code>pem_bundle</code>, the <code>certificate</code> field will contain the
private key and certificate, concatenated; if the issuing CA is not a
OpenBao-derived self-signed root, this will be included as well.</p>
</li>
<li>
<p><code>private_key_format</code> <code>(string: &quot;der&quot;)</code> - Specifies the format for marshaling
the private key within the private_key response field. Defaults to <code>der</code> which will
return either base64-encoded DER or PEM-encoded DER, depending on the value of
<code>format</code>. The other option is <code>pkcs8</code> which will return the key marshalled as
PEM-encoded PKCS8.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> that this does not apply to the private key within the certificate
field if <code>format=pem_bundle</code> parameter is specified.</p></div></div>
<ul>
<li>
<p><code>exclude_cn_from_sans</code> <code>(bool: false)</code> - If true, the given <code>common_name</code> will
not be included in DNS or Email Subject Alternate Names (as appropriate).
Useful if the CN is not a hostname or email address, but is instead some
human-readable identifier.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>remove_roots_from_chain</code> <code>(bool: false)</code> - If true, the returned <code>ca_chain</code>
field will not include any self-signed CA certificates. Useful if end-users
already have the root CA in their trust store.</p>
</li>
<li>
<p><code>user_ids</code> <code>(string: &quot;&quot;)</code> - Specifies the comma-separated list of requested
User ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the
signed certificate. This field is validated against <code>allowed_user_ids</code> on
the role.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-1">Sample payload<a href="#sample-payload-1" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;common_name&quot;: &quot;www.example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-7">Sample request<a href="#sample-request-7" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issue/my-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-6">Sample response<a href="#sample-response-6" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;pki/issue/test/7ad6cfa5-f04f-c62a-d477-f33210475d05&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 21600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;private_key&quot;: &quot;-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAnVHfwoKsUG1GDVyWB1AFroaKl2ImMBO8EnvGLRrmobIkQvh+\n...\nQN351pgTphi6nlCkGPzkDuwvtxSxiCWXQcaxrHAL7MiJpPzkIBq1\n-----END RSA PRIVATE KEY-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;private_key_type&quot;: &quot;rsa&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;warnings&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-certificate">Sign certificate<a href="#sign-certificate" class="hash-link" aria-label="Direct link to Sign certificate" title="Direct link to Sign certificate">​</a></h3>
<p>This endpoint signs a new certificate based upon the provided CSR and the
supplied parameters, subject to the restrictions contained in the role named in
the endpoint. The issuing CA certificate and the full CA chain is returned as
well, so that only the root CA need be in a client&#x27;s trust store.</p>
<p>It is suggested to limit access to the path-overridden sign endpoint (on
<code>/pki/issuer/:issuer_ref/sign/:name</code>).</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/sign/:name</code></td><td style="text-align:left">Role selected</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/sign/:name</code></td><td style="text-align:left">Path selected</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-5">Parameters<a href="#parameters-5" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>name</code> <code>(string: &lt;required&gt;)</code> - Specifies the name of the role to create the
certificate against. This is part of the request URL.</p>
</li>
<li>
<p><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/sign/:name</code> path and
takes its value from the role&#x27;s <code>issuer_ref</code> field.</p></div></div>
<ul>
<li>
<p><code>csr</code> <code>(string: &lt;required&gt;)</code> - Specifies the PEM-encoded CSR.</p>
</li>
<li>
<p><code>common_name</code> <code>(string: &lt;required&gt;)</code> - Specifies the requested CN for the
certificate. If the CN is allowed by role policy, it will be issued. If
more than one <code>common_name</code> is desired, specify the alternative names in
the <code>alt_names</code> list.</p>
</li>
<li>
<p><code>alt_names</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Subject Alternative
Names, in a comma-delimited list. These can be host names or email addresses;
they will be parsed into their respective fields. If any requested names do
not match role policy, the entire request will be denied.</p>
</li>
<li>
<p><code>other_sans</code> <code>(string: &quot;&quot;)</code> - Specifies custom OID/UTF8-string SANs. These
must match values specified on the role in <code>allowed_other_sans</code> (see role
creation for allowed_other_sans globbing rules).
The format is the same as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code> where the
only current valid type is <code>UTF8</code>. This can be a comma-delimited list or a
JSON string slice.</p>
</li>
<li>
<p><code>ip_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested IP Subject Alternative
Names, in a comma-delimited list. Only valid if the role allows IP SANs (which
is the default).</p>
</li>
<li>
<p><code>uri_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested URI Subject Alternative
Names, in a comma-delimited list. If any requested URIs do not match role policy,
the entire request will be denied.</p>
</li>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Time To Live. Cannot be greater
than the role&#x27;s <code>max_ttl</code> value. If not provided, the role&#x27;s <code>ttl</code> value will
be used. Note that the role values default to system values if not explicitly
set. See <code>not_after</code> as an alternative for setting an absolute end date
(rather than a relative one).</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. Can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>. If <code>der</code>, the output is base64 encoded. If
<code>pem_bundle</code>, the <code>certificate</code> field will contain the certificate and, if the
issuing CA is not an OpenBao-derived self-signed root, it will be concatenated
with the certificate.</p>
</li>
<li>
<p><code>exclude_cn_from_sans</code> <code>(bool: false)</code> - If true, the given <code>common_name</code> will
not be included in DNS or Email Subject Alternate Names (as appropriate).
Useful if the CN is not a hostname or email address, but is instead some
human-readable identifier.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>remove_roots_from_chain</code> <code>(bool: false)</code> - If true, the returned <code>ca_chain</code>
field will not include any self-signed CA certificates. Useful if end-users
already have the root CA in their trust store.</p>
</li>
<li>
<p><code>user_ids</code> <code>(string: &quot;&quot;)</code> - Specifies the comma-separated list of requested
User ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the
signed certificate. This field is validated against <code>allowed_user_ids</code> on
the role.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-2">Sample payload<a href="#sample-payload-2" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;csr&quot;: &quot;...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;common_name&quot;: &quot;example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-7">Sample response<a href="#sample-response-7" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;pki/sign/test/7ad6cfa5-f04f-c62a-d477-f33210475d05&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 21600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-intermediate">Sign intermediate<a href="#sign-intermediate" class="hash-link" aria-label="Direct link to Sign intermediate" title="Direct link to Sign intermediate">​</a></h3>
<p>This endpoint uses the configured CA certificate to issue a certificate with
appropriate values for acting as an intermediate CA. Distribution points use the
values set via <code>config/urls</code>. Values set in the CSR are ignored unless
<code>use_csr_values</code> is set to true, in which case the values from the CSR are used
verbatim.</p>
<p>This endpoint can be used both when signing an OpenBao-backed intermediate or
when signing an externally-owned intermediate.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This is a privileged endpoint, as callers are granted a new
intermediate certificate, with which they can issue for arbitrary names.
Access to this endpoint should be restricted by policy to only trusted
operators.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/root/sign-intermediate</code></td><td style="text-align:left"><code>default</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/sign-intermediate</code></td><td style="text-align:left">Selected</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-6">Parameters<a href="#parameters-6" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/root/sign-intermediate</code>
path and takes the value <code>default</code>.</p></div></div>
<ul>
<li>
<p><code>csr</code> <code>(string: &lt;required&gt;)</code> - Specifies the PEM-encoded CSR to be signed.</p>
</li>
<li>
<p><code>common_name</code> <code>(string: &lt;required&gt;)</code> - Specifies the requested CN for the
certificate. If more than one <code>common_name</code> is desired, specify the
alternative names in the <code>alt_names</code> list.</p>
</li>
<li>
<p><code>alt_names</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Subject Alternative
Names, in a comma-delimited list. These can be host names or email addresses;
they will be parsed into their respective fields.</p>
</li>
<li>
<p><code>ip_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested IP Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>uri_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested URI Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>other_sans</code> <code>(string: &quot;&quot;)</code> - Specifies custom OID/UTF8-string SANs. These
must match values specified on the role in <code>allowed_other_sans</code> (see role
creation for allowed_other_sans globbing rules).
The format is the same as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code> where the
only current valid type is <code>UTF8</code>. This can be a comma-delimited list or a
JSON string slice.</p>
</li>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Time To Live (after which the
certificate will be expired). This cannot be larger than the engine&#x27;s max (or,
if not set, the system max). However, this can be after the expiration of the
signing CA. See <code>not_after</code> as an alternative for setting an absolute end date
(rather than a relative one).</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. Can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>. If <code>der</code>, the output is base64 encoded. If
<code>pem_bundle</code>, the <code>certificate</code> field will contain the certificate and, if the
issuing CA is not an OpenBao-derived self-signed root, it will be concatenated
with the certificate.</p>
</li>
<li>
<p><code>max_path_length</code> <code>(int: -1)</code> - Specifies the maximum path length to encode in
the generated certificate. <code>-1</code>, means no limit, unless the signing
certificate has a maximum path length set, in which case the path length is
set to one less than that of the signing certificate. A limit of <code>0</code> means a
literal path length of zero.</p>
</li>
<li>
<p><code>exclude_cn_from_sans</code> <code>(bool: false)</code> - If true, the given <code>common_name</code> will
not be included in DNS or Email Subject Alternate Names (as appropriate).
Useful if the CN is not a hostname or email address, but is instead some
human-readable identifier.</p>
</li>
<li>
<p><code>use_csr_values</code> <code>(bool: false)</code> - If set to <code>true</code>, then: 1) Subject
information, including names and alternate names, will be preserved from the
CSR rather than using the values provided in the other parameters to this
path; 2) Any key usages (for instance, non-repudiation) requested in the CSR
will be added to the basic set of key usages used for CA certs signed by this
path; 3) Extensions requested in the CSR will be copied into the issued
certificate.</p>
</li>
<li>
<p><code>permitted_dns_domains</code> <code>(string: &quot;&quot;)</code> - A comma separated string (or, string
array) containing DNS domains for which certificates are allowed to be issued
or signed by this CA certificate. Supports subdomains via a <code>.</code> in front of
the domain, as per <a href="https://tools.ietf.org/html/rfc5280#section-4.2.1.10" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.10 - Name
Constraints</a></p>
</li>
<li>
<p><code>ou</code> <code>(string: &quot;&quot;)</code> - Specifies the OU (OrganizationalUnit) values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>organization</code> <code>(string: &quot;&quot;)</code> - Specifies the O (Organization) values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>country</code> <code>(string: &quot;&quot;)</code> - Specifies the C (Country) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>locality</code> <code>(string: &quot;&quot;)</code> - Specifies the L (Locality) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>province</code> <code>(string: &quot;&quot;)</code> - Specifies the ST (Province) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>street_address</code> <code>(string: &quot;&quot;)</code> - Specifies the Street Address values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>postal_code</code> <code>(string: &quot;&quot;)</code> - Specifies the Postal Code values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>serial_number</code> <code>(string: &quot;&quot;)</code> -  - Specifies the requested Subject&#x27;s named
<a href="https://datatracker.ietf.org/doc/html/rfc4519#section-2.31" target="_blank" rel="noopener noreferrer">Serial Number</a>
value, if any. If you want more than one, specify alternative names in the
<code>alt_names</code> map using OID 2.5.4.5. Note that this has no impact on the
Certificate&#x27;s serial number field, which OpenBao randomly generates.</p>
</li>
<li>
<p><code>not_before_duration</code> <code>(duration: &quot;30s&quot;)</code> - Specifies the duration by which to
backdate the NotBefore property. This value has no impact in the validity period
of the requested certificate, specified in the <code>ttl</code> field.
Uses <a href="/openbao/docs/concepts/duration-format/">duration format strings</a>.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>signature_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use in
the signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,
and 512 for SHA-2-512. Defaults to 0 to automatically detect based
on issuer&#x27;s key length (SHA-2-256 for RSA keys, and matching the curve size
for NIST P-Curves).</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: ECDSA and Ed25519 issuers do not follow configuration of the
<code>signature_bits</code> value; only RSA issuers will change signature types
based on this parameter.</p></div></div>
<ul>
<li><code>skid</code> <code>(string: &quot;&quot;)</code> - Value for the Subject Key Identifier field
(RFC 5280 Section 4.2.1.2). Specified as a string in hex format. Default
is empty, allowing OpenBao to automatically calculate the SKID according
to method one in the above RFC section.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This value should ONLY be used when cross-signing to mimic
the existing certificate&#x27;s SKID value; this is necessary to allow
certain TLS implementations (such as OpenSSL) which use SKID/AKID
matches in chain building to restrict possible valid chains.</p></div></div>
<ul>
<li>
<p><code>use_pss</code> <code>(bool: false)</code> - Specifies whether or not to use PSS signatures
over PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for
ECDSA/Ed25519 issuers.</p>
</li>
<li>
<p><code>key_usage</code> <code>(list: [&quot;KeyAgreement&quot;, &quot;KeyEncipherment&quot;])</code> -
Specifies the default key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#KeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#KeyUsage</a> - simply
drop the <code>KeyUsage</code> part of the value. Values are not case-sensitive.</p>
</li>
</ul>
<p>~&gt; Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>KeyUsage</code> extension is missing
from the CSR.</p>
<ul>
<li><code>ext_key_usage</code> <code>(list: [])</code> -
Specifies the default extended key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#ExtKeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#ExtKeyUsage</a> - simply
drop the <code>ExtKeyUsage</code> part of the value. Values are not case-sensitive. To
specify no key default usage constraints, set this to an empty list.</li>
</ul>
<p>~&gt; Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>ExtendedKeyUsage</code> extension is
missing from the CSR.</p>
<ul>
<li><code>ext_key_usage_oids</code> <code>(string: &quot;&quot;)</code> - A comma-separated string or list of extended key usage oids.</li>
</ul>
<p>~&gt; Note: This value is only used as a default when the <code>ExtendedKeyUsage</code>
extension is missing from the CSR.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-3">Sample payload<a href="#sample-payload-3" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;csr&quot;: &quot;...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;common_name&quot;: &quot;example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-8">Sample request<a href="#sample-request-8" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/root/sign-intermediate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-8">Sample response<a href="#sample-response-8" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-self-issued">Sign Self-Issued<a href="#sign-self-issued" class="hash-link" aria-label="Direct link to Sign Self-Issued" title="Direct link to Sign Self-Issued">​</a></h3>
<p>This endpoint uses the configured CA certificate to sign a self-issued
certificate (which will usually be a self-signed certificate as well).</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong><em>This is an extremely privileged endpoint</em></strong>. The given certificate will be
signed as-is with only minimal validation performed (is it a CA cert, and is it
actually self-issued). The only values that will be changed will be the
authority key ID, the issuer DN, and, if set, any distribution points.<br><br>
It is recommended to limit this endpoint to only trusted operators.</p></div></div>
<p>This is generally only needed for root certificate rolling in cases where you
don&#x27;t want/can&#x27;t get access to a CSR (such as if it&#x27;s a root stored in OpenBao
where the key is not exposed). If you don&#x27;t know whether you need this
endpoint, you most likely should be using a different endpoint (such as
<code>sign-intermediate</code>).</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th><th style="text-align:left">Requires <code>sudo</code> capability</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/root/sign-self-issued</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">yes</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/sign-self-issued</code></td><td style="text-align:left">Selected</td><td style="text-align:left">no</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-7">Parameters<a href="#parameters-7" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/root/sign-self-issued</code>
path and takes the value <code>default</code>.</p></div></div>
<ul>
<li>
<p><code>certificate</code> <code>(string: &lt;required&gt;)</code> - Specifies the PEM-encoded self-issued certificate.</p>
</li>
<li>
<p><code>require_matching_certificate_algorithms</code> <code>(bool: false)</code> - If true, requires
that the public key algorithm of the CA match that of the submitted certificate.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-4">Sample payload<a href="#sample-payload-4" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;certificate&quot;: &quot;...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-9">Sample request<a href="#sample-request-9" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/root/sign-self-issued</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-9">Sample response<a href="#sample-response-9" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-verbatim">Sign verbatim<a href="#sign-verbatim" class="hash-link" aria-label="Direct link to Sign verbatim" title="Direct link to Sign verbatim">​</a></h3>
<p>This endpoint signs a new certificate based upon the provided CSR. Values are
taken verbatim from the CSR; the <em>only</em> restriction is that this endpoint will
refuse to issue an intermediate CA certificate (see the
<code>/pki/root/sign-intermediate</code> endpoint for that functionality.)</p>
<p><strong>This is a potentially dangerous endpoint and only highly trusted users should
have access.</strong></p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/sign-verbatim(/:name)</code></td><td style="text-align:left"><code>default</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/sign-verbatim(/:name)</code></td><td style="text-align:left">Selected</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-8">Parameters<a href="#parameters-8" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/root/sign-self-issued</code>
path and takes the value <code>default</code>.</p></div></div>
<ul>
<li>
<p><code>name</code> <code>(string: &quot;&quot;)</code> - Specifies a role. If set, the following parameters
from the role will have effect: <code>ttl</code>, <code>max_ttl</code>, <code>generate_lease</code>, <code>no_store</code> and <code>not_before_duration</code>.</p>
</li>
<li>
<p><code>csr</code> <code>(string: &lt;required&gt;)</code> - Specifies the PEM-encoded CSR.</p>
</li>
<li>
<p><code>key_usage</code> <code>(list: [&quot;DigitalSignature&quot;, &quot;KeyAgreement&quot;, &quot;KeyEncipherment&quot;])</code> -
Specifies the default key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#KeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#KeyUsage</a> - simply
drop the <code>KeyUsage</code> part of the value. Values are not case-sensitive. To
specify no default key usage constraints, set this to an empty list.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>KeyUsage</code> extension is missing
from the CSR.</p></div></div>
<ul>
<li><code>ext_key_usage</code> <code>(list: [])</code> -
Specifies the default extended key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#ExtKeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#ExtKeyUsage</a> - simply
drop the <code>ExtKeyUsage</code> part of the value. Values are not case-sensitive. To
specify no key default usage constraints, set this to an empty list.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>ExtendedKeyUsage</code> extension is
missing from the CSR.</p></div></div>
<ul>
<li><code>ext_key_usage_oids</code> <code>(string: &quot;&quot;)</code> - A comma-separated string or list of extended key usage oids.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This value is only used as a default when the <code>ExtendedKeyUsage</code>
extension is missing from the CSR.</p></div></div>
<ul>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Time To Live. Cannot be greater
than the engine&#x27;s <code>max_ttl</code> value. If not provided, the engine&#x27;s <code>ttl</code> value
will be used, which defaults to system values if not explicitly set. See
<code>not_after</code> as an alternative for setting an absolute end date (rather than
a relative one).</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. Can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>. If <code>der</code>, the output is base64 encoded. If
<code>pem_bundle</code>, the <code>certificate</code> field will contain the certificate and, if the
issuing CA is not an OpenBao-derived self-signed root, it will be concatenated
with the certificate.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>signature_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use in
the signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,
and 512 for SHA-2-512. Defaults to 0 to automatically detect based
on issuer&#x27;s key length (SHA-2-256 for RSA keys, and matching the curve size
for NIST P-Curves).</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: ECDSA and Ed25519 issuers do not follow configuration of the
<code>signature_bits</code> value; only RSA issuers will change signature types
based on this parameter.</p></div></div>
<ul>
<li>
<p><code>use_pss</code> <code>(bool: false)</code> - Specifies whether or not to use PSS signatures
over PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for
ECDSA/Ed25519 issuers.</p>
</li>
<li>
<p><code>remove_roots_from_chain</code> <code>(bool: false)</code> - If true, the returned <code>ca_chain</code>
field will not include any self-signed CA certificates. Useful if end-users
already have the root CA in their trust store.</p>
</li>
<li>
<p><code>user_ids</code> <code>(string: &quot;&quot;)</code> - Specifies the comma-separated list of requested
User ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the
signed certificate. No validation on names is performed using this endpoint.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-5">Sample payload<a href="#sample-payload-5" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;csr&quot;: &quot;...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-10">Sample request<a href="#sample-request-10" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/sign-verbatim</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-10">Sample response<a href="#sample-response-10" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;pki/sign-verbatim/7ad6cfa5-f04f-c62a-d477-f33210475d05&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 21600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\n...\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\n-----END CERTIFICATE-----\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revoke-certificate">Revoke certificate<a href="#revoke-certificate" class="hash-link" aria-label="Direct link to Revoke certificate" title="Direct link to Revoke certificate">​</a></h3>
<p>This endpoint revokes a certificate using its serial number. This is an
alternative option to the standard method of revoking using OpenBao lease IDs. A
successful revocation will rotate the CRL.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This operation is privileged as it allows revocation of arbitrary
certificates based purely on their serial number. It does not validate that
the requesting user issued the certificate or has possession of the private
key.<br><br>
It is not possible to revoke issuers using this path.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/revoke</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-9">Parameters<a href="#parameters-9" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: either <code>serial_number</code> or <code>certificate</code> (but not both) must be
specified on requests to this endpoint.</p></div></div>
<ul>
<li>
<p><code>serial_number</code> <code>(string: &lt;optional&gt;)</code> - Specifies the serial number of the
certificate to revoke, in hyphen-separated or colon-separated hexadecimal.</p>
</li>
<li>
<p><code>certificate</code> <code>(string: &lt;optional&gt;)</code> - Specifies the certificate to revoke,
in PEM format. This certificate must have been signed by one of the issuers
in this mount in order to be accepted for revocation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-6">Sample payload<a href="#sample-payload-6" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;serial_number&quot;: &quot;39:dd:2e...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-11">Sample request<a href="#sample-request-11" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/revoke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-11">Sample response<a href="#sample-response-11" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time&quot;: 1433269787</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revoke-certificate-with-private-key">Revoke certificate with private key<a href="#revoke-certificate-with-private-key" class="hash-link" aria-label="Direct link to Revoke certificate with private key" title="Direct link to Revoke certificate with private key">​</a></h3>
<p>This endpoint revokes a certificate using its private key as proof that the
request is authorized by an appropriate individual (Proof of Possession).</p>
<p>This is an alternative option to the standard method of revoking using OpenBao
lease IDs or revocation via serial number. A successful revocation will
rotate the CRL.</p>
<p>It is not possible to revoke issuers using this path.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This operation is <strong>NOT</strong> privileged, as it validates revocation
has a private key corresponding to a certificate signed by OpenBao. However,
to avoid third parties performing a denial-of-service (DOS) against OpenBao,
we&#x27;ve made this endpoint authenticated. Thus it is strongly encouraged to
generally allow all access to this path via ACLs.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/revoke-with-key</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-10">Parameters<a href="#parameters-10" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: either <code>serial_number</code> or <code>certificate</code> (but not both) must be
specified on requests to this endpoint.</p></div></div>
<ul>
<li>
<p><code>serial_number</code> <code>(string: &lt;optional&gt;)</code> - Specifies the serial number of the
certificate to revoke, in hyphen-separated or colon-separated hexadecimal.</p>
</li>
<li>
<p><code>certificate</code> <code>(string: &lt;optional&gt;)</code> - Specifies the certificate to revoke,
in PEM format. This certificate must have been signed by one of the issuers
in this mount in order to be accepted for revocation.</p>
</li>
<li>
<p><code>private_key</code> <code>(string: &lt;required&gt;)</code> - Specifies the private key (in PEM
format) corresponding to the certificate issued by OpenBao that is attempted
to be revoked. This endpoint must be called several times (with each unique
certificate/serial number) if this private key is used in multiple
certificates as OpenBao does not maintain such a mapping.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-7">Sample payload<a href="#sample-payload-7" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;serial_number&quot;: &quot;39:dd:2e...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;private_key&quot;: &quot;-----BEGIN PRIVATE KEY-----\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-12">Sample request<a href="#sample-request-12" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/revoke-with-key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-12">Sample response<a href="#sample-response-12" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time&quot;: 1433269787</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-revoked-certificates">List revoked certificates<a href="#list-revoked-certificates" class="hash-link" aria-label="Direct link to List revoked certificates" title="Direct link to List revoked certificates">​</a></h3>
<p>This endpoint returns a list of serial numbers that have been revoked on the local cluster.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/certs/revoked</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-13">Sample request<a href="#sample-request-13" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/certs/revoked</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-13">Sample response<a href="#sample-response-13" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-revocation-requests">List revocation requests<a href="#list-revocation-requests" class="hash-link" aria-label="Direct link to List revocation requests" title="Direct link to List revocation requests">​</a></h3>
<p>This endpoint returns a list of serial numbers that have been requested to
be revoked on any cluster, along with information about the request&#x27;s state
and which cluster it originated on.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/certs/revocation-queue</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-14">Sample request<a href="#sample-request-14" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/certs/revocation-queue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-14">Sample response<a href="#sample-response-14" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;requesting_cluster&quot;: &quot;48327b28-8325-6d79-6a0b-4cbaa6f27b4a&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-authority-information">Accessing authority information<a href="#accessing-authority-information" class="hash-link" aria-label="Direct link to Accessing authority information" title="Direct link to Accessing authority information">​</a></h2>
<p>All consumers of the PKI Secrets Engine mount point will have access to the
following unauthenticated APIs, useful for reading information about the
certificate authority in this mount point.</p>
<p>This includes information about <a href="#read-issuer-certificate">CA certificates</a>,
<a href="#read-default-issuer-certificate-chain">their chains</a>, and <a href="#read-issuer-crl">their signed
CRLs</a>, containing an encoded list of revoked certificates
previously issued by this authority. Individual issued <a href="#read-certificate">certificates can
also be read</a>, assuming their serial number is known.
Finally, the list of issuing certificates is public information in this
mount.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-issuers">List issuers<a href="#list-issuers" class="hash-link" aria-label="Direct link to List issuers" title="Direct link to List issuers">​</a></h3>
<p>This endpoint returns a list of issuers currently provisioned in this mount.
The response includes both the issuer&#x27;s identifier as well as the name chosen
by the operators; either can be used to refer to the issuer later.</p>
<p>This endpoint is unauthenticated.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/pki/issuers</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-15">Sample request<a href="#sample-request-15" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-15">Sample response<a href="#sample-response-15" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1ae8ce9d-2f70-0761-a465-8c9840a247a2&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;issuer_name&quot;: &quot;imported-root&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3dc79a5a-7a6c-70e2-1123-94b88557ba12&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;issuer_name&quot;: &quot;root-x1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1ae8ce9d-2f70-0761-a465-8c9840a247a2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3dc79a5a-7a6c-70e2-1123-94b88557ba12&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="read-ca-certificate"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-issuer-certificate">Read issuer certificate<a href="#read-issuer-certificate" class="hash-link" aria-label="Direct link to Read issuer certificate" title="Direct link to Read issuer certificate">​</a></h3>
<p>This endpoint retrieves the specified issuer&#x27;s certificate.</p>
<p>Note that the response differs between the older <code>/pki/cert/ca</code>
path and the newer <code>/pki/issuer/:issuer_ref/json</code> path; the latter
includes the full <code>ca_chain</code> of the issuer, removing the need for a separate
endpoint.</p>
<p>These are unauthenticated endpoints.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: this endpoint accepts the <code>If-Modified-Since</code> header, to respond with
304 Not Modified when the requested resource has not changed. This header
needs to be allowed on the PKI mount by tuning the <code>passthrough_request_headers</code>
option. In order for clients to know the last modified time, the response
header <code>Last-Modified</code> needs to be added to the mount tunable
<code>allowed_response_headers</code>.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th><th style="text-align:left">Format</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/ca</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">JSON</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/ca</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/ca/pem</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/json</code></td><td style="text-align:left">Selected</td><td style="text-align:left">JSON</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/der</code></td><td style="text-align:left">Selected</td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/pem</code></td><td style="text-align:left">Selected</td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-11">Parameters<a href="#parameters-11" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/cert/ca</code> and
<code>/pki/ca(/pem)?</code> paths and takes the implicit value <code>default</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-16">Sample request<a href="#sample-request-16" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/root-x1/json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-16">Sample response<a href="#sample-response-16" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nnMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="read-ca-certificate-chain"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-default-issuer-certificate-chain">Read default issuer certificate chain<a href="#read-default-issuer-certificate-chain" class="hash-link" aria-label="Direct link to Read default issuer certificate chain" title="Direct link to Read default issuer certificate chain">​</a></h3>
<p>This endpoint retrieves the default issuer&#x27;s CA certificate chain, including
the default issuer.</p>
<p>To read <a href="#read-issuer-certificate">other issuers&#x27; chains</a>, use the
<code>/pki/issuer/:issuer_ref/json</code> endpoint instead.</p>
<p>These are unauthenticated endpoints.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th><th style="text-align:left">Format</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/ca_chain</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/ca_chain</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">JSON</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: These endpoints return the full chain (including the default
issuer&#x27;s certificate and all parent issuers known to OpenBao) in these
responses.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-17">Sample request<a href="#sample-request-17" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/ca_chain</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-17">Sample response<a href="#sample-response-17" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;PEM-encoded certificate chain&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="read-crl"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-issuer-crl">Read issuer CRL<a href="#read-issuer-crl" class="hash-link" aria-label="Direct link to Read issuer CRL" title="Direct link to Read issuer CRL">​</a></h3>
<p>This endpoint retrieves the specified issuer&#x27;s CRL.</p>
<p>Note that the response differs between the older <code>/pki/cert/crl</code> path and
the newer <code>/pki/issuer/:issuer_ref/crl</code> path; the latter correctly places the
PEM-encoded CRL in the <code>crl</code> field whereas the former incorrectly places it
in the <code>certificate</code> field.</p>
<p>Endpoints with type <code>complete</code> are full CRLs containing all revoked
certificates (as of the time of generation. Endpoints with type <code>delta</code>
contain incremental CRLs on top of the last complete CRL, with any new
certificates that have been revoked. See the <a href="#set-crl-configuration">revocation configuration
section</a> for more information about these options.
The delta CRL clears when the next complete CRL is rebuilt. Consumers of
delta CRLs will need to update their client to support fetching the
corresponding full CRL when it has been regenerated; otherwise, some serial
numbers may not appear in the local copy of the full CRL if the remote
complete and delta CRLs has been regenerated.</p>
<p>Endpoints with source <code>local</code> only include cluster-local revocations.</p>
<p>These are unauthenticated endpoints.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: These endpoints now serve a <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-5.1.2.1" target="_blank" rel="noopener noreferrer">version 2</a> CRL response.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: this endpoint accepts the <code>If-Modified-Since</code> header, to respond with
304 Not Modified when the requested resource has not changed. This header
needs to be allowed on the PKI mount by tuning the <code>passthrough_request_headers</code>
option. In order for clients to know the last modified time, the response
header <code>Last-Modified</code> needs to be added to the mount tunable
<code>allowed_response_headers</code>.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Issuer</th><th style="text-align:left">Format</th><th style="text-align:left">Type</th><th style="text-align:left">Source</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/crl</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">JSON</td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl/pem</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/delta-crl</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">JSON</td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl/delta</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl/delta/pem</code></td><td style="text-align:left"><code>default</code></td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl</code></td><td style="text-align:left">Selected</td><td style="text-align:left">JSON</td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl/der</code></td><td style="text-align:left">Selected</td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl/pem</code></td><td style="text-align:left">Selected</td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Complete</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl/delta</code></td><td style="text-align:left">Selected</td><td style="text-align:left">JSON</td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl/delta/der</code></td><td style="text-align:left">Selected</td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/crl/delta/pem</code></td><td style="text-align:left">Selected</td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Delta</td><td style="text-align:left">Local</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-12">Parameters<a href="#parameters-12" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is not present on the <code>/pki/cert/crl</code> and
<code>/pki/crl(/pem)?</code> paths and takes the implicit value <code>default</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-18">Sample request<a href="#sample-request-18" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/root-x1/crl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-18">Sample response<a href="#sample-response-18" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;crl&quot;: &quot;-----BEGIN X509 CRL-----\nMIIBizB1AgEBMA0GCSqGSIb3DQEBCwUAMBIxEDAOBgNVBAMTB3Jvb3QgeDEXDTIy\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ocsp-request">OCSP request<a href="#ocsp-request" class="hash-link" aria-label="Direct link to OCSP request" title="Direct link to OCSP request">​</a></h3>
<p>This endpoint retrieves an OCSP response (revocation status) for a given serial number. The request/response formats are
based on <a href="https://datatracker.ietf.org/doc/html/rfc6960" target="_blank" rel="noopener noreferrer">RFC 6960</a></p>
<p>Endpoints with source <code>local</code> only include cluster-local revocations.</p>
<p>At this time there are certain limitations of the OCSP implementation at this path:</p>
<ol>
<li>Only a single serial number within the request will appear in the response,</li>
<li>None of the extensions defined in the RFC are supported for requests or responses,</li>
<li>Ed25519 backed CA&#x27;s are not supported for OCSP requests,</li>
<li>Note that this API will not work with the OpenBao client as both request and responses are DER encoded, and</li>
<li>Note that KMS based issuers which require PSS support are not supported either (such as PKCS#11 HSMs or GCP in certain scenarios).</li>
</ol>
<p>These are unauthenticated endpoints.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Response Format</th><th style="text-align:left">Source</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/ocsp/&lt;base 64+URL encoded ocsp DER request&gt;</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Local</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/ocsp</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td><td style="text-align:left">Local</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-13">Parameters<a href="#parameters-13" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>None</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-19">Sample request<a href="#sample-request-19" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl ocsp -no_nonce -issuer issuer.pem -CAfile ca_chain.pem -cert cert-to-revoke.pem -text -url $OPENBAO_ADDR/v1/pki/ocsp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-certificates">List certificates<a href="#list-certificates" class="hash-link" aria-label="Direct link to List certificates" title="Direct link to List certificates">​</a></h3>
<p>This endpoint returns a list of the current certificates by serial number only.
The response does not include the <a href="#read-certificate-serial-param-values">special serial numbers</a>
(<code>ca</code>, <code>ca_chain</code>, and <code>crl</code>) that can be used with <code>/pki/cert/:serial</code>.</p>
<p>This includes only certificates issued by this mount with <code>no_store=false</code>.
While root generation does create entries here, importing certificates
(including both roots and intermediates) will not cause the imported
certificate&#x27;s serial number to appear in this list.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: The endpoint to list all certificates is authenticated. This is to
prevent automated enumeration of issued certificates for internal services;
however, this information should generally be considered non-sensitive and
the certificates themselves are exposed without authentication (provided
their serial number is known).<br><br>
Many Public CAs participate in the Certificate Transparency initiative,
where all issued certificates are publicly disclosed in the interest
of third-party verification of CA integrity.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/pki/certs</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-20">Sample request<a href="#sample-request-20" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/certs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-19">Sample response<a href="#sample-response-19" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;17:67:16:b0:b9:45:58:c0:3a:29:e3:cb:d6:98:33:7a:a6:3b:66:c1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;26:0f:76:93:73:cb:3f:a0:7a:ff:97:85:42:48:3a:aa:e5:96:03:21&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="read-raw-certificate"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-certificate">Read certificate<a href="#read-certificate" class="hash-link" aria-label="Direct link to Read certificate" title="Direct link to Read certificate">​</a></h3>
<p>This endpoint retrieves the certificate specified by its serial number,
including issued certificates.</p>
<p>These are unauthenticated endpoints.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Format</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/:serial</code></td><td style="text-align:left">JSON</td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/:serial/raw</code></td><td style="text-align:left">DER <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/cert/:serial/raw/pem</code></td><td style="text-align:left">PEM <a href="#openbao-cli-with-der-pem-responses" title="OpenBao CLI With DER/PEM Responses">[1]</a></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-14">Parameters<a href="#parameters-14" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>serial</code> <code>(string: &lt;required&gt;)</code> - Specifies the serial of the key to read.
This is part of the request URL. Valid values for <code>serial</code> are:</li>
</ul>
<a name="read-certificate-serial-param-values"></a>
<ul>
<li><code>&lt;serial&gt;</code> for the certificate with the given serial number, in hyphen-separated or colon-separated hexadecimal.</li>
<li><code>ca</code> for the <em>default</em> issuer&#x27;s CA certificate</li>
<li><code>crl</code> for the <em>default</em> issuer&#x27;s CRL</li>
<li><code>ca_chain</code> for the <em>default</em> issuer&#x27;s CA trust chain.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: These endpoints return the full chain
(including this certificate and all parent issuers known to OpenBao) in
the <code>ca_chain</code> response, for both the <code>certificate</code> and newer <code>ca_chain</code>
fields.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-21">Sample request<a href="#sample-request-21" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/cert/67:b4:f7:2c:aa:ef:b9:30:f6:ae:f5:12:21:79:ac:08:8a:86:89:72</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-20">Sample response<a href="#sample-response-20" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIGmDCCBYCgAwIBAgIHBzEB3fTzhTANBgkqhkiG9w0BAQsFADCBjDELMAkGA1UE\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time&quot;: 1667400107,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time_rfc3339&quot;: &quot;2022-11-02T14:41:47.327515Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_id&quot;: &quot;e27bf456-51e1-d937-0001-4a609184fd9b&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-keys-and-issuers">Managing keys and issuers<a href="#managing-keys-and-issuers" class="hash-link" aria-label="Direct link to Managing keys and issuers" title="Direct link to Managing keys and issuers">​</a></h2>
<p>The following endpoints are highly privileged and allow operators to generate
or import new issuer certificates and keys, remove existing keys and issuers,
or read internal information about keys and issuers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-issuers-1">List issuers<a href="#list-issuers-1" class="hash-link" aria-label="Direct link to List issuers" title="Direct link to List issuers">​</a></h3>
<p>Refer to the <a href="#list-issuers">earlier section</a> for more information about
listing issuers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-keys">List keys<a href="#list-keys" class="hash-link" aria-label="Direct link to List keys" title="Direct link to List keys">​</a></h3>
<p>This endpoint returns a list of keys currently provisioned in this mount.
The response includes both the key&#x27;s identifier as well as the name chosen
by the operators; either can be used to refer to the key later.</p>
<p>This endpoint is authenticated.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>LIST</code></td><td style="text-align:left"><code>/pki/keys</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-22">Sample request<a href="#sample-request-22" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request LIST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-21">Sample response<a href="#sample-response-21" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;f9244f54-adc7-4a5c-6b08-6ca3a3325620&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;key_name&quot;: &quot;imported-root-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;keys&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;f9244f54-adc7-4a5c-6b08-6ca3a3325620&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-key">Generate key<a href="#generate-key" class="hash-link" aria-label="Direct link to Generate key" title="Direct link to Generate key">​</a></h3>
<p>This endpoint generates a new private key for use in the PKI mount. This key
can be used with either the <a href="#generate-root">root</a> or <a href="#generate-intermediate-csr">intermediate</a>
endpoints, using the <code>type=existing</code> variant.</p>
<p>If the path ends with <code>exported</code>, the private key will be returned in the
response; if it is <code>internal</code> the private key will not be returned and <em>cannot
be retrieved later</em>.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/keys/generate/:type</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-15">Parameters<a href="#parameters-15" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>type</code> <code>(string: &lt;required&gt;)</code> - Specifies the type of the key to
create. If <code>exported</code>, the private key will be returned in the response; if
<code>internal</code> the private key will not be returned and <em>cannot be retrieved
later</em>.</p>
</li>
<li>
<p><code>key_name</code> <code>(string: &quot;&quot;)</code> - When a new key is created with this request,
optionally specifies the name for this. The global ref <code>default</code> may not
be used as a name.</p>
</li>
<li>
<p><code>key_type</code> <code>(string: &quot;rsa&quot;)</code> - Specifies the desired key type; must be <code>rsa</code>, <code>ed25519</code>
or <code>ec</code>.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: In FIPS 140-2 mode, the following algorithms are not certified
and thus should not be used: <code>ed25519</code>.</p></div></div>
<ul>
<li><code>key_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use for the
generated keys. Allowed values are 0 (universal default); with
<code>key_type=rsa</code>, allowed values are: 2048 (default), 3072, or
4096; with <code>key_type=ec</code>, allowed values are: 224, 256 (default),
384, or 521; ignored with <code>key_type=ed25519</code>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-8">Sample payload<a href="#sample-payload-8" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_type&quot;: &quot;ec&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_bits&quot;: &quot;256&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_name&quot;: &quot;root-key-2022&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-23">Sample request<a href="#sample-request-23" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/keys/generate/internal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-22">Sample response<a href="#sample-response-22" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;request_id&quot;: &quot;8ad22b2f-7d14-f2cd-a10a-d1abc33676ab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;adda2443-a8aa-d181-9d07-07c7be6a76ab&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_name&quot;: &quot;root-key-2022&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;ec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;warnings&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-root">Generate root<a href="#generate-root" class="hash-link" aria-label="Direct link to Generate root" title="Direct link to Generate root">​</a></h3>
<p>This endpoint generates a new self-signed CA certificate and private key. If
the path ends with <code>exported</code>, the private key will be returned in the
response; if it is <code>internal</code> the private key will not be returned and <em>cannot
be retrieved later</em>; if it is <code>existing</code>, the key specified by <code>key_ref</code> will
be reused for this root.</p>
<p>This generated root will sign its own CRL. Authority Access distribution points
use the values set via <code>config/urls</code>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: The PKI Secrets Engine supports multiple issuers under a single
mount. Use the management operations in this section to <a href="#list-issuers">list</a>
and <a href="#update-issuer">modify issuers</a> within this mount. No issuers will be
overridden by calling this operation. Deleting individual keys and issuers
should be preferred to calling <code>DELETE /pki/root</code>, <a href="#delete-all-issuers-and-keys">which deletes
everything</a>.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/root/generate/:type</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuers/generate/root/:type</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/root/rotate/:type</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-16">Parameters<a href="#parameters-16" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>type</code> <code>(string: &lt;required&gt;)</code> - Specifies the type of the root to
create. If <code>exported</code>, the private key will be returned in the response; if
<code>internal</code> the private key will not be returned and <em>cannot be retrieved
later</em>; if <code>existing</code>, we use the value of the <code>key_ref</code> parameter to find
existing key material to create the CSR. This parameter is part of the request
URL.</p>
</li>
<li>
<p><code>issuer_name</code> <code>(string: &quot;&quot;)</code> - Provides a name to the specified issuer. The
name must be unique across all issuers and not be the reserved value
<code>default</code>. When no value is supplied and the path is <code>/pki/root/rotate/:type</code>,
the default value of <code>&quot;next&quot;</code> will be used.</p>
</li>
<li>
<p><code>key_name</code> <code>(string: &quot;&quot;)</code> - When a new key is created with this request,
optionally specifies the name for this. The global ref <code>default</code> may not
be used as a name.</p>
</li>
<li>
<p><code>key_ref</code> <code>(string: &quot;default&quot;)</code> - Specifies the key (either <code>default</code>, by
name, or by identifier) to use for generating this request. Only suitable
for <code>type=existing</code> requests.</p>
</li>
<li>
<p><code>common_name</code> <code>(string: &lt;required&gt;)</code> - Specifies the requested CN for the
certificate. If more than one <code>common_name</code> is desired, specify the
alternative names in the <code>alt_names</code> list.</p>
</li>
<li>
<p><code>alt_names</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Subject Alternative
Names, in a comma-delimited list. These can be host names or email addresses;
they will be parsed into their respective fields.</p>
</li>
<li>
<p><code>ip_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested IP Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>uri_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested URI Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>other_sans</code> <code>(string: &quot;&quot;)</code> - Specifies custom OID/UTF8-string SANs. These
must match values specified on the role in <code>allowed_other_sans</code> (see role
creation for allowed_other_sans globbing rules).
The format is the same as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code> where the
only current valid type is <code>UTF8</code>. This can be a comma-delimited list or a
JSON string slice.</p>
</li>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Time To Live (after which the
certificate will be expired). This cannot be larger than the engine&#x27;s max (or,
if not set, the system max). See <code>not_after</code> as an alternative for setting an
absolute end date (rather than a relative one).</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. Can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>. If <code>der</code>, the output is base64 encoded. If
<code>pem_bundle</code>, the <code>certificate</code> field will contain the private key (if
exported) and certificate, concatenated; if the issuing CA is not a
OpenBao-derived self-signed root, this will be included as well.</p>
</li>
<li>
<p><code>private_key_format</code> <code>(string: &quot;der&quot;)</code> - Specifies the format for marshaling
the private key within the private_key response field. Defaults to <code>der</code> which will
return either base64-encoded DER or PEM-encoded DER, depending on the value of
<code>format</code>. The other option is <code>pkcs8</code> which will return the key marshalled as
PEM-encoded PKCS8.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> that this does not apply to the private key within the certificate
field if <code>format=pem_bundle</code> parameter is specified.</p></div></div>
<ul>
<li><code>key_type</code> <code>(string: &quot;rsa&quot;)</code> - Specifies the desired key type; must be <code>rsa</code>, <code>ed25519</code>
or <code>ec</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: In FIPS 140-2 mode, the following algorithms are not certified
and thus should not be used: <code>ed25519</code>.</p></div></div>
<ul>
<li>
<p><code>key_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use for the
generated keys. Allowed values are 0 (universal default); with
<code>key_type=rsa</code>, allowed values are: 2048 (default), 3072, or
4096; with <code>key_type=ec</code>, allowed values are: 224, 256 (default),
384, or 521; ignored with <code>key_type=ed25519</code>.</p>
</li>
<li>
<p><code>max_path_length</code> <code>(int: -1)</code> - Specifies the maximum path length to encode in
the generated certificate. <code>-1</code> means no limit. Unless the signing certificate
has a maximum path length set, in which case the path length is set to one
less than that of the signing certificate. A limit of <code>0</code> means a literal
path length of zero.</p>
</li>
<li>
<p><code>exclude_cn_from_sans</code> <code>(bool: false)</code> - If true, the given <code>common_name</code> will
not be included in DNS or Email Subject Alternate Names (as appropriate).
Useful if the CN is not a hostname or email address, but is instead some
human-readable identifier.</p>
</li>
<li>
<p><code>permitted_dns_domains</code> <code>(string: &quot;&quot;)</code> - A comma separated string (or, string
array) containing DNS domains for which certificates are allowed to be issued
or signed by this CA certificate. Note that subdomains are allowed, as per
<a href="https://tools.ietf.org/html/rfc5280#section-4.2.1.10" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.10 - Name
Constraints</a>.</p>
</li>
<li>
<p><code>ou</code> <code>(string: &quot;&quot;)</code> - Specifies the OU (OrganizationalUnit) values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>organization</code> <code>(string: &quot;&quot;)</code> - Specifies the O (Organization) values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>country</code> <code>(string: &quot;&quot;)</code> - Specifies the C (Country) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>locality</code> <code>(string: &quot;&quot;)</code> - Specifies the L (Locality) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>province</code> <code>(string: &quot;&quot;)</code> - Specifies the ST (Province) values in the subject
field of the resulting certificate. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>street_address</code> <code>(string: &quot;&quot;)</code> - Specifies the Street Address values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>postal_code</code> <code>(string: &quot;&quot;)</code> - Specifies the Postal Code values in the
subject field of the resulting certificate. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>serial_number</code> <code>(string: &quot;&quot;)</code> -  - Specifies the default Subject&#x27;s named
<a href="https://datatracker.ietf.org/doc/html/rfc4519#section-2.31" target="_blank" rel="noopener noreferrer">Serial Number</a>
value, if any. If you want more than one, specify alternative names in the
<code>alt_names</code> map using OID 2.5.4.5. Note that this has no impact on the
Certificate&#x27;s serial number field, which OpenBao randomly generates.</p>
</li>
<li>
<p><code>not_before_duration</code> <code>(duration: &quot;30s&quot;)</code> - Specifies the duration by which to
backdate the NotBefore property. This value has no impact in the validity period
of the requested certificate, specified in the <code>ttl</code> field.
Uses <a href="/openbao/docs/concepts/duration-format/">duration format strings</a>.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>key_usage</code> <code>(list: [&quot;KeyAgreement&quot;, &quot;KeyEncipherment&quot;])</code> -
Specifies the default key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#KeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#KeyUsage</a> - simply
drop the <code>KeyUsage</code> part of the value. Values are not case-sensitive.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>KeyUsage</code> extension is missing
from the CSR.</p></div></div>
<ul>
<li><code>ext_key_usage</code> <code>(list: [])</code> -
Specifies the default extended key usage constraint on the issued certificate. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#ExtKeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#ExtKeyUsage</a> - simply
drop the <code>ExtKeyUsage</code> part of the value. Values are not case-sensitive. To
specify no key default usage constraints, set this to an empty list.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: previous versions of this document incorrectly called this a constraint;
this value is only used as a default when the <code>ExtendedKeyUsage</code> extension is
missing from the CSR.</p></div></div>
<ul>
<li><code>ext_key_usage_oids</code> <code>(string: &quot;&quot;)</code> - A comma-separated string or list of extended key usage oids.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This value is only used as a default when the <code>ExtendedKeyUsage</code>
extension is missing from the CSR.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Keys of type <code>rsa</code> currently only support PKCS#1 v1.5 signatures.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-9">Sample payload<a href="#sample-payload-9" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;common_name&quot;: &quot;example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-24">Sample request<a href="#sample-request-24" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/root/generate/internal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-23">Sample response<a href="#sample-response-23" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expiration&quot;: &quot;1654105687&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_ca&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_id&quot;: &quot;7b493f17-6c08-ff73-cf1a-99bfcc448a73&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_name&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;22b82e37-529d-7251-7d78-3862bfd069ac&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_name&quot;: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="generate-intermediate"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-intermediate-csr">Generate intermediate CSR<a href="#generate-intermediate-csr" class="hash-link" aria-label="Direct link to Generate intermediate CSR" title="Direct link to Generate intermediate CSR">​</a></h3>
<p>This endpoint returns a new CSR for signing, optionally generating a new private
key. If using OpenBao as a root (and, like many other CAs), the various parameters
on the final signed certificate are set at signing time and <em>may or may not honor
the parameters set here</em> (and transmitted in the returned CSR).</p>
<p>The parameters below are mostly meant as a helper function; not all possible
parameters that can be set in a CSR are supported in this request.</p>
<p>No new issuer is yet created by this call; note that a new key may be
generated depending on the <code>type</code> request parameter.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: In order to complete the intermediate generation, the CSR must be
signed and the resulting certificate imported. This may involve working with
external systems (such as an external or offline root CA) to transmit the
CSR and complete the signing before the signed intermediate certificate is
<a href="#import-ca-certificate-and-keys">imported</a> into this mount.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Private key source (<code>type</code>)</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/intermediate/generate/:type</code></td><td style="text-align:left">specified per request</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuers/generate/intermediate/:type</code></td><td style="text-align:left">specified per request</td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/intermediate/cross-sign</code></td><td style="text-align:left"><code>existing</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-17">Parameters<a href="#parameters-17" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>type</code> <code>(string: &lt;required&gt;)</code> - Specifies the type of the intermediate to
create. If <code>exported</code>, the private key will be returned in the response; if
<code>internal</code> the private key will not be returned and <em>cannot be retrieved
later</em>; if <code>existing</code>, we expect the <code>key_ref</code> parameter to use existing
key material to create the CSR. This parameter is part of the request URL.</p>
</li>
<li>
<p><code>common_name</code> <code>(string: &lt;required&gt;)</code> - Specifies the requested CN for the
certificate. If more than one <code>common_name</code> is desired, specify the
alternative names in the <code>alt_names</code> list.</p>
</li>
<li>
<p><code>alt_names</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Subject Alternative
Names, in a comma-delimited list. These can be host names or email addresses;
they will be parsed into their respective fields.</p>
</li>
<li>
<p><code>ip_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested IP Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>uri_sans</code> <code>(string: &quot;&quot;)</code> - Specifies the requested URI Subject Alternative
Names, in a comma-delimited list.</p>
</li>
<li>
<p><code>other_sans</code> <code>(string: &quot;&quot;)</code> - Specifies custom OID/UTF8-string SANs. These
must match values specified on the role in <code>allowed_other_sans</code> (see role
creation for allowed_other_sans globbing rules).
The format is the same as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code> where the
only current valid type is <code>UTF8</code>. This can be a comma-delimited list or a
JSON string slice.</p>
</li>
<li>
<p><code>format</code> <code>(string: &quot;pem&quot;)</code> - Specifies the format for returned data. This can be
<code>pem</code>, <code>der</code>, or <code>pem_bundle</code>; defaults to <code>pem</code>. If <code>der</code>, the output is
base64 encoded. If <code>pem_bundle</code>, the <code>csr</code> field will contain the private key
(if exported) and CSR, concatenated.</p>
</li>
<li>
<p><code>private_key_format</code> <code>(string: &quot;der&quot;)</code> - Specifies the format for marshaling
the private key within the private_key response field. Defaults to <code>der</code> which will
return either base64-encoded DER or PEM-encoded DER, depending on the value of
<code>format</code>. The other option is <code>pkcs8</code> which will return the key marshalled as
PEM-encoded PKCS8.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> that this does not apply to the private key within the certificate
field if <code>format=pem_bundle</code> parameter is specified.</p></div></div>
<ul>
<li><code>key_type</code> <code>(string: &quot;rsa&quot;)</code> - Specifies the desired key type; must be <code>rsa</code>, <code>ed25519</code>
or <code>ec</code>. Not suitable for <code>type=existing</code> requests.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: In FIPS 140-2 mode, the following algorithms are not certified
and thus should not be used: <code>ed25519</code>.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: Keys of type <code>rsa</code> currently only support PKCS#1 v1.5 signatures.</p></div></div>
<ul>
<li>
<p><code>key_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use for the
generated keys. Allowed values are 0 (universal default); with
<code>key_type=rsa</code>, allowed values are: 2048 (default), 3072, or
4096; with <code>key_type=ec</code>, allowed values are: 224, 256 (default),
384, or 521; ignored with <code>key_type=ed25519</code>. Not suitable for
<code>type=existing</code> requests.</p>
</li>
<li>
<p><code>key_name</code> <code>(string: &quot;&quot;)</code> - When a new key is created with this request,
optionally specifies the name for this. The global ref <code>default</code> may not
be used as a name.</p>
</li>
<li>
<p><code>key_ref</code> <code>(string: &quot;default&quot;)</code> - Specifies the key (either <code>default</code>, by
name, or by identifier) to use for generating this request. Only suitable
for <code>type=existing</code> requests.</p>
</li>
<li>
<p><code>signature_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use in
the signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,
and 512 for SHA-2-512. Defaults to 0 to automatically detect based
on issuer&#x27;s key length (SHA-2-256 for RSA keys, and matching the curve size
for NIST P-Curves).</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: ECDSA and Ed25519 issuers do not follow configuration of the
<code>signature_bits</code> value; only RSA issuers will change signature types
based on this parameter.</p></div></div>
<ul>
<li>
<p><code>exclude_cn_from_sans</code> <code>(bool: false)</code> - If true, the given <code>common_name</code> will
not be included in DNS or Email Subject Alternate Names (as appropriate).
Useful if the CN is not a hostname or email address, but is instead some
human-readable identifier.</p>
</li>
<li>
<p><code>ou</code> <code>(string: &quot;&quot;)</code> - Specifies the OU (OrganizationalUnit) values in the
subject field of the resulting CSR. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>organization</code> <code>(string: &quot;&quot;)</code> - Specifies the O (Organization) values in the
subject field of the resulting CSR. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>country</code> <code>(string: &quot;&quot;)</code> - Specifies the C (Country) values in the subject
field of the resulting CSR. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>locality</code> <code>(string: &quot;&quot;)</code> - Specifies the L (Locality) values in the subject
field of the resulting CSR. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>province</code> <code>(string: &quot;&quot;)</code> - Specifies the ST (Province) values in the subject
field of the resulting CSR. This is a comma-separated string or JSON
array.</p>
</li>
<li>
<p><code>street_address</code> <code>(string: &quot;&quot;)</code> - Specifies the Street Address values in the
subject field of the resulting CSR. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>postal_code</code> <code>(string: &quot;&quot;)</code> - Specifies the Postal Code values in the
subject field of the resulting CSR. This is a comma-separated string
or JSON array.</p>
</li>
<li>
<p><code>serial_number</code> <code>(string: &quot;&quot;)</code> - Specifies the requested Subject&#x27;s named
<a href="https://datatracker.ietf.org/doc/html/rfc4519#section-2.31" target="_blank" rel="noopener noreferrer">Serial Number</a>
value, if any. If you want more than one, specify alternative names in the
<code>alt_names</code> map using OID 2.5.4.5. Note that this has no impact on the
Certificate&#x27;s serial number field, which OpenBao randomly generates.</p>
</li>
<li>
<p><code>add_basic_constraints</code> <code>(bool: false)</code> - Whether to add a Basic Constraints
extension with CA: true. Only needed as a workaround in some compatibility
scenarios with Active Directory Certificate Services.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-10">Sample payload<a href="#sample-payload-10" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;common_name&quot;: &quot;www.example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-25">Sample request<a href="#sample-request-25" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/intermediate/generate/exported</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;csr&quot;: &quot;-----BEGIN CERTIFICATE REQUEST-----\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\n...\numkqeYeO30g1uYvDuWLXVA==\n-----END CERTIFICATE REQUEST-----\n&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;private_key&quot;: &quot;-----BEGIN RSA PRIVATE KEY-----\\nMIIEpAIBAAKCAQEAwsANtGz9gS3o5SwTSlOG1l-----END RSA PRIVATE KEY-----&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;private_key_type&quot;: &quot;rsa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;warnings&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="submit-ca-information"></a>
<a name="set-signed-intermediate"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-ca-certificates-and-keys">Import CA certificates and keys<a href="#import-ca-certificates-and-keys" class="hash-link" aria-label="Direct link to Import CA certificates and keys" title="Direct link to Import CA certificates and keys">​</a></h3>
<p>This endpoint allows submitting (importing) the CA information for the backend
via a PEM file containing the CA certificate and any private keys, concatenated
together, in any order.</p>
<p>Each certificate will be validated to ensure it is a valid CA (has an asserted
isCA basic constraint); non-CA certs will err. Any provided CRLs will be
ignored. Each unique certificate and private key will be imported as its own
issuer or key entry; duplicates (including with existing keys) will be ignored.</p>
<p>The response will indicate what issuers and keys were created as part of this
request (in the <code>imported_issuers</code> and <code>imported_keys</code>), along with a <code>mapping</code>
field, indicating which keys belong to which issuers (including from already
imported entries present in the same bundle). The response also contains an
<code>existing_issuers</code> and <code>existing_keys</code> fields, which specifies the issuer and
key IDs of any entries in the bundle that already existed within this mount.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th><th style="text-align:left">Allows private keys</th><th style="text-align:left">Request Parameter</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/ca</code></td><td style="text-align:left">yes</td><td style="text-align:left"><code>pem_bundle</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuers/import/bundle</code></td><td style="text-align:left">yes</td><td style="text-align:left"><code>pem_bundle</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuers/import/cert</code></td><td style="text-align:left">no</td><td style="text-align:left"><code>pem_bundle</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/intermediate/set-signed</code></td><td style="text-align:left">no</td><td style="text-align:left"><code>certificate</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: endpoints which allow importing private keys <em>should</em> be considered
highly privileged and restricted appropriately. Endpoints which allow
importing issuers should also be restricted, but note that issuers without
keys are unable to issue certificates or CRLs.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: OpenBao will deduplicate differently-encoded but same-valued keys and
issuers. This means the returned certificate <em>may</em> differ in encoding from
the one provided on subsequent re-imports of the same issuer or key.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This import may fail due to CRL rebuilding issues or other potential
issues; this may impact long-term use of these issuers, but some issuers or
keys may still be imported as a result of this process.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Warning: See the <a href="/openbao/docs/secrets/pki/considerations/#issuer-subjects-and-crls">note</a>
regarding Subject naming on externally created CA certificates and
shortcomings with CRL building.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-18">Parameters<a href="#parameters-18" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>pem_bundle</code> <code>(string: &lt;required&gt;)</code> - Specifies the unencrypted private key
and certificate, concatenated in PEM format.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: this parameter is on the <code>/pki/config/ca</code> and <code>/pki/issuers/import/*</code>
paths; it is not on the <code>/pki/intermediate/set-signed</code> path.</p></div></div>
<ul>
<li><code>certificate</code> <code>(string: &lt;required&gt;)</code> - Specifies the certificates to import,
concatenated in PEM format.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: this parameter is <strong>only</strong> on the <code>/pki/intermediate/set-signed</code> path.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-26">Sample request<a href="#sample-request-26" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &quot;@payload.json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/ca</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that if you provide the data through the HTTP API, it must be
JSON-formatted, with newlines replaced with <code>\n</code>, like so:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;pem_bundle&quot;: &quot;-----BEGIN RSA PRIVATE KEY-----\n...\n-----END CERTIFICATE-----&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-24">Sample response<a href="#sample-response-24" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;imported_issuers&quot;: [&quot;1ae8ce9d-2f70-0761-a465-8c9840a247a2&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;imported_keys&quot;: [&quot;97be2525-717a-e2f7-88da-0a20e11aad88&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;mapping&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1ae8ce9d-2f70-0761-a465-8c9840a247a2&quot;: &quot;97be2525-717a-e2f7-88da-0a20e11aad88&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;existing_issuers&quot;: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;existing_keys&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-issuer">Read issuer<a href="#read-issuer" class="hash-link" aria-label="Direct link to Read issuer" title="Direct link to Read issuer">​</a></h3>
<p>This endpoint allows an operator to fetch a single issuer certificate and its
chain, including internal information not exposed on the <a href="#read-issuer-certificate">unauthenticated
<code>/pki/issuer/:issuer_ref/json</code></a> endpoint. This
includes information about the name, the key material, if an explicitly
constructed chain has been set, what the behavior is for signing longer TTL&#x27;d
certificates, and what usage modes are set on this issuer.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-19">Parameters<a href="#parameters-19" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-27">Sample request<a href="#sample-request-27" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-25">Sample response<a href="#sample-response-25" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_id&quot;: &quot;7545992c-1910-0898-9e64-d575549fbe9c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_name&quot;: &quot;root-x1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;leaf_not_after_behavior&quot;: &quot;truncate&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manual_chain&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;usage&quot;: &quot;read-only,issuing-certificates,crl-signing,ocsp-signing&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-issuer">Update issuer<a href="#update-issuer" class="hash-link" aria-label="Direct link to Update issuer" title="Direct link to Update issuer">​</a></h3>
<p>This endpoint allows an operator to manage a single issuer, updating various
properties about it, including its name, an explicitly constructed chain,
what the behavior is for signing longer TTL&#x27;d certificates, and what usage
modes are set on this issuer.</p>
<p>Note that it is not possible to change the certificate of this issuer; to
do so, import a new issuer and a new <code>issuer_id</code> will be assigned.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref</code></td></tr><tr><td style="text-align:left"><code>PATCH</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> <code>POST</code>ing to this endpoint causes OpenBao to overwrite the previous
contents of the issuer, using the provided request data (and any defaults
for elided parameters). It does not update only the provided fields.<br><br>
OpenBao supports the PATCH operation to this endpoint, using the <a href="https://datatracker.ietf.org/doc/html/rfc6902" target="_blank" rel="noopener noreferrer">JSON patch
format</a> supported by KVv2,
allowing update of specific fields. Note that <code>bao write</code> uses <code>POST</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-20">Parameters<a href="#parameters-20" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</p>
</li>
<li>
<p><code>issuer_name</code> <code>(string: &quot;&quot;)</code> - Provides a name to the specified issuer. The
name must be unique across all issuers and not be the reserved value
<code>default</code>.</p>
</li>
<li>
<p><code>leaf_not_after_behavior</code> <code>(string: &quot;err&quot;)</code> - Behavior of a leaf&#x27;s
<code>NotAfter</code> field during issuance. Valid options are:</p>
<ul>
<li><code>err</code>, to error if the computed <code>NotAfter</code> exceeds that of this issuer;</li>
<li><code>truncate</code> to silently truncate the requested <code>NotAfter</code> value to that
of this issuer; or</li>
<li><code>permit</code> to allow this issuance to succeed with a <code>NotAfter</code> value
exceeding that of this issuer.</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Not all values result in leaf certificates that can be validated
through the entire validity period. It is suggested to use <code>truncate</code> for
intermediate CAs and <code>permit</code> only for root CAs. This is because
(root) certificates in browsers&#x27; trust stores typically aren&#x27;t checked
for validity, whereas intermediate CA certificates sent in TLS connections
are checked for validity at the time of use. This means that a leaf
certificate permitted to be issued for longer than the intermediate likely
won&#x27;t continue to validate after the intermediate has expired.</p></div></div>
<ul>
<li><code>manual_chain</code> <code>([]string: nil)</code> - Chain of issuer references to build this
issuer&#x27;s computed CAChain field from, when non-empty.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: the <code>manual_chain</code> field is an advanced field useful when automatic
chain building isn&#x27;t desired. The first element <em>must</em> be the present
issuer&#x27;s reference. Subsequent references <em>should</em> validate previous
entries, terminating with a root certificate. <em>Ideally</em> a single linear
chain would come first (from this issuer to a single root certificate)
before any parallel, alternate chains appear.<br><br>
This field is especially useful for cross-signed intermediates within
OpenBao. Because each cross-signed intermediate will only know of the
one root, but issuance should serve both, update the issuers&#x27; entries
with the desired <code>manual_chain</code> value.<br><br>
The CA Chain returned by a GET to the issuer configuration is the same
chain presented during signing and (if this issuer is the default) on
the <code>/ca_chain</code> path. Setting <code>manual_chain</code> thus allows controlling
the presented chain as desired.</p></div></div>
<ul>
<li>
<p><code>usage</code> <code>([]string: read-only,issuing-certificates,crl-signing,ocsp-signing)</code> - Allowed
usages for this issuer. Valid options are:</p>
<ul>
<li><code>read-only</code>, to allow this issuer to be read; implict; always allowed;</li>
<li><code>issuing-certificates</code>, to allow this issuer to be used for issuing other
certificates; or</li>
<li><code>crl-signing</code>, to allow this issuer to be used for signing CRLs. This is
separate from the CRLSign KeyUsage on the x509 certificate, but this usage
cannot be set unless that KeyUsage is allowed on the x509 certificate.</li>
<li><code>ocsp-signing</code>, to allow this issuer to be used for signing OCSP responses</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: The <code>usage</code> field allows for a soft-delete capability on the issuer,
or to prevent use of the issuer prior to it being enabled. For example,
as issuance is rotated to a new issuer, the old issuer could be marked
<code>usage=read-only,crl-signing,ocsp-signing</code>, allowing existing certificates to be revoked
(and the CRL updated), but preventing new certificate issuance. After all
certificates issued under this certificate have expired, this certificate
could be marked <code>usage=read-only</code>, freezing the CRL. Finally, after a grace
period, the issuer could be deleted.</p></div></div>
<ul>
<li><code>revocation_signature_algorithm</code> <code>(string: &quot;&quot;)</code> - Which signature algorithm
to use when building CRLs. See Go&#x27;s <a href="https://pkg.go.dev/crypto/x509#SignatureAlgorithm" target="_blank" rel="noopener noreferrer"><code>x509.SignatureAlgorithm</code></a>
constant for possible values. This flag allows control over hash function
and signature scheme (PKCS#1v1.5 vs PSS). The default (empty string) value
is for Go to select the signature algorithm automatically, which may not
always work.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This can fail if the underlying key does not support the requested
signature algorithm; this may not always be known at modification time.</p></div></div>
<ul>
<li>
<p><code>issuing_certificates</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values for
the Issuing Certificate field. This can be an array or a comma-separated
string list. See also <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.2.1</a>
for information about the Authority Information Access field.</p>
</li>
<li>
<p><code>crl_distribution_points</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values
for the CRL Distribution Points field. This can be an array or a
comma-separated string list. See also <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.13" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.13</a>
for information about the CRL Distribution Points field.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: When multiple issuers are in use under a single mount, each issuer will
have its own CRL distribution point. These separate CRLs should either be
aggregated into a single CRL (externally; as OpenBao does not support this
functionality) or multiple <code>crl_distribution_points</code> should be specified
here, pointing to each cluster and issuer.</p></div></div>
<ul>
<li>
<p><code>ocsp_servers</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values for the OCSP
Servers field. This can be an array or a comma-separated string list. See also
<a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.2.1</a>
for information about the Authority Information Access field.</p>
</li>
<li>
<p><code>enable_aia_url_templating</code> <code>(bool: false)</code> - Specifies that the above AIA
URL values (<code>issuing_certificates</code>, <code>crl_distribution_points</code>, and
<code>ocsp_servers</code>) should be templated. This replaces the literal value
<code>{{issuer_id}}</code> with the ID of the issuer doing the issuance, the
literal value <code>{{cluster_path}}</code> with the value of <code>path</code> from the
cluster-local configuration endpoint <code>/config/cluster</code>, and the
literal value <code>{{cluster_aia_path}}</code> with the value of <code>aia_path</code> from
the cluster-local configuration endpoint <code>/config/cluster</code>.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: If no cluster-local address is present and templating is used,
issuance will fail.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-11">Sample payload<a href="#sample-payload-11" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;issuer_name&quot;: &quot;root-x1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-28">Sample request<a href="#sample-request-28" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-26">Sample response<a href="#sample-response-26" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_id&quot;: &quot;7545992c-1910-0898-9e64-d575549fbe9c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_name&quot;: &quot;root-x1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;leaf_not_after_behavior&quot;: &quot;truncate&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manual_chain&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;usage&quot;: &quot;read-only,issuing-certificates,crl-signing,ocsp-signing&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_signature_algorithm&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_certificates&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;crl_distribution_points&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ocsp_servers&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="revoke-issuer">Revoke issuer<a href="#revoke-issuer" class="hash-link" aria-label="Direct link to Revoke issuer" title="Direct link to Revoke issuer">​</a></h3>
<p>This endpoint allows an operator to revoke an issuer certificate, marking it
unable to issue new certificates and adding it to other issuers&#x27; CRLs, if they
have signed this issuer&#x27;s certificate. This will cause all CRLs to be rebuilt.</p>
<p>This is mostly provided for book-keeping and as a soft-delete feature, to
ensure this issuer is not accidentally reused in the future.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Warning</strong>: This operation cannot be undone!</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This operation <strong>does not</strong> have any impact on other clusters or
mounts and <strong>may not</strong> have any impact on whether clients consider these
issuers revoked. Revoked issuers will not appear on their own CRLs. Revoked
issuers may not appear on other CRLs if a suitable parent is not present in
the same mount point. Revoked issuers will still need to be revoked in any
other mounts they appear in, both as issuers, in the event of issuer reuse,
and as issued certificates, in the event of an external parent mount.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/revoke</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-21">Parameters<a href="#parameters-21" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<p>No parameters.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-29">Sample request<a href="#sample-request-29" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/old-intermediate/revoke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-27">Sample response<a href="#sample-response-27" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ca_chain&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;-----BEGIN CERTIFICATE-----\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\n...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;certificate&quot;: &quot;-----BEGIN CERTIFICATE-----\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\n...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_id&quot;: &quot;7545992c-1910-0898-9e64-d575549fbe9c&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_name&quot;: &quot;old-intermediate&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;leaf_not_after_behavior&quot;: &quot;truncate&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;manual_chain&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;usage&quot;: &quot;read-only,issuing-certificates,crl-signing&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_time&quot;: 1433269787,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-issuer">Delete issuer<a href="#delete-issuer" class="hash-link" aria-label="Direct link to Delete issuer" title="Direct link to Delete issuer">​</a></h3>
<p>This endpoint deletes the specified issuer. A warning is emitted and the
default is cleared if this issuer is the default issuer.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: If an issuer is incorrectly deleted, but its key material
remains, it is possible to re-import just the issuer certificate. The
<code>issuer_id</code> will change, but the name can be re-assigned to the new
issuer.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-30">Sample request<a href="#sample-request-30" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/root-x1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="import-key">Import key<a href="#import-key" class="hash-link" aria-label="Direct link to Import key" title="Direct link to Import key">​</a></h3>
<p>This endpoint allows an operator to import a single pem encoded <code>rsa</code>, <code>ec</code>, or <code>ed25519</code>
key.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This API does not protect against importing keys using insecure combinations of
algorithm and key length.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/keys/import</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-22">Parameters<a href="#parameters-22" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>pem_bundle</code> <code>(string: &lt;required&gt;)</code> - Specifies the unencrypted private key in PEM format.</p>
</li>
<li>
<p><code>key_name</code> <code>(string: &quot;&quot;)</code> - Provides a name to the specified key. The
name must be unique across all keys and not be the reserved value
<code>default</code>.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-12">Sample payload<a href="#sample-payload-12" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_name&quot;: &quot;my-imported-key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;pem_bundle&quot;: &quot;-----BEGIN RSA PRIVATE KEY-----\n...\n-----END CERTIFICATE-----&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-31">Sample request<a href="#sample-request-31" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/keys/import</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-28">Sample response<a href="#sample-response-28" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;2cf03991-b052-1dc3-393e-374b41f8dcd8&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_name&quot;: &quot;my-imported-key&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;rsa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-key">Read key<a href="#read-key" class="hash-link" aria-label="Direct link to Read key" title="Direct link to Read key">​</a></h3>
<p>This endpoint allows an operator to fetch information about an existing key.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: OpenBao does not allow reading the value of the private key after
it has been created.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/key/:key_ref</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-23">Parameters<a href="#parameters-23" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>key_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing key,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default key, or the name assigned
to a key. This parameter is part of the request URL.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-32">Sample request<a href="#sample-request-32" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/key/default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-29">Sample response<a href="#sample-response-29" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;8c4046f8-52a8-0974-29d2-745d8a0dd848&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_name&quot;: &quot;key-root-x1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;rsa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-key">Update key<a href="#update-key" class="hash-link" aria-label="Direct link to Update key" title="Direct link to Update key">​</a></h3>
<p>This endpoint allows an operator to manage a single key. Currently, the only
parameter that is configurable is the key&#x27;s name.</p>
<p>Note that it is not possible to change the private key of this key; to
do so, import a new key and a new <code>key_id</code> will be assigned.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/key/:key_ref</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> <code>POST</code>ing to this endpoint causes OpenBao to overwrite the previous
contents of the key, using the provided request data (and any defaults
for elided parameters). It does not update only the provided fields.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-24">Parameters<a href="#parameters-24" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>key_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing key,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default key, or the name assigned
to a key. This parameter is part of the request URL.</p>
</li>
<li>
<p><code>key_name</code> <code>(string: &quot;&quot;)</code> - Provides a name to the specified key. The
name must be unique across all keys and not be the reserved value
<code>default</code>.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-13">Sample payload<a href="#sample-payload-13" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_name&quot;: &quot;key-root-x1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-33">Sample request<a href="#sample-request-33" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/key/default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-30">Sample response<a href="#sample-response-30" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_id&quot;: &quot;8c4046f8-52a8-0974-29d2-745d8a0dd848&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_name&quot;: &quot;key-root-x1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;key_type&quot;: &quot;rsa&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-key">Delete key<a href="#delete-key" class="hash-link" aria-label="Direct link to Delete key" title="Direct link to Delete key">​</a></h3>
<p>This endpoint deletes the specified key. A warning is emitted and the
default is cleared if this key is the default key.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: Because OpenBao does not allow exporting the private key
after it is initially generated, deletion of keys is a sensitive
operation. Additionally, one key may be used by more than one issuer.
As a result, OpenBao prohibits deletion of keys until <strong>all</strong> issuers
using this key have also been deleted. If these issuers are still
necessary for chain building, re-import them without the corresponding
keys after the key has been deleted or use the soft-delete feature
of issuers.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/pki/key/:key_ref</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-34">Sample request<a href="#sample-request-34" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/key/key-root-x1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-all-issuers-and-keys">Delete all issuers and keys<a href="#delete-all-issuers-and-keys" class="hash-link" aria-label="Direct link to Delete all issuers and keys" title="Direct link to Delete all issuers and keys">​</a></h3>
<p>This endpoint deletes all issuers and keys within the mount. It is highly
recommended to use the individual delete operations instead. This mount
will be unusable until new issuers and keys are provisioned.</p>
<p><em>This endpoint requires sudo/root privileges.</em></p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/pki/root</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-35">Sample request<a href="#sample-request-35" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-authority-information">Managing authority information<a href="#managing-authority-information" class="hash-link" aria-label="Direct link to Managing authority information" title="Direct link to Managing authority information">​</a></h2>
<p>The following privileged endpoints allow the operator to control information
about the core contents of certificates and to perform privileged operations
like rotating the CRLs or performing tidy operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-roles-1">List roles<a href="#list-roles-1" class="hash-link" aria-label="Direct link to List roles" title="Direct link to List roles">​</a></h3>
<p>Refer to the <a href="#list-roles">earlier section</a> for more information about
listing roles.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="createupdate-role">Create/Update role<a href="#createupdate-role" class="hash-link" aria-label="Direct link to Create/Update role" title="Direct link to Create/Update role">​</a></h3>
<p>This endpoint creates or updates the role definition. Note that the
<code>allowed_domains</code>, <code>allow_subdomains</code>, <code>allow_glob_domains</code>, and
<code>allow_any_name</code> attributes are additive; between them nearly and across
multiple roles nearly any issuing policy can be accommodated. <code>server_flag</code>,
<code>client_flag</code>, and <code>code_signing_flag</code> are additive as well. If a client
requests a certificate that is not allowed by the CN policy in the role, the
request is denied.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/roles/:name</code></td></tr><tr><td style="text-align:left"><code>PATCH</code></td><td style="text-align:left"><code>/pki/roles/:name</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong> <code>POST</code>ing to this endpoint when the role already exists causes
OpenBao to overwrite the contents of the role, using the provided request
data (and any defaults for elided parameters). It does not update only
the provided fields.<br><br>
OpenBao supports the PATCH operation to this endpoint, using the <a href="https://datatracker.ietf.org/doc/html/rfc6902" target="_blank" rel="noopener noreferrer">JSON patch
format</a> supported by KVv2,
allowing update of specific fields. Note that <code>bao write</code> uses <code>POST</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-25">Parameters<a href="#parameters-25" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>name</code> <code>(string: &lt;required&gt;)</code> - Specifies the name of the role to create. This
is part of the request URL.</p>
</li>
<li>
<p><code>issuer_ref</code>: <code>(string: &quot;default&quot;)</code> - Specifies the default issuer of this
request. May be the value <code>default</code>, a name, or an issuer ID. Use ACLs to
prevent access to the <code>/pki/issuer/:issuer_ref/{issue,sign}/:name</code> paths
to prevent users overriding the role&#x27;s <code>issuer_ref</code> value.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: This parameter is stored as-is; if the reference is to a name, it
is <strong>not</strong> resolve to an identifier. Deletion of issuers (or updating their
names) <strong>may</strong> result in issuance failing or using an unexpected issuer.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: existing roles from previous OpenBao versions are migrated to use
the <code>issuer_ref=default</code>.</p></div></div>
<ul>
<li>
<p><code>ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the Time To Live value to be used for the
validity period of the requested certificate, provided as a string duration
with time suffix. Hour is the largest suffix. The value specified is strictly
used for future validity. If not set, uses the system default value or the
value of <code>max_ttl</code>, whichever is shorter. See <code>not_after</code> as an alternative
for setting an absolute end date (rather than a relative one).</p>
</li>
<li>
<p><code>max_ttl</code> <code>(string: &quot;&quot;)</code> - Specifies the maximum Time To Live provided as a
string duration with time suffix. Hour is the largest suffix. If not set,
defaults to the system maximum lease TTL.</p>
</li>
<li>
<p><code>allow_localhost</code> <code>(bool: true)</code> - Specifies if clients can request
certificates for <code>localhost</code> as one of the requested common names. This is
useful for testing and to allow clients on a single host to talk securely.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This strictly applies to <code>localhost</code> and <code>localdomain</code> when this
option is enabled. Additionally, even if this option is disabled, if either
name is included in <code>allowed_domains</code>, the match rules for that option
could permit issuance of a certificate for <code>localhost</code>.</p></div></div>
<ul>
<li><code>allowed_domains</code> <code>(list: [])</code> - Specifies the domains this role is allowed
to issue certificates for. This is used with the <code>allow_bare_domains</code>,
<code>allow_subdomains</code>, and <code>allow_glob_domains</code> options to determine the type
of matching between these domains and the values of common name, DNS-typed
SAN entries, and Email-typed SAN entries. When <code>allow_any_name</code> is used,
this attribute has no effect.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: The three options <code>allow_bare_domains</code>, <code>allow_subdomains</code>, and
<code>allow_glob_domains</code> are each independent of each other. That is, at least
one type of allowed matching must describe the relationship between the
<code>allowed_domains</code> list and the names on the issued certificate. For example,
given <code>allowed_domain=foo.*.example.com</code> and <code>allow_subdomains=true</code> and
<code>allow_glob_domains=true</code>, a request for <code>bar.foo.baz.example.com</code> won&#x27;t
be permitted, even though it <code>foo.baz.example.com</code> matches the glob
<code>foo.*.example.com</code> and <code>bar</code> is a subdomain of that.</p></div></div>
<ul>
<li>
<p><code>allowed_domains_template</code> <code>(bool: false)</code> - When set, <code>allowed_domains</code>
may contain templates, as with <a href="/openbao/docs/concepts/policies/">ACL Path Templating</a>.
Non-templated domains are also still permitted.</p>
</li>
<li>
<p><code>allow_bare_domains</code> <code>(bool: false)</code> - Specifies if clients can request
certificates matching the value of the actual domains themselves; e.g. if a
configured domain set with <code>allowed_domains</code> is <code>example.com</code>, this allows
clients to actually request a certificate containing the name <code>example.com</code> as
one of the DNS values on the final certificate. In some scenarios, this can be
considered a security risk. Note that when an <code>allowed_domain</code> field contains
a potential wildcard character (for example, <code>allowed_domains=*.example.com</code>)
and <code>allow_bare_domains</code> and <code>allow_wildcard_certificates</code> are both enabled,
issuance of a wildcard certificate for <code>*.example.com</code> will be permitted.</p>
</li>
<li>
<p><code>allow_subdomains</code> <code>(bool: false)</code> - Specifies if clients can request
certificates with CNs that are subdomains of the CNs allowed by the other role
options. <em>This includes wildcard subdomains.</em> For example, an
<code>allowed_domains</code> value of <code>example.com</code> with this option set to true will
allow <code>foo.example.com</code> and <code>bar.example.com</code> as well as <code>*.example.com</code>. To
restrict issuance of wildcards by this option, see <code>allow_wildcard_certificates</code>
below. This option is redundant when using the <code>allow_any_name</code> option.</p>
</li>
<li>
<p><code>allow_glob_domains</code> <code>(bool: false)</code> - Allows names specified in
<code>allowed_domains</code> to contain glob patterns (e.g. <code>ftp*.example.com</code>). Clients
will be allowed to request certificates with names matching the glob
patterns.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: These globs behave like shell-style globs and can match
across multiple domain parts. For example, <code>allowed_domains=*.example.com</code>
with <code>allow_glob_domains</code> enabled will match not only <code>foo.example.com</code> but
also <code>baz.bar.foo.example.com</code>.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Warning</strong>: Glob patterns will match wildcard domains and permit their
issuance unless otherwise restricted by <code>allow_wildcard_certificates</code>. For
instance, with <code>allowed_domains=*.*.example.com</code> and both <code>allow_glob_domains</code>
and <code>allow_wildcard_certificates</code> enabled, we will permit the issuance of
a wildcard certificate for <code>*.foo.example.com</code>.</p></div></div>
<ul>
<li>
<p><code>allow_wildcard_certificates</code> <code>(bool: true)</code> - Allows the issuance of
certificates with <a href="https://tools.ietf.org/html/rfc6125" target="_blank" rel="noopener noreferrer">RFC 6125</a> wildcards
in the CN field. When set to <code>false</code>, this prevents wildcards from being
issued even if they would&#x27;ve been allowed by an option above. We support
the following four wildcard types:</p>
<ul>
<li><code>*.example.com</code>, a single wildcard as the entire left-most label,</li>
<li><code>foo*.example.com</code>, a single suffixed wildcard in the left-most label,</li>
<li><code>*foo.example.com</code>, a single prefixed wildcard in the left-most label, and</li>
<li><code>f*o.example.com</code>, a single interior wildcard in the left-most label.</li>
</ul>
</li>
<li>
<p><code>allow_any_name</code> <code>(bool: false)</code> - Specifies if clients can request any CN.
Useful in some circumstances, but make sure you understand whether it is
appropriate for your installation before enabling it. Note that both
<code>enforce_hostnames</code> and <code>allow_wildcard_certificates</code> are still checked,
which may introduce limitations on issuance with this option.</p>
</li>
<li>
<p><code>enforce_hostnames</code> <code>(bool: true)</code> - Specifies if only valid host names are
allowed for CNs, DNS SANs, and the host part of email addresses.</p>
</li>
<li>
<p><code>allow_ip_sans</code> <code>(bool: true)</code> - Specifies if clients can request IP Subject
Alternative Names. No authorization checking is performed except to verify
that the given values are valid IP addresses.</p>
</li>
<li>
<p><code>allowed_uri_sans</code> <code>(string: &quot;&quot;)</code> - Defines allowed URI Subject
Alternative Names. No authorization checking is performed except to verify
that the given values are valid URIs. This can be a comma-delimited list or
a JSON string slice. Values can contain glob patterns (e.g.
<code>spiffe://hostname/*</code>).</p>
</li>
<li>
<p><code>allowed_uri_sans_template</code> <code>(bool: false)</code> - When set, <code>allowed_uri_sans</code>
may contain templates, as with <a href="/openbao/docs/concepts/policies/">ACL Path Templating</a>.
Non-templated domains are also still permitted.</p>
</li>
<li>
<p><code>allowed_other_sans</code> <code>(string: &quot;&quot;)</code> - Defines allowed custom OID/UTF8-string
SANs. This can be a comma-delimited list or a JSON string slice, where
each element has the same format as OpenSSL: <code>&lt;oid&gt;;&lt;type&gt;:&lt;value&gt;</code>, but
the only valid type is <code>UTF8</code> or <code>UTF-8</code>. The <code>value</code> part of an element
may be a <code>*</code> to allow any value with that OID.
Alternatively, specifying a single <code>*</code> will allow any <code>other_sans</code> input.</p>
</li>
<li>
<p><code>allowed_serial_numbers</code> <code>(string: &quot;&quot;)</code> - If set, an array of allowed serial
numbers to be requested during certificate issuance. These values support
shell-style globbing. When empty, custom-specified serial numbers will be
forbidden. It is strongly recommended to allow OpenBao to generate random
serial numbers instead.</p>
</li>
<li>
<p><code>server_flag</code> <code>(bool: true)</code> - Specifies if certificates are flagged for
server authentication use. See <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.12</a>
for information about the Extended Key Usage field.</p>
</li>
<li>
<p><code>client_flag</code> <code>(bool: true)</code> - Specifies if certificates are flagged for
client authentication use. See <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.12</a>
for information about the Extended Key Usage field.</p>
</li>
<li>
<p><code>code_signing_flag</code> <code>(bool: false)</code> - Specifies if certificates are flagged
for code signing use. See <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.12</a>
for information about the Extended Key Usage field.</p>
</li>
<li>
<p><code>email_protection_flag</code> <code>(bool: false)</code> - Specifies if certificates are
flagged for email protection use. See <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.12</a>
for information about the Extended Key Usage field.</p>
</li>
<li>
<p><code>key_type</code> <code>(string: &quot;rsa&quot;)</code> - Specifies the type of key to generate for
generated private keys and the type of key expected for submitted CSRs.
Currently, <code>rsa</code>, <code>ec</code>, and <code>ed25519</code> are supported, or when signing
existing CSRs, <code>any</code> can be specified to allow keys of either type
and with any bit size (subject to &gt;=2048 bits for RSA keys or &gt;= 224 for EC keys).
When <code>any</code> is used, this role cannot generate certificates and can only
be used to sign CSRs.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: In FIPS 140-2 mode, the following algorithms are not certified
and thus should not be used: <code>ed25519</code>.</p></div></div>
<ul>
<li>
<p><code>key_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use for the
generated keys. Allowed values are 0 (universal default); with
<code>key_type=rsa</code>, allowed values are: 2048 (default), 3072, or
4096; with <code>key_type=ec</code>, allowed values are: 224, 256 (default),
384, or 521; ignored with <code>key_type=ed25519</code> or in signing operations
when <code>key_type=any</code>.</p>
</li>
<li>
<p><code>signature_bits</code> <code>(int: 0)</code> - Specifies the number of bits to use in
the signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,
and 512 for SHA-2-512. Defaults to 0 to automatically detect based
on issuer&#x27;s key length (SHA-2-256 for RSA keys, and matching the curve size
for NIST P-Curves).</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: ECDSA and Ed25519 issuers do not follow configuration of the
<code>signature_bits</code> value; only RSA issuers will change signature types
based on this parameter.</p></div></div>
<ul>
<li>
<p><code>use_pss</code> <code>(bool: false)</code> - Specifies whether or not to use PSS signatures
over PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for
ECDSA/Ed25519 issuers.</p>
</li>
<li>
<p><code>key_usage</code> <code>(list: [&quot;DigitalSignature&quot;, &quot;KeyAgreement&quot;, &quot;KeyEncipherment&quot;])</code> -
Specifies the allowed key usage constraint on issued certificates. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#KeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#KeyUsage</a> - simply
drop the <code>KeyUsage</code> part of the value. Values are not case-sensitive. To
specify no key usage constraints, set this to an empty list. See
<a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.3" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.3</a>
for more information about the Key Usage field.</p>
</li>
<li>
<p><code>ext_key_usage</code> <code>(list: [])</code> -
Specifies the allowed extended key usage constraint on issued certificates. Valid
values can be found at <a href="https://golang.org/pkg/crypto/x509/#ExtKeyUsage" target="_blank" rel="noopener noreferrer">https://golang.org/pkg/crypto/x509/#ExtKeyUsage</a> - simply
drop the <code>ExtKeyUsage</code> part of the value. Values are not case-sensitive. To
specify no key usage constraints, set this to an empty list. See
<a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.12</a>
for information about the Extended Key Usage field.</p>
</li>
<li>
<p><code>ext_key_usage_oids</code> <code>(string: &quot;&quot;)</code> - A comma-separated string or list of extended
key usage oids. Useful for adding EKUs not supported by the Go standard library.</p>
</li>
<li>
<p><code>use_csr_common_name</code> <code>(bool: true)</code> - When used with the CSR signing
endpoint, the common name in the CSR will be used instead of taken from the
JSON data. This does not include any requested SANs in the CSR; use
<code>use_csr_sans</code> for that.</p>
</li>
<li>
<p><code>use_csr_sans</code> <code>(bool: true)</code> - When used with the CSR signing endpoint, the
subject alternate names in the CSR will be used instead of taken from the JSON
data. This does not include the common name in the CSR; use
<code>use_csr_common_name</code> for that.</p>
</li>
<li>
<p><code>ou</code> <code>(string: &quot;&quot;)</code> - Specifies the OU (OrganizationalUnit) values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>organization</code> <code>(string: &quot;&quot;)</code> - Specifies the O (Organization) values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>country</code> <code>(string: &quot;&quot;)</code> - Specifies the C (Country) values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>locality</code> <code>(string: &quot;&quot;)</code> - Specifies the L (Locality) values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>province</code> <code>(string: &quot;&quot;)</code> - Specifies the ST (Province) values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>street_address</code> <code>(string: &quot;&quot;)</code> - Specifies the Street Address values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>postal_code</code> <code>(string: &quot;&quot;)</code> - Specifies the Postal Code values in the
subject field of issued certificates. This is a comma-separated string or
JSON array.</p>
</li>
<li>
<p><code>generate_lease</code> <code>(bool: false)</code> - Specifies if certificates issued/signed
against this role will have OpenBao leases attached to them. Certificates can be
added to the CRL by <code>openbao revoke &lt;lease_id&gt;</code> when certificates are associated
with leases. It can also be done using the <code>pki/revoke</code> endpoint. However,
when lease generation is disabled, invoking <code>pki/revoke</code> would be the only way
to add the certificates to the CRL. When large number of certificates are
generated with long lifetimes, it is recommended that lease generation be
disabled, as large amount of leases adversely affect the startup time of OpenBao.</p>
</li>
<li>
<p><code>no_store</code> <code>(bool: false)</code> - If set, certificates issued/signed against this
role will not be stored in the storage backend. This can improve performance
when issuing large numbers of certificates. However, certificates issued in
this way cannot be enumerated or revoked via serial number. Certificates may
still be revoked via <a href="#certificate-1">BYOC revocation</a>.
This option is recommend only for certificates that are non-sensitive,
extremely short-lived, or have high volume/turn-over that would prohibit
storage. This option implies a value of <code>false</code> for <code>generate_lease</code>.</p>
</li>
<li>
<p><code>require_cn</code> <code>(bool: true)</code> - If set to false, makes the <code>common_name</code> field
optional while generating a certificate.</p>
</li>
<li>
<p><code>policy_identifiers</code> <code>(list: [])</code> - A comma-separated string or list of policy
OIDs.</p>
</li>
<li>
<p><code>basic_constraints_valid_for_non_ca</code> <code>(bool: false)</code> - Mark Basic Constraints
valid when issuing non-CA certificates.</p>
</li>
<li>
<p><code>not_before_duration</code> <code>(duration: &quot;30s&quot;)</code> - Specifies the duration by which to
backdate the NotBefore property. This value has no impact in the validity period
of the requested certificate, specified in the <code>ttl</code> field.</p>
</li>
<li>
<p><code>not_after</code> <code>(string)</code> - Set the Not After field of the certificate with
specified date value. The value format should be given in UTC format
<code>YYYY-MM-ddTHH:MM:SSZ</code>. Supports the Y10K end date for IEEE 802.1AR-2018
standard devices, <code>9999-12-31T23:59:59Z</code>.</p>
</li>
<li>
<p><code>cn_validations</code> <code>(list: [&quot;email&quot;, &quot;hostname&quot;])</code> - Validations to run on the
Common Name field of the certificate. Valid values include:</p>
<ul>
<li><code>email</code>, to ensure the Common Name is an email address (contains an <code>@</code> sign),</li>
<li><code>hostname</code>, to ensure the Common Name is a hostname (otherwise).</li>
</ul>
<p>Multiple values can be separated with a comma or specified as a list and use
OR semantics (either email or hostname in the CN are allowed). When the
special value &quot;disabled&quot; is used (must be specified alone), none of the usual
validation is run (including but not limited to <code>allowed_domains</code> and basic
correctness validation around email addresses and domain names). This allows
non-standard CNs to be used verbatim from the request.</p>
</li>
<li>
<p><code>allowed_user_ids</code> <code>(string: &quot;&quot;)</code> - Comma separated, globbing list of User ID
Subject components to allow on requests. By default, no user IDs are allowed.
Use the bare wildcard <code>*</code> value to allow any value. See also the <code>user_ids</code>
request parameter.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-14">Sample payload<a href="#sample-payload-14" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;allowed_domains&quot;: [&quot;example.com&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;allow_subdomains&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-36">Sample request<a href="#sample-request-36" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/roles/my-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-role-1">Read role<a href="#read-role-1" class="hash-link" aria-label="Direct link to Read role" title="Direct link to Read role">​</a></h3>
<p>Refer to the <a href="#read-role">earlier section</a> for more information about
reading roles.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-role">Delete role<a href="#delete-role" class="hash-link" aria-label="Direct link to Delete role" title="Direct link to Delete role">​</a></h3>
<p>This endpoint deletes the role definition. Deleting a role <strong>does not</strong>
revoke certificates previously issued under this role.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>DELETE</code></td><td style="text-align:left"><code>/pki/roles/:name</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-26">Parameters<a href="#parameters-26" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>name</code> <code>(string: &lt;required&gt;)</code> - Specifies the name of the role to delete. This
is part of the request URL.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-37">Sample request<a href="#sample-request-37" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/roles/my-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-urls">Read URLs<a href="#read-urls" class="hash-link" aria-label="Direct link to Read URLs" title="Direct link to Read URLs">​</a></h3>
<p>This endpoint fetches the URLs to be encoded in generated certificates. No URL
configuration will be returned until the configuration is set.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/urls</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-38">Sample request<a href="#sample-request-38" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/urls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-31">Sample response<a href="#sample-response-31" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuing_certificates&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;crl_distribution_points&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ocsp_servers&quot;: [&quot;&lt;url1&gt;&quot;, &quot;&lt;url2&gt;&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-urls">Set URLs<a href="#set-urls" class="hash-link" aria-label="Direct link to Set URLs" title="Direct link to Set URLs">​</a></h3>
<p>This endpoint allows setting the issuing certificate endpoints, CRL distribution
points, and OCSP server endpoints that will be encoded into issued certificates.
You can update any of the values at any time without affecting the other
existing values. To remove the values, simply use a blank string as the
parameter.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/urls</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: When using multiple issuers within the same mount, it is strongly
suggested to use the per-issuer AIA information instead of the global
AIA information. If any of the per-issuer AIA fields are set, the entire
issuer&#x27;s preferences will be used instead. Otherwise, these fields are used
as a fallback.<br><br>
This can be achieved by using <em>templated</em> global AIA values, but setting
the cluster-local address in configuration.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-27">Parameters<a href="#parameters-27" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>issuing_certificates</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values for
the Issuing Certificate field. This can be an array or a comma-separated
string list. See also <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.2.1</a>
for information about the Authority Information Access field.</p>
</li>
<li>
<p><code>crl_distribution_points</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values
for the CRL Distribution Points field. This can be an array or a
comma-separated string list. See also <a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.13" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.1.13</a>
for information about the CRL Distribution Points field.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: When multiple issuers are in use under a single mount, each issuer will
have its own CRL distribution point. These separate CRLs should either be
aggregated into a single CRL (externally; as OpenBao does not support this
functionality) or multiple <code>crl_distribution_points</code> should be specified
here, pointing to each cluster and issuer.</p></div></div>
<ul>
<li>
<p><code>ocsp_servers</code> <code>(array&lt;string&gt;: nil)</code> - Specifies the URL values for the OCSP
Servers field. This can be an array or a comma-separated string list. See also
<a href="https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1" target="_blank" rel="noopener noreferrer">RFC 5280 Section 4.2.2.1</a>
for information about the Authority Information Access field.</p>
</li>
<li>
<p><code>enable_templating</code> <code>(bool: false)</code> - Specifies that the above AIA
URL values (<code>issuing_certificates</code>, <code>crl_distribution_points</code>, and
<code>ocsp_servers</code>) should be templated. This replaces the literal value
<code>{{issuer_id}}</code> with the ID of the issuer doing the issuance, the
literal value <code>{{cluster_path}}</code> with the value of <code>path</code> from the
cluster-local configuration endpoint <code>/config/cluster</code>, and the
literal value <code>{{cluster_aia_path}}</code> with the value of <code>aia_path</code> from
the cluster-local configuration endpoint <code>/config/cluster</code>.</p>
<p>For example, the following values can be used globally to ensure all AIA
URIs use the cluster-local, per-issuer canonical reference, but with
the issuing CA certificate and CRL distribution points to potentially
use an external, non-OpenBao CDN.</p>
<ul>
<li><code>issuing_certificates={{cluster_aia_path}}/issuer/{{issuer_id}}/der</code></li>
<li><code>crl_distribution_points={{cluster_aia_path}}/issuer/{{issuer_id}}/crl/der</code></li>
<li><code>ocsp_servers={{cluster_aia_path}}/ocsp</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: If no cluster-local address is present and templating is used,
issuance will fail.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-15">Sample payload<a href="#sample-payload-15" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;issuing_certificates&quot;: [&quot;{{cluster_aia_path}}/issuer/{{issuer_id}}/der&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;crl_distribution_points&quot;: [&quot;{{cluster_aia_path}}/issuer/{{issuer_id}}/crl/der&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ocsp_servers&quot;: [&quot;{{cluster_aia_path}}/ocsp&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-39">Sample request<a href="#sample-request-39" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/urls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-issuers-configuration">Read issuers configuration<a href="#read-issuers-configuration" class="hash-link" aria-label="Direct link to Read issuers configuration" title="Direct link to Read issuers configuration">​</a></h3>
<p>This endpoint allows getting the value of the default issuer.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/issuers</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-40">Sample request<a href="#sample-request-40" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/issuers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-32">Sample response<a href="#sample-response-32" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default&quot;: &quot;3dc79a5a-7a6c-70e2-1123-94b88557ba12&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default_follows_latest_issuer&quot;: &quot;false&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-issuers-configuration">Set issuers configuration<a href="#set-issuers-configuration" class="hash-link" aria-label="Direct link to Set issuers configuration" title="Direct link to Set issuers configuration">​</a></h3>
<p>This endpoint allows setting the value of the default issuer.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/issuers</code></td></tr><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/root/replace</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-28">Parameters<a href="#parameters-28" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>default</code> <code>(string: &quot;&quot;)</code> - Specifies the default issuer (by reference;
either a name or an ID). When no value is specified and the path is
<code>/pki/root/replace</code>, the default value of <code>&quot;next&quot;</code> will be used.</p>
</li>
<li>
<p><code>default_follows_latest_issuer</code> <code>(bool: false)</code> - Specifies whether a
root creation or an issuer import operation updates the default issuer
to the newly added issuer.</p>
<p>While the new multi-issuer functionality of 1.11 was backwards compatible
on a per-API basis, some applications relied explicitly on unsafe behavior
across multiple APIs that we addressed. For instance, calling
<code>/intermediate/generate/:type</code> would silently remove any (potentially
in-use!) key material and generate new private keys. While our response to
this endpoint is backwards compatible (returning a new key and safely
preserving old keys), some applications implicitly relied on this behavior.
This new option is meant to provide compatibility across API calls to these
callers: the newly created issuer (once <em>imported</em> -- not on intermediate
generation) will become the default and it will look (to anyone strictly
using old APIs) that it is the only issuer in the mount. However, it is
encouraged for applications to update to the newer, safer semantics
associated with <a href="/openbao/docs/secrets/pki/rotation-primitives/">multi-issuer rotation</a>.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: When an import creates more than one new issuer with key material
known to this mount, no default update will occur.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-16">Sample payload<a href="#sample-payload-16" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;default&quot;: &quot;root-x1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-41">Sample request<a href="#sample-request-41" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/issuers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-33">Sample response<a href="#sample-response-33" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default&quot;: &quot;3dc79a5a-7a6c-70e2-1123-94b88557ba12&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-keys-configuration">Read keys configuration<a href="#read-keys-configuration" class="hash-link" aria-label="Direct link to Read keys configuration" title="Direct link to Read keys configuration">​</a></h3>
<p>This endpoint allows getting the value of the default key.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/keys</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-42">Sample request<a href="#sample-request-42" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-34">Sample response<a href="#sample-response-34" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-keys-configuration">Set keys configuration<a href="#set-keys-configuration" class="hash-link" aria-label="Direct link to Set keys configuration" title="Direct link to Set keys configuration">​</a></h3>
<p>This endpoint allows setting the value of the default key.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/keys</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-29">Parameters<a href="#parameters-29" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>default</code> <code>(string: &quot;&quot;)</code> - Specifies the default key (by reference;
either a name or an ID).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-17">Sample payload<a href="#sample-payload-17" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;default&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-43">Sample request<a href="#sample-request-43" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-35">Sample response<a href="#sample-response-35" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;default&quot;: &quot;baadd98d-ec5a-66ac-06b7-dfc91c02c9cf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-cluster-configuration">Read cluster configuration<a href="#read-cluster-configuration" class="hash-link" aria-label="Direct link to Read cluster configuration" title="Direct link to Read cluster configuration">​</a></h3>
<p>This endpoint fetches the cluster-local configuration.</p>
<p>The cluster-local config has <code>path</code>, which sets the URL to this mount on
a particular cluster. This is useful for populating <code>{{cluster_path}}</code> during
AIA URL templating, but may be used for other values in the future.</p>
<p>It also has <code>aia_path</code>, which allows using a non-OpenBao, external responder,
setting the <code>{{cluster_aia_path}}</code> value for AIA URL templating. This is
useful for distributing CA and CRL information over an unsecured, non-TLS
channel.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/cluster</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-44">Sample request<a href="#sample-request-44" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/cluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-36">Sample response<a href="#sample-response-36" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;path&quot;: &quot;&lt;url&gt;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;aia_path&quot;: &quot;&lt;url&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-cluster-configuration">Set cluster configuration<a href="#set-cluster-configuration" class="hash-link" aria-label="Direct link to Set cluster configuration" title="Direct link to Set cluster configuration">​</a></h3>
<p>This endpoint sets cluster-local configuration.</p>
<p>The cluster-local config has <code>path</code>, which sets the URL to this mount on a
particular cluster. This is useful for populating <code>{{cluster_path}}</code> during AIA
URL templating, but may be used for other values in the future.</p>
<p>It also has <code>aia_path</code>, which allows using a non-OpenBao, external responder,
setting the <code>{{cluster_aia_path}}</code> value for AIA URL templating. This is
useful for distributing CA and CRL information over an unsecured, non-TLS
channel.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/cluster</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-30">Parameters<a href="#parameters-30" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>path</code> <code>(string: &quot;&quot;)</code> - Specifies the path to this cluster&#x27;s API mount path,
including any namespaces as path components. For example,
<code>https://a.openbao.example.com/v1/ns1/pki-root</code>.</p>
</li>
<li>
<p><code>aia_path</code> <code>(string: &quot;&quot;)</code> - Specifies the path to this  cluster&#x27;s AIA
distribution point; may refer to an external, non-OpenBao responder.  This is
for resolving AIA URLs and providing the <code>{{cluster_aia_path}}</code> template
parameter and will not be used for other purposes. As such, unlike <code>path</code>
above, this could safely be an insecure transit mechanism (like HTTP without
TLS).</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-18">Sample payload<a href="#sample-payload-18" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;path&quot;: &quot;https://...&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;aia_path&quot;: &quot;http://...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-45">Sample request<a href="#sample-request-45" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/cluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-crl-configuration">Read CRL configuration<a href="#read-crl-configuration" class="hash-link" aria-label="Direct link to Read CRL configuration" title="Direct link to Read CRL configuration">​</a></h3>
<p>This endpoint allows getting the duration for which the generated CRL should be
marked valid. No CRL configuration will be returned until the configuration is
set, but the CRL will still default to enabled with 72h expiration.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/crl</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-46">Sample request<a href="#sample-request-46" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/crl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-37">Sample response<a href="#sample-response-37" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;disable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;expiry&quot;: &quot;72h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ocsp_disable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ocsp_expiry&quot;: &quot;12h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auto_rebuild&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auto_rebuild_grace_period&quot;: &quot;12h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enable_delta&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;delta_rebuild_interval&quot;: &quot;15m&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cross_cluster_revocation&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;unified_crl&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;unified_crl_on_existing_paths&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="set-crl-configuration"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-revocation-configuration">Set revocation configuration<a href="#set-revocation-configuration" class="hash-link" aria-label="Direct link to Set revocation configuration" title="Direct link to Set revocation configuration">​</a></h3>
<p>This endpoint allows setting the duration for which the generated CRL should be
marked valid. If the CRL is disabled, it will return a signed but zero-length
CRL for any request. If enabled, it will re-build the CRL.</p>
<p>If the <code>ocsp_disable</code> key is set to <code>true</code>, the OCSP responder will always
respond with an Unauthorized OCSP response to any request.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This parameter is global, across all clusters and issuers. Use
the per-issuer <code>usage</code> field to disable CRL building for a specific
issuer, while leaving the global CRL building enabled.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Disabling the CRL does not affect whether revoked certificates are
stored internally. Certificates that have been revoked when a role&#x27;s
certificate storage is enabled will continue to be marked and stored as
revoked until <code>tidy</code> has been run with the desired safety buffer. Re-enabling
CRL generation will then result in all such certificates becoming a part of
the CRL.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Enabling automatic rebuilding of CRLs disables immediate regeneration
on revocation. This is in line with the behavior of other CAs which only
rebuild CRLs periodically. We suggest manually hitting the rotate if a
fresh CRL is necessary after a revocation. For the most part though, CRLs
should not be relied upon for the latest certificate status information,
and OCSP should be used instead.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: The periodic function which controls automatic rebuilding of CRLs
and delta CRLs only executes once a minute; this prevents high system load
but limits the granularity of the temporal options below.</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/crl</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-31">Parameters<a href="#parameters-31" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>expiry</code> <code>(string: &quot;72h&quot;)</code> - The amount of time the generated CRL should be valid.</p>
</li>
<li>
<p><code>disable</code> <code>(bool: false)</code> - Disables or enables CRL building.</p>
</li>
<li>
<p><code>ocsp_disable</code> <code>(bool: false)</code> - Disables or enables the OCSP responder in OpenBao.</p>
</li>
<li>
<p><code>ocsp_expiry</code> <code>(string: &quot;12h&quot;)</code> - The amount of time an OCSP response can be cached for,
(controls the NextUpdate field), useful for OCSP stapling refresh durations. If set to 0
the NextUpdate field is not set, indicating newer revocation information is available
all the time.</p>
</li>
<li>
<p><code>auto_rebuild</code> <code>(bool: false)</code> - Enables or disables periodic rebuilding of
the CRL upon expiry.</p>
</li>
<li>
<p><code>auto_rebuild_grace_period</code> <code>(string: &quot;12h&quot;)</code> - Grace period before CRL expiry
to attempt rebuild of CRL. Must be shorter than the CRL expiry period.</p>
</li>
<li>
<p><code>enable_delta</code> <code>(bool: false)</code> - Enables or disables building of delta CRLs
with up-to-date revocation information, augmenting the last complete CRL.
This option requires <code>auto_rebuild</code> to also be enabled.</p>
</li>
<li>
<p><code>delta_rebuild_interval</code> <code>(string: &quot;15m&quot;)</code> - Interval to check for new
revocations on, to regenerate the delta CRL. Must be shorter than CRL
expiry.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-19">Sample payload<a href="#sample-payload-19" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;expiry&quot;: &quot;48h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;disable&quot;: &quot;false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ocsp_disable&quot;: &quot;false&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ocsp_expiry&quot;: &quot;12h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auto_rebuild&quot;: &quot;true&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auto_rebuild_grace_period&quot;: &quot;8h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;enable_delta&quot;: &quot;true&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;delta_rebuild_interval&quot;: &quot;10m&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;cross_cluster_revocation&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;unified_crl&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;unified_crl_on_existing_paths&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-47">Sample request<a href="#sample-request-47" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/crl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotate-crls">Rotate CRLs<a href="#rotate-crls" class="hash-link" aria-label="Direct link to Rotate CRLs" title="Direct link to Rotate CRLs">​</a></h3>
<p>This endpoint forces a rotation of all issuers&#x27; CRLs. This can be used by
administrators to cut the size of the CRL if it contains a number of
certificates that have now expired, but has not been rotated due to no further
certificates being revoked. If no certificates have been revoked, but the CRL
has expired or is close to expiring, administrators <strong>must</strong> hit this endpoint
to manually rotate the CRL. This rotates all CRLs on the present cluster,
and <strong>must</strong> be called on every cluster.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: Mirroring the behavior of earlier OpenBao versions, we add
certificates revoked by an unknown issuer to the default issuer&#x27;s CRL.
To fully purge old revoked, unexpired certificates, it is not sufficient
to delete their issuer and is instead necessary to <strong>remove</strong> the mount
completely.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: It is suggested to switch to enabling the CRL&#x27;s <code>auto_rebuild</code>
functionality to avoid having to manually hit the Rotate endpoint when the
CRL expires. This ensures a valid CRL is always maintained, at the expense of
potentially not being up-to-date. If a revocation occurs that must be
immediately propagated, this endpoint can be used to regenerate the CRL,
though distribution must still occur outside of OpenBao (either manually or
via AIA where supported).</p></div></div>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl/rotate</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-48">Sample request<a href="#sample-request-48" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/crl/rotate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-38">Sample response<a href="#sample-response-38" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;success&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rotate-delta-crls">Rotate delta CRLs<a href="#rotate-delta-crls" class="hash-link" aria-label="Direct link to Rotate delta CRLs" title="Direct link to Rotate delta CRLs">​</a></h3>
<p>This endpoint forces a rotation of all issuers&#x27; delta CRLs, when enabled.
This can be used by administrators to force a rebuild of a delta CRL if
high-profile revocations have occurred and there&#x27;s a long high interval
between delta rebuilds (<code>delta_rebuild_interval</code>).</p>
<p>See notes about rotating regular CRLs above as they apply here as well.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/crl/rotate-delta</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-49">Sample request<a href="#sample-request-49" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/crl/rotate</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-39">Sample response<a href="#sample-response-39" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;success&quot;: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="combine-crls-from-the-same-issuer">Combine CRLs from the same issuer<a href="#combine-crls-from-the-same-issuer" class="hash-link" aria-label="Direct link to Combine CRLs from the same issuer" title="Direct link to Combine CRLs from the same issuer">​</a></h3>
<p>This endpoint allows combining multiple different CRLs that have been signed by the
same issuer into a single signed CRL. This is useful to generate a single authoritative
CRL of revocations across distinct OpenBao clusters.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/resign-crls</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-32">Parameters<a href="#parameters-32" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
<li><code>crls</code> <code>(list of strings: &lt;required&gt;)</code> - A list of PEM encoded CRLs that have been
signed by the issuer</li>
<li><code>crl_number</code> <code>(int: &lt;required&gt;)</code> - The sequence number to be written within the CRL
Number extension.</li>
<li><code>delta_crl_base_number</code> <code>(int: -1)</code> - Using a value of 0 or greater specifies the base CRL revision
number to encode within a Delta CRL indicator extension, otherwise the extension will
not be added; defaults to -1.</li>
<li><code>format</code> <code>(string: pem)</code> - The format of the combined CRL, can be &quot;pem&quot; or &quot;der&quot;.
If &quot;der&quot;, the value will be base64 encoded; Defaults to &quot;pem&quot;.</li>
<li><code>next_update</code> <code>(string: 72h)</code> - The amount of time the generated CRL should be
valid; defaults to 72 hours.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-20">Sample payload<a href="#sample-payload-20" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;crl_number&quot;: &quot;10&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;next_update&quot;: &quot;24h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;crls&quot;: [&quot;&lt;PEM crl 1&gt;&quot;, &quot;&lt;PEM crl 2&gt;&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;format&quot;: &quot;pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-50">Sample request<a href="#sample-request-50" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/default/resign-crls</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-40">Sample response<a href="#sample-response-40" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;crl&quot;: &quot;&lt;PEM encoded crl&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sign-revocation-list">Sign revocation list<a href="#sign-revocation-list" class="hash-link" aria-label="Direct link to Sign revocation list" title="Direct link to Sign revocation list">​</a></h3>
<p>This endpoint allows generating a CRL based on the provided parameter data from any external
source and signed by the specified issuer. Values are taken verbatim from the parameters provided.</p>
<p><strong>This is a potentially dangerous endpoint and only highly trusted users should have access.</strong></p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/issuer/:issuer_ref/sign-revocation-list</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-33">Parameters<a href="#parameters-33" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li><code>issuer_ref</code> <code>(string: &lt;required&gt;)</code> - Reference to an existing issuer,
either by OpenBao-generated identifier, the literal string <code>default</code> to
refer to the currently configured default issuer, or the name assigned
to an issuer. This parameter is part of the request URL.</li>
<li><code>crl_number</code> <code>(int: &lt;required&gt;)</code> - The sequence number to be written within the CRL
Number extension.</li>
<li><code>delta_crl_base_number</code> <code>(int: -1)</code> - Using a value of 0 or greater specifies the base CRL revision
number to encode within a Delta CRL indicator extension, otherwise the extension will
not be added; defaults to -1.</li>
<li><code>format</code> <code>(string: pem)</code> - The format of the combined CRL, can be &quot;pem&quot; or &quot;der&quot;.
If &quot;der&quot;, the value will be base64 encoded; Defaults to &quot;pem&quot;.</li>
<li><code>next_update</code> <code>(string: 72h)</code> - The amount of time the generated CRL should be
valid; defaults to 72 hours.</li>
<li><code>revoked_certs</code> <code>(type: slice of maps)</code> - Each element contains revocation information for a
single serial number along with the revocation time and the serial&#x27;s extensions if any. Each
element can have the following key/values<!-- -->
<ul>
<li><code>serial_number</code> <code>(type: string)</code> - the serial number of the revoked cert</li>
<li><code>revocation_time</code> <code>(type: string)</code> - the revocation time, unix int format or RFC3339 encoding supported</li>
<li><code>extensions</code> <code>(type: slice of maps)</code> - A slice of all extensions that should be added to the revoked
certificate entry. Each ele,ent contains a map with the following entries<!-- -->
<ul>
<li><code>id</code> <code>(type: string)</code> - an ASN1 object identifier in dot notation</li>
<li><code>critical</code> <code>(type: bool)</code> - should the extension be marked critical</li>
<li><code>value</code> <code>(type: string)</code> - base64 encoded bytes for extension value</li>
</ul>
</li>
</ul>
</li>
<li><code>extensions</code> <code>(type: slice of maps)</code> - A slice of all extensions that should be added to the generated
CRL each element containing a map with the following entries.<!-- -->
<ul>
<li><code>id</code> <code>(type: string)</code> - an ASN1 object identifier in dot notation</li>
<li><code>critical</code> <code>(type: bool)</code> - should the extension be marked critical</li>
<li><code>value</code> <code>(type: string)</code> - base64 encoded bytes for extension value</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: The following extension ids are not allowed to be provided and can be influenced by other parameters</p><ul>
<li><code>2.5.29.20</code>: CRL Number</li>
<li><code>2.5.29.27</code>: Delta CRL</li>
<li><code>2.5.29.35</code>: Authority Key Identifier</li>
</ul></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-21">Sample payload<a href="#sample-payload-21" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;crl_number&quot;: &quot;10&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;next_update&quot;: &quot;24h&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;format&quot;: &quot;pem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;revoked_certs&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;serial_number&quot;: &quot;39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;revocation_time&quot;: &quot;2009-11-10T23:00:00Z&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;serial_number&quot;: &quot;40:33:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;revocation_time&quot;: &quot;1257894000&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-51">Sample request<a href="#sample-request-51" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/issuer/default/sign-revocation-list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-41">Sample response<a href="#sample-response-41" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;crl&quot;: &quot;&lt;PEM encoded crl&gt;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidy">Tidy<a href="#tidy" class="hash-link" aria-label="Direct link to Tidy" title="Direct link to Tidy">​</a></h3>
<p>This endpoint allows tidying up the storage backend and/or CRL by removing
certificates that have expired and are past a certain buffer period beyond their
expiration time.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/tidy</code></td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: it is encouraged to use the <a href="#configure-automatic-tidy">automatic tidy capabilities</a>
to ensure this gets run periodically.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-34">Parameters<a href="#parameters-34" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<ul>
<li>
<p><code>tidy_cert_store</code> <code>(bool: false)</code> - Specifies whether to tidy up the certificate
store.</p>
</li>
<li>
<p><code>tidy_revoked_certs</code> <code>(bool: false)</code> - Set to true to remove all invalid and
expired certificates from storage. A revoked storage entry is considered
invalid if the entry is empty, or the value within the entry is empty. If a
certificate is removed due to expiry, the entry will also be removed from the
CRL, and the CRL will be rotated.</p>
</li>
<li>
<p><code>tidy_revoked_cert_issuer_associations</code> <code>(bool: false)</code> - Set to true to associate
revoked certificates with their corresponding issuers; this improves the
performance of OCSP and CRL building, by shifting work to a tidy operation
instead.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: With multiple issuers, a CA which issued a particular revoked
certificate may be removed and re-added, resulting in a different issuer
ID value. When building CRLs, these links are automatically updated for any
missing or added issuers, but during OCSP this value is computed and then
discarded, potentially causing a performance penalty on each request.
During regular CA operations, it is not necessary to run this operation.</p><br><br><p>It is suggested to run this tidy when removing or importing new issuers but
otherwise not to run it during automatic tidy operations.</p></div></div>
<ul>
<li><code>tidy_expired_issuers</code> <code>(bool: false)</code> - Set to true to automatically remove
expired issuers after the <code>issuer_safety_buffer</code> duration has elapsed. We
log the issuer certificate on removal to allow recovery; no keys are removed
during this process.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: The default issuer will not be removed even if it has expired and is
past the <code>issuer_safety_buffer</code> specified.</p></div></div>
<ul>
<li>
<p><code>tidy_move_legacy_ca_bundle</code> <code>(bool: false)</code> - Set to true to backup any
legacy CA/issuers bundle to <code>config/ca_bundle.bak</code>. This can be restored with
<code>sys/raw</code> back to <code>config/ca_bundle</code> if necessary, but won&#x27;t impact mount
startup (as mounts will attempt to read the latter and do a migration of CA
issuers if present). Migration will only occur after <code>issuer_safety_buffer</code>
has passed since the last successful migration.</p>
</li>
<li>
<p><code>safety_buffer</code> <code>(string: &quot;&quot;)</code> - Specifies a duration using <a href="/openbao/docs/concepts/duration-format/">duration format strings</a>
used as a safety buffer to ensure certificates are not expunged prematurely; as an example, this can keep
certificates from being removed from the CRL that, due to clock skew, might
still be considered valid on other hosts. For a certificate to be expunged,
the time must be after the expiration time of the certificate (according to
the local clock) plus the duration of <code>safety_buffer</code>. Defaults to <code>72h</code>.</p>
</li>
<li>
<p><code>issuer_safety_buffer</code> <code>(string: &quot;&quot;)</code> - Specifies a duration that issuers
should be kept for, past their <code>NotAfter</code> validity period. Defaults to
365 days as hours (<code>8760h</code>).</p>
</li>
<li>
<p><code>pause_duration</code> <code>(string: &quot;0s&quot;)</code> - Specifies the duration to pause
between tidying individual certificates. This releases the revocation
lock and allows other operations to continue while tidy is paused.
This allows an operator to control tidy&#x27;s resource utilization within
a timespan: the LIST operation will remain in memory, but the space
between reading, parsing, and updates on-disk cert entries will be
increased, decreasing resource utilization.</p>
<p>Does not affect <code>tidy_expired_issuers</code>.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Note: Using too long of a <code>pause_duration</code> can result in tidy operations
not concluding during this lifetime! Using too short of a pause duration
(but non-zero) can lead to lock contention. Use <a href="#cancel-tidy">tidy&#x27;s cancellation</a>
to stop a running operation after the sleep period is over.</p></div></div>
<ul>
<li>
<p><code>revocation_queue_safety_buffer</code> <code>(string: &quot;&quot;)</code> - Specifies a duration
after which cross-cluster revocation requests will be removed as expired.
This should be set high enough that, if a cluster disappears for a while
but later comes back, any revocation requests which it should process will
still be there, but not too long as to fill up storage with too many invalid
requests. Defaults to <code>48h</code>.</p>
</li>
<li>
<p><code>tidy_acme</code> <code>(bool: false)</code> - Set to true to tidy stale ACME accounts,
orders, authorizations, EABs, and challenges. ACME orders are tidied (deleted)
<code>safety_buffer</code> after the certificate associated with them expires, or after
the order and relevant authorizations have expired if no certificate was
produced. Authorizations are tidied with the corresponding order.</p>
<p>When a valid ACME Account is at least <code>acme_account_safety_buffer</code>
old, and has no remaining orders associated with it, the account is
marked as revoked. After another <code>acme_account_safety_buffer</code> has
passed from the revocation or deactivation date, a revoked or
deactivated ACME account is deleted.</p>
</li>
<li>
<p><code>acme_account_safety_buffer</code> <code>(string: &quot;720h&quot;)</code> - The amount of time that
must pass after creation that an account with no orders is marked revoked,
and the amount of time after being marked revoked or deactivated. The
default is 30 days as hours.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-22">Sample payload<a href="#sample-payload-22" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;safety_buffer&quot;: &quot;24h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-52">Sample request<a href="#sample-request-52" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/tidy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-automatic-tidy-configuration">Read automatic tidy configuration<a href="#read-automatic-tidy-configuration" class="hash-link" aria-label="Direct link to Read automatic tidy configuration" title="Direct link to Read automatic tidy configuration">​</a></h3>
<p>This endpoint fetches the current automatic tidy configuration.</p>
<p>This is the combination of the periodic invocation parameters described
<a href="#set-automatic-tidy-configuration">in the below write handler</a> and
the tidy parameters <a href="#tidy">described above in the tidy endpoint</a>.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/config/auto-tidy</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-53">Sample request<a href="#sample-request-53" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/auto-tidy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-42">Sample response<a href="#sample-response-42" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_id&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;renewable&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;lease_duration&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;enabled&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;interval_duration&quot;: 43200,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;issuer_safety_buffer&quot;: 31536000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;maintain_stored_certificate_counts&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;pause_duration&quot;: &quot;0s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;publish_stored_certificate_count_metrics&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revocation_queue_safety_buffer&quot;: 172800,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;safety_buffer&quot;: 259200,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_cert_store&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_cross_cluster_revoked_certs&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_expired_issuers&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_move_legacy_ca_bundle&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_revocation_queue&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_revoked_cert_issuer_associations&quot;: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_revoked_certs&quot;: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;auth&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<a name="configure-automatic-tidy"></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-automatic-tidy-configuration">Set automatic tidy configuration<a href="#set-automatic-tidy-configuration" class="hash-link" aria-label="Direct link to Set automatic tidy configuration" title="Direct link to Set automatic tidy configuration">​</a></h3>
<p>This endpoint allows configuring periodic tidy operations, using the tidy mechanism
described above. Status is from automatically run tidies are still reported at the
status endpoint described below.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/config/auto-tidy</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameters-35">Parameters<a href="#parameters-35" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h4>
<p>The below parameters are in addition to the regular parameters accepted by the
<a href="#tidy"><code>/pki/tidy</code> endpoint</a> documented above.</p>
<ul>
<li>
<p><code>enabled</code> <code>(bool: false)</code> - Specifies whether automatic tidy is enabled or not.</p>
</li>
<li>
<p><code>interval_duration</code> <code>(string: &quot;&quot;)</code> - Specifies the duration between automatic tidy
operations; note that this is from the end of one operation to the start of
the next so the time of the operation itself does not need to be considered.
Defaults to 12h</p>
</li>
<li>
<p><code>maintain_stored_certificate_counts</code> <code>(bool: false)</code> - When enabled,
maintains expensive counts of certificates. During initialization of the
mount, a LIST of all certificates is performed to get a baseline figure and
throughout operations like issuance, revocation, and subsequent tidies, the
figure is updated.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><em>Note</em>: It is strongly recommend to not enable this value if 50k or more
certificates are stored in the mount or if many PKI mounts are in use in
this cluster. Instead, use audit logs and aggregate this data externally
to OpenBao so as not to impact OpenBao performance.</p></div></div>
<ul>
<li><code>publish_stored_certificate_count_metrics</code> <code>(bool: false)</code> - When enabled,
publishes the value computed by <code>maintain_stored_certificate_counts</code> to
the mount&#x27;s metrics. This requires the former to be enabled.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-payload-23">Sample payload<a href="#sample-payload-23" class="hash-link" aria-label="Direct link to Sample payload" title="Direct link to Sample payload">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;enabled&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;tidy_revoked_cert_issuer_associations&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;safety_buffer&quot;: &quot;24h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-54">Sample request<a href="#sample-request-54" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data @payload.json \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/config/auto-tidy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidy-status">Tidy status<a href="#tidy-status" class="hash-link" aria-label="Direct link to Tidy status" title="Direct link to Tidy status">​</a></h3>
<p>This is a read only endpoint that returns information about the current tidy
operation, or the most recent if none are currently running.</p>
<p>The result includes the following fields:</p>
<ul>
<li><code>safety_buffer</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>tidy_cert_store</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>tidy_revoked_certs</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>state</code>: one of <em>Inactive</em>, <em>Running</em>, <em>Finished</em>, <em>Error</em>, <em>Cancelling</em>, or <em>Cancelled</em></li>
<li><code>error</code>: the error message, if the operation ran into an error</li>
<li><code>time_started</code>: the time the operation started</li>
<li><code>time_finished</code>: the time the operation finished</li>
<li><code>message</code>: One of <em>Tidying certificate store: checking entry N of TOTAL</em> or
<em>Tidying revoked certificates: checking certificate N of TOTAL</em></li>
<li><code>cert_store_deleted_count</code>: The number of certificate storage entries deleted</li>
<li><code>revoked_cert_deleted_count</code>: The number of revoked certificate entries deleted</li>
<li><code>missing_issuer_cert_count</code>: The number of revoked certificates which were missing a valid issuer reference</li>
<li><code>tidy_expired_issuers</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>issuer_safety_buffer</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>tidy_move_legacy_ca_bundle</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>tidy_revocation_queue</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>revocation_queue_deleted_count</code>: the number of revocation queue entries deleted</li>
<li><code>tidy_cross_cluster_revoked_certs</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>cross_revoked_cert_deleted_count</code>: the number of cross-cluster revoked certificate entries deleted</li>
<li><code>revocation_queue_safety_buffer</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>pause_duration</code>: the value of this parameter when initiating the tidy operation</li>
<li><code>last_auto_tidy_finished</code>: the time when the last auto-tidy operation finished; may be different than <code>time_finished</code> especially if the last operation was a manually executed tidy operation. Set to current time at mount time to delay the initial auto-tidy operation; not persisted.</li>
</ul>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>GET</code></td><td style="text-align:left"><code>/pki/tidy-status</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-55">Sample request<a href="#sample-request-55" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request GET \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/tidy-status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-43">Sample response<a href="#sample-response-43" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;safety_buffer&quot;: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_cert_store&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_revoked_certs&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;error&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;message&quot;: &quot;Tidying certificate store: checking entry 234 of 488&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revoked_cert_deleted_count&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cert_store_deleted_count&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: &quot;Running&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;time_started&quot;: &quot;2021-10-20T14:52:13.510161-04:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;time_finished&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cancel-tidy">Cancel tidy<a href="#cancel-tidy" class="hash-link" aria-label="Direct link to Cancel tidy" title="Direct link to Cancel tidy">​</a></h3>
<p>This endpoint allows cancelling a running tidy operation. It takes no
parameter and cancels the tidy at the next available checkpoint, which
may process additional certificates between when the operation was
marked as cancelled and when the operation stopped.</p>
<p>The response to this endpoint is the same as the <a href="#tidy-status">status</a>.</p>
<table><thead><tr><th style="text-align:left">Method</th><th style="text-align:left">Path</th></tr></thead><tbody><tr><td style="text-align:left"><code>POST</code></td><td style="text-align:left"><code>/pki/tidy-cancel</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-request-56">Sample request<a href="#sample-request-56" class="hash-link" aria-label="Direct link to Sample request" title="Direct link to Sample request">​</a></h4>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/pki/tidy-cancel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sample-response-44">Sample response<a href="#sample-response-44" class="hash-link" aria-label="Direct link to Sample response" title="Direct link to Sample response">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;safety_buffer&quot;: 60,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_cert_store&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tidy_revoked_certs&quot;: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;error&quot;: null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;message&quot;: &quot;Tidying certificate store: checking entry 234 of 488&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;revoked_cert_deleted_count&quot;: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;cert_store_deleted_count&quot;: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;state&quot;: &quot;Cancelling&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;time_started&quot;: &quot;2021-10-20T14:52:13.510161-04:00&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;time_finished&quot;: null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-scalability">Cluster scalability<a href="#cluster-scalability" class="hash-link" aria-label="Direct link to Cluster scalability" title="Direct link to Cluster scalability">​</a></h2>
<p>See <a href="/openbao/docs/secrets/pki/considerations/#cluster-scalability">PKI Cluster Scalability</a> in the considerations page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="openbao-cli-with-derpem-responses">OpenBao CLI with DER/PEM responses<a href="#openbao-cli-with-derpem-responses" class="hash-link" aria-label="Direct link to OpenBao CLI with DER/PEM responses" title="Direct link to OpenBao CLI with DER/PEM responses">​</a></h2>
<p>The OpenBao CLI can only display JSON responses. For APIs that return non-JSON formatted
data such as DER and PEM formats, <code>bao read</code> will fail without the <code>-format=raw</code>
option or another client such as <code>curl</code> must be used.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/pki.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/api-docs/secret/ldap/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">LDAP</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/api-docs/secret/rabbitmq/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RabbitMQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of contents</a></li><li><a href="#notice-about-new-multi-issuer-functionality" class="table-of-contents__link toc-highlight">Notice about new Multi-Issuer functionality</a></li><li><a href="#acme-certificate-issuance" class="table-of-contents__link toc-highlight">ACME certificate issuance</a><ul><li><a href="#acme-directories" class="table-of-contents__link toc-highlight">ACME directories</a></li><li><a href="#get-acme-eab-binding-token" class="table-of-contents__link toc-highlight">Get ACME EAB binding token</a></li><li><a href="#list-unused-acme-eab-binding-tokens" class="table-of-contents__link toc-highlight">List unused ACME EAB binding tokens</a></li><li><a href="#delete-unused-acme-eab-binding-tokens" class="table-of-contents__link toc-highlight">Delete unused ACME EAB binding tokens</a></li><li><a href="#get-acme-configuration" class="table-of-contents__link toc-highlight">Get ACME configuration</a></li><li><a href="#set-acme-configuration" class="table-of-contents__link toc-highlight">Set ACME configuration</a></li></ul></li><li><a href="#issuing-certificates" class="table-of-contents__link toc-highlight">Issuing certificates</a><ul><li><a href="#list-roles" class="table-of-contents__link toc-highlight">List roles</a></li><li><a href="#read-role" class="table-of-contents__link toc-highlight">Read role</a></li><li><a href="#generate-certificate-and-key" class="table-of-contents__link toc-highlight">Generate certificate and key</a></li><li><a href="#sign-certificate" class="table-of-contents__link toc-highlight">Sign certificate</a></li><li><a href="#sign-intermediate" class="table-of-contents__link toc-highlight">Sign intermediate</a></li><li><a href="#sign-self-issued" class="table-of-contents__link toc-highlight">Sign Self-Issued</a></li><li><a href="#sign-verbatim" class="table-of-contents__link toc-highlight">Sign verbatim</a></li><li><a href="#revoke-certificate" class="table-of-contents__link toc-highlight">Revoke certificate</a></li><li><a href="#revoke-certificate-with-private-key" class="table-of-contents__link toc-highlight">Revoke certificate with private key</a></li><li><a href="#list-revoked-certificates" class="table-of-contents__link toc-highlight">List revoked certificates</a></li><li><a href="#list-revocation-requests" class="table-of-contents__link toc-highlight">List revocation requests</a></li></ul></li><li><a href="#accessing-authority-information" class="table-of-contents__link toc-highlight">Accessing authority information</a><ul><li><a href="#list-issuers" class="table-of-contents__link toc-highlight">List issuers</a></li><li><a href="#read-issuer-certificate" class="table-of-contents__link toc-highlight">Read issuer certificate</a></li><li><a href="#read-default-issuer-certificate-chain" class="table-of-contents__link toc-highlight">Read default issuer certificate chain</a></li><li><a href="#read-issuer-crl" class="table-of-contents__link toc-highlight">Read issuer CRL</a></li><li><a href="#ocsp-request" class="table-of-contents__link toc-highlight">OCSP request</a></li><li><a href="#list-certificates" class="table-of-contents__link toc-highlight">List certificates</a></li><li><a href="#read-certificate" class="table-of-contents__link toc-highlight">Read certificate</a></li></ul></li><li><a href="#managing-keys-and-issuers" class="table-of-contents__link toc-highlight">Managing keys and issuers</a><ul><li><a href="#list-issuers-1" class="table-of-contents__link toc-highlight">List issuers</a></li><li><a href="#list-keys" class="table-of-contents__link toc-highlight">List keys</a></li><li><a href="#generate-key" class="table-of-contents__link toc-highlight">Generate key</a></li><li><a href="#generate-root" class="table-of-contents__link toc-highlight">Generate root</a></li><li><a href="#generate-intermediate-csr" class="table-of-contents__link toc-highlight">Generate intermediate CSR</a></li><li><a href="#import-ca-certificates-and-keys" class="table-of-contents__link toc-highlight">Import CA certificates and keys</a></li><li><a href="#read-issuer" class="table-of-contents__link toc-highlight">Read issuer</a></li><li><a href="#update-issuer" class="table-of-contents__link toc-highlight">Update issuer</a></li><li><a href="#revoke-issuer" class="table-of-contents__link toc-highlight">Revoke issuer</a></li><li><a href="#delete-issuer" class="table-of-contents__link toc-highlight">Delete issuer</a></li><li><a href="#import-key" class="table-of-contents__link toc-highlight">Import key</a></li><li><a href="#read-key" class="table-of-contents__link toc-highlight">Read key</a></li><li><a href="#update-key" class="table-of-contents__link toc-highlight">Update key</a></li><li><a href="#delete-key" class="table-of-contents__link toc-highlight">Delete key</a></li><li><a href="#delete-all-issuers-and-keys" class="table-of-contents__link toc-highlight">Delete all issuers and keys</a></li></ul></li><li><a href="#managing-authority-information" class="table-of-contents__link toc-highlight">Managing authority information</a><ul><li><a href="#list-roles-1" class="table-of-contents__link toc-highlight">List roles</a></li><li><a href="#createupdate-role" class="table-of-contents__link toc-highlight">Create/Update role</a></li><li><a href="#read-role-1" class="table-of-contents__link toc-highlight">Read role</a></li><li><a href="#delete-role" class="table-of-contents__link toc-highlight">Delete role</a></li><li><a href="#read-urls" class="table-of-contents__link toc-highlight">Read URLs</a></li><li><a href="#set-urls" class="table-of-contents__link toc-highlight">Set URLs</a></li><li><a href="#read-issuers-configuration" class="table-of-contents__link toc-highlight">Read issuers configuration</a></li><li><a href="#set-issuers-configuration" class="table-of-contents__link toc-highlight">Set issuers configuration</a></li><li><a href="#read-keys-configuration" class="table-of-contents__link toc-highlight">Read keys configuration</a></li><li><a href="#set-keys-configuration" class="table-of-contents__link toc-highlight">Set keys configuration</a></li><li><a href="#read-cluster-configuration" class="table-of-contents__link toc-highlight">Read cluster configuration</a></li><li><a href="#set-cluster-configuration" class="table-of-contents__link toc-highlight">Set cluster configuration</a></li><li><a href="#read-crl-configuration" class="table-of-contents__link toc-highlight">Read CRL configuration</a></li><li><a href="#set-revocation-configuration" class="table-of-contents__link toc-highlight">Set revocation configuration</a></li><li><a href="#rotate-crls" class="table-of-contents__link toc-highlight">Rotate CRLs</a></li><li><a href="#rotate-delta-crls" class="table-of-contents__link toc-highlight">Rotate delta CRLs</a></li><li><a href="#combine-crls-from-the-same-issuer" class="table-of-contents__link toc-highlight">Combine CRLs from the same issuer</a></li><li><a href="#sign-revocation-list" class="table-of-contents__link toc-highlight">Sign revocation list</a></li><li><a href="#tidy" class="table-of-contents__link toc-highlight">Tidy</a></li><li><a href="#read-automatic-tidy-configuration" class="table-of-contents__link toc-highlight">Read automatic tidy configuration</a></li><li><a href="#set-automatic-tidy-configuration" class="table-of-contents__link toc-highlight">Set automatic tidy configuration</a></li><li><a href="#tidy-status" class="table-of-contents__link toc-highlight">Tidy status</a></li><li><a href="#cancel-tidy" class="table-of-contents__link toc-highlight">Cancel tidy</a></li></ul></li><li><a href="#cluster-scalability" class="table-of-contents__link toc-highlight">Cluster scalability</a></li><li><a href="#openbao-cli-with-derpem-responses" class="table-of-contents__link toc-highlight">OpenBao CLI with DER/PEM responses</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/openbao/docs/">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat Server<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The OpenBao Authors. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>