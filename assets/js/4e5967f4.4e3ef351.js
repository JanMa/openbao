"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1475],{52030:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>o,toc:()=>h});var s=t(74848),i=t(28453);const r={layout:"docs",page_title:"Secrets Engines",description:"Secrets engines are mountable engines that store or generate secrets in OpenBao."},a="Secrets engines",o={id:"secrets/index",title:"Secrets engines",description:"Secrets engines are mountable engines that store or generate secrets in OpenBao.",source:"@site/content/docs/secrets/index.mdx",sourceDirName:"secrets",slug:"/secrets/",permalink:"/openbao/docs/secrets/",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/secrets/index.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"Secrets Engines",description:"Secrets engines are mountable engines that store or generate secrets in OpenBao."},sidebar:"docs",previous:{title:"Running different versions of agent and server",permalink:"/openbao/docs/agent-and-proxy/agent/versions"},next:{title:"Cubbyhole secrets engine",permalink:"/openbao/docs/secrets/cubbyhole"}},c={},h=[{value:"Secrets engines lifecycle",id:"secrets-engines-lifecycle",level:2},{value:"Barrier view",id:"barrier-view",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"secrets-engines",children:"Secrets engines"}),"\n",(0,s.jsx)(n.p,{children:"Secrets engines are components which store, generate, or encrypt data. Secrets\nengines are incredibly flexible, so it is easiest to think about them in terms\nof their function. Secrets engines are provided some set of data, they take some\naction on that data, and they return a result."}),"\n",(0,s.jsx)(n.p,{children:"Some secrets engines simply store and read data - like encrypted\nRedis/Memcached. Other secrets engines connect to other services and generate\ndynamic credentials on demand. Other secrets engines provide encryption as a\nservice, totp generation, certificates, and much more."}),"\n",(0,s.jsxs)(n.p,{children:["Secrets engines are enabled at a ",(0,s.jsx)(n.strong,{children:"path"})," in OpenBao. When a request comes to\nOpenBao, the router automatically routes anything with the route prefix to the\nsecrets engine. In this way, each secrets engine defines its own paths and\nproperties. To the user, secrets engines behave similar to a virtual filesystem,\nsupporting operations like read, write, and delete."]}),"\n",(0,s.jsx)(n.h2,{id:"secrets-engines-lifecycle",children:"Secrets engines lifecycle"}),"\n",(0,s.jsx)(n.p,{children:"Most secrets engines can be enabled, disabled, tuned, and moved via the CLI or\nAPI."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/commands/secrets/enable",children:"Enable"}),' - This enables a secrets engine at\na given path. With a few exceptions, secrets engines can be enabled at multiple\npaths. Each secrets engine is isolated to its path. By default, they are\nenabled at their "type" (e.g. "kv" enables at ',(0,s.jsx)(n.code,{children:"kv/"}),")."]}),"\n",(0,s.jsxs)(n.p,{children:["!> ",(0,s.jsx)(n.strong,{children:"Case-sensitive:"})," The path where you enable secrets engines is case-sensitive. For\nexample, the KV secrets engine enabled at ",(0,s.jsx)(n.code,{children:"kv/"})," and ",(0,s.jsx)(n.code,{children:"KV/"})," are treated as two\ndistinct instances of KV secrets engine."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/commands/secrets/disable",children:"Disable"})," - This disables an existing\nsecrets engine. When a secrets engine is disabled, all of its secrets are\nrevoked (if they support it), and all the data stored for that engine in\nthe physical storage layer is deleted."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/commands/secrets/move",children:"Move"})," - This moves the path for an existing\nsecrets engine. This process revokes all secrets, since secret leases are tied\nto the path where they were created. The configuration data stored for the engine\npersists through the move."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/docs/commands/secrets/tune",children:"Tune"})," - This tunes global configuration for\nthe secrets engine such as the TTLs."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Once a secrets engine is enabled, you can interact with it directly at its path\naccording to its own API. Use ",(0,s.jsx)(n.code,{children:"bao path-help"})," to determine the paths it\nresponds to."]}),"\n",(0,s.jsxs)(n.p,{children:["Note that mount points cannot conflict with each other in OpenBao. There are\ntwo broad implications of this fact. The first is that you cannot have\na mount which is prefixed with an existing mount. The second is that you\ncannot create a mount point that is named as a prefix of an existing mount.\nAs an example, the mounts ",(0,s.jsx)(n.code,{children:"foo/bar"})," and ",(0,s.jsx)(n.code,{children:"foo/baz"})," can peacefully coexist\nwith each other whereas ",(0,s.jsx)(n.code,{children:"foo"})," and ",(0,s.jsx)(n.code,{children:"foo/baz"})," cannot"]}),"\n",(0,s.jsx)(n.h2,{id:"barrier-view",children:"Barrier view"}),"\n",(0,s.jsxs)(n.p,{children:["Secrets engines receive a ",(0,s.jsx)(n.em,{children:"barrier view"})," to the configured OpenBao physical\nstorage. This is a lot like a ",(0,s.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Chroot",children:"chroot"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["When a secrets engine is enabled, a random UUID is generated. This becomes the\ndata root for that engine. Whenever that engine writes to the physical storage\nlayer, it is prefixed with that UUID folder. Since the OpenBao storage layer\ndoesn't support relative access (such as ",(0,s.jsx)(n.code,{children:"../"}),"), this makes it impossible for an\nenabled secrets engine to access other data."]}),"\n",(0,s.jsx)(n.p,{children:"This is an important security feature in OpenBao - even a malicious engine\ncannot access the data from any other engine."})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);