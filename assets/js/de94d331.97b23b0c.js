"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9678],{42631:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var o=n(74848),i=n(28453);const a={layout:"api",page_title:"/sys/rotate/config - HTTP API",description:"The `/sys/rotate/config` endpoint is used to configure automatic key rotation."},s="/sys/rotate/config",r={id:"system/rotate-config",title:"/sys/rotate/config",description:"The `/sys/rotate/config` endpoint is used to configure automatic key rotation.",source:"@site/content/api-docs/system/rotate-config.mdx",sourceDirName:"system",slug:"/system/rotate-config",permalink:"/openbao/api-docs/system/rotate-config",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/rotate-config.mdx",tags:[],version:"current",frontMatter:{layout:"api",page_title:"/sys/rotate/config - HTTP API",description:"The `/sys/rotate/config` endpoint is used to configure automatic key rotation."},sidebar:"apiSidebar",previous:{title:"Remount ( API )",permalink:"/openbao/api-docs/system/remount"},next:{title:"/sys/rotate",permalink:"/openbao/api-docs/system/rotate"}},l={},c=[{value:"Configure automatic key rotation",id:"configure-automatic-key-rotation",level:2},{value:"Create or update the auto rotation configuration",id:"create-or-update-the-auto-rotation-configuration",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Get the auto rotation configuration",id:"get-the-auto-rotation-configuration",level:2},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"sysrotateconfig",children:(0,o.jsx)(t.code,{children:"/sys/rotate/config"})}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"/sys/rotate"})," endpoint is used to configure automatic key rotation."]}),"\n",(0,o.jsx)(t.h2,{id:"configure-automatic-key-rotation",children:"Configure automatic key rotation"}),"\n",(0,o.jsxs)(t.p,{children:["This endpoint configures the automatic rotation of the backend encryption key. By\ndefault, the key is rotated after just under 4 billion encryptions, to satisfy the\nrecommendation of ",(0,o.jsx)(t.a,{href:"https://csrc.nist.gov/publications/detail/sp/800-38d/final",children:"NIST SP 800-38D"}),".\nOne can configure rotations after fewer encryptions or on a time based schedule."]}),"\n",(0,o.jsx)(t.h2,{id:"create-or-update-the-auto-rotation-configuration",children:"Create or update the auto rotation configuration"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,o.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"left"},children:(0,o.jsx)(t.code,{children:"POST"})}),(0,o.jsx)(t.td,{style:{textAlign:"left"},children:(0,o.jsx)(t.code,{children:"/sys/rotate/config"})})]})})]}),"\n",(0,o.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"max_operations"})," ",(0,o.jsx)(t.code,{children:"(int: 3865470566)"})," - Specify the limit of encryptions after which\nthe key will be automatically rotated. The number must be between 1,000,000 and the\ndefault."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"interval"}),' `(string: "") - If set, the age of the active key at which an\nautomatic rotation is triggered. Specified as a Go duration string (e.g.\n4320h), the value must be at least 24 hours.']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"enabled"})," ",(0,o.jsx)(t.code,{children:"(bool: true)"})," - If set to false, automatic rotations will not\nbe performed. Tracking of encryption counts will continue."]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "max_operations": 2000000000,\n  "interval": "4320h"\n}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request POST \\\n    --header "X-Vault-Token: ..." \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/rotate/config\n'})}),"\n",(0,o.jsx)(t.h2,{id:"get-the-auto-rotation-configuration",children:"Get the auto rotation configuration"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,o.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{style:{textAlign:"left"},children:(0,o.jsx)(t.code,{children:"GET"})}),(0,o.jsx)(t.td,{style:{textAlign:"left"},children:(0,o.jsx)(t.code,{children:"/sys/rotate/config"})})]})})]}),"\n",(0,o.jsx)(t.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request GET \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/rotate/config\n'})}),"\n",(0,o.jsx)(t.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "request_id": "f3d91b4a-69bf-4aaf-b928-df7a5486c130",\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": {\n    "max_operations": 2000000000,\n    "interval": "4320h",\n    "enabled": true\n  },\n  "warnings": null\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);