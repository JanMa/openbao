"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3018],{14355:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var s=t(74848),i=t(28453);const r={sidebar_label:"Overview",description:"This section documents the official integration between Vault and Kubernetes."},a="Kubernetes",l={id:"platform/k8s/index",title:"index",description:"This section documents the official integration between Vault and Kubernetes.",source:"@site/content/docs/platform/k8s/index.mdx",sourceDirName:"platform/k8s",slug:"/platform/k8s/",permalink:"/docs/platform/k8s/",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/platform/k8s/index.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Overview",description:"This section documents the official integration between Vault and Kubernetes."},sidebar:"docs",previous:{title:"github-actions",permalink:"/docs/platform/github-actions"},next:{title:"Agent injector vs. Vault CSI provider",permalink:"/docs/platform/k8s/injector-csi"}},o={},c=[{value:"Use cases",id:"use-cases",level:2},{value:"Getting started with Vault and kubernetes",id:"getting-started-with-vault-and-kubernetes",level:2},{value:"Guides",id:"guides",level:3},{value:"High level comparison of integrations",id:"high-level-comparison-of-integrations",level:3},{value:"Agent injector",id:"agent-injector",level:4},{value:"Vault Secrets Operator",id:"vault-secrets-operator",level:4},{value:"Vault CSI provider",id:"vault-csi-provider",level:4},{value:"Documentation",id:"documentation",level:3}];function u(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,s.jsx)(n.p,{children:"Vault can be deployed into Kubernetes using the official HashiCorp Vault Helm chart.\nThe Helm chart allows users to deploy Vault in various configurations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Dev: a single in-memory Vault server for testing Vault"}),"\n",(0,s.jsx)(n.li,{children:"Standalone (default): a single Vault server persisting to a volume using the file storage backend"}),"\n",(0,s.jsx)(n.li,{children:"High-Availability (HA): a cluster of Vault servers that use an HA storage backend such as Consul (default)"}),"\n",(0,s.jsx)(n.li,{children:"External: a Vault Agent Injector server that depends on an external Vault server"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"use-cases",children:"Use cases"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Running a Vault Service:"})," The Vault server cluster can run directly on Kubernetes.\nThis can be used by applications running within Kubernetes as well as external to\nKubernetes, as long as they can communicate to the server via the network."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Accessing and Storing Secrets:"})," Applications using the Vault service running in\nKubernetes can access and store secrets from Vault using a number of different\n",(0,s.jsx)(n.a,{href:"/docs/secrets",children:"secret engines"})," and ",(0,s.jsx)(n.a,{href:"/docs/auth",children:"authentication methods"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Running a Highly Available Vault Service:"})," By using pod affinities, highly available\nbackend storage (such as Consul) and ",(0,s.jsx)(n.a,{href:"/docs/concepts/seal#auto-unseal",children:"auto-unseal"}),",\nVault can become a highly available service in Kubernetes."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Encryption as a Service:"})," Applications using the Vault service running in Kubernetes\ncan leverage the ",(0,s.jsx)(n.a,{href:"/docs/secrets/transit",children:"Transit secret engine"}),'\nas "encryption as a service". This allows applications to offload encryption needs\nto Vault before storing data at rest.']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Audit Logs for Vault:"})," Operators can choose to attach a persistent volume\nto the Vault cluster which can be used to ",(0,s.jsx)(n.a,{href:"/docs/audit",children:"store audit logs"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"And more!"})," Vault can run directly on Kubernetes, so in addition to the\nnative integrations provided by Vault itself, any other tool built for\nKubernetes can choose to leverage Vault."]}),"\n",(0,s.jsx)(n.h2,{id:"getting-started-with-vault-and-kubernetes",children:"Getting started with Vault and kubernetes"}),"\n",(0,s.jsx)(n.p,{children:"There are several ways to try Vault with Kubernetes in different environments."}),"\n",(0,s.jsx)(n.h3,{id:"guides",children:"Guides"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/tutorials/kubernetes/kubernetes-minikube-raft",children:"Vault Installation to Minikube via Helm with Integrated Storage"})," covers installing Vault locally using Minikube and the official Helm chart."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/tutorials/kubernetes/kubernetes-openshift",children:"Vault Installation to Red Hat OpenShift via Helm"})," covers installing Vault using Helm on Red Hat's OpenShift platform."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/tutorials/kubernetes/kubernetes-external-vault",children:"Integrate a Kubernetes Cluster with an External Vault"})," provides an example of making Vault accessible via a Kubernetes service and endpoint."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"/tutorials/kubernetes/kubernetes-raft-deployment-guide",children:"Vault on Kubernetes Deployment Guide"})," covers the steps required to install and configure a single HashiCorp Vault cluster."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"high-level-comparison-of-integrations",children:"High level comparison of integrations"}),"\n",(0,s.jsx)(n.p,{children:"There are currently 3 different integrations to help Kubernetes workloads seamlessly consume secrets from Vault, without the need to modify the application to interact directly with Vault. Each integration addresses slightly different use-cases. The following is a brief overview of the strengths of each integration."}),"\n",(0,s.jsx)(n.h4,{id:"agent-injector",children:"Agent injector"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No durable secret storage outside Vault. All secrets written to disk are in ephemeral in-memory volumes."}),"\n",(0,s.jsx)(n.li,{children:"No highly privileged service accounts required. All secrets are fetched with the pod's own service account without the need for any other service accounts to impersonate it."}),"\n",(0,s.jsx)(n.li,{children:"More mature solution, with proven production record and advanced features like templating,\nwider array of auth methods, etc."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"vault-secrets-operator",children:"Vault Secrets Operator"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"More native UX for app developers. Workloads can mount Kubernetes secrets without adding any Vault-specific configuration."}),"\n",(0,s.jsx)(n.li,{children:"Reduced load on Vault. Secrets are synced per CRD instead of per consuming pod."}),"\n",(0,s.jsx)(n.li,{children:"Better Vault secret availability. Kubernetes secrets act as a durable cluster-local cache of Vault secrets."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"vault-csi-provider",children:"Vault CSI provider"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The CSI driver that the provider is based on is vendor neutral."}),"\n",(0,s.jsx)(n.li,{children:"No durable secret storage outside Vault if the secret sync feature isn't used. All secrets written to disk are in ephemeral in-memory volumes."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/tutorials/kubernetes/kubernetes-security-concerns",children:"Vault on Kubernetes Security Considerations"})," provides recommendations specific to securely running Vault in a production Kubernetes environment."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);