"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5676],{38726:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var t=n(74848),a=n(28453);const l={description:"The `/sys/locked-users` endpoint is used to manage locked users in OpenBao."},r="/sys/locked-users",o={id:"system/user-lockout",title:"/sys/locked-users",description:"The `/sys/locked-users` endpoint is used to manage locked users in OpenBao.",source:"@site/content/api-docs/system/user-lockout.mdx",sourceDirName:"system",slug:"/system/user-lockout",permalink:"/api-docs/system/user-lockout",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/user-lockout.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/locked-users` endpoint is used to manage locked users in OpenBao."},sidebar:"api",previous:{title:"/sys/unseal",permalink:"/api-docs/system/unseal"},next:{title:"/sys/version-history",permalink:"/api-docs/system/version-history"}},i={},c=[{value:"List locked users",id:"list-locked-users",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Sample request with mount accessor",id:"sample-request-with-mount-accessor",level:3},{value:"Sample payload",id:"sample-payload",level:4},{value:"Sample request",id:"sample-request-1",level:4},{value:"Unlock user",id:"unlock-user",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-2",level:3}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"syslocked-users",children:(0,t.jsx)(s.code,{children:"/sys/locked-users"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"/sys/locked-users"})," endpoint is used to list and unlock locked users in OpenBao."]}),"\n",(0,t.jsxs)(s.p,{children:["Refer to the ",(0,t.jsx)(s.a,{href:"/docs/concepts/user-lockout",children:"user lockout"})," overview for more details about how OpenBao handles lockouts."]}),"\n",(0,t.jsx)(s.h2,{id:"list-locked-users",children:"List locked users"}),"\n",(0,t.jsx)(s.p,{children:"The list endpoint returns information on the users currently locked by OpenBao."}),"\n",(0,t.jsx)(s.p,{children:'The response will include all child namespaces of the namespace in which the\nrequest was made. If some namespace has subsequently been deleted, its path will\nbe listed as "deleted namespace :ID:." Deleted namespaces are reported only for\nqueries in the root namespace because the information about the namespace path\nis unknown. The response will be returned in the decreasing order of locked user\ncounts.'}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"GET"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/sys/locked-users"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"mount_accessor"})," ",(0,t.jsx)(s.code,{children:"(string, optional)"})," -  Specifies the identifier of the auth mount entry to which the user\nbelongs in the namespace in which the request was made. If no mount accessor is specified,\nthe response includes locked users in all child namespaces of the namespace in which the request was made."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/sys/locked-users\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n   "request_id":"26be5ab9-dcac-9237-ec12-269a8ca647d5",\n   "lease_id":"",\n   "renewable":false,\n   "lease_duration":0,\n   "data":{\n      "by_namespace":[\n         {\n            "namespace_id":"BzIex",\n            "namespace_path":"ns1/",\n            "counts": 3,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_79e2fe02",\n                  "counts":3,\n                  "alias_identifiers":[\n                      {"user3"},\n                      {"user4"},\n                      {"user5"},\n                  ]\n               },\n            ]\n         },\n         {\n            "namespace_id":"root",\n            "namespace_path":"",\n            "counts":2,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_837f35fc",\n                  "counts":2,\n                  "alias_identifiers":[\n                      {"user1"},\n                      {"user2"}\n                  ]\n               },\n            ]\n         },\n          {\n            "namespace_id":"v1lb9",\n            "namespace_path":"ns1/ns2/",\n            "counts":1,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_af8d1d32",\n                  "counts":1,\n                  "alias_identifiers":[\n                      {"user6"}\n                  ]\n               },\n            ]\n         }\n      ],\n      "total":6\n   },\n   "wrap_info":null,\n   "warnings":null,\n   "auth":null\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"For deleted namespaces, the response will look like:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n   "request_id":"26be5ab9-dcac-9237-ec12-269a8ca647d5",\n   "lease_id":"",\n   "renewable":false,\n   "lease_duration":0,\n   "data":{\n      "by_namespace":[\n         {\n            "namespace_id":"BzIex",\n            "namespace_path":"ns1/",\n            "counts": 3,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_79e2fe02",\n                  "counts":3,\n                  "alias_identifiers":[\n                      {"user3"},\n                      {"user4"},\n                      {"user5"},\n                  ]\n               },\n            ]\n         },\n         {\n            "namespace_id":"root",\n            "namespace_path":"",\n            "counts":2,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_837f35fc",\n                  "counts":2,\n                  "alias_identifiers":[\n                      {"user1"},\n                      {"user2"}\n                  ]\n               },\n            ]\n         },\n          {\n            "namespace_id":"v1lb9",\n            "namespace_path":"deleted namespace v1lb9",\n            "counts":1,\n            "mount_accessors":[\n               {\n                  "mount_accessor":"auth_userpass_af8d1d32",\n                  "counts":1,\n                  "alias_identifiers":[\n                      {"user6"}\n                  ]\n               },\n            ]\n         }\n      ],\n      "total":6\n   },\n   "wrap_info":null,\n   "warnings":null,\n   "auth":null\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-with-mount-accessor",children:"Sample request with mount accessor"}),"\n",(0,t.jsx)(s.h4,{id:"sample-payload",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "mount_accessor": "auth_userpass_af8d1d32"\n}\n'})}),"\n",(0,t.jsx)(s.h4,{id:"sample-request-1",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --data @payload.json \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/sys/locked-users\n'})}),"\n",(0,t.jsx)(s.h2,{id:"unlock-user",children:"Unlock user"}),"\n",(0,t.jsxs)(s.p,{children:["The unlock user endpoint frees a locked user with the provided ",(0,t.jsx)(s.code,{children:"mount_accessor"})," and ",(0,t.jsx)(s.code,{children:"alias_identifier"})," in the given namespace.\nThe unlock command is idempotent. Calls to the endpoint succeed even if the user matching the provided ",(0,t.jsx)(s.code,{children:"mount_accessor"})," and ",(0,t.jsx)(s.code,{children:"alias_identifier"})," is not currently locked."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/sys/locked-users/:mount_accessor/unlock/:alias-identifier"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"mount_accessor"})," ",(0,t.jsx)(s.code,{children:"(string, required)"})," - Specifies the identifier of the auth mount entry to which the user\nbelongs"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"alias_identifier"})," ",(0,t.jsx)(s.code,{children:"(string, required)"})," - The name of the alias (user). For example, if the alias\nbelongs to userpass backend, the name should be a valid username within userpass auth method. If the alias belongs\nto an approle auth method, the name should be a valid RoleID. If the alias belongs to an ldap auth method, the name\nshould be a valid username."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/sys/locked-users/auth_userpass_af8d1d32/unlock/bsmith\n'})})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var t=n(96540);const a={},l=t.createContext(a);function r(e){const s=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(l.Provider,{value:s},e.children)}}}]);