"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4504],{26432:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var n=i(74848),t=i(28453);const a={sidebar_label:"Overview",description:'The "pki" command groups subcommands for interacting with OpenBao\'s PKI\nsecrets engine.'},r="pki",c={id:"commands/pki/index",title:"pki",description:'The "pki" command groups subcommands for interacting with OpenBao\'s PKI\nsecrets engine.',source:"@site/content/docs/commands/pki/index.mdx",sourceDirName:"commands/pki",slug:"/commands/pki/",permalink:"/openbao/docs/commands/pki/",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/commands/pki/index.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Overview",description:'The "pki" command groups subcommands for interacting with OpenBao\'s PKI\nsecrets engine.'},sidebar:"docs",previous:{title:"path-help",permalink:"/openbao/docs/commands/path-help"},next:{title:"health-check",permalink:"/openbao/docs/commands/pki/health-check"}},o={},d=[{value:"Syntax",id:"syntax",level:2},{value:"Example health check",id:"example-health-check",level:2},{value:"Example verify sign",id:"example-verify-sign",level:2},{value:"Example list child issuers",id:"example-list-child-issuers",level:2},{value:"Example issue",id:"example-issue",level:2},{value:"Example reissue",id:"example-reissue",level:2}];function l(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"pki",children:"pki"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"pki"})," command groups subcommands for interacting with OpenBao's\n",(0,n.jsx)(s.a,{href:"/docs/secrets/pki",children:"PKI Secrets Engine"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"syntax",children:"Syntax"}),"\n",(0,n.jsx)(s.p,{children:"Option flags for a given subcommand are provided after the subcommand, but before the arguments."}),"\n",(0,n.jsx)(s.h2,{id:"example-health-check",children:"Example health check"}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.a,{href:"/docs/commands/pki/health-check",children:"health check"})," a mount, use the\n",(0,n.jsx)(s.code,{children:"bao pki health-check <mount>"})," command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"$ bao pki health-check pki\nca_validity_period\n------------------\nstatus    endpoint                                            message\n------    --------                                            -------\nok        /pki/issuer/da41ffb1-cc6d-5a5c-f147-e4d7beeb1b73    Issuer's validity (2032-12-17) is OK\n\n... more output elided ...\n"})}),"\n",(0,n.jsx)(s.h2,{id:"example-verify-sign",children:"Example verify sign"}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.a,{href:"/docs/commands/pki/verify-sign",children:"verify"})," the signature between two\nissuer certificates, use the ",(0,n.jsx)(s.code,{children:"bao pki verify-sign <parent> <child>"})," command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:"$ bao pki verify-sign pki_root/issuer/root pki_int/issuer/FirstDepartment\nissuer:pki_root/issuer/root\nissued:pki_int/issuer/FirstDepartment\n\nfield              value\n-----              -----\nsubject_match      true\npath_match         true\ntrust_match        true\nkey_id_match       true\nsignature_match    true\n"})}),"\n",(0,n.jsx)(s.h2,{id:"example-list-child-issuers",children:"Example list child issuers"}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.a,{href:"/docs/commands/pki/list-intermediates",children:"list intermediate"})," certificates\npotentially issued by a certificate inside OpenBao, use the\n",(0,n.jsx)(s.code,{children:"bao pki list-intermediates <parent>"})," command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:"$ bao pki list-intermediates /pki_root/issuer/default\nintermediate                                             match?\n------------                                             ------\npki_int_2/issuer/d4404ccc-3ad4-83a9-f5df-398637654b3b    true\npki_int_2/issuer/db0b0a6c-6641-ac15-363a-4e5261315581    true\npki_root/issuer/9464c4fe-e8a6-d96a-0566-021575e7382c     true\npki_int/issuer/2f958ec5-1838-336e-331b-07032379b958      true\npki_int/issuer/b8cc0b41-e0e9-1a92-12c4-6849c9d6f837      true\n"})}),"\n",(0,n.jsx)(s.h2,{id:"example-issue",children:"Example issue"}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.a,{href:"/docs/commands/pki/issue",children:"issue"})," a new issuer certificate, use the\n",(0,n.jsx)(s.code,{children:"bao pki issue <parent-certificate-path> <mount>"})," command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ bao pki issue -issuer_name="FirstDepartment" /pki_root/issuer/default /pki_int/ common_name="first-department.example.com"\nKey                               Value\n---                               -----\nca_chain                          [-----BEGIN CERTIFICATE-----\nMIIDsDCCApigAwIBAgIULEPuHTW7UDtAQg+qcc18osNWgZIwDQYJKoZIhvcNAQEL...\n'})}),"\n",(0,n.jsx)(s.h2,{id:"example-reissue",children:"Example reissue"}),"\n",(0,n.jsxs)(s.p,{children:["To ",(0,n.jsx)(s.a,{href:"/docs/commands/pki/reissue",children:"reissue"})," an issuer certificate, using the\nsame fields as an existing issuer template, use the\n",(0,n.jsx)(s.code,{children:"bao pki reissue <parent-certificate-path> <template> <mount>"})," command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ bao pki reissue -issuer_name="SecondDepartment" /pki_root/issuer/default /pki_int/issuer/FirstDepartment /pki_int_2/ common_name="second-department.example.com"\nKey                               Value\n---                               -----\nca_chain                          [-----BEGIN CERTIFICATE-----\nMIID0DCCArigAwIBAgIUdfRe05B5eRXsg3pvsJ/g94eYuWkwDQYJKoZIhvcNAQEL```\n'})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,s,i)=>{i.d(s,{R:()=>r,x:()=>c});var n=i(96540);const t={},a=n.createContext(t);function r(e){const s=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);