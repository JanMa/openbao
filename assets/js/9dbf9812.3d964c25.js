"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[458],{87670:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>h});var l=t(74848),n=t(28453);const r={description:"The `/sys/pprof` endpoint is used to query profiling information."},i="/sys/pprof",d={id:"system/pprof",title:"/sys/pprof",description:"The `/sys/pprof` endpoint is used to query profiling information.",source:"@site/content/api-docs/system/pprof.mdx",sourceDirName:"system",slug:"/system/pprof",permalink:"/openbao/api-docs/system/pprof",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/pprof.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/pprof` endpoint is used to query profiling information."},sidebar:"api",previous:{title:"/sys/policies/password/",permalink:"/openbao/api-docs/system/policies-password"},next:{title:"/sys/quotas/config",permalink:"/openbao/api-docs/system/quotas-config"}},c={},h=[{value:"Index",id:"index",level:2},{value:"Sample request",id:"sample-request",level:3},{value:"Allocs",id:"allocs",level:2},{value:"Sample request",id:"sample-request-1",level:3},{value:"Block",id:"block",level:2},{value:"Sample request",id:"sample-request-2",level:3},{value:"Cmdline",id:"cmdline",level:2},{value:"Sample request",id:"sample-request-3",level:3},{value:"Goroutine",id:"goroutine",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample request",id:"sample-request-4",level:3},{value:"Heap",id:"heap",level:2},{value:"Sample request",id:"sample-request-5",level:3},{value:"Mutex",id:"mutex",level:2},{value:"Sample request",id:"sample-request-6",level:3},{value:"Profile",id:"profile",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-7",level:3},{value:"Symbol",id:"symbol",level:2},{value:"Sample request",id:"sample-request-8",level:3},{value:"Threadcreate",id:"threadcreate",level:2},{value:"Sample request",id:"sample-request-9",level:3},{value:"Trace",id:"trace",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample request",id:"sample-request-10",level:3}];function a(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h1,{id:"syspprof",children:(0,l.jsx)(s.code,{children:"/sys/pprof"})}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"/sys/pprof"})," endpoint is used to query. The response returned by\nthese endpoints are equivalent to those returned by the ",(0,l.jsx)(s.code,{children:"http/pprof"}),"\npackage."]}),"\n",(0,l.jsx)(s.h2,{id:"index",children:"Index"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns an HTML page listing the available profiles."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/\n'})}),"\n",(0,l.jsx)(s.h2,{id:"allocs",children:"Allocs"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns a sampling of historical memory allocations over the life\nof the program."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/allocs"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/allocs\n'})}),"\n",(0,l.jsx)(s.h2,{id:"block",children:"Block"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns a sampling of goroutines involved in blocking on\nsynchronization primitives."}),"\n",(0,l.jsx)(s.p,{children:"It is included for completeness, but since OpenBao doesn't normally enable\ncollection of this data, it won't return anything useful with the standard\nOpenBao binary."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/block"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/block\n'})}),"\n",(0,l.jsx)(s.h2,{id:"cmdline",children:"Cmdline"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns the running program's command line, with arguments\nseparated by NUL bytes."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/cmdline"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/cmdline\n'})}),"\n",(0,l.jsx)(s.h2,{id:"goroutine",children:"Goroutine"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns stack traces of all current goroutines."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/goroutine"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"debug"})," ",(0,l.jsx)(s.code,{children:"(int: 0)"})," - Specifies special arguments for the collection.\nA value of ",(0,l.jsx)(s.code,{children:"2"})," results in the stack traces being returned as text\ninstead of the default pprof format."]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-4",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/goroutine\n'})}),"\n",(0,l.jsx)(s.h2,{id:"heap",children:"Heap"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns a sampling of memory allocations of live object."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/heap"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-5",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/heap\n'})}),"\n",(0,l.jsx)(s.h2,{id:"mutex",children:"Mutex"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns a sampling of goroutines holding contended mutexes."}),"\n",(0,l.jsx)(s.p,{children:"It is included for completeness, but since OpenBao doesn't normally enable\ncollection of this data, it won't return anything useful with the standard\nOpenBao binary."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/mutex"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-6",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/mutex\n'})}),"\n",(0,l.jsx)(s.h2,{id:"profile",children:"Profile"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns a pprof-formatted cpu profile payload. Profiling\nlasts for duration specified in seconds GET parameter, or for 30 seconds\nif not specified."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/profile"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"seconds"})," ",(0,l.jsx)(s.code,{children:"(int: 30)"})," - Specifies the duration to run the profiling\ncommand. This value is specified as a query parameter."]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-7",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/profile\n'})}),"\n",(0,l.jsx)(s.h2,{id:"symbol",children:"Symbol"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns the program counters listed in the request."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/symbol"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-8",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/symbol\n'})}),"\n",(0,l.jsx)(s.h2,{id:"threadcreate",children:"Threadcreate"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns stack traces of goroutines that led to the creation of\nnew OS threads."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/threadcreate"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-9",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/threadcreate\n'})}),"\n",(0,l.jsx)(s.h2,{id:"trace",children:"Trace"}),"\n",(0,l.jsx)(s.p,{children:"This endpoint returns the execution trace in binary form. Tracing lasts\nfor duration specified in seconds GET parameter, or for 1 second if not\nspecified."}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(s.tbody,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"GET"})}),(0,l.jsx)(s.td,{style:{textAlign:"left"},children:(0,l.jsx)(s.code,{children:"/sys/pprof/trace"})})]})})]}),"\n",(0,l.jsx)(s.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"seconds"})," ",(0,l.jsx)(s.code,{children:"(int: 1)"})," - Specifies the duration to run the tracing\ncommand. This value is specified as a query parameter."]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"sample-request-10",children:"Sample request"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/pprof/trace\n'})})]})}function o(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>d});var l=t(96540);const n={},r=l.createContext(n);function i(e){const s=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),l.createElement(r.Provider,{value:s},e.children)}}}]);