"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5040],{65750:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>r});var t=s(74848),a=s(28453);const i={description:"The '/sys/mfa/validate' endpoint focuses on validating login MFA requests. If validation succeeds, it returns an auth response which includes a client token."},l=void 0,d={id:"system/mfa-validate",title:"mfa-validate",description:"The '/sys/mfa/validate' endpoint focuses on validating login MFA requests. If validation succeeds, it returns an auth response which includes a client token.",source:"@site/content/api-docs/system/mfa-validate.mdx",sourceDirName:"system",slug:"/system/mfa-validate",permalink:"/openbao/api-docs/system/mfa-validate",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/mfa-validate.mdx",tags:[],version:"current",frontMatter:{description:"The '/sys/mfa/validate' endpoint focuses on validating login MFA requests. If validation succeeds, it returns an auth response which includes a client token."},sidebar:"api",previous:{title:"/sys/metrics",permalink:"/openbao/api-docs/system/metrics"},next:{title:"/sys/monitor",permalink:"/openbao/api-docs/system/monitor"}},o={},r=[{value:"Validate login MFA request",id:"validate-login-mfa-request",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample response",id:"sample-response",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"validate-login-mfa-request",children:"Validate login MFA request"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint validates a login request which is subject to MFA validation."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/sys/mfa/validate"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"mfa_request_id"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 A unique identification of an MFA restricted login request.\nThis can be found in the MFA requirement included in the auth response of the login request."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"mfa_payload"})," ",(0,t.jsx)(n.code,{children:"(map<string|[]string>: <required>)"})," - A map of login MFA methodIDs to passcode credentials.\nMFA methodIDs are UUID strings which are used as keys of the map. The values of the map are\nstring slices. In cases where an MFA method is configured not to use passcodes, the passcode remains an empty string."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "mfa_request_id": "5879c74a-1418-1948-7be9-97b209d693a7",\n  "mfa_payload": {\n      "d16fd3c2-50de-0b9b-eed3-0301dadeca10": ["910201"]\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["It is also possible to use an MFA method name as the key to the ",(0,t.jsx)(n.code,{children:"mfa_payload"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "mfa_request_id": "5879c74a-1418-1948-7be9-97b209d693a7",\n  "mfa_payload": {\n      "sample_mfa_method_name": ["passcode=910201"]\n  }\n}\n\n### Sample request\n\n```shell-session\n$ curl \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/mfa/validate\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,t.jsx)(n.p,{children:"In cases where MFA validation fails, a 403 status code is returned with\nthe details about the error.\nIf MFA validation succeeds, the response is identical to a successful\nlogin request which contains a client token and its accessor."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "request_id": "7e7dec1d-311a-ecbd-4dd0-ff12a5e38959",\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": null,\n  "warnings": null,\n  "auth": {\n    "client_token": "hvs.CAESIKZJNqQbG9E9cQGPXh68NWxi3xp7yPa1Z1RWv1P9UyHVGh4KHGh2cy5GUmYzTzdJOWhIZGFNSm5jdTBsSVNFSTk",\n    "accessor": "3fBgbEmHyA5IWABmVEjqManI",\n    "policies": [\n      "default"\n    ],\n    "token_policies": [\n      "default"\n    ],\n    "identity_policies": null,\n    "metadata": {\n      "username": "alice"\n    },\n    "orphan": true,\n    "entity_id": "caeac75b-dbfe-58be-e3fc-957549b7292e",\n    "lease_duration": 2764800,\n    "renewable": true,\n    "mfa_requirement": null\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var t=s(96540);const a={},i=t.createContext(a);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);