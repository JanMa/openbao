"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8429],{57779:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var t=s(74848),i=s(28453);const r={sidebar_label:"FAQ",description:"An FAQ page to communicate frequently asked questions concerning feature deprecations."},a="Feature deprecation FAQ",o={id:"deprecation/faq",title:"Feature deprecation FAQ",description:"An FAQ page to communicate frequently asked questions concerning feature deprecations.",source:"@site/content/docs/deprecation/faq.mdx",sourceDirName:"deprecation",slug:"/deprecation/faq",permalink:"/docs/deprecation/faq",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/deprecation/faq.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"FAQ",description:"An FAQ page to communicate frequently asked questions concerning feature deprecations."},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/deprecation/"},next:{title:"Overview",permalink:"/docs/policies/"}},d={},l=[{value:"Q: what is the impact of removing support for x.509 certificates with signatures that use SHA-1?",id:"q-what-is-the-impact-of-removing-support-for-x509-certificates-with-signatures-that-use-sha-1",level:3},{value:"Auth methods",id:"auth-methods",level:4},{value:"Database secrets engines",id:"database-secrets-engines",level:4},{value:"Secrets engines",id:"secrets-engines",level:4},{value:"Q: what are the phases of deprecation?",id:"q-what-are-the-phases-of-deprecation",level:3},{value:"Supported",id:"supported",level:4},{value:"Deprecated",id:"deprecated",level:4},{value:"Pending removal",id:"pending-removal",level:4},{value:"VAULT_ALLOW_PENDING_REMOVAL_MOUNTS",id:"vault_allow_pending_removal_mounts",level:5},{value:"Removed",id:"removed",level:4},{value:"Migration path",id:"migration-path",level:4}];function c(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"feature-deprecation-faq",children:"Feature deprecation FAQ"}),"\n",(0,t.jsxs)(n.p,{children:["This page provides frequently asked questions concerning decisions made about OpenBao feature deprecations. Please refer to the ",(0,t.jsx)(n.a,{href:"/docs/deprecation",children:"Feature Deprecation Notice and Plans"})," document for up-to-date information on OpenBao feature deprecations and notice."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#q-what-is-the-impact-of-removing-support-for-x-509-certificates-with-signatures-that-use-sha-1",children:"Q: What is the impact of removing support for X.509 certificates with signatures that use SHA-1?"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#q-what-are-the-phases-of-deprecation",children:"Q: What are the phases of deprecation?"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"q-what-is-the-impact-of-removing-support-for-x509-certificates-with-signatures-that-use-sha-1",children:"Q: what is the impact of removing support for x.509 certificates with signatures that use SHA-1?"}),"\n",(0,t.jsxs)(n.p,{children:["OpenBao is built with Go 1.21 or later.  The standard library in Go 1.18 and\nlater ",(0,t.jsx)(n.a,{href:"https://go.dev/doc/go1.18#sha1",children:"rejects X.509 signatures"})," that use a\nSHA-1 hash."]}),"\n",(0,t.jsxs)(n.p,{children:["If this issue impacts your usage of OpenBao, you can temporarily work around it by deploying OpenBao with the environment variable ",(0,t.jsx)(n.code,{children:"GODEBUG=x509sha1=1"})," set.\nThis workaround will fail in a future version of Go, however, the Go team has not said when they will remove this workaround."]}),"\n",(0,t.jsx)(n.p,{children:"If you want to check whether a certificate or CA contains a problematic signature, you can use the OpenSSL CLI:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"$ openssl x509 -text -noout -in somecert.pem | grep sha1\n\n    Signature Algorithm: sha1WithRSAEncryption\n    Signature Algorithm: sha1WithRSAEncryption\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Any signature algorithms that contain ",(0,t.jsx)(n.code,{children:"sha1"})," will be potentially problematic."]}),"\n",(0,t.jsx)(n.p,{children:"Here are the use cases that may still use certificates with SHA-1:"}),"\n",(0,t.jsx)(n.h4,{id:"auth-methods",children:"Auth methods"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/auth/kerberos",children:"Kerberos Auth Method"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/auth/kubernetes",children:"Kubernetes Auth Method"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/auth/ldap",children:"LDAP Auth Method"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/auth/jwt/",children:"JWT/OIDC Auth Method"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/auth/cert",children:"TLS Certificates Auth Method"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"database-secrets-engines",children:"Database secrets engines"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/databases/cassandra",children:"Cassandra Database Secrets Engine"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/databases/influxdb",children:"InfluxDB Database Secrets Engine"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/databases/mysql-maria",children:"MySQL/MariaDB Database Secrets Engine"})}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"secrets-engines",children:"Secrets engines"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/kubernetes",children:"Kubernetes Secrets Engine"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/ldap",children:"LDAP Secrets Engine"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/secrets/pki/",children:"PKI Secrets Engine"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"q-what-are-the-phases-of-deprecation",children:"Q: what are the phases of deprecation?"}),"\n",(0,t.jsx)(n.p,{children:"OpenBao implements a multi-phased approach to deprecation. The intent of this approach is to provide sufficient warning that a feature will be removed and safe handling of stored data when the associated feature has been removed."}),"\n",(0,t.jsxs)(n.p,{children:['The phases of deprecation are also known as "Deprecation Status". These statuses are currently reflected in builtin plugins and are exposed via the OpenBao ',(0,t.jsx)(n.code,{children:"auth"}),", ",(0,t.jsx)(n.code,{children:"secrets"}),", and ",(0,t.jsx)(n.code,{children:"plugins"})," CLI/API endpoints. For more information, refer to the corresponding documentation."]}),"\n",(0,t.jsxs)(n.p,{children:["The four phases of deprecation are: ",(0,t.jsx)(n.code,{children:"Supported"}),", ",(0,t.jsx)(n.code,{children:"Deprecated"}),", ",(0,t.jsx)(n.code,{children:"Pending Removal"}),", and ",(0,t.jsx)(n.code,{children:"Removed"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Deprecation Status currently only applies to builtin ",(0,t.jsx)(n.code,{children:"auth"})," and ",(0,t.jsx)(n.code,{children:"secrets"})," plugins. All external plugins will report a status of ",(0,t.jsx)(n.code,{children:"n/a"}),". This is expected behavior."]}),"\n",(0,t.jsx)(n.h4,{id:"supported",children:"Supported"}),"\n",(0,t.jsx)(n.p,{children:"This is the default status and reflects a feature which is still supported. There is no unique behavior or functionality associated with this status."}),"\n",(0,t.jsx)(n.h4,{id:"deprecated",children:"Deprecated"}),"\n",(0,t.jsxs)(n.p,{children:["This status reflects a feature which has been marked for deprecation in a later release of OpenBao. This is the first phase of the deprecation process. A status of ",(0,t.jsx)(n.code,{children:"Deprecated"})," has two effects:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["After an upgrade, any existing ",(0,t.jsx)(n.code,{children:"Deprecated"})," feature (builtin auth/secrets plugins enabled via CLI or API prior to upgrade) will log ",(0,t.jsx)(n.code,{children:"Warn"}),"-level messages on unseal."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["All new usage of ",(0,t.jsx)(n.code,{children:"Deprecated"})," features will log ",(0,t.jsx)(n.code,{children:"Warn"}),"-level messages."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["All ",(0,t.jsx)(n.code,{children:"POST/GET/LIST"})," endpoints associated with this feature will return ",(0,t.jsx)(n.code,{children:"warnings"})," in response data."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"pending-removal",children:"Pending removal"}),"\n",(0,t.jsx)(n.p,{children:"This status reflects a feature which has been officially deprecated in this release of OpenBao. This is the first phase in the process that fundamentally alters the behavior of OpenBao. The effects are two-fold:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["After an upgrade, any existing ",(0,t.jsx)(n.code,{children:"Pending Removal"})," feature (builtin auth/secrets plugins enabled via CLI or API prior to upgrade) will log ",(0,t.jsx)(n.code,{children:"Error"}),"-level messages to the OpenBao log and cause an immediate shutdown of the OpenBao core."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Any new ",(0,t.jsx)(n.code,{children:"Pending Removal"})," will fail and log ",(0,t.jsx)(n.code,{children:"Error"}),"-level messages to the OpenBao log and CLI/API."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"vault_allow_pending_removal_mounts",children:"VAULT_ALLOW_PENDING_REMOVAL_MOUNTS"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Pending Removal"})," behavior may be overriden using a new environment variable: ",(0,t.jsx)(n.a,{href:"/docs/commands/server#vault_allow_pending_removal_mounts",children:(0,t.jsx)(n.code,{children:"VAULT_ALLOW_PENDING_REMOVAL_MOUNTS"})}),". This environment variable effectively allows all ",(0,t.jsx)(n.code,{children:"Pending Removal"})," features to be treated as ",(0,t.jsx)(n.code,{children:"Deprecated"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"removed",children:"Removed"}),"\n",(0,t.jsxs)(n.p,{children:["This status reflects a feature which has been officially removed from OpenBao. ",(0,t.jsx)(n.code,{children:"Removed"})," is the last phase of the deprecation process. During this phase, code for this feature no longer exists within OpenBao."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["After an upgrade, any existing ",(0,t.jsx)(n.code,{children:"Removed"})," feature will log ",(0,t.jsx)(n.code,{children:"Error"}),"-level messages to the OpenBao log and cause an immediate shutdown of the OpenBao core."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Any new ",(0,t.jsx)(n.code,{children:"Removed"})," features will fail and log ",(0,t.jsx)(n.code,{children:"Error"}),"-level messages to the OpenBao log and CLI/API."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"migration-path",children:"Migration path"}),"\n",(0,t.jsxs)(n.p,{children:["In order to successfully upgrade, use of the ",(0,t.jsx)(n.code,{children:"Removed"})," feature must be discontinued. To accomplish this:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Downgrade OpenBao to a previous version."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Replace any ",(0,t.jsx)(n.code,{children:"Removed"})," or ",(0,t.jsx)(n.code,{children:"Pending Removal"})," feature with the ",(0,t.jsx)(n.a,{href:"#q-what-should-i-do-if-i-use-mount-filters-appid-or-any-of-the-standalone-db-engines",children:"preferred alternative feature"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Upgrade to latest desired version."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var t=s(96540);const i={},r=t.createContext(i);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);