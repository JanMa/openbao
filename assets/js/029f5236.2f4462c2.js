"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5750],{98471:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>t});var s=i(74848),l=i(28453);const o={sidebar_label:"AliCloud KMS",description:"The AliCloud KMS seal configures OpenBao to use AliCloud KMS as the seal wrapping\nmechanism."},a="alicloudkms seal",r={id:"configuration/seal/alicloudkms",title:"alicloudkms seal",description:"The AliCloud KMS seal configures OpenBao to use AliCloud KMS as the seal wrapping\nmechanism.",source:"@site/content/docs/configuration/seal/alicloudkms.mdx",sourceDirName:"configuration/seal",slug:"/configuration/seal/alicloudkms",permalink:"/docs/configuration/seal/alicloudkms",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/configuration/seal/alicloudkms.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"AliCloud KMS",description:"The AliCloud KMS seal configures OpenBao to use AliCloud KMS as the seal wrapping\nmechanism."},sidebar:"docs",previous:{title:"Overview",permalink:"/docs/configuration/seal/"},next:{title:"AWS KMS",permalink:"/docs/configuration/seal/awskms"}},c={},t=[{value:"<code>alicloudkms</code> example",id:"alicloudkms-example",level:2},{value:"<code>alicloudkms</code> parameters",id:"alicloudkms-parameters",level:2},{value:"Authentication",id:"authentication",level:2},{value:"<code>alicloudkms</code> environment variables",id:"alicloudkms-environment-variables",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"alicloudkms-seal",children:[(0,s.jsx)(n.code,{children:"alicloudkms"})," seal"]}),"\n",(0,s.jsx)(n.p,{children:"The AliCloud KMS seal configures OpenBao to use AliCloud KMS as the seal wrapping mechanism.\nThe AliCloud KMS seal is activated by one of the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The presence of a ",(0,s.jsx)(n.code,{children:'seal "alicloudkms"'})," block in OpenBao's configuration file."]}),"\n",(0,s.jsxs)(n.li,{children:["The presence of the environment variable ",(0,s.jsx)(n.code,{children:"VAULT_SEAL_TYPE"})," set to ",(0,s.jsx)(n.code,{children:"alicloudkms"}),". If\nenabling via environment variable, all other required values specific to AliCloud\nKMS (i.e. ",(0,s.jsx)(n.code,{children:"VAULT_ALICLOUDKMS_SEAL_KEY_ID"}),") must be also supplied, as well as all\nother AliCloud-related environment variables that lends to successful\nauthentication."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"alicloudkms-example",children:[(0,s.jsx)(n.code,{children:"alicloudkms"})," example"]}),"\n",(0,s.jsx)(n.p,{children:"This example shows configuring AliCloud KMS seal through the OpenBao configuration file\nby providing all the required values:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'seal "alicloudkms" {\n  region     = "us-east-1"\n  access_key = "0wNEpMMlzy7szvai"\n  secret_key = "PupkTg8jdmau1cXxYacgE736PJj4cA"\n  kms_key_id = "08c33a6f-4e0a-4a1b-a3fa-7ddfa1d4fb73"\n}\n'})}),"\n",(0,s.jsxs)(n.h2,{id:"alicloudkms-parameters",children:[(0,s.jsx)(n.code,{children:"alicloudkms"})," parameters"]}),"\n",(0,s.jsxs)(n.p,{children:["These parameters apply to the ",(0,s.jsx)(n.code,{children:"seal"})," stanza in the OpenBao configuration file:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"region"})," ",(0,s.jsx)(n.code,{children:'(string: <required> "us-east-1")'}),": The AliCloud region where the encryption key\nlives. May also be specified by the ",(0,s.jsx)(n.code,{children:"ALICLOUD_REGION"}),"\nenvironment variable."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"domain"})," ",(0,s.jsx)(n.code,{children:'(string: "kms.us-east-1.aliyuncs.com")'}),": If set, overrides the endpoint\nAliCloud would normally use for KMS for a particular region. May also be specified\nby the ",(0,s.jsx)(n.code,{children:"ALICLOUD_DOMAIN"})," environment variable."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"access_key"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"}),": The AliCloud access key ID to use. May also be\nspecified by the ",(0,s.jsx)(n.code,{children:"ALICLOUD_ACCESS_KEY"})," environment variable or as part of the\nAliCloud profile from the AliCloud CLI or instance profile."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"secret_key"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"}),": The AliCloud secret access key to use. May\nalso be specified by the ",(0,s.jsx)(n.code,{children:"ALICLOUD_SECRET_KEY"})," environment variable or as\npart of the AliCloud profile from the AliCloud CLI or instance profile."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"kms_key_id"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"}),": The AliCloud KMS key ID to use for encryption\nand decryption. May also be specified by the ",(0,s.jsx)(n.code,{children:"VAULT_ALICLOUDKMS_SEAL_KEY_ID"}),"\nenvironment variable."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"disabled"})," ",(0,s.jsx)(n.code,{children:'(string: "")'}),": Set this to ",(0,s.jsx)(n.code,{children:"true"})," if OpenBao is migrating from an auto seal configuration. Otherwise, set to ",(0,s.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Refer to the ",(0,s.jsx)(n.a,{href:"/docs/concepts/seal#seal-migration",children:"Seal Migration"})," documentation for more information about the seal migration process."]}),"\n",(0,s.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)(n.p,{children:"Authentication-related values must be provided, either as environment\nvariables or as configuration parameters."}),"\n",(0,s.jsxs)(n.p,{children:["~> ",(0,s.jsx)(n.strong,{children:"Note:"})," Although the configuration file allows you to pass in\n",(0,s.jsx)(n.code,{children:"ALICLOUD_ACCESS_KEY"})," and ",(0,s.jsx)(n.code,{children:"ALICLOUD_SECRET_KEY"})," as part of the seal's parameters, it\nis ",(0,s.jsx)(n.em,{children:"strongly"})," recommended to set these values via environment variables."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"AliCloud authentication values:\n\n* `ALICLOUD_REGION`\n* `ALICLOUD_ACCESS_KEY`\n* `ALICLOUD_SECRET_KEY`\n"})}),"\n",(0,s.jsx)(n.p,{children:"Note: The client uses the official AliCloud SDK and will use environment credentials,\nthe specified credentials, or RAM role credentials in that order."}),"\n",(0,s.jsxs)(n.h2,{id:"alicloudkms-environment-variables",children:[(0,s.jsx)(n.code,{children:"alicloudkms"})," environment variables"]}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, the AliCloud KMS seal can be activated by providing the following\nenvironment variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"OpenBao Seal specific values:\n\n* `VAULT_SEAL_TYPE`\n* `VAULT_ALICLOUDKMS_SEAL_KEY_ID`\n"})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>r});var s=i(96540);const l={},o=s.createContext(l);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);