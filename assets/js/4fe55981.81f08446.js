"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[532],{33060:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var t=n(74848),r=n(28453);const i={layout:"api",page_title:"KV - Secrets Engines - HTTP API",description:"This is the API documentation for the OpenBao KV secrets engine, version 2."},l="KV secrets engine - version 2 (API)",d={id:"secret/kv/kv-v2",title:"KV secrets engine - version 2 (API)",description:"This is the API documentation for the OpenBao KV secrets engine, version 2.",source:"@site/content/api-docs/secret/kv/kv-v2.mdx",sourceDirName:"secret/kv",slug:"/secret/kv/kv-v2",permalink:"/openbao/api-docs/secret/kv/kv-v2",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/kv/kv-v2.mdx",tags:[],version:"current",frontMatter:{layout:"api",page_title:"KV - Secrets Engines - HTTP API",description:"This is the API documentation for the OpenBao KV secrets engine, version 2."},sidebar:"apiSidebar",previous:{title:"KV secrets engine - version 1 (API)",permalink:"/openbao/api-docs/secret/kv/kv-v1"},next:{title:"LDAP secrets engine (API)",permalink:"/openbao/api-docs/secret/ldap"}},a={},c=[{value:"Configure the KV engine",id:"configure-the-kv-engine",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Read KV engine configuration",id:"read-kv-engine-configuration",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Read secret version",id:"read-secret-version",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"Sample response",id:"sample-response-1",level:3},{value:"Create/Update secret",id:"createupdate-secret",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Sample payload",id:"sample-payload-1",level:3},{value:"Sample request",id:"sample-request-3",level:3},{value:"Sample response",id:"sample-response-2",level:3},{value:"Patch secret",id:"patch-secret",level:2},{value:"Parameters",id:"parameters-4",level:3},{value:"Sample payload",id:"sample-payload-2",level:3},{value:"Sample request",id:"sample-request-4",level:3},{value:"Sample response",id:"sample-response-3",level:3},{value:"Read secret subkeys",id:"read-secret-subkeys",level:2},{value:"Parameters",id:"parameters-5",level:3},{value:"Sample request",id:"sample-request-5",level:3},{value:"Sample secret data",id:"sample-secret-data",level:3},{value:"Sample response",id:"sample-response-4",level:3},{value:"Delete latest version of secret",id:"delete-latest-version-of-secret",level:2},{value:"Parameters",id:"parameters-6",level:3},{value:"Sample request",id:"sample-request-6",level:3},{value:"Delete secret versions",id:"delete-secret-versions",level:2},{value:"Parameters",id:"parameters-7",level:3},{value:"Sample payload",id:"sample-payload-3",level:3},{value:"Sample request",id:"sample-request-7",level:3},{value:"Undelete secret versions",id:"undelete-secret-versions",level:2},{value:"Parameters",id:"parameters-8",level:3},{value:"Sample payload",id:"sample-payload-4",level:3},{value:"Sample request",id:"sample-request-8",level:3},{value:"Destroy secret versions",id:"destroy-secret-versions",level:2},{value:"Parameters",id:"parameters-9",level:3},{value:"Sample payload",id:"sample-payload-5",level:3},{value:"Sample request",id:"sample-request-9",level:3},{value:"List secrets",id:"list-secrets",level:2},{value:"Parameters",id:"parameters-10",level:3},{value:"Sample request",id:"sample-request-10",level:3},{value:"Sample response",id:"sample-response-5",level:3},{value:"Read secret metadata",id:"read-secret-metadata",level:2},{value:"Parameters",id:"parameters-11",level:3},{value:"Sample request",id:"sample-request-11",level:3},{value:"Sample response",id:"sample-response-6",level:3},{value:"Create/Update metadata",id:"createupdate-metadata",level:2},{value:"Parameters",id:"parameters-12",level:3},{value:"Sample payload",id:"sample-payload-6",level:3},{value:"Sample request",id:"sample-request-12",level:3},{value:"Patch metadata",id:"patch-metadata",level:2},{value:"Parameters",id:"parameters-13",level:3},{value:"Sample payload",id:"sample-payload-7",level:3},{value:"Sample request",id:"sample-request-13",level:3},{value:"Delete metadata and all versions",id:"delete-metadata-and-all-versions",level:2},{value:"Parameters",id:"parameters-14",level:3},{value:"Sample request",id:"sample-request-14",level:3}];function h(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"kv-secrets-engine---version-2-api",children:"KV secrets engine - version 2 (API)"}),"\n",(0,t.jsxs)(s.p,{children:["This is the API documentation for the OpenBao KV secrets engine while running in\nversioned mode. For general information about the usage and operation of the version 2\nKV secrets engine, please see the ",(0,t.jsx)(s.a,{href:"/docs/secrets/kv/kv-v2",children:"OpenBao KV documentation"}),".\nFor information about the differences between KV version 1 and version 2, please ",(0,t.jsx)(s.a,{href:"/docs/secrets/kv",children:"see the KV overview\ndocumentation"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"configure-the-kv-engine",children:"Configure the KV engine"}),"\n",(0,t.jsx)(s.p,{children:"This path configures backend level settings that are applied to every key in the\nkey-value store."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/config"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount to config,\nsuch as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"max_versions"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," \u2013 The number of versions to keep per key. This value\napplies to all keys, but a key's metadata setting can overwrite this value.\nOnce a key has more than the configured allowed versions, the oldest version\nwill be permanently deleted. When 0 is used or the value is unset, OpenBao\nwill keep 10 versions."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"cas_required"})," ",(0,t.jsx)(s.code,{children:"(bool: false)"})," \u2013 If true all keys will require the cas\nparameter to be set on all write requests."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"delete_version_after"})," ",(0,t.jsx)(s.code,{children:'(string:"0s")'})," \u2013 If set, specifies the length\nof time before a version is deleted.\nAccepts ",(0,t.jsx)(s.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "max_versions": 5,\n  "cas_required": false,\n  "delete_version_after": "3h25m19s"\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/config\n'})}),"\n",(0,t.jsx)(s.h2,{id:"read-kv-engine-configuration",children:"Read KV engine configuration"}),"\n",(0,t.jsx)(s.p,{children:"This path retrieves the current configuration for the secrets backend at the\ngiven path."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"GET"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/config"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount to read the config,\nof, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    https://127.0.0.1:8200/v1/secret/config\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "cas_required": false,\n    "delete_version_after": "3h25m19s",\n    "max_versions": 0\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"read-secret-version",children:"Read secret version"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint retrieves the secret at the specified location. The metadata\nfields ",(0,t.jsx)(s.code,{children:"created_time"}),", ",(0,t.jsx)(s.code,{children:"deletion_time"}),", ",(0,t.jsx)(s.code,{children:"destroyed"}),", and ",(0,t.jsx)(s.code,{children:"version"})," are version\nspecific. The ",(0,t.jsx)(s.code,{children:"custom_metadata"})," field is part of the secret's key metadata and\nis included in the response whether or not the calling token has ",(0,t.jsx)(s.code,{children:"read"})," access to\nthe associated ",(0,t.jsx)(s.a,{href:"/api-docs/secret/kv/kv-v2#read-secret-metadata",children:"metadata endpoint"}),"."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"GET"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/data/:path?version=:version-number"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to read, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to read.\nThis is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"version"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," - Specifies the version to return. If not set the latest\nversion is returned."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    https://127.0.0.1:8200/v1/secret/data/my-secret?version=2\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "data": {\n      "foo": "bar"\n    },\n    "metadata": {\n      "created_time": "2018-03-22T02:24:06.945319214Z",\n      "custom_metadata": {\n        "owner": "jdoe",\n        "mission_critical": "false"\n      },\n      "deletion_time": "",\n      "destroyed": false,\n      "version": 2\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"createupdate-secret",children:"Create/Update secret"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint creates a new version of a secret at the specified location. If\nthe value does not yet exist, the calling token must have an ACL policy granting\nthe ",(0,t.jsx)(s.code,{children:"create"})," capability. If the value already exists, the calling token must\nhave an ACL policy granting the ",(0,t.jsx)(s.code,{children:"update"})," capability."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/data/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to update, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to update.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"options"})," ",(0,t.jsx)(s.code,{children:"(Map: <optional>)"})," \u2013 An object that holds option settings."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"cas"})," ",(0,t.jsx)(s.code,{children:"(int: <optional>)"})," - This flag is required if ",(0,t.jsx)(s.code,{children:"cas_required"})," is set\nto true on either the secret or the engine's config. If not set the write\nwill be allowed. In order for a write to be successful, ",(0,t.jsx)(s.code,{children:"cas"})," must be set to\nthe current version of the secret. If set to 0 a write will only be allowed if\nthe key doesn't exist as unset keys do not have any version information. Also\nremember that soft deletes do not remove any underlying version data from storage.\nIn order to write to a soft deleted key, the cas parameter must match the key's\ncurrent version."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"data"})," ",(0,t.jsx)(s.code,{children:"(Map: <required>)"})," \u2013\xa0The contents of the data map will be stored and\nreturned on read."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-1",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "options": {\n    "cas": 0\n  },\n  "data": {\n    "foo": "bar",\n    "zip": "zap"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/data/my-secret\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-2",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "created_time": "2018-03-22T02:36:43.986212308Z",\n    "custom_metadata": {\n      "owner": "jdoe",\n      "mission_critical": "false"\n    },\n    "deletion_time": "",\n    "destroyed": false,\n    "version": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"patch-secret",children:"Patch secret"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint provides the ability to patch an ",(0,t.jsx)(s.em,{children:"existing"})," secret at the specified\nlocation. The secret must neither be deleted nor destroyed. The calling token must\nhave an ACL policy granting the ",(0,t.jsx)(s.code,{children:"patch"})," capability. Currently, only\n",(0,t.jsx)(s.a,{href:"https://datatracker.ietf.org/doc/html/draft-ietf-appsawg-json-merge-patch-07",children:"JSON merge patch"}),"\nis supported and must be specified using a ",(0,t.jsx)(s.code,{children:"Content-Type"})," header value of\n",(0,t.jsx)(s.code,{children:"application/merge-patch+json"}),". A new version will be created upon successfully\napplying a patch with the provided data."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"PATCH"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/data/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-4",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to patch, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to patch.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"options"})," ",(0,t.jsx)(s.code,{children:"(Map: <optional>)"})," \u2013 An object that holds option settings."]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"cas"})," ",(0,t.jsx)(s.code,{children:"(int: <optional>)"})," - This flag is required if ",(0,t.jsx)(s.code,{children:"cas_required"})," is set to true on either\nthe secret or the engine's config. In order for a write to be successful, ",(0,t.jsx)(s.code,{children:"cas"})," must be set\nto the current version of the secret. A patch operation must be attempted on an existing\nkey, thus the provided ",(0,t.jsx)(s.code,{children:"cas"})," value must be greater than 0."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"data"})," ",(0,t.jsx)(s.code,{children:"(Map: <required>)"})," \u2013 The contents of the data map will be applied as a partial\nupdate to the existing entry via a JSON merge patch to the existing entry."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-2",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "options": {\n    "cas": 1\n  },\n  "data": {\n    "foo": "a",\n    "bar": {\n      "baz": "b"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-4",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --header "Content-Type: application/merge-patch+json"\n    --request PATCH \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/data/my-secret\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-3",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "created_time": "2021-09-10T15:26:08.684999Z",\n    "custom_metadata": {\n      "owner": "jdoe",\n      "mission_critical": "false"\n    },\n    "deletion_time": "",\n    "destroyed": false,\n    "version": 2\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"read-secret-subkeys",children:"Read secret subkeys"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint provides the subkeys within a secret entry that exists\nat the requested path. The secret entry at this path will be retrieved\nand stripped of all data by replacing underlying values of leaf keys\n(i.e. non-map keys or map keys with no underlying subkeys) with ",(0,t.jsx)(s.code,{children:"null"}),"."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"GET"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/subkeys/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-5",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to read, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to read.\nThis is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"version"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," - Specifies the version to return. If not set the latest\nversion is returned."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"depth"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," - Specifies the deepest nesting level to provide in the output.\nThe default value 0 will not impose any limit. If non-zero, keys that reside at the\nspecified ",(0,t.jsx)(s.code,{children:"depth"})," value will be artificially treated as leaves and will thus be ",(0,t.jsx)(s.code,{children:"null"}),"\neven if further underlying subkeys exist."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-5",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    https://127.0.0.1:8200/v1/secret/subkeys/my-secret?version=1\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-secret-data",children:"Sample secret data"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "foo": "abc",\n  "bar": {\n    "baz": "def"\n  },\n  "quux": {}\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-4",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "subkeys": {\n    "foo": null,\n    "bar": {\n      "baz": null\n    },\n    "quux": null\n  },\n  "metadata": {\n    "created_time": "2021-12-14T20:28:00.773477Z",\n    "custom_metadata": null,\n    "deletion_time": "",\n    "destroyed": false,\n    "version": 1\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"delete-latest-version-of-secret",children:"Delete latest version of secret"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint issues a soft delete of the secret's latest version at the\nspecified location. This marks the version as deleted and will stop it from\nbeing returned from reads, but the underlying data will not be removed. A\ndelete can be undone using the ",(0,t.jsx)(s.code,{children:"undelete"})," path."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"DELETE"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/data/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-6",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to delete, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to delete.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-6",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    https://127.0.0.1:8200/v1/secret/data/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"delete-secret-versions",children:"Delete secret versions"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint issues a soft delete of the specified versions of the secret. This\nmarks the versions as deleted and will stop them from being returned from reads,\nbut the underlying data will not be removed. A delete can be undone using the\n",(0,t.jsx)(s.code,{children:"undelete"})," path."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/delete/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-7",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to delete, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to delete.\nThis is specified as part of the URL."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"versions"})," ",(0,t.jsx)(s.code,{children:"([]int: <required>)"})," - The versions to be deleted. The versioned\ndata will not be deleted, but it will no longer be returned in normal get\nrequests."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-3",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "versions": [1, 2]\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-7",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/delete/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"undelete-secret-versions",children:"Undelete secret versions"}),"\n",(0,t.jsx)(s.p,{children:"Undeletes the data for the provided version and path in the key-value store.\nThis restores the data, allowing it to be returned on get requests."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/undelete/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-8",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to undelete, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to undelete.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"versions"})," ",(0,t.jsx)(s.code,{children:"([]int: <required>)"})," - The versions to undelete. The versions will\nbe restored and their data will be returned on normal get requests."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-4",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "versions": [1, 2]\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-8",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/undelete/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"destroy-secret-versions",children:"Destroy secret versions"}),"\n",(0,t.jsx)(s.p,{children:"Permanently removes the specified version data for the provided key and version\nnumbers from the key-value store."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"PUT"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/destroy/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-9",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to destroy, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to destroy.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"versions"})," ",(0,t.jsx)(s.code,{children:"([]int: <required>)"})," - The versions to destroy. Their data will be\npermanently deleted."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-5",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "versions": [1, 2]\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-9",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request PUT \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/destroy/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"list-secrets",children:"List secrets"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint returns a list of key names at the specified location. Folders are\nsuffixed with ",(0,t.jsx)(s.code,{children:"/"}),". The input must be a folder; list on a file will not return a\nvalue. Note that no policy-based filtering is performed on keys; do not encode\nsensitive information in key names. The values themselves are not accessible via\nthis command."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"LIST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/metadata/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-10",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to list, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secrets to list.\nThis is specified as part of the URL."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-10",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    https://127.0.0.1:8200/v1/secret/metadata/my-secret\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-5",children:"Sample response"}),"\n",(0,t.jsxs)(s.p,{children:["The example below shows output for a query path of ",(0,t.jsx)(s.code,{children:"secret/"})," when there are\nsecrets at ",(0,t.jsx)(s.code,{children:"secret/foo"})," and ",(0,t.jsx)(s.code,{children:"secret/foo/bar"}),"; note the difference in the two\nentries."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "keys": ["foo", "foo/"]\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"read-secret-metadata",children:"Read secret metadata"}),"\n",(0,t.jsx)(s.p,{children:"This endpoint retrieves the metadata and versions for the secret at the\nspecified path. Metadata is version-agnostic."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"GET"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/metadata/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-11",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to read, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to read.\nThis is specified as part of the URL."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-11",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    https://127.0.0.1:8200/v1/secret/metadata/my-secret\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response-6",children:"Sample response"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "data": {\n    "cas_required": false,\n    "created_time": "2018-03-22T02:24:06.945319214Z",\n    "current_version": 3,\n    "delete_version_after": "3h25m19s",\n    "max_versions": 0,\n    "oldest_version": 0,\n    "updated_time": "2018-03-22T02:36:43.986212308Z",\n    "custom_metadata": {\n      "foo": "abc",\n      "bar": "123",\n      "baz": "5c07d823-3810-48f6-a147-4c06b5219e84"\n    },\n    "versions": {\n      "1": {\n        "created_time": "2018-03-22T02:24:06.945319214Z",\n        "deletion_time": "",\n        "destroyed": false\n      },\n      "2": {\n        "created_time": "2018-03-22T02:36:33.954880664Z",\n        "deletion_time": "",\n        "destroyed": false\n      },\n      "3": {\n        "created_time": "2018-03-22T02:36:43.986212308Z",\n        "deletion_time": "",\n        "destroyed": false\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"createupdate-metadata",children:"Create/Update metadata"}),"\n",(0,t.jsx)(s.p,{children:"This endpoint creates or updates the metadata of a secret at the specified location.\nIt does not create a new version."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/metadata/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-12",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to update, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to update.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"max_versions"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," \u2013 The number of versions to keep per key. If not\nset, the backend\u2019s configured max version is used. Once a key has more than\nthe configured allowed versions, the oldest version will be permanently\ndeleted."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"cas_required"})," ",(0,t.jsx)(s.code,{children:"(bool: false)"})," \u2013 If true, the key will require the ",(0,t.jsx)(s.code,{children:"cas"}),"\nparameter to be set on all write requests. If false, the backend\u2019s\nconfiguration will be used."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"delete_version_after"})," ",(0,t.jsx)(s.code,{children:'(string:"0s")'})," \u2013 Set the ",(0,t.jsx)(s.code,{children:"delete_version_after"})," value\nto a duration to specify the ",(0,t.jsx)(s.code,{children:"deletion_time"})," for all new versions\nwritten to this key. If not set, the backend's ",(0,t.jsx)(s.code,{children:"delete_version_after"})," will be\nused. If the value is greater than the backend's ",(0,t.jsx)(s.code,{children:"delete_version_after"}),", the\nbackend's ",(0,t.jsx)(s.code,{children:"delete_version_after"})," will be used. Accepts ",(0,t.jsx)(s.a,{href:"/docs/concepts/duration-format",children:"duration format\nstrings"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"custom_metadata"})," ",(0,t.jsx)(s.code,{children:"(map<string|string>: nil)"})," - A map of arbitrary string to string valued user-provided metadata meant\nto describe the secret."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-6",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "max_versions": 5,\n  "cas_required": false,\n  "delete_version_after": "3h25m19s",\n  "custom_metadata": {\n    "foo": "abc",\n    "bar": "123",\n    "baz": "5c07d823-3810-48f6-a147-4c06b5219e84"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-12",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/metadata/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"patch-metadata",children:"Patch metadata"}),"\n",(0,t.jsxs)(s.p,{children:["This endpoint patches an existing metadata entry of a secret at the specified\nlocation. The calling token must have an ACL policy granting the ",(0,t.jsx)(s.code,{children:"patch"}),"\ncapability. Currently, only JSON merge patch is supported and must be specified\nusing a ",(0,t.jsx)(s.code,{children:"Content-Type"})," header value of ",(0,t.jsx)(s.code,{children:"application/merge-patch+json"}),". It does\nnot create a new version."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"PATCH"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/metadata/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-13",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to patch, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to patch.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"max_versions"})," ",(0,t.jsx)(s.code,{children:"(int: 0)"})," \u2013 The number of versions to keep per key. If not\nset, the backend\u2019s configured max version is used. Once a key has more than\nthe configured allowed versions, the oldest version will be permanently\ndeleted."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"cas_required"})," ",(0,t.jsx)(s.code,{children:"(bool: false)"})," \u2013 If true, the key will require the ",(0,t.jsx)(s.code,{children:"cas"}),"\nparameter to be set on all write requests. If false, the backend\u2019s\nconfiguration will be used."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"delete_version_after"})," ",(0,t.jsx)(s.code,{children:'(string:"0s")'})," \u2013 Set the ",(0,t.jsx)(s.code,{children:"delete_version_after"})," value\nto a duration to specify the ",(0,t.jsx)(s.code,{children:"deletion_time"})," for all new versions\nwritten to this key. If not set, the backend's ",(0,t.jsx)(s.code,{children:"delete_version_after"})," will be\nused. If the value is greater than the backend's ",(0,t.jsx)(s.code,{children:"delete_version_after"}),", the\nbackend's ",(0,t.jsx)(s.code,{children:"delete_version_after"})," will be used. Accepts ",(0,t.jsx)(s.a,{href:"/docs/concepts/duration-format",children:"duration format\nstrings"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"custom_metadata"})," ",(0,t.jsx)(s.code,{children:"(map<string|string>: nil)"})," - A map of arbitrary string to string valued user-provided metadata meant\nto describe the secret."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload-7",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "max_versions": 5,\n  "custom_metadata": {\n    "bar": "123"\n  }\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-13",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --header "Content-Type: application/merge-patch+json"\n    --request PATCH \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/metadata/my-secret\n'})}),"\n",(0,t.jsx)(s.h2,{id:"delete-metadata-and-all-versions",children:"Delete metadata and all versions"}),"\n",(0,t.jsx)(s.p,{children:"This endpoint permanently deletes the key metadata and all version data for the\nspecified key. All version history will be removed."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"DELETE"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/:secret-mount-path/metadata/:path"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters-14",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"secret-mount-path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," - The path to the KV mount containing\nthe secret to delete, such as ",(0,t.jsx)(s.code,{children:"secret"}),". This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"path"})," ",(0,t.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to delete.\nThis is specified as part of the URL."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-request-14",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    https://127.0.0.1:8200/v1/secret/metadata/my-secret\n'})})]})}function o(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var t=n(96540);const r={},i=t.createContext(r);function l(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);