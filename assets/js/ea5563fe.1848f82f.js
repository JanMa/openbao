"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6645],{92619:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var n=t(74848),i=t(28453);const r={sidebar_label:"K/V Version 1",description:"This is the API documentation for the OpenBao KV secrets engine, version 1."},l="KV secrets engine - version 1 (API)",a={id:"secret/kv/kv-v1",title:"KV secrets engine - version 1 (API)",description:"This is the API documentation for the OpenBao KV secrets engine, version 1.",source:"@site/content/api-docs/secret/kv/kv-v1.mdx",sourceDirName:"secret/kv",slug:"/secret/kv/kv-v1",permalink:"/openbao/api-docs/secret/kv/kv-v1",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/kv/kv-v1.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"K/V Version 1",description:"This is the API documentation for the OpenBao KV secrets engine, version 1."},sidebar:"api",previous:{title:"Overview",permalink:"/openbao/api-docs/secret/kv/"},next:{title:"K/V Version 2",permalink:"/openbao/api-docs/secret/kv/kv-v2"}},d={},c=[{value:"Read secret",id:"read-secret",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"List secrets",id:"list-secrets",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response-1",level:3},{value:"Create/Update secret",id:"createupdate-secret",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"Delete secret",id:"delete-secret",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Sample request",id:"sample-request-3",level:3}];function o(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"kv-secrets-engine---version-1-api",children:"KV secrets engine - version 1 (API)"}),"\n",(0,n.jsxs)(s.p,{children:["This is the API documentation for the OpenBao KV secrets engine. For general\ninformation about the usage and operation of the version 1 KV secrets engine, please\nsee the ",(0,n.jsx)(s.a,{href:"/docs/secrets/kv/kv-v1",children:"OpenBao KV documentation"}),". For information\nabout the differences between KV version 1 and version 2, please ",(0,n.jsx)(s.a,{href:"/docs/secrets/kv",children:"see the KV overview\ndocumentation"}),"."]}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsxs)(s.p,{children:["Note: This documentation assumes the kv secrets engine is enabled at the\n",(0,n.jsx)(s.code,{children:"/secret"})," path in OpenBao. Since it is possible to enable secrets engines at any\nlocation, please update your API calls accordingly."]})}),"\n",(0,n.jsx)(s.h2,{id:"read-secret",children:"Read secret"}),"\n",(0,n.jsx)(s.p,{children:"This endpoint retrieves the secret at the specified location."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"GET"})}),(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"/secret/:path"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"path"})," ",(0,n.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to read.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    https://127.0.0.1:8200/v1/secret/my-secret\n'})}),"\n",(0,n.jsx)(s.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "foo": "bar",\n    "ttl": "1h"\n  },\n  "lease_duration": 3600,\n  "lease_id": "",\n  "renewable": false\n}\n'})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.em,{children:"Note"}),": the ",(0,n.jsx)(s.code,{children:"lease_duration"}),' field, which will be populated if a "ttl" field\nwas included in the data, is advisory. No lease is created. This is a way for\nwriters to indicate how often a given value should be re-read by the client.\nSee the ',(0,n.jsx)(s.a,{href:"/docs/secrets/kv/kv-v1#ttls",children:"OpenBao KV secrets engine documentation"}),"\nfor more details."]}),"\n",(0,n.jsx)(s.h2,{id:"list-secrets",children:"List secrets"}),"\n",(0,n.jsxs)(s.p,{children:["This endpoint returns a list of key names at the specified location. Folders are\nsuffixed with ",(0,n.jsx)(s.code,{children:"/"}),". The input must be a folder; list on a file will not return a\nvalue. Note that no policy-based filtering is performed on keys; do not encode\nsensitive information in key names. The values themselves are not accessible via\nthis API."]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"LIST"})}),(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"/secret/:path"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"path"})," ",(0,n.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secrets to list.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    https://127.0.0.1:8200/v1/secret/my-secret\n'})}),"\n",(0,n.jsx)(s.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,n.jsxs)(s.p,{children:["The example below shows output for a query path of ",(0,n.jsx)(s.code,{children:"secret/"})," when there are\nsecrets at ",(0,n.jsx)(s.code,{children:"secret/foo"})," and ",(0,n.jsx)(s.code,{children:"secret/foo/bar"}),"; note the difference in the two\nentries."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "keys": ["foo", "foo/"]\n  },\n  "lease_duration": 2764800,\n  "lease_id": "",\n  "renewable": false\n}\n'})}),"\n",(0,n.jsx)(s.h2,{id:"createupdate-secret",children:"Create/Update secret"}),"\n",(0,n.jsxs)(s.p,{children:["This endpoint stores a secret at the specified location. If the value does not\nyet exist, the calling token must have an ACL policy granting the ",(0,n.jsx)(s.code,{children:"create"}),"\ncapability. If the value already exists, the calling token must have an ACL\npolicy granting the ",(0,n.jsx)(s.code,{children:"update"})," capability."]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"POST"})}),(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"/secret/:path"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"path"})," ",(0,n.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secrets to\ncreate/update. This is specified as part of the URL."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:":key"})," ",(0,n.jsx)(s.code,{children:'(string: "")'})," \u2013\xa0Specifies a key in the payload, paired with an associated value, to\nbe held at the given location. Multiple key/value pairs can be specified, and\nall will be returned on a read operation. A key called ",(0,n.jsx)(s.code,{children:"ttl"})," will trigger\nsome special behavior. See the ",(0,n.jsx)(s.a,{href:"/docs/secrets/kv/kv-v1#ttls",children:"OpenBao KV secrets engine\ndocumentation"})," for details."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "foo": "bar",\n  "zip": "zap"\n}\n'})}),"\n",(0,n.jsx)(s.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    https://127.0.0.1:8200/v1/secret/my-secret\n'})}),"\n",(0,n.jsx)(s.h2,{id:"delete-secret",children:"Delete secret"}),"\n",(0,n.jsx)(s.p,{children:"This endpoint deletes the secret at the specified location."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"DELETE"})}),(0,n.jsx)(s.td,{style:{textAlign:"left"},children:(0,n.jsx)(s.code,{children:"/secret/:path"})})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"path"})," ",(0,n.jsx)(s.code,{children:"(string: <required>)"})," \u2013 Specifies the path of the secret to delete.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    https://127.0.0.1:8200/v1/secret/my-secret\n'})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>l,x:()=>a});var n=t(96540);const i={},r=n.createContext(i);function l(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);