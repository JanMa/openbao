"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7651],{99013:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});var l=s(74848),n=s(28453);const i={description:"The `/sys/quotas/rate-limit` endpoint is used to create, edit and delete rate limit quotas."},a="/sys/quotas/rate-limit",r={id:"system/rate-limit-quotas",title:"/sys/quotas/rate-limit",description:"The `/sys/quotas/rate-limit` endpoint is used to create, edit and delete rate limit quotas.",source:"@site/content/api-docs/system/rate-limit-quotas.mdx",sourceDirName:"system",slug:"/system/rate-limit-quotas",permalink:"/api-docs/system/rate-limit-quotas",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/rate-limit-quotas.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/quotas/rate-limit` endpoint is used to create, edit and delete rate limit quotas."},sidebar:"api",previous:{title:"/sys/quotas/config",permalink:"/api-docs/system/quotas-config"},next:{title:"/sys/raw",permalink:"/api-docs/system/raw"}},d={},o=[{value:"Create or update a rate limit quota",id:"create-or-update-a-rate-limit-quota",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Delete a rate limit quota",id:"delete-a-rate-limit-quota",level:2},{value:"Sample request",id:"sample-request-1",level:3},{value:"Get a rate limit quota",id:"get-a-rate-limit-quota",level:2},{value:"Sample request",id:"sample-request-2",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"List rate limit quotas",id:"list-rate-limit-quotas",level:2},{value:"Sample request",id:"sample-request-3",level:3},{value:"Sample response",id:"sample-response-1",level:3}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h1,{id:"sysquotasrate-limit",children:(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit"})}),"\n",(0,l.jsxs)(t.p,{children:["The ",(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit"})," endpoint is used to create, edit and delete rate limit quotas."]}),"\n",(0,l.jsx)(t.h2,{id:"create-or-update-a-rate-limit-quota",children:"Create or update a rate limit quota"}),"\n",(0,l.jsxs)(t.p,{children:["This endpoint is used to create a rate limit quota with an identifier, ",(0,l.jsx)(t.code,{children:"name"}),".\nA rate limit quota must include a ",(0,l.jsx)(t.code,{children:"rate"})," value with an optional ",(0,l.jsx)(t.code,{children:"path"})," that can\neither be a namespace or mount, and can optionally include a path suffix following\nthe mount to restrict more specific API paths."]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"POST"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit/:name"})})]})})]}),"\n",(0,l.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"name"})," ",(0,l.jsx)(t.code,{children:'(string: "")'})," - The name of the quota."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"path"})," ",(0,l.jsx)(t.code,{children:'(string: "")'})," - Path of the mount to apply the quota."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"rate"})," ",(0,l.jsx)(t.code,{children:"(float: 0.0)"})," - The maximum number of requests in a given interval to\nbe allowed by the quota rule. The ",(0,l.jsx)(t.code,{children:"rate"})," must be positive."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"interval"})," ",(0,l.jsx)(t.code,{children:'(string: "")'})," - The duration to enforce rate limiting for (default ",(0,l.jsx)(t.code,{children:'"1s"'}),")."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"block_interval"})," ",(0,l.jsx)(t.code,{children:'(string: "")'})," - If set, when a client reaches a rate limit\nthreshold, the client will be prohibited from any further requests until after\nthe 'block_interval' has elapsed."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.code,{children:"role"})," ",(0,l.jsx)(t.code,{children:'(string: "")'})," - If set on a quota where ",(0,l.jsx)(t.code,{children:"path"})," is set to an auth mount with a\nconcept of roles (such as ",(0,l.jsx)(t.code,{children:"/auth/approle/"}),"), this will make the quota restrict login\nrequests to that mount that are made with the specified role. The request will fail if\nthe auth mount does not have a concept of roles, or ",(0,l.jsx)(t.code,{children:"path"})," is not an auth mount."]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "path": "",\n  "rate": 897.3,\n  "interval": "2m",\n  "block_interval": "5m"\n}\n'})}),"\n",(0,l.jsx)(t.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request POST \\\n    --header "X-Vault-Token: ..." \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/quotas/rate-limit/global-rate-limiter\n'})}),"\n",(0,l.jsx)(t.h2,{id:"delete-a-rate-limit-quota",children:"Delete a rate limit quota"}),"\n",(0,l.jsxs)(t.p,{children:["A rate limit quota can be deleted by ",(0,l.jsx)(t.code,{children:"name"}),"."]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"DELETE"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit/:name"})})]})})]}),"\n",(0,l.jsx)(t.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request DELETE \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/quotas/rate-limit/global-rate-limiter\n'})}),"\n",(0,l.jsx)(t.h2,{id:"get-a-rate-limit-quota",children:"Get a rate limit quota"}),"\n",(0,l.jsxs)(t.p,{children:["A rate limit quota can be retrieved by ",(0,l.jsx)(t.code,{children:"name"}),"."]}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"GET"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit/:name"})})]})})]}),"\n",(0,l.jsx)(t.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request GET \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/quotas/rate-limit/global-rate-limiter\n'})}),"\n",(0,l.jsx)(t.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "request_id": "d0870811-455d-3dfd-459f-aee016e6fb68",\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": {\n    "block_interval": 300,\n    "interval": 2,\n    "name": "global-rate-limiter",\n    "path": "",\n    "rate": 897.3,\n    "role": "",\n    "type": "rate-limit"\n  },\n  "warnings": null\n}\n'})}),"\n",(0,l.jsx)(t.h2,{id:"list-rate-limit-quotas",children:"List rate limit quotas"}),"\n",(0,l.jsx)(t.p,{children:"This endpoint returns a list of all the rate limit quotas."}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"LIST"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"/sys/quotas/rate-limit"})})]})})]}),"\n",(0,l.jsx)(t.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --request LIST \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/quotas/rate-limit\n'})}),"\n",(0,l.jsx)(t.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "keys": ["global-rate-limiter", "kv-rate-limiter"]\n  },\n  "lease_duration": 0,\n  "lease_id": "",\n  "renewable": false,\n  "request_id": "ab633ee1-a692-ba03-083b-f1bd91c51c28",\n  "warnings": null,\n  "wrap_info": null\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>r});var l=s(96540);const n={},i=l.createContext(n);function a(e){const t=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),l.createElement(i.Provider,{value:t},e.children)}}}]);