"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2319],{86790:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var t=o(74848),r=o(28453);const s={layout:"docs",page_title:"operator generate-root - Command",description:'The "operator generate-root" command generates a new root token by combining a\nquorum of share holders.'},i="operator generate-root",a={id:"commands/operator/generate-root",title:"operator generate-root",description:'The "operator generate-root" command generates a new root token by combining a\nquorum of share holders.',source:"@site/content/docs/commands/operator/generate-root.mdx",sourceDirName:"commands/operator",slug:"/commands/operator/generate-root",permalink:"/openbao/docs/commands/operator/generate-root",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/commands/operator/generate-root.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"operator generate-root - Command",description:'The "operator generate-root" command generates a new root token by combining a\nquorum of share holders.'},sidebar:"tutorialSidebar",previous:{title:"operator diagnose",permalink:"/openbao/docs/commands/operator/diagnose"},next:{title:"operator init",permalink:"/openbao/docs/commands/operator/init"}},d={},l=[{value:"Examples",id:"examples",level:2},{value:"Usage",id:"usage",level:2},{value:"Output options",id:"output-options",level:3},{value:"Command options",id:"command-options",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"operator-generate-root",children:"operator generate-root"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"operator generate-root"})," command generates a new root token by combining a\nquorum of share holders. With the ",(0,t.jsx)(n.code,{children:"-dr-token"})," or ",(0,t.jsx)(n.code,{children:"-recovery-token"})," options,\nit can generate a DR operational token or a recovery token in the same way."]}),"\n",(0,t.jsx)(n.p,{children:"One of the following must be provided to start the root token generation:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["A base64-encoded one-time-password (OTP) provided via the ",(0,t.jsx)(n.code,{children:"-otp"})," flag. Use the\n",(0,t.jsx)(n.code,{children:"-generate-otp"})," flag to generate a usable value. The resulting token is XORed\nwith this value when it is returned. Use the ",(0,t.jsx)(n.code,{children:"-decode"})," flag to output the\nfinal value."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["A file containing a PGP key or a\n",(0,t.jsx)(n.a,{href:"/docs/concepts/pgp-gpg-keybase",children:"keybase"})," username in the ",(0,t.jsx)(n.code,{children:"-pgp-key"}),"\nflag. The resulting token is encrypted with this public key."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:'An unseal key may be provided directly on the command line as an argument to the\ncommand. If key is specified as "-", the command will read from stdin. If a TTY\nis available, the command will prompt for text.'}),"\n",(0,t.jsxs)(n.p,{children:["Please see the ",(0,t.jsx)(n.a,{href:"/tutorials/operations/generate-root",children:"generate root guide"})," for\nstep-by-step instructions."]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:"Generate an OTP code for the final token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:"$ bao operator generate-root -generate-otp\n"})}),"\n",(0,t.jsx)(n.p,{children:"Start a root token generation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ bao operator generate-root -init -otp="..."\n'})}),"\n",(0,t.jsx)(n.p,{children:"Enter an unseal key to progress root token generation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ bao operator generate-root -otp="..."\n'})}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["The following flags are available in addition to the ",(0,t.jsx)(n.a,{href:"/docs/commands",children:"standard set of\nflags"})," included on all commands."]}),"\n",(0,t.jsx)(n.h3,{id:"output-options",children:"Output options"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"-format"})," ",(0,t.jsx)(n.code,{children:'(string: "table")'}),' - Print the output in the given format. Valid\nformats are "table", "json", or "yaml". This can also be specified via the\n',(0,t.jsx)(n.code,{children:"VAULT_FORMAT"})," environment variable."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"command-options",children:"Command options"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-cancel"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"})," - Reset the root token generation progress. This\nwill discard any submitted unseal keys or configuration."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-decode"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - Decode and output the generated root token. This\noption requires the ",(0,t.jsx)(n.code,{children:"-otp"}),' flag be set to the OTP used during initialization.\nIf value is "-" then read the encoded token from stdin.']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-generate-otp"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"}),' - Generate and print a high-entropy\none-time-password (OTP) suitable for use with the "-init" flag.']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-init"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"})," - Start a root token generation. This can only be done\nif there is not currently one in progress."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-nonce"})," ",(0,t.jsx)(n.code,{children:'(string; "")'}),"- Nonce value provided at initialization. The same\nnonce value must be provided with each unseal key."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-otp"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - OTP code to use with ",(0,t.jsx)(n.code,{children:"-decode"})," or ",(0,t.jsx)(n.code,{children:"-init"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-pgp-key"})," ",(0,t.jsx)(n.code,{children:"(keybase or pgp)"}),"- Path to a file on disk containing a binary or\nbase64-encoded public PGP key. This can also be specified as a Keybase\nusername using the format ",(0,t.jsx)(n.code,{children:"keybase:<username>"}),". When supplied, the generated\nroot token will be encrypted and base64-encoded with the given public key."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-status"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"})," - Print the status of the current attempt without\nproviding an unseal key. The default is false."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-dr-token"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"})," - Generate DR operational token"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"-recovery-token"})," ",(0,t.jsx)(n.code,{children:"(bool: false)"})," - Generate recovery operational token"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var t=o(96540);const r={},s=t.createContext(r);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);