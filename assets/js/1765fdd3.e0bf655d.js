"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8745],{40740:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>d});var r=s(74848),t=s(28453);const c={layout:"docs",page_title:"Vault Secrets Operator Helm Chart Configuration",description:"Configuration for the Vault Secrets Operator Helm chart."},i="Vault Secrets Operator helm chart",l={id:"platform/k8s/vso/helm",title:"Vault Secrets Operator helm chart",description:"Configuration for the Vault Secrets Operator Helm chart.",source:"@site/content/docs/platform/k8s/vso/helm.mdx",sourceDirName:"platform/k8s/vso",slug:"/platform/k8s/vso/helm",permalink:"/openbao/docs/platform/k8s/vso/helm",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/platform/k8s/vso/helm.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"Vault Secrets Operator Helm Chart Configuration",description:"Configuration for the Vault Secrets Operator Helm chart."},sidebar:"docs",previous:{title:"Vault Secrets Operator examples",permalink:"/openbao/docs/platform/k8s/vso/examples"},next:{title:"Telemetry",permalink:"/openbao/docs/platform/k8s/vso/telemetry"}},o={},d=[{value:"Top-Level Stanzas",id:"top-level-stanzas",level:2},{value:"All Values",id:"all-values",level:2},{value:"controller ((#h-controller))",id:"controller-h-controller",level:3},{value:"metricsService ((#h-metricsservice))",id:"metricsservice-h-metricsservice",level:3},{value:"defaultVaultConnection ((#h-defaultvaultconnection))",id:"defaultvaultconnection-h-defaultvaultconnection",level:3},{value:"defaultAuthMethod ((#h-defaultauthmethod))",id:"defaultauthmethod-h-defaultauthmethod",level:3},{value:"telemetry ((#h-telemetry))",id:"telemetry-h-telemetry",level:3},{value:"tests ((#h-tests))",id:"tests-h-tests",level:3},{value:"Helm chart examples",id:"helm-chart-examples",level:2},{value:"Customizing the helm chart",id:"customizing-the-helm-chart",level:2}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"vault-secrets-operator-helm-chart",children:"Vault Secrets Operator helm chart"}),"\n",(0,r.jsxs)(n.p,{children:["The chart is customizable using\n",(0,r.jsx)(n.a,{href:"https://helm.sh/docs/intro/using_helm/#customizing-the-chart-before-installing",children:"Helm configuration values"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"top-level-stanzas",children:"Top-Level Stanzas"}),"\n",(0,r.jsx)(n.p,{children:"Use these links to navigate to a particular top-level stanza."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-controller",children:(0,r.jsx)(n.code,{children:"controller"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-metricsservice",children:(0,r.jsx)(n.code,{children:"metricsService"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-defaultvaultconnection",children:(0,r.jsx)(n.code,{children:"defaultVaultConnection"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-defaultauthmethod",children:(0,r.jsx)(n.code,{children:"defaultAuthMethod"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-telemetry",children:(0,r.jsx)(n.code,{children:"telemetry"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#h-tests",children:(0,r.jsx)(n.code,{children:"tests"})})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"all-values",children:"All Values"}),"\n",(0,r.jsx)(n.h3,{id:"controller-h-controller",children:"controller ((#h-controller))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"controller"})," ((#v-controller)) - Top level configuration for the vault secrets operator deployment.\nThis consists of a controller and a kube rbac proxy container."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"replicas"})," ((#v-controller-replicas)) (",(0,r.jsx)(n.code,{children:"integer: 1"}),") - Set the number of replicas for the operator."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"hostAliases"})," ((#v-controller-hostaliases)) (",(0,r.jsx)(n.code,{children:"array<map>"}),") - Host Aliases settings for vault-secrets-operator pod.\nThe value is an array of PodSpec HostAlias maps.\nref: ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/network/customize-hosts-file-for-pods/",children:"https://kubernetes.io/docs/tasks/network/customize-hosts-file-for-pods/"}),"\nExample:\nhostAliases:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["ip: 192.168.1.100\nhostnames:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"vault.example.com"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"nodeSelector"})," ((#v-controller-nodeselector)) (",(0,r.jsx)(n.code,{children:"map"}),") - nodeSelector labels for vault-secrets-operator pod assignment.\nref: ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector",children:"https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#nodeselector"}),"\nExample:\nnodeSelector:\nbeta.kubernetes.io/arch: amd64"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tolerations"})," ((#v-controller-tolerations)) (",(0,r.jsx)(n.code,{children:"array<map>"}),") - Toleration Settings for vault-secrets-operator pod.\nThe value is an array of PodSpec Toleration maps.\nref: ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/",children:"https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/"}),"\nExample:\ntolerations:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'key: "key1"\noperator: "Equal"\nvalue: "value1"\neffect: "NoSchedule"'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"affinity"})," ((#v-controller-affinity)) - Affinity settings for vault-secrets-operator pod.\nThe value is a map of PodSpec Affinity maps.\nref: ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity",children:"https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity"}),"\nExample:\naffinity:\nnodeAffinity:\nrequiredDuringSchedulingIgnoredDuringExecution:\nnodeSelectorTerms:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["matchExpressions:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["key: topology.kubernetes.io/zone\noperator: In\nvalues:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"antarctica-east1"}),"\n",(0,r.jsx)(n.li,{children:"antarctica-west1"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kubeRbacProxy"})," ((#v-controller-kuberbacproxy)) - Settings related to the kubeRbacProxy container. This container is an HTTP proxy for the\ncontroller manager which performs RBAC authorization against the Kubernetes API using SubjectAccessReviews."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"image"})," ((#v-controller-kuberbacproxy-image)) - Image sets the repo and tag of the kube-rbac-proxy image to use for the controller."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"repository"})," ((#v-controller-kuberbacproxy-image-repository)) (",(0,r.jsx)(n.code,{children:"string: gcr.io/kubebuilder/kube-rbac-proxy"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tag"})," ((#v-controller-kuberbacproxy-image-tag)) (",(0,r.jsx)(n.code,{children:"string: v0.14.1"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"resources"})," ((#v-controller-kuberbacproxy-resources)) (",(0,r.jsx)(n.code,{children:"map"}),") - Configures the default resources for the kube rbac proxy container.\nFor more information on configuring resources, see the K8s documentation:\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",children:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"limits"})," ((#v-controller-kuberbacproxy-resources-limits))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cpu"})," ((#v-controller-kuberbacproxy-resources-limits-cpu)) (",(0,r.jsx)(n.code,{children:"string: 500m"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"memory"})," ((#v-controller-kuberbacproxy-resources-limits-memory)) (",(0,r.jsx)(n.code,{children:"string: 128Mi"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"requests"})," ((#v-controller-kuberbacproxy-resources-requests))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cpu"})," ((#v-controller-kuberbacproxy-resources-requests-cpu)) (",(0,r.jsx)(n.code,{children:"string: 5m"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"memory"})," ((#v-controller-kuberbacproxy-resources-requests-memory)) (",(0,r.jsx)(n.code,{children:"string: 64Mi"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"imagePullSecrets"})," ((#v-controller-imagepullsecrets)) (",(0,r.jsx)(n.code,{children:"array<map>"}),") - Image pull secret to use for private container registry authentication which will be applied to the controllers\nservice account. Alternatively, the value may be specified as an array of strings.\nExample:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"imagePullSecrets:\n  - name: pull-secret-name-1\n  - name: pull-secret-name-2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Refer to ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/containers/images/#using-a-private-registry",children:"https://kubernetes.io/docs/concepts/containers/images/#using-a-private-registry"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"extraLabels"})," ((#v-controller-extralabels)) - Extra labels to attach to the deployment. This should be formatted as a YAML object (map)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"annotations"})," ((#v-controller-annotations)) - This value defines additional annotations for the deployment. This should be formatted as a YAML object (map)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"manager"})," ((#v-controller-manager)) - Settings related to the vault-secrets-operator container."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"image"})," ((#v-controller-manager-image)) - Image sets the repo and tag of the vault-secrets-operator image to use for the controller."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"repository"})," ((#v-controller-manager-image-repository)) (",(0,r.jsx)(n.code,{children:"string: hashicorp/vault-secrets-operator"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tag"})," ((#v-controller-manager-image-tag)) (",(0,r.jsx)(n.code,{children:"string: 0.3.1"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"clientCache"}),' ((#v-controller-manager-clientcache)) - Configures the client cache which is used by the controller to cache (and potentially persist) vault tokens that\nare the result of using the VaultAuthMethod. This enables re-use of Vault Tokens\nthroughout their TTLs as well as the ability to renew.\nPersistence is only useful in the context of Dynamic Secrets, so "none" is an okay default.']}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"persistenceModel"})," ((#v-controller-manager-clientcache-persistencemodel)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Defines the ",(0,r.jsx)(n.code,{children:"-client-cache-persistence-model"}),' which caches+persists vault tokens.\nValid values are:\n"none" - in-memory client cache is used, no tokens are persisted.\n"direct-unencrypted" - in-memory client cache is persisted, unencrypted. This is NOT recommended for any production workload.\n"direct-encrypted" - in-memory client cache is persisted encrypted using the Vault Transit engine.\nNote: It is strongly encouraged to not use the setting of "direct-unencrypted" in\nproduction due to the potential of vault tokens being leaked as they would then be stored\nin clear text.']}),"\n",(0,r.jsx)(n.p,{children:'default: "none"'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cacheSize"})," ((#v-controller-manager-clientcache-cachesize)) (",(0,r.jsx)(n.code,{children:'integer: ""'}),") - Defines the size of the in-memory LRU cache ",(0,r.jsx)(n.em,{children:"in entries"}),", that is used by the client cache controller.\nLarger numbers will increase memory usage by the controller, lower numbers will cause more frequent evictions\nof the client cache which can result in additional Vault client counts."]}),"\n",(0,r.jsx)(n.p,{children:"default: 10000"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"storageEncryption"})," ((#v-controller-manager-clientcache-storageencryption)) - StorageEncryption provides the necessary configuration to encrypt the client storage\ncache within Kubernetes objects using (required) Vault Transit Engine.\nThis should only be configured when client cache persistence with encryption is enabled and\nwill deploy an additional VaultAuthMethod to be used by the Vault Transit Engine.\nE.g. when ",(0,r.jsx)(n.code,{children:"controller.manager.clientCache.persistenceModel=direct-encrypted"}),"\nSupported Vault authentication methods for the Transit Auth method are: jwt, appRole,\naws, and kubernetes.\nTypically, there should only ever be one VaultAuth configured with\nStorageEncryption in the Cluster."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"enabled"})," ((#v-controller-manager-clientcache-storageencryption-enabled)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),") - toggles the deployment of the Transit VaultAuthMethod CR."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"vaultConnectionRef"})," ((#v-controller-manager-clientcache-storageencryption-vaultconnectionref)) (",(0,r.jsx)(n.code,{children:"string: default"}),") - Vault Connection Ref to be used by the Transit VaultAuthMethod.\nDefault setting will use the default VaultConnectionRef, which must also be configured."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"keyName"})," ((#v-controller-manager-clientcache-storageencryption-keyname)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - KeyName to use for encrypt/decrypt operations via Vault Transit."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"transitMount"})," ((#v-controller-manager-clientcache-storageencryption-transitmount)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Mount path for the Transit VaultAuthMethod."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"namespace"})," ((#v-controller-manager-clientcache-storageencryption-namespace)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault namespace for the Transit VaultAuthMethod CR."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"method"})," ((#v-controller-manager-clientcache-storageencryption-method)) (",(0,r.jsx)(n.code,{children:"string: kubernetes"}),") - Vault Auth method to be used with the Transit VaultAuthMethod CR."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"mount"})," ((#v-controller-manager-clientcache-storageencryption-mount)) (",(0,r.jsx)(n.code,{children:"string: kubernetes"}),") - Mount path for the Transit VaultAuthMethod."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kubernetes"})," ((#v-controller-manager-clientcache-storageencryption-kubernetes)) - Vault Kubernetes auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-controller-manager-clientcache-storageencryption-kubernetes-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif ",(0,r.jsx)(n.code,{children:"defaultAuthMethod.enabled=true"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceAccount"})," ((#v-controller-manager-clientcache-storageencryption-kubernetes-serviceaccount)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Kubernetes ServiceAccount associated with the Transit Vault Auth Role\nDefaults to using the Operator's service-account."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tokenAudiences"})," ((#v-controller-manager-clientcache-storageencryption-kubernetes-tokenaudiences)) (",(0,r.jsx)(n.code,{children:"array<string>: []"}),") - Token Audience should match the audience of the vault kubernetes auth role."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"jwt"})," ((#v-controller-manager-clientcache-storageencryption-jwt)) - Vault JWT auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-controller-manager-clientcache-storageencryption-jwt-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif using JWT for the Transit VaultAuthMethod."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-controller-manager-clientcache-storageencryption-jwt-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - One of the following is required prior to deploying the helm chart"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"K8s secret that contains the JWT"}),"\n",(0,r.jsx)(n.li,{children:"K8s service account if a service account JWT is used as a Vault JWT auth token and\nneeds generating by VSO."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Name of Kubernetes Secret that has the Vault JWT auth token.\nThe Kubernetes Secret must contain a key named ",(0,r.jsx)(n.code,{children:"jwt"})," which references the JWT token, and\nmust exist in the namespace of any consuming VaultSecret CR. This is a required field if\na JWT token is provided."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceAccount"})," ((#v-controller-manager-clientcache-storageencryption-jwt-serviceaccount)) (",(0,r.jsx)(n.code,{children:"string: default"}),") - Kubernetes ServiceAccount to generate a service account JWT"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tokenAudiences"})," ((#v-controller-manager-clientcache-storageencryption-jwt-tokenaudiences)) (",(0,r.jsx)(n.code,{children:"array<string>: []"}),") - Token Audience should match the bound_audiences or the ",(0,r.jsx)(n.code,{children:"aud"})," list in bound_claims if\napplicable of the Vault JWT auth role."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"appRole"})," ((#v-controller-manager-clientcache-storageencryption-approle)) - AppRole auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"roleId"})," ((#v-controller-manager-clientcache-storageencryption-approle-roleid)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - AppRole Role's RoleID to use for authenticating to Vault.\nThis is a required field when using appRole and must be setup in Vault prior to deploying\nthe helm chart."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-controller-manager-clientcache-storageencryption-approle-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Name of Kubernetes Secret that has the AppRole Role's SecretID used to authenticate with\nVault. The Kubernetes Secret must contain a key named ",(0,r.jsx)(n.code,{children:"id"})," which references the AppRole\nRole's SecretID, and must exist in the namespace of any consuming VaultSecret CR.\nThis is a required field when using appRole and must be setup in Vault prior to\ndeploying the helm chart."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"aws"})," ((#v-controller-manager-clientcache-storageencryption-aws)) - AWS auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-controller-manager-clientcache-storageencryption-aws-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif using the AWS for the Transit auth method."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"region"})," ((#v-controller-manager-clientcache-storageencryption-aws-region)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - AWS region to use for signing the authentication request\nOptional, but most commonly will be the EKS cluster region."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headerValue"})," ((#v-controller-manager-clientcache-storageencryption-aws-headervalue)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault header value to include in the STS signing request"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sessionName"})," ((#v-controller-manager-clientcache-storageencryption-aws-sessionname)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The role session name to use when creating a WebIdentity provider"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"stsEndpoint"})," ((#v-controller-manager-clientcache-storageencryption-aws-stsendpoint)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The STS endpoint to use; if not set will use the default"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"iamEndpoint"})," ((#v-controller-manager-clientcache-storageencryption-aws-iamendpoint)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The IAM endpoint to use; if not set will use the default"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-controller-manager-clientcache-storageencryption-aws-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The name of a Kubernetes Secret which holds credentials for AWS. Supported keys\ninclude ",(0,r.jsx)(n.code,{children:"access_key_id"}),", ",(0,r.jsx)(n.code,{children:"secret_access_key"}),", ",(0,r.jsx)(n.code,{children:"session_token"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"irsaServiceAccount"})," ((#v-controller-manager-clientcache-storageencryption-aws-irsaserviceaccount)) (",(0,r.jsx)(n.code,{children:'string: ""'}),') - Name of a Kubernetes service account that is configured with IAM Roles\nfor Service Accounts (IRSA). Should be annotated with "eks.amazonaws.com/role-arn".']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"params"})," ((#v-controller-manager-clientcache-storageencryption-params)) (",(0,r.jsx)(n.code,{children:"map"}),') - Params to use when authenticating to Vault using this auth method.\nparams:\nparam-something1: "foo"']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headers"})," ((#v-controller-manager-clientcache-storageencryption-headers)) (",(0,r.jsx)(n.code,{children:' map: ""'}),') - Headers to be included in all Vault requests.\nheaders:\nX-vault-something1: "foo"']}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"maxConcurrentReconciles"})," ((#v-controller-manager-maxconcurrentreconciles)) (",(0,r.jsx)(n.code,{children:'integer: ""'}),") - Defines the maximum number of concurrent reconciles by the controller.\nNOTE: Currently this is only used by the reconciliation logic of dynamic secrets."]}),"\n",(0,r.jsx)(n.p,{children:"default: 100"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"extraEnv"})," ((#v-controller-manager-extraenv)) (",(0,r.jsx)(n.code,{children:"array<map>"}),") - Defines additional environment variables to be added to the\nvault-secrets-opearator manager container.\nextraEnv:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["name: HTTP_PROXY\nvalue: ",(0,r.jsx)(n.a,{href:"http://proxy.example.com",children:"http://proxy.example.com"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"extraArgs"})," ((#v-controller-manager-extraargs)) (",(0,r.jsx)(n.code,{children:"array: []"}),") - Defines additional commandline arguments to be passed to the\nvault-secrets-operator manager container.\nextraArgs:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"-zap-log-level=5"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"resources"})," ((#v-controller-manager-resources)) (",(0,r.jsx)(n.code,{children:"map"}),") - Configures the default resources for the vault-secrets-operator container.\nFor more information on configuring resources, see the K8s documentation:\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",children:"https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"limits"})," ((#v-controller-manager-resources-limits))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cpu"})," ((#v-controller-manager-resources-limits-cpu)) (",(0,r.jsx)(n.code,{children:"string: 500m"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"memory"})," ((#v-controller-manager-resources-limits-memory)) (",(0,r.jsx)(n.code,{children:"string: 128Mi"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"requests"})," ((#v-controller-manager-resources-requests))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"cpu"})," ((#v-controller-manager-resources-requests-cpu)) (",(0,r.jsx)(n.code,{children:"string: 10m"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"memory"})," ((#v-controller-manager-resources-requests-memory)) (",(0,r.jsx)(n.code,{children:"string: 64Mi"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"podSecurityContext"})," ((#v-controller-podsecuritycontext)) - Configures the Pod security context\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/security-context",children:"https://kubernetes.io/docs/tasks/configure-pod-container/security-context"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"runAsNonRoot"})," ((#v-controller-podsecuritycontext-runasnonroot)) (",(0,r.jsx)(n.code,{children:"boolean: true"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"securityContext"})," ((#v-controller-securitycontext)) - Configures the container security context\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/configure-pod-container/security-context",children:"https://kubernetes.io/docs/tasks/configure-pod-container/security-context"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"allowPrivilegeEscalation"})," ((#v-controller-securitycontext-allowprivilegeescalation)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"controllerConfigMapYaml"})," ((#v-controller-controllerconfigmapyaml)) (",(0,r.jsx)(n.code,{children:"map"}),") - Sets the configuration settings used by the controller. Any custom changes will be reflected in the\ndata field of the configmap.\nFor more information on configuring resources, see the K8s documentation:\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/configuration/configmap/",children:"https://kubernetes.io/docs/concepts/configuration/configmap/"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"health"})," ((#v-controller-controllerconfigmapyaml-health))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"healthProbeBindAddress"})," ((#v-controller-controllerconfigmapyaml-health-healthprobebindaddress)) (",(0,r.jsx)(n.code,{children:"string: :8081"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"leaderElection"})," ((#v-controller-controllerconfigmapyaml-leaderelection))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"leaderElect"})," ((#v-controller-controllerconfigmapyaml-leaderelection-leaderelect)) (",(0,r.jsx)(n.code,{children:"boolean: true"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"resourceName"})," ((#v-controller-controllerconfigmapyaml-leaderelection-resourcename)) (",(0,r.jsx)(n.code,{children:"string: b0d477c0.hashicorp.com"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"metrics"})," ((#v-controller-controllerconfigmapyaml-metrics))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"bindAddress"})," ((#v-controller-controllerconfigmapyaml-metrics-bindaddress)) (",(0,r.jsx)(n.code,{children:"string: 127.0.0.1:8080"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"webhook"})," ((#v-controller-controllerconfigmapyaml-webhook))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"port"})," ((#v-controller-controllerconfigmapyaml-webhook-port)) (",(0,r.jsx)(n.code,{children:"integer: 9443"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kubernetesClusterDomain"})," ((#v-controller-kubernetesclusterdomain)) (",(0,r.jsx)(n.code,{children:"string: cluster.local"}),") - Configures the environment variable KUBERNETES_CLUSTER_DOMAIN used by KubeDNS."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"terminationGracePeriodSeconds"})," ((#v-controller-terminationgraceperiodseconds)) (",(0,r.jsx)(n.code,{children:"integer: 120"}),") - Duration in seconds the pod needs to terminate gracefully.\nSee: ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/",children:"https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"preDeleteHookTimeoutSeconds"})," ((#v-controller-predeletehooktimeoutseconds)) (",(0,r.jsx)(n.code,{children:"integer: 120"}),") - Timeout in seconds for the pre-delete hook"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"metricsservice-h-metricsservice",children:"metricsService ((#h-metricsservice))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"metricsService"})," ((#v-metricsservice)) (",(0,r.jsx)(n.code,{children:"map"}),") - Configure the metrics service ports used by the metrics service.\nSet the configuration fo the metricsService port."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"ports"})," ((#v-metricsservice-ports)) (",(0,r.jsx)(n.code,{children:"map"}),") - Set the port settings for the metrics service.\nFor more information on configuring resources, see the K8s documentation:\n",(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/services-networking/service/",children:"https://kubernetes.io/docs/concepts/services-networking/service/"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"name"})," ((#v-metricsservice-ports-name)) (",(0,r.jsx)(n.code,{children:"string: https"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"port"})," ((#v-metricsservice-ports-port)) (",(0,r.jsx)(n.code,{children:"integer: 8443"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"protocol"})," ((#v-metricsservice-ports-protocol)) (",(0,r.jsx)(n.code,{children:"string: TCP"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"targetPort"})," ((#v-metricsservice-ports-targetport)) (",(0,r.jsx)(n.code,{children:"string: https"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"type"})," ((#v-metricsservice-type)) (",(0,r.jsx)(n.code,{children:"string: ClusterIP"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"defaultvaultconnection-h-defaultvaultconnection",children:"defaultVaultConnection ((#h-defaultvaultconnection))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"defaultVaultConnection"})," ((#v-defaultvaultconnection)) - Configures the default VaultConnection CR which will be used by resources\nif they do not specify a VaultConnection reference. The name is 'default' and will\nalways be installed in the same namespace as the operator.\nNOTE:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"It is strongly recommended to deploy the vault secrets operator in a secure Vault environment\nwhich includes a configuration utilizing TLS and installing Vault into its own restricted namespace."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"enabled"})," ((#v-defaultvaultconnection-enabled)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),") - toggles the deployment of the VaultAuthMethod CR"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"address"})," ((#v-defaultvaultconnection-address)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Address of the Vault Server\nExample: ",(0,r.jsx)(n.a,{href:"http://vault.default.svc.cluster.local:8200",children:"http://vault.default.svc.cluster.local:8200"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"caCertSecret"})," ((#v-defaultvaultconnection-cacertsecret)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - CACertSecret is the name of a Kubernetes secret containing the trusted PEM encoded CA certificate chain as ",(0,r.jsx)(n.code,{children:"ca.crt"}),".\nNote: This secret must exist prior to deploying the CR."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tlsServerName"})," ((#v-defaultvaultconnection-tlsservername)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - TLSServerName to use as the SNI host for TLS connections."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"skipTLSVerify"})," ((#v-defaultvaultconnection-skiptlsverify)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),") - SkipTLSVerify for TLS connections."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headers"})," ((#v-defaultvaultconnection-headers)) (",(0,r.jsx)(n.code,{children:"map"}),') - Headers to be included in all Vault requests.\nheaders:\nX-vault-something: "foo"']}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"defaultauthmethod-h-defaultauthmethod",children:"defaultAuthMethod ((#h-defaultauthmethod))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"defaultAuthMethod"})," ((#v-defaultauthmethod)) - Configures and deploys the default VaultAuthMethod CR which will be used by resources\nif they do not specify a VaultAuthMethod reference. The name is 'default' and will\nalways be installed in the same namespace as the operator.\nNOTE:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"It is strongly recommended to deploy the vault secrets operator in a secure Vault environment\nwhich includes a configuration utilizing TLS and installing Vault into its own restricted namespace."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"enabled"})," ((#v-defaultauthmethod-enabled)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),") - toggles the deployment of the VaultAuthMethod CR"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"namespace"})," ((#v-defaultauthmethod-namespace)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault namespace for the VaultAuthMethod CR"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"method"})," ((#v-defaultauthmethod-method)) (",(0,r.jsx)(n.code,{children:"string: kubernetes"}),") - Vault Auth method to be used with the VaultAuthMethod CR"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"mount"})," ((#v-defaultauthmethod-mount)) (",(0,r.jsx)(n.code,{children:"string: kubernetes"}),") - Mount path for the Vault Auth Method."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kubernetes"})," ((#v-defaultauthmethod-kubernetes)) - Vault Kubernetes auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-defaultauthmethod-kubernetes-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif ",(0,r.jsx)(n.code,{children:"defaultAuthMethod.enabled=true"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceAccount"})," ((#v-defaultauthmethod-kubernetes-serviceaccount)) (",(0,r.jsx)(n.code,{children:"string: default"}),") - Kubernetes ServiceAccount associated with the default Vault Auth Role"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tokenAudiences"})," ((#v-defaultauthmethod-kubernetes-tokenaudiences)) (",(0,r.jsx)(n.code,{children:"array<string>: []"}),") - Token Audience should match the audience of the vault kubernetes auth role."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"jwt"})," ((#v-defaultauthmethod-jwt)) - Vault JWT auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-defaultauthmethod-jwt-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif using the JWT for the default auth method."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-defaultauthmethod-jwt-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - One of the following is required prior to deploying the helm chart"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"K8s secret that contains the JWT"}),"\n",(0,r.jsx)(n.li,{children:"K8s service account if a service account JWT is used as a Vault JWT auth token and needs generating by VSO"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Name of Kubernetes Secret that has the Vault JWT auth token.\nThe Kubernetes Secret must contain a key named ",(0,r.jsx)(n.code,{children:"jwt"})," which references the JWT token, and must exist in the namespace\nof any consuming VaultSecret CR. This is a required field if a JWT token is provided."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceAccount"})," ((#v-defaultauthmethod-jwt-serviceaccount)) (",(0,r.jsx)(n.code,{children:"string: default"}),") - Kubernetes ServiceAccount to generate a service account JWT"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tokenAudiences"})," ((#v-defaultauthmethod-jwt-tokenaudiences)) (",(0,r.jsx)(n.code,{children:"array<string>: []"}),") - Token Audience should match the bound_audiences or the ",(0,r.jsx)(n.code,{children:"aud"})," list in bound_claims if applicable\nof the Vault JWT auth role."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"appRole"})," ((#v-defaultauthmethod-approle)) - AppRole auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"roleId"})," ((#v-defaultauthmethod-approle-roleid)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - AppRole Role's RoleID to use for authenticating to Vault.\nThis is a required field when using appRole and must be setup in Vault prior to deploying the\nhelm chart."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-defaultauthmethod-approle-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Name of Kubernetes Secret that has the AppRole Role's SecretID used to authenticate with Vault.\nThe Kubernetes Secret must contain a key named ",(0,r.jsx)(n.code,{children:"id"})," which references the AppRole Role's\nSecretID, and must exist in the namespace of any consuming VaultSecret CR.\nThis is a required field when using appRole and must be setup in Vault prior to deploying the\nhelm chart."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"aws"})," ((#v-defaultauthmethod-aws)) - AWS auth method specific configuration"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"role"})," ((#v-defaultauthmethod-aws-role)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault Auth Role to use\nThis is a required field and must be setup in Vault prior to deploying the helm chart\nif using the AWS for the default auth method."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"region"})," ((#v-defaultauthmethod-aws-region)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - AWS region to use for signing the authentication request\nOptional, but most commonly will be the region where the EKS cluster is running"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headerValue"})," ((#v-defaultauthmethod-aws-headervalue)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Vault header value to include in the STS signing request"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sessionName"})," ((#v-defaultauthmethod-aws-sessionname)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The role session name to use when creating a WebIdentity provider"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"stsEndpoint"})," ((#v-defaultauthmethod-aws-stsendpoint)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The STS endpoint to use; if not set will use the default"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"iamEndpoint"})," ((#v-defaultauthmethod-aws-iamendpoint)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The IAM endpoint to use; if not set will use the default"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"secretRef"})," ((#v-defaultauthmethod-aws-secretref)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - The name of a Kubernetes Secret which holds credentials for AWS. Supported keys include\n",(0,r.jsx)(n.code,{children:"access_key_id"}),", ",(0,r.jsx)(n.code,{children:"secret_access_key"}),", ",(0,r.jsx)(n.code,{children:"session_token"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"irsaServiceAccount"})," ((#v-defaultauthmethod-aws-irsaserviceaccount)) (",(0,r.jsx)(n.code,{children:'string: ""'}),') - Name of a Kubernetes service account that is configured with IAM Roles\nfor Service Accounts (IRSA). Should be annotated with "eks.amazonaws.com/role-arn".']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"params"})," ((#v-defaultauthmethod-params)) (",(0,r.jsx)(n.code,{children:"map"}),') - Params to use when authenticating to Vault\nparams:\nparam-something1: "foo"']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"headers"})," ((#v-defaultauthmethod-headers)) (",(0,r.jsx)(n.code,{children:"map"}),') - Headers to be included in all Vault requests.\nheaders:\nX-vault-something1: "foo"']}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"telemetry-h-telemetry",children:"telemetry ((#h-telemetry))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"telemetry"})," ((#v-telemetry)) - Configures a Prometheus ServiceMonitor"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"serviceMonitor"})," ((#v-telemetry-servicemonitor))"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"enabled"})," ((#v-telemetry-servicemonitor-enabled)) (",(0,r.jsx)(n.code,{children:"boolean: false"}),") - The Prometheus operator ",(0,r.jsx)(n.em,{children:"must"})," be installed before enabling this feature,\nif not the chart will fail to install due to missing CustomResourceDefinitions\nprovided by the operator."]}),"\n",(0,r.jsxs)(n.p,{children:["Instructions on how to install the Helm chart can be found here:\n",(0,r.jsx)(n.a,{href:"https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack",children:"https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack"}),"\nMore information can be found here:\n",(0,r.jsx)(n.a,{href:"https://github.com/prometheus-operator/prometheus-operator",children:"https://github.com/prometheus-operator/prometheus-operator"}),"\n",(0,r.jsx)(n.a,{href:"https://github.com/prometheus-operator/kube-prometheus",children:"https://github.com/prometheus-operator/kube-prometheus"})]}),"\n",(0,r.jsx)(n.p,{children:"Enable deployment of the Vault Secrets Operator ServiceMonitor CustomResource."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"selectors"})," ((#v-telemetry-servicemonitor-selectors)) (",(0,r.jsx)(n.code,{children:'string: ""'}),") - Selector labels to add to the ServiceMonitor.\nWhen empty, defaults to:\nrelease: prometheus"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"scheme"})," ((#v-telemetry-servicemonitor-scheme)) (",(0,r.jsx)(n.code,{children:"string: https"}),") - Scheme of the service Prometheus scrapes metrics from. This must match the scheme of the metrics service of VSO"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"port"})," ((#v-telemetry-servicemonitor-port)) (",(0,r.jsx)(n.code,{children:"string: https"}),") - Port at which Prometheus scrapes metrics. This must match the port of the metrics service of VSO"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"path"})," ((#v-telemetry-servicemonitor-path)) (",(0,r.jsx)(n.code,{children:"string: /metrics"}),") - Path at which Prometheus scrapes metrics"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"bearerTokenFile"})," ((#v-telemetry-servicemonitor-bearertokenfile)) (",(0,r.jsx)(n.code,{children:"string: /var/run/secrets/kubernetes.io/serviceaccount/token"}),") - File Prometheus reads bearer token from for scraping metrics"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"interval"})," ((#v-telemetry-servicemonitor-interval)) (",(0,r.jsx)(n.code,{children:"string: 30s"}),") - Interval at which Prometheus scrapes metrics"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"scrapeTimeout"})," ((#v-telemetry-servicemonitor-scrapetimeout)) (",(0,r.jsx)(n.code,{children:"string: 10s"}),") - Timeout for Prometheus scrapes"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"tests-h-tests",children:"tests ((#h-tests))"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"tests"})," ((#v-tests)) - # Used by unit tests, and will not be rendered except when using ",(0,r.jsx)(n.code,{children:"helm template"}),", this can be safely ignored."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"enabled"})," ((#v-tests-enabled)) (",(0,r.jsx)(n.code,{children:"boolean: true"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"helm-chart-examples",children:"Helm chart examples"}),"\n",(0,r.jsxs)(n.p,{children:["The below ",(0,r.jsx)(n.code,{children:"config.yaml"})," results in a single replica installation of the Vault Secrets Operator\nwith a default vault connection and auth method custom resource deployed.\nIt expects a local Vault installation within the kubernetes cluster\naccessible via ",(0,r.jsx)(n.code,{children:"http://vault.default.svc.cluster.local:8200"})," with TLS disabled,\nand a ",(0,r.jsx)(n.a,{href:"/docs/auth/kubernetes",children:"Vault Auth Method"})," to be setup against the ",(0,r.jsx)(n.code,{children:"default"})," ServiceAccount."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# config.yaml\n\ndefaultVaultConnection:\n  enabled: true\ndefaultAuthMethod:\n  enabled: true\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"customizing-the-helm-chart",children:"Customizing the helm chart"}),"\n",(0,r.jsxs)(n.p,{children:["If you need to extend the Helm chart with additional options, we recommend using a third-party tool,\nsuch as ",(0,r.jsx)(n.a,{href:"https://github.com/kubernetes-sigs/kustomize",children:"kustomize"})," using the project repo ",(0,r.jsx)(n.code,{children:"config/"})," path\nin the ",(0,r.jsx)(n.a,{href:"https://github.com/hashicorp/vault-secrets-operator",children:"vault-secrets-operator"})," project."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const t={},c=r.createContext(t);function i(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);