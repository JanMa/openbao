"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2785],{12436:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=s(74848),t=s(28453);const r={sidebar_label:"PKI",description:"This is the API documentation for the OpenBao PKI secrets engine."},l="PKI secrets engine (API)",d={id:"secret/pki",title:"PKI secrets engine (API)",description:"This is the API documentation for the OpenBao PKI secrets engine.",source:"@site/content/api-docs/secret/pki.mdx",sourceDirName:"secret",slug:"/secret/pki",permalink:"/openbao/api-docs/secret/pki",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/pki.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"PKI",description:"This is the API documentation for the OpenBao PKI secrets engine."},sidebar:"api",previous:{title:"LDAP",permalink:"/openbao/api-docs/secret/ldap"},next:{title:"RabbitMQ",permalink:"/openbao/api-docs/secret/rabbitmq"}},a={},c=[{value:"Table of contents",id:"table-of-contents",level:2},{value:"Notice about new Multi-Issuer functionality",id:"notice-about-new-multi-issuer-functionality",level:2},{value:"ACME certificate issuance",id:"acme-certificate-issuance",level:2},{value:"ACME directories",id:"acme-directories",level:3},{value:"ACME challenge types",id:"acme-challenge-types",level:4},{value:"ACME external account bindings",id:"acme-external-account-bindings",level:4},{value:"ACME required headers",id:"acme-required-headers",level:4},{value:"Get ACME EAB binding token",id:"get-acme-eab-binding-token",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Sample request",id:"sample-request",level:4},{value:"Sample response",id:"sample-response",level:4},{value:"List unused ACME EAB binding tokens",id:"list-unused-acme-eab-binding-tokens",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Sample request",id:"sample-request-1",level:4},{value:"Sample response",id:"sample-response-1",level:4},{value:"Delete unused ACME EAB binding tokens",id:"delete-unused-acme-eab-binding-tokens",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Sample request",id:"sample-request-2",level:4},{value:"Get ACME configuration",id:"get-acme-configuration",level:3},{value:"Sample request",id:"sample-request-3",level:4},{value:"Sample response",id:"sample-response-2",level:4},{value:"Set ACME configuration",id:"set-acme-configuration",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"Sample payload",id:"sample-payload",level:4},{value:"Sample request",id:"sample-request-4",level:4},{value:"Sample response",id:"sample-response-3",level:4},{value:"Issuing certificates",id:"issuing-certificates",level:2},{value:"List roles",id:"list-roles",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"Sample request",id:"sample-request-5",level:4},{value:"Sample response",id:"sample-response-4",level:4},{value:"Read role",id:"read-role",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"Sample request",id:"sample-request-6",level:4},{value:"Sample response",id:"sample-response-5",level:4},{value:"Generate certificate and key",id:"generate-certificate-and-key",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"Sample payload",id:"sample-payload-1",level:4},{value:"Sample request",id:"sample-request-7",level:4},{value:"Sample response",id:"sample-response-6",level:4},{value:"Sign certificate",id:"sign-certificate",level:3},{value:"Parameters",id:"parameters-7",level:4},{value:"Sample payload",id:"sample-payload-2",level:4},{value:"Sample response",id:"sample-response-7",level:4},{value:"Sign intermediate",id:"sign-intermediate",level:3},{value:"Parameters",id:"parameters-8",level:4},{value:"Sample payload",id:"sample-payload-3",level:4},{value:"Sample request",id:"sample-request-8",level:4},{value:"Sample response",id:"sample-response-8",level:4},{value:"Sign Self-Issued",id:"sign-self-issued",level:3},{value:"Parameters",id:"parameters-9",level:4},{value:"Sample payload",id:"sample-payload-4",level:4},{value:"Sample request",id:"sample-request-9",level:4},{value:"Sample response",id:"sample-response-9",level:4},{value:"Sign verbatim",id:"sign-verbatim",level:3},{value:"Parameters",id:"parameters-10",level:4},{value:"Sample payload",id:"sample-payload-5",level:4},{value:"Sample request",id:"sample-request-10",level:4},{value:"Sample response",id:"sample-response-10",level:4},{value:"Revoke certificate",id:"revoke-certificate",level:3},{value:"Parameters",id:"parameters-11",level:4},{value:"Sample payload",id:"sample-payload-6",level:4},{value:"Sample request",id:"sample-request-11",level:4},{value:"Sample response",id:"sample-response-11",level:4},{value:"Revoke certificate with private key",id:"revoke-certificate-with-private-key",level:3},{value:"Parameters",id:"parameters-12",level:4},{value:"Sample payload",id:"sample-payload-7",level:4},{value:"Sample request",id:"sample-request-12",level:4},{value:"Sample response",id:"sample-response-12",level:4},{value:"List revoked certificates",id:"list-revoked-certificates",level:3},{value:"Parameters",id:"parameters-13",level:4},{value:"Sample request",id:"sample-request-13",level:4},{value:"Sample response",id:"sample-response-13",level:4},{value:"List revocation requests",id:"list-revocation-requests",level:3},{value:"Sample request",id:"sample-request-14",level:4},{value:"Sample response",id:"sample-response-14",level:4},{value:"Accessing authority information",id:"accessing-authority-information",level:2},{value:"List issuers",id:"list-issuers",level:3},{value:"Parameters",id:"parameters-14",level:4},{value:"Sample request",id:"sample-request-15",level:4},{value:"Sample response",id:"sample-response-15",level:4},{value:"Read issuer certificate",id:"read-issuer-certificate",level:3},{value:"Parameters",id:"parameters-15",level:4},{value:"Sample request",id:"sample-request-16",level:4},{value:"Sample response",id:"sample-response-16",level:4},{value:"Read default issuer certificate chain",id:"read-default-issuer-certificate-chain",level:3},{value:"Sample request",id:"sample-request-17",level:4},{value:"Sample response",id:"sample-response-17",level:4},{value:"Read issuer CRL",id:"read-issuer-crl",level:3},{value:"Parameters",id:"parameters-16",level:4},{value:"Sample request",id:"sample-request-18",level:4},{value:"Sample response",id:"sample-response-18",level:4},{value:"OCSP request",id:"ocsp-request",level:3},{value:"Parameters",id:"parameters-17",level:4},{value:"Sample request",id:"sample-request-19",level:4},{value:"List certificates",id:"list-certificates",level:3},{value:"Parameters",id:"parameters-18",level:4},{value:"Sample request",id:"sample-request-20",level:4},{value:"Sample response",id:"sample-response-19",level:4},{value:"Read certificate",id:"read-certificate",level:3},{value:"Parameters",id:"parameters-19",level:4},{value:"Sample request",id:"sample-request-21",level:4},{value:"Sample response",id:"sample-response-20",level:4},{value:"Managing keys and issuers",id:"managing-keys-and-issuers",level:2},{value:"List issuers",id:"list-issuers-1",level:3},{value:"List keys",id:"list-keys",level:3},{value:"Parameters",id:"parameters-20",level:4},{value:"Sample request",id:"sample-request-22",level:4},{value:"Sample response",id:"sample-response-21",level:4},{value:"Generate key",id:"generate-key",level:3},{value:"Parameters",id:"parameters-21",level:4},{value:"Sample payload",id:"sample-payload-8",level:4},{value:"Sample request",id:"sample-request-23",level:4},{value:"Sample response",id:"sample-response-22",level:4},{value:"Generate root",id:"generate-root",level:3},{value:"Parameters",id:"parameters-22",level:4},{value:"Sample payload",id:"sample-payload-9",level:4},{value:"Sample request",id:"sample-request-24",level:4},{value:"Sample response",id:"sample-response-23",level:4},{value:"Generate intermediate CSR",id:"generate-intermediate-csr",level:3},{value:"Parameters",id:"parameters-23",level:4},{value:"Sample payload",id:"sample-payload-10",level:4},{value:"Sample request",id:"sample-request-25",level:4},{value:"Import CA certificates and keys",id:"import-ca-certificates-and-keys",level:3},{value:"Parameters",id:"parameters-24",level:4},{value:"Sample request",id:"sample-request-26",level:4},{value:"Sample response",id:"sample-response-24",level:4},{value:"Read issuer",id:"read-issuer",level:3},{value:"Parameters",id:"parameters-25",level:4},{value:"Sample request",id:"sample-request-27",level:4},{value:"Sample response",id:"sample-response-25",level:4},{value:"Update issuer",id:"update-issuer",level:3},{value:"Parameters",id:"parameters-26",level:4},{value:"Sample payload",id:"sample-payload-11",level:4},{value:"Sample request",id:"sample-request-28",level:4},{value:"Sample response",id:"sample-response-26",level:4},{value:"Revoke issuer",id:"revoke-issuer",level:3},{value:"Parameters",id:"parameters-27",level:4},{value:"Sample request",id:"sample-request-29",level:4},{value:"Sample response",id:"sample-response-27",level:4},{value:"Delete issuer",id:"delete-issuer",level:3},{value:"Sample request",id:"sample-request-30",level:4},{value:"Import key",id:"import-key",level:3},{value:"Parameters",id:"parameters-28",level:4},{value:"Sample payload",id:"sample-payload-12",level:4},{value:"Sample request",id:"sample-request-31",level:4},{value:"Sample response",id:"sample-response-28",level:4},{value:"Read key",id:"read-key",level:3},{value:"Parameters",id:"parameters-29",level:4},{value:"Sample request",id:"sample-request-32",level:4},{value:"Sample response",id:"sample-response-29",level:4},{value:"Update key",id:"update-key",level:3},{value:"Parameters",id:"parameters-30",level:4},{value:"Sample payload",id:"sample-payload-13",level:4},{value:"Sample request",id:"sample-request-33",level:4},{value:"Sample response",id:"sample-response-30",level:4},{value:"Delete key",id:"delete-key",level:3},{value:"Sample request",id:"sample-request-34",level:4},{value:"Delete all issuers and keys",id:"delete-all-issuers-and-keys",level:3},{value:"Sample request",id:"sample-request-35",level:4},{value:"Managing authority information",id:"managing-authority-information",level:2},{value:"List roles",id:"list-roles-1",level:3},{value:"Create/Update role",id:"createupdate-role",level:3},{value:"Parameters",id:"parameters-31",level:4},{value:"Sample payload",id:"sample-payload-14",level:4},{value:"Sample request",id:"sample-request-36",level:4},{value:"Read role",id:"read-role-1",level:3},{value:"Delete role",id:"delete-role",level:3},{value:"Parameters",id:"parameters-32",level:4},{value:"Sample request",id:"sample-request-37",level:4},{value:"Read URLs",id:"read-urls",level:3},{value:"Sample request",id:"sample-request-38",level:4},{value:"Sample response",id:"sample-response-31",level:4},{value:"Set URLs",id:"set-urls",level:3},{value:"Parameters",id:"parameters-33",level:4},{value:"Sample payload",id:"sample-payload-15",level:4},{value:"Sample request",id:"sample-request-39",level:4},{value:"Read issuers configuration",id:"read-issuers-configuration",level:3},{value:"Sample request",id:"sample-request-40",level:4},{value:"Sample response",id:"sample-response-32",level:4},{value:"Set issuers configuration",id:"set-issuers-configuration",level:3},{value:"Parameters",id:"parameters-34",level:4},{value:"Sample payload",id:"sample-payload-16",level:4},{value:"Sample request",id:"sample-request-41",level:4},{value:"Sample response",id:"sample-response-33",level:4},{value:"Read keys configuration",id:"read-keys-configuration",level:3},{value:"Sample request",id:"sample-request-42",level:4},{value:"Sample response",id:"sample-response-34",level:4},{value:"Set keys configuration",id:"set-keys-configuration",level:3},{value:"Parameters",id:"parameters-35",level:4},{value:"Sample payload",id:"sample-payload-17",level:4},{value:"Sample request",id:"sample-request-43",level:4},{value:"Sample response",id:"sample-response-35",level:4},{value:"Read cluster configuration",id:"read-cluster-configuration",level:3},{value:"Sample request",id:"sample-request-44",level:4},{value:"Sample response",id:"sample-response-36",level:4},{value:"Set cluster configuration",id:"set-cluster-configuration",level:3},{value:"Parameters",id:"parameters-36",level:4},{value:"Sample payload",id:"sample-payload-18",level:4},{value:"Sample request",id:"sample-request-45",level:4},{value:"Read CRL configuration",id:"read-crl-configuration",level:3},{value:"Sample request",id:"sample-request-46",level:4},{value:"Sample response",id:"sample-response-37",level:4},{value:"Set revocation configuration",id:"set-revocation-configuration",level:3},{value:"Parameters",id:"parameters-37",level:4},{value:"Sample payload",id:"sample-payload-19",level:4},{value:"Sample request",id:"sample-request-47",level:4},{value:"Rotate CRLs",id:"rotate-crls",level:3},{value:"Sample request",id:"sample-request-48",level:4},{value:"Sample response",id:"sample-response-38",level:4},{value:"Rotate delta CRLs",id:"rotate-delta-crls",level:3},{value:"Sample request",id:"sample-request-49",level:4},{value:"Sample response",id:"sample-response-39",level:4},{value:"Combine CRLs from the same issuer",id:"combine-crls-from-the-same-issuer",level:3},{value:"Parameters",id:"parameters-38",level:4},{value:"Sample payload",id:"sample-payload-20",level:4},{value:"Sample request",id:"sample-request-50",level:4},{value:"Sample response",id:"sample-response-40",level:4},{value:"Sign revocation list",id:"sign-revocation-list",level:3},{value:"Parameters",id:"parameters-39",level:4},{value:"Sample payload",id:"sample-payload-21",level:4},{value:"Sample request",id:"sample-request-51",level:4},{value:"Sample response",id:"sample-response-41",level:4},{value:"Tidy",id:"tidy",level:3},{value:"Parameters",id:"parameters-40",level:4},{value:"Sample payload",id:"sample-payload-22",level:4},{value:"Sample request",id:"sample-request-52",level:4},{value:"Read automatic tidy configuration",id:"read-automatic-tidy-configuration",level:3},{value:"Sample request",id:"sample-request-53",level:4},{value:"Sample response",id:"sample-response-42",level:4},{value:"Set automatic tidy configuration",id:"set-automatic-tidy-configuration",level:3},{value:"Parameters",id:"parameters-41",level:4},{value:"Sample payload",id:"sample-payload-23",level:4},{value:"Sample request",id:"sample-request-54",level:4},{value:"Tidy status",id:"tidy-status",level:3},{value:"Sample request",id:"sample-request-55",level:4},{value:"Sample response",id:"sample-response-43",level:4},{value:"Cancel tidy",id:"cancel-tidy",level:3},{value:"Sample request",id:"sample-request-56",level:4},{value:"Sample response",id:"sample-response-44",level:4},{value:"Cluster scalability",id:"cluster-scalability",level:2},{value:"OpenBao CLI with DER/PEM responses",id:"openbao-cli-with-derpem-responses",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"pki-secrets-engine-api",children:"PKI secrets engine (API)"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This engine can use external X.509 certificates as part of TLS or signature validation.\nVerifying signatures against X.509 certificates that use SHA-1 is deprecated and is no longer\nusable without a workaround. See the\n",(0,i.jsx)(n.a,{href:"/docs/deprecation/faq#q-what-is-the-impact-of-removing-support-for-x-509-certificates-with-signatures-that-use-sha-1",children:"deprecation FAQ"}),"\nfor more information."]})}),"\n",(0,i.jsxs)(n.p,{children:["This is the API documentation for the OpenBao PKI secrets engine. For general\ninformation about the usage and operation of the PKI secrets engine, please see\nthe ",(0,i.jsx)(n.a,{href:"/docs/secrets/pki",children:"PKI documentation"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This documentation assumes the PKI secrets engine is enabled at the ",(0,i.jsx)(n.code,{children:"/pki"})," path\nin OpenBao. Since it is possible to enable secrets engines at any location, please\nupdate your API calls accordingly."]}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#notice-about-new-multi-issuer-functionality",children:"Notice About New Multi-Issuer Functionality"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#acme-certificate-issuance",children:"ACME Certificate Issuance"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#acme-directories",children:"ACME Directories"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#get-acme-eab-binding-token",children:"Get ACME EAB Binding Token"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-unused-acme-eab-binding-tokens",children:"List Unused ACME EAB Binding Tokens"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete-unused-acme-eab-binding-tokens",children:"Delete Unused ACME EAB Binding Tokens"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#get-acme-configuration",children:"Get ACME Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-acme-configuration",children:"Set ACME Configuration"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#issuing-certificates",children:"Issuing Certificates"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-roles",children:"List Roles"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-role",children:"Read Role"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#generate-certificate-and-key",children:"Generate Certificate and Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#sign-certificate",children:"Sign Certificate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#sign-intermediate",children:"Sign Intermediate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#sign-self-issued",children:"Sign Self-Issued"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#sign-verbatim",children:"Sign Verbatim"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#revoke-certificate",children:"Revoke Certificate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#revoke-certificate-with-private-key",children:"Revoke Certificate with Private Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-revoked-certificates",children:"List Revoked Certificates"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-revocation-requests",children:"List Revocation Requests"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-cross-cluster-revocations",children:"List Cross-Cluster Revocations"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#accessing-authority-information",children:"Accessing Authority Information"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-issuers",children:"List Issuers"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-issuer-certificate",children:"Read Issuer Certificate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-default-issuer-certificate-chain",children:"Read Default Issuer Certificate Chain"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-issuer-crl",children:"Read Issuer CRL"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#ocsp-request",children:"OCSP Request"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-certificates",children:"List Certificates"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-certificate",children:"Read Certificate"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#managing-keys-and-issuers",children:"Managing Keys and Issuers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-issuers",children:"List Issuers"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-keys",children:"List Keys"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#generate-key",children:"Generate Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#generate-root",children:"Generate Root"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#generate-intermediate-csr",children:"Generate Intermediate CSR"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#import-ca-certificates-and-keys",children:"Import CA Certificates and Keys"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-issuer",children:"Read Issuer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update-issuer",children:"Update Issuer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#revoke-issuer",children:"Revoke Issuer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete-issuer",children:"Delete Issuer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#import-key",children:"Import Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-key",children:"Read Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#update-key",children:"Update Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete-key",children:"Delete Key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete-all-issuers-and-keys",children:"Delete All Issuers and Keys"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#managing-authority-information",children:"Managing Authority Information"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#list-roles",children:"List Roles"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#create-update-role",children:"Create/Update Role"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-role",children:"Read Role"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#delete-role",children:"Delete Role"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-urls",children:"Read URLs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-urls",children:"Set URLs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-issuers-configuration",children:"Read Issuers Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-issuers-configuration",children:"Set Issuers Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-keys-configuration",children:"Read Keys Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-keys-configuration",children:"Set Keys Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-cluster-configuration",children:"Read Cluster Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-cluster-configuration",children:"Set Cluster Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-crl-configuration",children:"Read CRL Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-crl-configuration",children:"Set CRL Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#rotate-crls",children:"Rotate CRLs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#rotate-delta-crls",children:"Rotate Delta CRLs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#combine-crls-from-the-same-issuer",children:"Combining CRLs from the Same Issuer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#sign-revocation-list",children:"Sign Revocation List"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tidy",children:"Tidy"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#read-automatic-tidy-configuration",children:"Read Automatic Tidy Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#set-automatic-tidy-configuration",children:"Set Automatic Tidy Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#tidy-status",children:"Tidy Status"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cancel-tidy",children:"Cancel Tidy"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#cluster-scalability",children:"Cluster Scalability"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",children:"OpenBao CLI with DER/PEM responses"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"notice-about-new-multi-issuer-functionality",children:"Notice about new Multi-Issuer functionality"}),"\n",(0,i.jsx)(n.p,{children:'OpenBao allows a single PKI mount to have multiple Certificate\nAuthority (CA) certificates ("issuers") in a single mount, for the purpose\nof facilitating rotation. All issuers within a single mount are treated as a\nsingle Authority, meaning that:'}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Certificate Revocation List (CRL) configuration is common to all issuers,"}),"\n",(0,i.jsx)(n.li,{children:"All authority access URLs are common to all issuers,"}),"\n",(0,i.jsx)(n.li,{children:"Issued certificates' serial numbers will be unique across all issuers."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"However, since each issuer may have a distinct subject and keys, different\nissuers may have different CRLs."}),"\n",(0,i.jsxs)(n.p,{children:["It is ",(0,i.jsx)(n.em,{children:"strongly"})," encouraged to limit the scope of CAs within a mount and not\nto mix different types of CAs (roots and intermediates)."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Some functionality will not work if a default issuer is not\nconfigured. OpenBao automatically selects the default issuer from the\ncurrent issuing certificate on migration from an older OpenBao version."]})}),"\n",(0,i.jsx)(n.h2,{id:"acme-certificate-issuance",children:"ACME certificate issuance"}),"\n",(0,i.jsxs)(n.p,{children:["OpenBao supports the ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc8555",children:"ACME certificate lifecycle management\nprotocol"})," for issuing and\nrenewing leaf server certificates."]}),"\n",(0,i.jsxs)(n.p,{children:["In order to use ACME, a ",(0,i.jsx)(n.a,{href:"#set-cluster-configuration",children:"cluster path"})," must be\nset and ACME must be ",(0,i.jsx)(n.a,{href:"#set-acme-configuration",children:"enabled in its configuration"}),"\nwith the ",(0,i.jsx)(n.a,{href:"#acme-required-headers",children:"required headers"})," enabled on the mount\ntuning."]}),"\n",(0,i.jsxs)(n.p,{children:["Using ACME with a role requires ",(0,i.jsx)(n.code,{children:"no_store=false"})," to be set on the role; this\nallows the certificate to be stored and later fetched through the ACME\nprotocol."]}),"\n",(0,i.jsx)(n.h3,{id:"acme-directories",children:"ACME directories"}),"\n",(0,i.jsxs)(n.p,{children:["OpenBao PKI supports the following ACME directories, providing different\nrestrictions around usage (defaults, a specific issuer and/or a specific\nrole). To interact with these directories, specify the directory URL in\nan ACME client. For example, with the EFF's ",(0,i.jsx)(n.a,{href:"https://certbot.eff.org/",children:"CertBot"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ certbot certonly --server https://localhost:8200/v1/pki/acme/directory ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"These endpoints are unauthenticated from an OpenBao authentication model, but\ninternally authenticated via the ACME protocol."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Default Directory Policy"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Role"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"sign-verbatim"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Sign-Verbatim"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"role:role_ref"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Specified by the role"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":role_ref"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"sign-verbatim"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":issuer_ref"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Sign-Verbatim"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"role:role_ref"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":issuer_ref"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":role_ref"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:role/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"(any)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Specified by the role"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":role"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"ACME"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/roles/:role/acme/directory"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"(any)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":issuer_ref"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:":role"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["When a role is not specified (for the first two directory URLs, or four lines\nin the table), behavior is specified by the ",(0,i.jsx)(n.code,{children:"default_directory_policy"})," in the\n",(0,i.jsx)(n.a,{href:"#set-acme-configuration",children:"ACME configuration"}),".  These directories can also be\nforbidden by setting that policy as ",(0,i.jsx)(n.code,{children:"forbid"}),".  If the policy is ",(0,i.jsx)(n.code,{children:"sign-verbatim"}),"\nthen ",(0,i.jsx)(n.em,{children:"any"})," identifier for which the client can prove ownership of will be\nissued for.  This is similar to using the ",(0,i.jsx)(n.a,{href:"#sign-verbatim",children:"Sign Verbatim"}),"\nendpoint, but with additional verification that the client has proven\nownership (within the ACME protocol) of the requested certificate\nidentifiers."]}),"\n",(0,i.jsx)(n.h4,{id:"acme-challenge-types",children:"ACME challenge types"}),"\n",(0,i.jsx)(n.p,{children:"OpenBao supports the following ACME challenge types presently:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"http-01"}),", supporting both ",(0,i.jsx)(n.code,{children:"dns"})," and ",(0,i.jsx)(n.code,{children:"ip"})," identifiers."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dns-01"}),", supporting ",(0,i.jsx)(n.code,{children:"dns"})," identifiers including wildcards."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tls-alpn-01"}),", supporting only non-wildcard ",(0,i.jsx)(n.code,{children:"dns"})," identifiers."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["A custom DNS resolver used by the server for looking up DNS names for use\nwith both mechanisms can be added via the ",(0,i.jsx)(n.a,{href:"#set-acme-configuration",children:"ACME configuration"}),"."]}),"\n",(0,i.jsx)(n.h4,{id:"acme-external-account-bindings",children:"ACME external account bindings"}),"\n",(0,i.jsxs)(n.p,{children:["ACME External Account Binding (EAB) Policy can enforce that clients need to\nhave a valid external account binding to OpenBao. Before registering a new account,\nan authenticated OpenBao client will need to ",(0,i.jsx)(n.a,{href:"#get-acme-eab-binding-token",children:"fetch a new EAB\ntoken"}),". This returns two values: a key identifier\nand an HMAC key used by the ACME client to authenticate with EAB. For example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ openbao write -f /pki/acme/new-eab\n$ certbot certonly --server https://localhost:8200/v1/pki/acme/directory \\\n                   --eab-kid <id> --eab-hmac-key <hmac-key>\n"})}),"\n",(0,i.jsx)(n.p,{children:"With or without EAB, requests from the ACME client are not authenticated using\ntraditional OpenBao authentication, but are instead authenticated through the\nACME protocol. With EAB however, an OpenBao authenticated client will have to\nfetch an EAB token and pass it to the ACME client for use on the initial\nregistration: this binds the ACME client's registration to an authenticated\nOpenBao endpoint, but not further to the client's entity or other information."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: Enabling EAB is strongly recommended for public-facing OpenBao\ndeployments. Use of the ",(0,i.jsx)(n.code,{children:"VAULT_DISABLE_PUBLIC_ACME"})," environment variable\ncan be used to enforce all ACME instances have EAB enabled."]})}),"\n",(0,i.jsx)(n.h4,{id:"acme-required-headers",children:"ACME required headers"}),"\n",(0,i.jsxs)(n.p,{children:["ACME requires the following response headers (",(0,i.jsx)(n.code,{children:"allowed_response_headers"}),")\nto be specified by ",(0,i.jsx)(n.a,{href:"/api-docs/system/mounts#tune-mount-configuration",children:"mount tuning"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Replay-Nonce"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Link"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Location"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"On an existing mount, these can be specified by running the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"$ openbao secrets tune -allowed-response-headers=Location -allowed-response-headers=Replay-Nonce \\\n                     -allowed-response-headers=Link \\\n                     pki/\n"})}),"\n",(0,i.jsx)(n.h3,{id:"get-acme-eab-binding-token",children:"Get ACME EAB binding token"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns a new ACME binding token. The ",(0,i.jsx)(n.code,{children:"id"})," response field can\nbe used as the key identifier and the ",(0,i.jsx)(n.code,{children:"key"})," response field be used as the\nEAB HMAC key in the ACME Client."]}),"\n",(0,i.jsx)(n.p,{children:"Each call to this endpoint will generate and return a new EAB binding token\nthat is linked to the specific ACME directory it resides under. EAB tokens\nare not usable across different ACME directories."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/acme/new-eab"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/acme/new-eab"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:role/acme/new-eab"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/roles/:role/acme/new-eab"})})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.p,{children:"No parameters."}),"\n",(0,i.jsx)(n.h4,{id:"sample-request",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/pki/acme/new-eab\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "created_on": "2023-05-24T14:33:00-04:00",\n    "id": "bc8088d9-3816-5177-ae8e-d8393265f7dd",\n    "key_type": "hs",\n    "acme_directory": "acme/directory",\n    "key": "MHcCAQE... additional data elided ...",\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"list-unused-acme-eab-binding-tokens",children:"List unused ACME EAB binding tokens"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of all unused ACME binding tokens; once used,\nthey will be removed from this list."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/eab"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-1",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/eab\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-1",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "key_info": {\n      "bc8088d9-3816-5177-ae8e-d8393265f7dd": {\n        "created_on": "2023-05-24T14:33:00-04:00",\n        "key_type": "hs",\n        "acme_directory": "acme/directory"\n      }\n    },\n    "keys": [\n      "bc8088d9-3816-5177-ae8e-d8393265f7dd"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delete-unused-acme-eab-binding-tokens",children:"Delete unused ACME EAB binding tokens"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows the deletion of an unused ACME binding token."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/eab/:key_id"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_id"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - The id of the EAB binding token to\ndelete. This is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-2",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/pki/eab/bc8088d9-3816-5177-ae8e-d8393265f7dd\n'})}),"\n",(0,i.jsx)(n.h3,{id:"get-acme-configuration",children:"Get ACME configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows reading of the current ACME server configuration used by\nthis mount."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/acme"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-3",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/acme\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-2",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "allowed_issuers": [\n      "*"\n    ],\n    "allowed_roles": [\n      "*"\n    ],\n    "default_directory_policy": "sign-verbatim",\n    "dns_resolver": "",\n    "eab_policy": "not-required",\n    "enabled": true\n  },\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"set-acme-configuration",children:"Set ACME configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows setting the ACME server configuration used by this\nmount."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/acme"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_issuers"})," ",(0,i.jsx)(n.code,{children:'(list: ["*"])'})," - Specifies a list issuers allowed to\nissue certificates via explicit ACME paths. If an allowed role specifies\nan issuer outside this list, it will be allowed. The default value ",(0,i.jsx)(n.code,{children:"*"}),"\nallows every issuer within the mount."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_role_ext_key_usage"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - whether the ExtKeyUsage field\nfrom a role is used, defaults to false meaning that certificate will be\nsigned with ServerAuth."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_roles"})," ",(0,i.jsx)(n.code,{children:'(list: ["*"])'})," - Specifies a list of roles allowed to\nissue certificates via explicit ACME paths.  The default value ",(0,i.jsx)(n.code,{children:"*"})," allows\nevery role within the mount to be used.  If the ",(0,i.jsx)(n.code,{children:"default_directory_policy"}),"\nspecifies a role, it must be allowed under this configuration."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"default_directory_policy"})," ",(0,i.jsx)(n.code,{children:'(string: "sign-verbatim")'})," - Specifies the\nbehavior of the default ACME directory.  Can be ",(0,i.jsx)(n.code,{children:"forbid"}),", ",(0,i.jsx)(n.code,{children:"sign-verbatim"}),"\nor a role given by ",(0,i.jsx)(n.code,{children:"role:<role_name>"}),".  If a role is used, it must be\npresent in ",(0,i.jsx)(n.code,{children:"allowed_roles"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"dns_resolver"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - An optional overriding DNS resolver to\nuse for challenge verification lookups. When not specified, the default\nsystem resolver will be used. This allows domains on peered networks with\nan accessible DNS resolver to be validated."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"eab_policy"})," ",(0,i.jsx)(n.code,{children:'(string: "not-required")'})," - Specified policy to enforce\naround ",(0,i.jsx)(n.a,{href:"#acme-external-account-bindings",children:"External Account Bindings (EABs)"}),".\nThe allowed values are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not-required"}),", where EABs are not enforced but are validated if\nspecified."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"new-account-required"}),", where new accounts are required to have EAB\nbut existing accounts can still be used."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"always-required"}),", where all accounts regardless of age are required\nto have EABs set."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enabled"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Whether ACME is enabled on this mount. When\nACME is disabled, all requests to ACME directory URLs will return 404."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n    "enabled": true\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-4",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/acme\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-3",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "allowed_issuers": [\n      "*"\n    ],\n    "allowed_roles": [\n      "*"\n    ],\n    "default_directory_policy": "sign-verbatim",\n    "dns_resolver": "",\n    "eab_policy": "not-required",\n    "enabled": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"issuing-certificates",children:"Issuing certificates"}),"\n",(0,i.jsx)(n.p,{children:"The following API endpoints allow users or operators to request certificates\nand are all authenticated."}),"\n",(0,i.jsxs)(n.p,{children:["In general, for self-serve use, the ",(0,i.jsx)(n.code,{children:"/pki/sign/:name"})," and ",(0,i.jsx)(n.code,{children:"/pki/issue/:name"}),"\nare sufficient to allow most users to access for ACL purposes. The per-issuer\nvariants (",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign/:name"})," and\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/issue/:name"}),") allow the requester to override the\nrole's chosen issuer, potentially allowing users to request certificates\nissued by the wrong parent authority."]}),"\n",(0,i.jsxs)(n.p,{children:["Some API endpoints included here are privileged and should only be accessed\nby trusted users or operators; these include the various ",(0,i.jsx)(n.code,{children:"sign-verbatim"}),",\n",(0,i.jsx)(n.code,{children:"sign-self-signed"})," and ",(0,i.jsx)(n.code,{children:"sign-intermediate"})," endpoints."]}),"\n",(0,i.jsx)(n.p,{children:"If an issued certificate has been compromised, it should be revoked. The\nOpenBao PKI secrets engine presently only allows revocation by serial number;\nbecause this could allow users to deny access to other users, it should be\nrestricted to operators."}),"\n",(0,i.jsx)(n.h3,{id:"list-roles",children:"List roles"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of available roles. Only the role names are\nreturned, not any values. It is useful to both operators and users."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-4",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-5",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/roles\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-4",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "keys": ["dev", "prod"]\n  },\n  "lease_duration": 0,\n  "lease_id": "",\n  "renewable": false\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-role",children:"Read role"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint queries the role definition. It is useful to both operators and\nusers."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:name"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-5",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the role to read. This\nis part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-6",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/roles/my-role\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-5",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "allow_any_name": false,\n    "allow_ip_sans": true,\n    "allow_localhost": true,\n    "allow_subdomains": false,\n    "allowed_domains": ["example.com", "foobar.com"],\n    "allowed_uri_sans": ["example.com", "spiffe://*"],\n    "allowed_other_sans": [\n      "1.3.6.1.4.1.311.20.2.3;utf8:devops@example.com",\n      "1.3.6.1.4.1.311.20.2.4;UTF-8:*"\n    ],\n    "client_flag": true,\n    "code_signing_flag": false,\n    "key_bits": 2048,\n    "key_type": "rsa",\n    "ttl": "6h",\n    "max_ttl": "12h",\n    "server_flag": true,\n    ... additional fields elided ...\n  }\n}\n'})}),"\n",(0,i.jsx)("a",{name:"generate-certificate"}),"\n",(0,i.jsx)(n.h3,{id:"generate-certificate-and-key",children:"Generate certificate and key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint generates a new set of credentials (private key and certificate)\nbased on the role named in the endpoint. The issuing CA certificate and full CA\nchain is returned as well, so that only the root CA need be in a client's trust\nstore. Choice of issuing CA is determined first by the role (when using the\n",(0,i.jsx)(n.code,{children:"/pki/issue/:name"})," path) and then by the path (when using the\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/issue/name"})," path)."]}),"\n",(0,i.jsxs)(n.p,{children:["It is suggested to limit access to the path-overridden issue endpoint (on\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/issue/:name"}),")."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": The private key is ",(0,i.jsx)(n.em,{children:"not"})," stored. If you do not save the private\nkey from the response, you will need to request a new certificate."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issue/:name"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Role selected"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/issue/:name"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Path selected"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-6",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the role to create the\ncertificate against. This is part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/issue/:name"})," path and\ntakes its value from the role's ",(0,i.jsx)(n.code,{children:"issuer_ref"})," field."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"common_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested CN for the\ncertificate. If the CN is allowed by role policy, it will be issued. If more\nthan one ",(0,i.jsx)(n.code,{children:"common_name"})," is desired, specify the alternative names in the\n",(0,i.jsx)(n.code,{children:"alt_names"})," list."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: A value for ",(0,i.jsx)(n.code,{children:"common_name"})," is required when ",(0,i.jsx)(n.a,{href:"#require_cn",children:"require_cn"})," is set to ",(0,i.jsx)(n.code,{children:"true"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"alt_names"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies requested Subject Alternative Names, in\na comma-delimited list. These can be host names or email addresses; they will\nbe parsed into their respective fields. If any requested names do not match\nrole policy, the entire request will be denied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ip_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies requested IP Subject Alternative Names,\nin a comma-delimited list. Only valid if the role allows IP SANs (which is the\ndefault)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested URI Subject Alternative\nNames, in a comma-delimited list. If any requested URIs do not match role policy,\nthe entire request will be denied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies custom OID/UTF8-string SANs. These\nmust match values specified on the role in ",(0,i.jsx)(n.code,{children:"allowed_other_sans"})," (see role\ncreation for allowed_other_sans globbing rules).\nThe format is the same as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"})," where the\nonly current valid type is ",(0,i.jsx)(n.code,{children:"UTF8"}),". This can be a comma-delimited list or a\nJSON string slice."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies requested Time To Live. Cannot be greater\nthan the role's ",(0,i.jsx)(n.code,{children:"max_ttl"})," value. If not provided, the role's ",(0,i.jsx)(n.code,{children:"ttl"})," value will\nbe used. Note that the role values default to system values if not explicitly\nset. See ",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative for setting an absolute end date\n(rather than a relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. Can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),"; defaults to ",(0,i.jsx)(n.code,{children:"pem"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is\nbase64 encoded. If ",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"certificate"})," field will contain the\nprivate key and certificate, concatenated; if the issuing CA is not a\nOpenBao-derived self-signed root, this will be included as well."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"private_key_format"})," ",(0,i.jsx)(n.code,{children:'(string: "der")'})," - Specifies the format for marshaling\nthe private key within the private_key response field. Defaults to ",(0,i.jsx)(n.code,{children:"der"})," which will\nreturn either base64-encoded DER or PEM-encoded DER, depending on the value of\n",(0,i.jsx)(n.code,{children:"format"}),". The other option is ",(0,i.jsx)(n.code,{children:"pkcs8"})," which will return the key marshalled as\nPEM-encoded PKCS8."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," that this does not apply to the private key within the certificate\nfield if ",(0,i.jsx)(n.code,{children:"format=pem_bundle"})," parameter is specified."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exclude_cn_from_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the given ",(0,i.jsx)(n.code,{children:"common_name"})," will\nnot be included in DNS or Email Subject Alternate Names (as appropriate).\nUseful if the CN is not a hostname or email address, but is instead some\nhuman-readable identifier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"remove_roots_from_chain"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the returned ",(0,i.jsx)(n.code,{children:"ca_chain"}),"\nfield will not include any self-signed CA certificates. Useful if end-users\nalready have the root CA in their trust store."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"user_ids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the comma-separated list of requested\nUser ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the\nsigned certificate. This field is validated against ",(0,i.jsx)(n.code,{children:"allowed_user_ids"})," on\nthe role."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the desired key type when the role\nallows any key type; must be ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ed25519"}),", or ",(0,i.jsx)(n.code,{children:"ec"}),". Use the literal\nempty string when the role's key type should be respected."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use for the\ngenerated keys when the role allows any key type. Allowed values are\n0 (universal default); with ",(0,i.jsx)(n.code,{children:"key_type=rsa"}),", allowed values are:\n2048 (default), 3072, or 4096; with ",(0,i.jsx)(n.code,{children:"key_type=ec"}),", allowed values are:\n224, 256 (default), 384, or 521; ignored with ",(0,i.jsx)(n.code,{children:"key_type=ed25519"}),". Ignored\nwhen the role has an explicit key type specified."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-1",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "common_name": "www.example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-7",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/issue/my-role\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-6",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "pki/issue/test/7ad6cfa5-f04f-c62a-d477-f33210475d05",\n  "renewable": false,\n  "lease_duration": 21600,\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n",\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n"\n    ],\n    "private_key": "-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAnVHfwoKsUG1GDVyWB1AFroaKl2ImMBO8EnvGLRrmobIkQvh+\\n...\\nQN351pgTphi6nlCkGPzkDuwvtxSxiCWXQcaxrHAL7MiJpPzkIBq1\\n-----END RSA PRIVATE KEY-----\\n",\n    "private_key_type": "rsa",\n    "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58"\n  },\n  "warnings": "",\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sign-certificate",children:"Sign certificate"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint signs a new certificate based upon the provided CSR and the\nsupplied parameters, subject to the restrictions contained in the role named in\nthe endpoint. The issuing CA certificate and the full CA chain is returned as\nwell, so that only the root CA need be in a client's trust store."}),"\n",(0,i.jsxs)(n.p,{children:["It is suggested to limit access to the path-overridden sign endpoint (on\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign/:name"}),")."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/sign/:name"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Role selected"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign/:name"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Path selected"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-7",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the role to create the\ncertificate against. This is part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/sign/:name"})," path and\ntakes its value from the role's ",(0,i.jsx)(n.code,{children:"issuer_ref"})," field."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"csr"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the PEM-encoded CSR."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"common_name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the requested CN for the\ncertificate. If the CN is allowed by role policy, it will be issued. If\nmore than one ",(0,i.jsx)(n.code,{children:"common_name"})," is desired, specify the alternative names in\nthe ",(0,i.jsx)(n.code,{children:"alt_names"})," list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"alt_names"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Subject Alternative\nNames, in a comma-delimited list. These can be host names or email addresses;\nthey will be parsed into their respective fields. If any requested names do\nnot match role policy, the entire request will be denied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies custom OID/UTF8-string SANs. These\nmust match values specified on the role in ",(0,i.jsx)(n.code,{children:"allowed_other_sans"})," (see role\ncreation for allowed_other_sans globbing rules).\nThe format is the same as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"})," where the\nonly current valid type is ",(0,i.jsx)(n.code,{children:"UTF8"}),". This can be a comma-delimited list or a\nJSON string slice."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ip_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested IP Subject Alternative\nNames, in a comma-delimited list. Only valid if the role allows IP SANs (which\nis the default)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested URI Subject Alternative\nNames, in a comma-delimited list. If any requested URIs do not match role policy,\nthe entire request will be denied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Time To Live. Cannot be greater\nthan the role's ",(0,i.jsx)(n.code,{children:"max_ttl"})," value. If not provided, the role's ",(0,i.jsx)(n.code,{children:"ttl"})," value will\nbe used. Note that the role values default to system values if not explicitly\nset. See ",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative for setting an absolute end date\n(rather than a relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. Can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is base64 encoded. If\n",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"certificate"})," field will contain the certificate and, if the\nissuing CA is not an OpenBao-derived self-signed root, it will be concatenated\nwith the certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exclude_cn_from_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the given ",(0,i.jsx)(n.code,{children:"common_name"})," will\nnot be included in DNS or Email Subject Alternate Names (as appropriate).\nUseful if the CN is not a hostname or email address, but is instead some\nhuman-readable identifier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"remove_roots_from_chain"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the returned ",(0,i.jsx)(n.code,{children:"ca_chain"}),"\nfield will not include any self-signed CA certificates. Useful if end-users\nalready have the root CA in their trust store."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"user_ids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the comma-separated list of requested\nUser ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the\nsigned certificate. This field is validated against ",(0,i.jsx)(n.code,{children:"allowed_user_ids"})," on\nthe role."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-2",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "csr": "...",\n  "common_name": "example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-7",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "pki/sign/test/7ad6cfa5-f04f-c62a-d477-f33210475d05",\n  "renewable": false,\n  "lease_duration": 21600,\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n",\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n"\n    ],\n    "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58"\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sign-intermediate",children:"Sign intermediate"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint uses the configured CA certificate to issue a certificate with\nappropriate values for acting as an intermediate CA. Distribution points use the\nvalues set via ",(0,i.jsx)(n.code,{children:"config/urls"}),". Values set in the CSR are ignored unless\n",(0,i.jsx)(n.code,{children:"use_csr_values"})," is set to true, in which case the values from the CSR are used\nverbatim."]}),"\n",(0,i.jsx)(n.p,{children:"This endpoint can be used both when signing an OpenBao-backed intermediate or\nwhen signing an externally-owned intermediate."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This is a privileged endpoint, as callers are granted a new\nintermediate certificate, with which they can issue for arbitrary names.\nAccess to this endpoint should be restricted by policy to only trusted\noperators."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root/sign-intermediate"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign-intermediate"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-8",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/root/sign-intermediate"}),"\npath and takes the value ",(0,i.jsx)(n.code,{children:"default"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"csr"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the PEM-encoded CSR to be signed."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"common_name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the requested CN for the\ncertificate. If more than one ",(0,i.jsx)(n.code,{children:"common_name"})," is desired, specify the\nalternative names in the ",(0,i.jsx)(n.code,{children:"alt_names"})," list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"alt_names"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Subject Alternative\nNames, in a comma-delimited list. These can be host names or email addresses;\nthey will be parsed into their respective fields."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ip_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested IP Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested URI Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies custom OID/UTF8-string SANs. These\nmust match values specified on the role in ",(0,i.jsx)(n.code,{children:"allowed_other_sans"})," (see role\ncreation for allowed_other_sans globbing rules).\nThe format is the same as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"})," where the\nonly current valid type is ",(0,i.jsx)(n.code,{children:"UTF8"}),". This can be a comma-delimited list or a\nJSON string slice."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Time To Live (after which the\ncertificate will be expired). This cannot be larger than the engine's max (or,\nif not set, the system max). However, this can be after the expiration of the\nsigning CA. See ",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative for setting an absolute end date\n(rather than a relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. Can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is base64 encoded. If\n",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"certificate"})," field will contain the certificate and, if the\nissuing CA is not an OpenBao-derived self-signed root, it will be concatenated\nwith the certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"max_path_length"})," ",(0,i.jsx)(n.code,{children:"(int: -1)"})," - Specifies the maximum path length to encode in\nthe generated certificate. ",(0,i.jsx)(n.code,{children:"-1"}),", means no limit, unless the signing\ncertificate has a maximum path length set, in which case the path length is\nset to one less than that of the signing certificate. A limit of ",(0,i.jsx)(n.code,{children:"0"})," means a\nliteral path length of zero."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exclude_cn_from_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the given ",(0,i.jsx)(n.code,{children:"common_name"})," will\nnot be included in DNS or Email Subject Alternate Names (as appropriate).\nUseful if the CN is not a hostname or email address, but is instead some\nhuman-readable identifier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_csr_values"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set to ",(0,i.jsx)(n.code,{children:"true"}),", then: 1) Subject\ninformation, including names and alternate names, will be preserved from the\nCSR rather than using the values provided in the other parameters to this\npath; 2) Any key usages (for instance, non-repudiation) requested in the CSR\nwill be added to the basic set of key usages used for CA certs signed by this\npath; 3) Extensions requested in the CSR will be copied into the issued\ncertificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"permitted_dns_domains"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma separated string (or, string\narray) containing DNS domains for which certificates are allowed to be issued\nor signed by this CA certificate. Supports subdomains via a ",(0,i.jsx)(n.code,{children:"."})," in front of\nthe domain, as per ",(0,i.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc5280#section-4.2.1.10",children:"RFC 5280 Section 4.2.1.10 - Name\nConstraints"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ou"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the OU (OrganizationalUnit) values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"organization"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the O (Organization) values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"country"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the C (Country) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"locality"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the L (Locality) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"province"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the ST (Province) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"street_address"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Street Address values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"postal_code"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Postal Code values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -  - Specifies the requested Subject's named\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc4519#section-2.31",children:"Serial Number"}),"\nvalue, if any. If you want more than one, specify alternative names in the\n",(0,i.jsx)(n.code,{children:"alt_names"})," map using OID 2.5.4.5. Note that this has no impact on the\nCertificate's serial number field, which OpenBao randomly generates."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_before_duration"})," ",(0,i.jsx)(n.code,{children:'(duration: "30s")'})," - Specifies the duration by which to\nbackdate the NotBefore property. This value has no impact in the validity period\nof the requested certificate, specified in the ",(0,i.jsx)(n.code,{children:"ttl"})," field.\nUses ",(0,i.jsx)(n.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use in\nthe signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,\nand 512 for SHA-2-512. Defaults to 0 to automatically detect based\non issuer's key length (SHA-2-256 for RSA keys, and matching the curve size\nfor NIST P-Curves)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": ECDSA and Ed25519 issuers do not follow configuration of the\n",(0,i.jsx)(n.code,{children:"signature_bits"})," value; only RSA issuers will change signature types\nbased on this parameter."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"skid"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Value for the Subject Key Identifier field\n(RFC 5280 Section 4.2.1.2). Specified as a string in hex format. Default\nis empty, allowing OpenBao to automatically calculate the SKID according\nto method one in the above RFC section."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This value should ONLY be used when cross-signing to mimic\nthe existing certificate's SKID value; this is necessary to allow\ncertain TLS implementations (such as OpenSSL) which use SKID/AKID\nmatches in chain building to restrict possible valid chains."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_pss"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether or not to use PSS signatures\nover PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for\nECDSA/Ed25519 issuers."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_usage"})," ",(0,i.jsx)(n.code,{children:'(list: ["KeyAgreement", "KeyEncipherment"])'})," -\nSpecifies the default key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#KeyUsage",children:"https://golang.org/pkg/crypto/x509/#KeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," part of the value. Values are not case-sensitive."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["~> Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," extension is missing\nfrom the CSR."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," -\nSpecifies the default extended key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage",children:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no key default usage constraints, set this to an empty list."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["~> Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"})," extension is\nmissing from the CSR."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage_oids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma-separated string or list of extended key usage oids."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["~> Note: This value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"}),"\nextension is missing from the CSR."]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-3",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "csr": "...",\n  "common_name": "example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-8",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/root/sign-intermediate\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-8",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n",\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n"\n    ],\n    "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58"\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sign-self-issued",children:"Sign Self-Issued"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint uses the configured CA certificate to sign a self-issued\ncertificate (which will usually be a self-signed certificate as well)."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"This is an extremely privileged endpoint"})}),". The given certificate will be\nsigned as-is with only minimal validation performed (is it a CA cert, and is it\nactually self-issued). The only values that will be changed will be the\nauthority key ID, the issuer DN, and, if set, any distribution points.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nIt is recommended to limit this endpoint to only trusted operators."]})}),"\n",(0,i.jsxs)(n.p,{children:["This is generally only needed for root certificate rolling in cases where you\ndon't want/can't get access to a CSR (such as if it's a root stored in OpenBao\nwhere the key is not exposed). If you don't know whether you need this\nendpoint, you most likely should be using a different endpoint (such as\n",(0,i.jsx)(n.code,{children:"sign-intermediate"}),")."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"}),(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["Requires ",(0,i.jsx)(n.code,{children:"sudo"})," capability"]})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root/sign-self-issued"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign-self-issued"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"no"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-9",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/root/sign-self-issued"}),"\npath and takes the value ",(0,i.jsx)(n.code,{children:"default"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"certificate"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the PEM-encoded self-issued certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"require_matching_certificate_algorithms"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, requires\nthat the public key algorithm of the CA match that of the submitted certificate."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-4",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "certificate": "..."\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-9",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/root/sign-self-issued\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-9",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n"\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sign-verbatim",children:"Sign verbatim"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint signs a new certificate based upon the provided CSR. Values are\ntaken verbatim from the CSR; the ",(0,i.jsx)(n.em,{children:"only"})," restriction is that this endpoint will\nrefuse to issue an intermediate CA certificate (see the\n",(0,i.jsx)(n.code,{children:"/pki/root/sign-intermediate"})," endpoint for that functionality.)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"This is a potentially dangerous endpoint and only highly trusted users should\nhave access."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/sign-verbatim(/:name)"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign-verbatim(/:name)"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-10",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/root/sign-self-issued"}),"\npath and takes the value ",(0,i.jsx)(n.code,{children:"default"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies a role. If set, the following parameters\nfrom the role will have effect: ",(0,i.jsx)(n.code,{children:"ttl"}),", ",(0,i.jsx)(n.code,{children:"max_ttl"}),", ",(0,i.jsx)(n.code,{children:"generate_lease"}),", ",(0,i.jsx)(n.code,{children:"no_store"}),",  ",(0,i.jsx)(n.code,{children:"not_before_duration"})," and ",(0,i.jsx)(n.code,{children:"basic_constraints_valid_for_non_ca"}),".\nHowever, if the ",(0,i.jsx)(n.code,{children:"basic_constraints_valid_for_non_ca"})," parameter is explicitly provided in the API call, it takes priority over the value set in the role."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"csr"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the PEM-encoded CSR."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_usage"})," ",(0,i.jsx)(n.code,{children:'(list: ["DigitalSignature", "KeyAgreement", "KeyEncipherment"])'})," -\nSpecifies the default key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#KeyUsage",children:"https://golang.org/pkg/crypto/x509/#KeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no default key usage constraints, set this to an empty list."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," extension is missing\nfrom the CSR."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," -\nSpecifies the default extended key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage",children:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no key default usage constraints, set this to an empty list."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"})," extension is\nmissing from the CSR."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage_oids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma-separated string or list of extended key usage oids."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"}),"\nextension is missing from the CSR."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Time To Live. Cannot be greater\nthan the engine's ",(0,i.jsx)(n.code,{children:"max_ttl"})," value. If not provided, the engine's ",(0,i.jsx)(n.code,{children:"ttl"})," value\nwill be used, which defaults to system values if not explicitly set. See\n",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative for setting an absolute end date (rather than\na relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. Can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is base64 encoded. If\n",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"certificate"})," field will contain the certificate and, if the\nissuing CA is not an OpenBao-derived self-signed root, it will be concatenated\nwith the certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use in\nthe signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,\nand 512 for SHA-2-512. Defaults to 0 to automatically detect based\non issuer's key length (SHA-2-256 for RSA keys, and matching the curve size\nfor NIST P-Curves)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": ECDSA and Ed25519 issuers do not follow configuration of the\n",(0,i.jsx)(n.code,{children:"signature_bits"})," value; only RSA issuers will change signature types\nbased on this parameter."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_pss"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether or not to use PSS signatures\nover PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for\nECDSA/Ed25519 issuers."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"remove_roots_from_chain"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the returned ",(0,i.jsx)(n.code,{children:"ca_chain"}),"\nfield will not include any self-signed CA certificates. Useful if end-users\nalready have the root CA in their trust store."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"user_ids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the comma-separated list of requested\nUser ID (OID 0.9.2342.19200300.100.1.1) Subject values to be placed on the\nsigned certificate. No validation on names is performed using this endpoint."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"basic_constraints_valid_for_non_ca"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Mark Basic Constraints\nvalid when issuing non-CA certificates. When the endpoint is used with a role, this parameter overwrites the ",(0,i.jsx)(n.code,{children:"basic_constraints_valid_for_non_ca"})," value set in the role."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-5",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "csr": "..."\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-10",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/sign-verbatim\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-10",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "pki/sign-verbatim/7ad6cfa5-f04f-c62a-d477-f33210475d05",\n  "renewable": false,\n  "lease_duration": 21600,\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n",\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDUTCCAjmgAwIBAgIJAKM+z4MSfw2mMA0GCSqGSIb3DQEBCwUAMBsxGTAXBgNV\\n...\\nG/7g4koczXLoUM3OQXd5Aq2cs4SS1vODrYmgbioFsQ3eDHd1fg==\\n-----END CERTIFICATE-----\\n"\n    ],\n    "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58"\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"revoke-certificate",children:"Revoke certificate"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint revokes a certificate using its serial number. This is an\nalternative option to the standard method of revoking using OpenBao lease IDs. A\nsuccessful revocation will rotate the CRL."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This operation is privileged as it allows revocation of arbitrary\ncertificates based purely on their serial number. It does not validate that\nthe requesting user issued the certificate or has possession of the private\nkey.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nIt is not possible to revoke issuers using this path."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/revoke"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-11",children:"Parameters"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: either ",(0,i.jsx)(n.code,{children:"serial_number"})," or ",(0,i.jsx)(n.code,{children:"certificate"})," (but not both) must be\nspecified on requests to this endpoint."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:"(string: <optional>)"})," - Specifies the serial number of the\ncertificate to revoke, in hyphen-separated or colon-separated hexadecimal."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"certificate"})," ",(0,i.jsx)(n.code,{children:"(string: <optional>)"})," - Specifies the certificate to revoke,\nin PEM format. This certificate must have been signed by one of the issuers\nin this mount in order to be accepted for revocation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-6",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "serial_number": "39:dd:2e..."\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-11",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/revoke\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-11",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "revocation_time": 1433269787\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"revoke-certificate-with-private-key",children:"Revoke certificate with private key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint revokes a certificate using its private key as proof that the\nrequest is authorized by an appropriate individual (Proof of Possession)."}),"\n",(0,i.jsx)(n.p,{children:"This is an alternative option to the standard method of revoking using OpenBao\nlease IDs or revocation via serial number. A successful revocation will\nrotate the CRL."}),"\n",(0,i.jsx)(n.p,{children:"It is not possible to revoke issuers using this path."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This operation is ",(0,i.jsx)(n.strong,{children:"NOT"})," privileged, as it validates revocation\nhas a private key corresponding to a certificate signed by OpenBao. However,\nto avoid third parties performing a denial-of-service (DOS) against OpenBao,\nwe've made this endpoint authenticated. Thus it is strongly encouraged to\ngenerally allow all access to this path via ACLs."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/revoke-with-key"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-12",children:"Parameters"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: either ",(0,i.jsx)(n.code,{children:"serial_number"})," or ",(0,i.jsx)(n.code,{children:"certificate"})," (but not both) must be\nspecified on requests to this endpoint."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:"(string: <optional>)"})," - Specifies the serial number of the\ncertificate to revoke, in hyphen-separated or colon-separated hexadecimal."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"certificate"})," ",(0,i.jsx)(n.code,{children:"(string: <optional>)"})," - Specifies the certificate to revoke,\nin PEM format. This certificate must have been signed by one of the issuers\nin this mount in order to be accepted for revocation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"private_key"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the private key (in PEM\nformat) corresponding to the certificate issued by OpenBao that is attempted\nto be revoked. This endpoint must be called several times (with each unique\ncertificate/serial number) if this private key is used in multiple\ncertificates as OpenBao does not maintain such a mapping."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-7",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "serial_number": "39:dd:2e...",\n  "private_key": "-----BEGIN PRIVATE KEY-----\\n..."\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-12",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/revoke-with-key\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-12",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "revocation_time": 1433269787\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"list-revoked-certificates",children:"List revoked certificates"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of serial numbers that have been revoked on the local cluster."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/certs/revoked"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-13",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-13",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/certs/revoked\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-13",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": [\n      "3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"list-revocation-requests",children:"List revocation requests"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of serial numbers that have been requested to\nbe revoked on any cluster, along with information about the request's state\nand which cluster it originated on."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/certs/revocation-queue"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-14",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/certs/revocation-queue\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-14",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "key_info": {\n      "3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4": {\n        "requesting_cluster": "48327b28-8325-6d79-6a0b-4cbaa6f27b4a"\n      }\n    },\n    "keys": [\n      "3d:80:91:c3:c2:34:3b:81:69:3d:92:a3:80:69:db:53:04:26:ab:b4"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"accessing-authority-information",children:"Accessing authority information"}),"\n",(0,i.jsx)(n.p,{children:"All consumers of the PKI Secrets Engine mount point will have access to the\nfollowing unauthenticated APIs, useful for reading information about the\ncertificate authority in this mount point."}),"\n",(0,i.jsxs)(n.p,{children:["This includes information about ",(0,i.jsx)(n.a,{href:"#read-issuer-certificate",children:"CA certificates"}),",\n",(0,i.jsx)(n.a,{href:"#read-default-issuer-certificate-chain",children:"their chains"}),", and ",(0,i.jsx)(n.a,{href:"#read-issuer-crl",children:"their signed\nCRLs"}),", containing an encoded list of revoked certificates\npreviously issued by this authority. Individual issued ",(0,i.jsx)(n.a,{href:"#read-certificate",children:"certificates can\nalso be read"}),", assuming their serial number is known.\nFinally, the list of issuing certificates is public information in this\nmount."]}),"\n",(0,i.jsx)(n.h3,{id:"list-issuers",children:"List issuers"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of issuers currently provisioned in this mount.\nThe response includes both the issuer's identifier as well as the name chosen\nby the operators; either can be used to refer to the issuer later."}),"\n",(0,i.jsx)(n.p,{children:"This endpoint is unauthenticated."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuers"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-14",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-15",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"$ curl \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/issuers\n"})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-15",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "key_info": {\n      "1ae8ce9d-2f70-0761-a465-8c9840a247a2": {\n        "issuer_name": "imported-root"\n      },\n      "3dc79a5a-7a6c-70e2-1123-94b88557ba12": {\n        "issuer_name": "root-x1"\n      }\n    },\n    "keys": [\n      "1ae8ce9d-2f70-0761-a465-8c9840a247a2",\n      "3dc79a5a-7a6c-70e2-1123-94b88557ba12"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)("a",{name:"read-ca-certificate"}),"\n",(0,i.jsx)(n.h3,{id:"read-issuer-certificate",children:"Read issuer certificate"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves the specified issuer's certificate."}),"\n",(0,i.jsxs)(n.p,{children:["Note that the response differs between the older ",(0,i.jsx)(n.code,{children:"/pki/cert/ca"}),"\npath and the newer ",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/json"})," path; the latter\nincludes the full ",(0,i.jsx)(n.code,{children:"ca_chain"})," of the issuer, removing the need for a separate\nendpoint."]}),"\n",(0,i.jsx)(n.p,{children:"These are unauthenticated endpoints."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: this endpoint accepts the ",(0,i.jsx)(n.code,{children:"If-Modified-Since"})," header, to respond with\n304 Not Modified when the requested resource has not changed. This header\nneeds to be allowed on the PKI mount by tuning the ",(0,i.jsx)(n.code,{children:"passthrough_request_headers"}),"\noption. In order for clients to know the last modified time, the response\nheader ",(0,i.jsx)(n.code,{children:"Last-Modified"})," needs to be added to the mount tunable\n",(0,i.jsx)(n.code,{children:"allowed_response_headers"}),"."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Format"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/ca"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/ca"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/ca/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/json"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/der"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-15",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/cert/ca"})," and\n",(0,i.jsx)(n.code,{children:"/pki/ca(/pem)?"})," paths and takes the implicit value ",(0,i.jsx)(n.code,{children:"default"}),"."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-16",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"$ curl \\\n    http://127.0.0.1:8200/v1/pki/issuer/root-x1/json\n"})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-16",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n      "-----BEGIN CERTIFICATE-----\\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\\n..."\n    ],\n    "certificate": "-----BEGIN CERTIFICATE-----\\nnMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL...",\n    "revocation_time": 0\n  }\n}\n'})}),"\n",(0,i.jsx)("a",{name:"read-ca-certificate-chain"}),"\n",(0,i.jsx)(n.h3,{id:"read-default-issuer-certificate-chain",children:"Read default issuer certificate chain"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves the default issuer's CA certificate chain, including\nthe default issuer."}),"\n",(0,i.jsxs)(n.p,{children:["To read ",(0,i.jsx)(n.a,{href:"#read-issuer-certificate",children:"other issuers' chains"}),", use the\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/json"})," endpoint instead."]}),"\n",(0,i.jsx)(n.p,{children:"These are unauthenticated endpoints."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Format"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/ca_chain"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/ca_chain"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": These endpoints return the full chain (including the default\nissuer's certificate and all parent issuers known to OpenBao) in these\nresponses."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-17",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"$ curl \\\n    http://127.0.0.1:8200/v1/pki/ca_chain\n"})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-17",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"<PEM-encoded certificate chain>\n"})}),"\n",(0,i.jsx)("a",{name:"read-crl"}),"\n",(0,i.jsx)(n.h3,{id:"read-issuer-crl",children:"Read issuer CRL"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves the specified issuer's CRL."}),"\n",(0,i.jsxs)(n.p,{children:["Note that the response differs between the older ",(0,i.jsx)(n.code,{children:"/pki/cert/crl"})," path and\nthe newer ",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl"})," path; the latter correctly places the\nPEM-encoded CRL in the ",(0,i.jsx)(n.code,{children:"crl"})," field whereas the former incorrectly places it\nin the ",(0,i.jsx)(n.code,{children:"certificate"})," field."]}),"\n",(0,i.jsxs)(n.p,{children:["Endpoints with type ",(0,i.jsx)(n.code,{children:"complete"})," are full CRLs containing all revoked\ncertificates (as of the time of generation. Endpoints with type ",(0,i.jsx)(n.code,{children:"delta"}),"\ncontain incremental CRLs on top of the last complete CRL, with any new\ncertificates that have been revoked. See the ",(0,i.jsx)(n.a,{href:"#set-crl-configuration",children:"revocation configuration\nsection"})," for more information about these options.\nThe delta CRL clears when the next complete CRL is rebuilt. Consumers of\ndelta CRLs will need to update their client to support fetching the\ncorresponding full CRL when it has been regenerated; otherwise, some serial\nnumbers may not appear in the local copy of the full CRL if the remote\ncomplete and delta CRLs has been regenerated."]}),"\n",(0,i.jsxs)(n.p,{children:["Endpoints with source ",(0,i.jsx)(n.code,{children:"local"})," only include cluster-local revocations."]}),"\n",(0,i.jsx)(n.p,{children:"These are unauthenticated endpoints."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": These endpoints now serve a ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-5.1.2.1",children:"version 2"})," CRL response."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: this endpoint accepts the ",(0,i.jsx)(n.code,{children:"If-Modified-Since"})," header, to respond with\n304 Not Modified when the requested resource has not changed. This header\nneeds to be allowed on the PKI mount by tuning the ",(0,i.jsx)(n.code,{children:"passthrough_request_headers"}),"\noption. In order for clients to know the last modified time, the response\nheader ",(0,i.jsx)(n.code,{children:"Last-Modified"})," needs to be added to the mount tunable\n",(0,i.jsx)(n.code,{children:"allowed_response_headers"}),"."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Issuer"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Format"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Source"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/crl"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/delta-crl"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl/delta"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl/delta/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl/der"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Complete"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl/delta"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl/delta/der"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/crl/delta/pem"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Selected"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Delta"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-16",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is not present on the ",(0,i.jsx)(n.code,{children:"/pki/cert/crl"})," and\n",(0,i.jsx)(n.code,{children:"/pki/crl(/pem)?"})," paths and takes the implicit value ",(0,i.jsx)(n.code,{children:"default"}),"."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-18",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"$ curl \\\n    http://127.0.0.1:8200/v1/pki/issuer/root-x1/crl\n"})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-18",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "crl": "-----BEGIN X509 CRL-----\\nMIIBizB1AgEBMA0GCSqGSIb3DQEBCwUAMBIxEDAOBgNVBAMTB3Jvb3QgeDEXDTIy\\n..."\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"ocsp-request",children:"OCSP request"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint retrieves an OCSP response (revocation status) for a given serial number. The request/response formats are\nbased on ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6960",children:"RFC 6960"})]}),"\n",(0,i.jsxs)(n.p,{children:["Endpoints with source ",(0,i.jsx)(n.code,{children:"local"})," only include cluster-local revocations."]}),"\n",(0,i.jsx)(n.p,{children:"At this time there are certain limitations of the OCSP implementation at this path:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Only a single serial number within the request will appear in the response,"}),"\n",(0,i.jsx)(n.li,{children:"None of the extensions defined in the RFC are supported for requests or responses,"}),"\n",(0,i.jsx)(n.li,{children:"Ed25519 backed CA's are not supported for OCSP requests,"}),"\n",(0,i.jsx)(n.li,{children:"Note that this API will not work with the OpenBao client as both request and responses are DER encoded, and"}),"\n",(0,i.jsx)(n.li,{children:"Note that KMS based issuers which require PSS support are not supported either (such as PKCS#11 HSMs or GCP in certain scenarios)."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"These are unauthenticated endpoints."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Response Format"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Source"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/ocsp/<base 64+URL encoded ocsp DER request>"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/ocsp"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"Local"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-17",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"None"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-19",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"openssl ocsp -no_nonce -issuer issuer.pem -CAfile ca_chain.pem -cert cert-to-revoke.pem -text -url $OPENBAO_ADDR/v1/pki/ocsp\n"})}),"\n",(0,i.jsx)(n.h3,{id:"list-certificates",children:"List certificates"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns a list of the current certificates by serial number only.\nThe response does not include the ",(0,i.jsx)(n.a,{href:"#read-certificate-serial-param-values",children:"special serial numbers"}),"\n(",(0,i.jsx)(n.code,{children:"ca"}),", ",(0,i.jsx)(n.code,{children:"ca_chain"}),", and ",(0,i.jsx)(n.code,{children:"crl"}),") that can be used with ",(0,i.jsx)(n.code,{children:"/pki/cert/:serial"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This includes only certificates issued by this mount with ",(0,i.jsx)(n.code,{children:"no_store=false"}),".\nWhile root generation does create entries here, importing certificates\n(including both roots and intermediates) will not cause the imported\ncertificate's serial number to appear in this list."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: The endpoint to list all certificates is authenticated. This is to\nprevent automated enumeration of issued certificates for internal services;\nhowever, this information should generally be considered non-sensitive and\nthe certificates themselves are exposed without authentication (provided\ntheir serial number is known).",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nMany Public CAs participate in the Certificate Transparency initiative,\nwhere all issued certificates are publicly disclosed in the interest\nof third-party verification of CA integrity."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/certs"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-18",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-20",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/certs\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-19",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": [\n      "17:67:16:b0:b9:45:58:c0:3a:29:e3:cb:d6:98:33:7a:a6:3b:66:c1",\n      "26:0f:76:93:73:cb:3f:a0:7a:ff:97:85:42:48:3a:aa:e5:96:03:21"\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)("a",{name:"read-raw-certificate"}),"\n",(0,i.jsx)(n.h3,{id:"read-certificate",children:"Read certificate"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves the certificate specified by its serial number,\nincluding issued certificates."}),"\n",(0,i.jsx)(n.p,{children:"These are unauthenticated endpoints."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Format"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/:serial"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"JSON"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/:serial/raw"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["DER ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/cert/:serial/raw/pem"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["PEM ",(0,i.jsx)(n.a,{href:"#openbao-cli-with-der-pem-responses",title:"OpenBao CLI With DER/PEM Responses",children:"[1]"})]})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-19",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serial"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the serial of the key to read.\nThis is part of the request URL. Valid values for ",(0,i.jsx)(n.code,{children:"serial"})," are:"]}),"\n"]}),"\n",(0,i.jsx)("a",{name:"read-certificate-serial-param-values"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"<serial>"})," for the certificate with the given serial number, in hyphen-separated or colon-separated hexadecimal."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ca"})," for the ",(0,i.jsx)(n.em,{children:"default"})," issuer's CA certificate"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"crl"})," for the ",(0,i.jsx)(n.em,{children:"default"})," issuer's CRL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ca_chain"})," for the ",(0,i.jsx)(n.em,{children:"default"})," issuer's CA trust chain."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": These endpoints return the full chain\n(including this certificate and all parent issuers known to OpenBao) in\nthe ",(0,i.jsx)(n.code,{children:"ca_chain"})," response, for both the ",(0,i.jsx)(n.code,{children:"certificate"})," and newer ",(0,i.jsx)(n.code,{children:"ca_chain"}),"\nfields."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-21",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:"$ curl \\\n    http://127.0.0.1:8200/v1/pki/cert/67:b4:f7:2c:aa:ef:b9:30:f6:ae:f5:12:21:79:ac:08:8a:86:89:72\n"})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-20",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIGmDCCBYCgAwIBAgIHBzEB3fTzhTANBgkqhkiG9w0BAQsFADCBjDELMAkGA1UE\\n...",\n    "revocation_time": 1667400107,\n    "revocation_time_rfc3339": "2022-11-02T14:41:47.327515Z",\n    "issuer_id": "e27bf456-51e1-d937-0001-4a609184fd9b"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"managing-keys-and-issuers",children:"Managing keys and issuers"}),"\n",(0,i.jsx)(n.p,{children:"The following endpoints are highly privileged and allow operators to generate\nor import new issuer certificates and keys, remove existing keys and issuers,\nor read internal information about keys and issuers."}),"\n",(0,i.jsx)(n.h3,{id:"list-issuers-1",children:"List issuers"}),"\n",(0,i.jsxs)(n.p,{children:["Refer to the ",(0,i.jsx)(n.a,{href:"#list-issuers",children:"earlier section"})," for more information about\nlisting issuers."]}),"\n",(0,i.jsx)(n.h3,{id:"list-keys",children:"List keys"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of keys currently provisioned in this mount.\nThe response includes both the key's identifier as well as the name chosen\nby the operators; either can be used to refer to the key later."}),"\n",(0,i.jsx)(n.p,{children:"This endpoint is authenticated."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/keys"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-20",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"after"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Optional entry to begin listing after for\npagination; not required to exist."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"limit"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Optional number of entries to return; defaults\nto all entries."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-22",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/pki/keys\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-21",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "key_info": {\n      "f9244f54-adc7-4a5c-6b08-6ca3a3325620": {\n        "key_name": "imported-root-key"\n      },\n    },\n    "keys": [\n      "f9244f54-adc7-4a5c-6b08-6ca3a3325620",\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"generate-key",children:"Generate key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint generates a new private key for use in the PKI mount. This key\ncan be used with either the ",(0,i.jsx)(n.a,{href:"#generate-root",children:"root"})," or ",(0,i.jsx)(n.a,{href:"#generate-intermediate-csr",children:"intermediate"}),"\nendpoints, using the ",(0,i.jsx)(n.code,{children:"type=existing"})," variant."]}),"\n",(0,i.jsxs)(n.p,{children:["If the path ends with ",(0,i.jsx)(n.code,{children:"exported"}),", the private key will be returned in the\nresponse; if it is ",(0,i.jsx)(n.code,{children:"internal"})," the private key will not be returned and ",(0,i.jsx)(n.em,{children:"cannot\nbe retrieved later"}),"."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/keys/generate/:type"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-21",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the type of the key to\ncreate. If ",(0,i.jsx)(n.code,{children:"exported"}),", the private key will be returned in the response; if\n",(0,i.jsx)(n.code,{children:"internal"})," the private key will not be returned and ",(0,i.jsx)(n.em,{children:"cannot be retrieved\nlater"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - When a new key is created with this request,\noptionally specifies the name for this. The global ref ",(0,i.jsx)(n.code,{children:"default"})," may not\nbe used as a name."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:'(string: "rsa")'})," - Specifies the desired key type; must be ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ed25519"}),"\nor ",(0,i.jsx)(n.code,{children:"ec"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"ed25519"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use for the\ngenerated keys. Allowed values are 0 (universal default); with\n",(0,i.jsx)(n.code,{children:"key_type=rsa"}),", allowed values are: 2048 (default), 3072, or\n4096; with ",(0,i.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: 224, 256 (default),\n384, or 521; ignored with ",(0,i.jsx)(n.code,{children:"key_type=ed25519"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-8",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "key_type": "ec",\n  "key_bits": "256",\n  "key_name": "root-key-2022"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-23",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/keys/generate/internal\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-22",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "request_id": "8ad22b2f-7d14-f2cd-a10a-d1abc33676ab",\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": {\n    "key_id": "adda2443-a8aa-d181-9d07-07c7be6a76ab",\n    "key_name": "root-key-2022",\n    "key_type": "ec"\n  },\n  "warnings": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"generate-root",children:"Generate root"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint generates a new self-signed CA certificate and private key. If\nthe path ends with ",(0,i.jsx)(n.code,{children:"exported"}),", the private key will be returned in the\nresponse; if it is ",(0,i.jsx)(n.code,{children:"internal"})," the private key will not be returned and ",(0,i.jsx)(n.em,{children:"cannot\nbe retrieved later"}),"; if it is ",(0,i.jsx)(n.code,{children:"existing"}),", the key specified by ",(0,i.jsx)(n.code,{children:"key_ref"})," will\nbe reused for this root."]}),"\n",(0,i.jsxs)(n.p,{children:["This generated root will sign its own CRL. Authority Access distribution points\nuse the values set via ",(0,i.jsx)(n.code,{children:"config/urls"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": The PKI Secrets Engine supports multiple issuers under a single\nmount. Use the management operations in this section to ",(0,i.jsx)(n.a,{href:"#list-issuers",children:"list"}),"\nand ",(0,i.jsx)(n.a,{href:"#update-issuer",children:"modify issuers"})," within this mount. No issuers will be\noverridden by calling this operation. Deleting individual keys and issuers\nshould be preferred to calling ",(0,i.jsx)(n.code,{children:"DELETE /pki/root"}),", ",(0,i.jsx)(n.a,{href:"#delete-all-issuers-and-keys",children:"which deletes\neverything"}),"."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root/generate/:type"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuers/generate/root/:type"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root/rotate/:type"})})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-22",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the type of the root to\ncreate. If ",(0,i.jsx)(n.code,{children:"exported"}),", the private key will be returned in the response; if\n",(0,i.jsx)(n.code,{children:"internal"})," the private key will not be returned and ",(0,i.jsx)(n.em,{children:"cannot be retrieved\nlater"}),"; if ",(0,i.jsx)(n.code,{children:"existing"}),", we use the value of the ",(0,i.jsx)(n.code,{children:"key_ref"})," parameter to find\nexisting key material to create the CSR. This parameter is part of the request\nURL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Provides a name to the specified issuer. The\nname must be unique across all issuers and not be the reserved value\n",(0,i.jsx)(n.code,{children:"default"}),". When no value is supplied and the path is ",(0,i.jsx)(n.code,{children:"/pki/root/rotate/:type"}),",\nthe default value of ",(0,i.jsx)(n.code,{children:'"next"'})," will be used."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - When a new key is created with this request,\noptionally specifies the name for this. The global ref ",(0,i.jsx)(n.code,{children:"default"})," may not\nbe used as a name."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_ref"})," ",(0,i.jsx)(n.code,{children:'(string: "default")'})," - Specifies the key (either ",(0,i.jsx)(n.code,{children:"default"}),", by\nname, or by identifier) to use for generating this request. Only suitable\nfor ",(0,i.jsx)(n.code,{children:"type=existing"})," requests."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"common_name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the requested CN for the\ncertificate. If more than one ",(0,i.jsx)(n.code,{children:"common_name"})," is desired, specify the\nalternative names in the ",(0,i.jsx)(n.code,{children:"alt_names"})," list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"alt_names"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Subject Alternative\nNames, in a comma-delimited list. These can be host names or email addresses;\nthey will be parsed into their respective fields."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ip_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested IP Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested URI Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies custom OID/UTF8-string SANs. These\nmust match values specified on the role in ",(0,i.jsx)(n.code,{children:"allowed_other_sans"})," (see role\ncreation for allowed_other_sans globbing rules).\nThe format is the same as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"})," where the\nonly current valid type is ",(0,i.jsx)(n.code,{children:"UTF8"}),". This can be a comma-delimited list or a\nJSON string slice."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Time To Live (after which the\ncertificate will be expired). This cannot be larger than the engine's max (or,\nif not set, the system max). See ",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative for setting an\nabsolute end date (rather than a relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. Can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is base64 encoded. If\n",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"certificate"})," field will contain the private key (if\nexported) and certificate, concatenated; if the issuing CA is not a\nOpenBao-derived self-signed root, this will be included as well."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"private_key_format"})," ",(0,i.jsx)(n.code,{children:'(string: "der")'})," - Specifies the format for marshaling\nthe private key within the private_key response field. Defaults to ",(0,i.jsx)(n.code,{children:"der"})," which will\nreturn either base64-encoded DER or PEM-encoded DER, depending on the value of\n",(0,i.jsx)(n.code,{children:"format"}),". The other option is ",(0,i.jsx)(n.code,{children:"pkcs8"})," which will return the key marshalled as\nPEM-encoded PKCS8."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," that this does not apply to the private key within the certificate\nfield if ",(0,i.jsx)(n.code,{children:"format=pem_bundle"})," parameter is specified."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:'(string: "rsa")'})," - Specifies the desired key type; must be ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ed25519"}),"\nor ",(0,i.jsx)(n.code,{children:"ec"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"ed25519"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use for the\ngenerated keys. Allowed values are 0 (universal default); with\n",(0,i.jsx)(n.code,{children:"key_type=rsa"}),", allowed values are: 2048 (default), 3072, or\n4096; with ",(0,i.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: 224, 256 (default),\n384, or 521; ignored with ",(0,i.jsx)(n.code,{children:"key_type=ed25519"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"max_path_length"})," ",(0,i.jsx)(n.code,{children:"(int: -1)"})," - Specifies the maximum path length to encode in\nthe generated certificate. ",(0,i.jsx)(n.code,{children:"-1"})," means no limit. Unless the signing certificate\nhas a maximum path length set, in which case the path length is set to one\nless than that of the signing certificate. A limit of ",(0,i.jsx)(n.code,{children:"0"})," means a literal\npath length of zero."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exclude_cn_from_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the given ",(0,i.jsx)(n.code,{children:"common_name"})," will\nnot be included in DNS or Email Subject Alternate Names (as appropriate).\nUseful if the CN is not a hostname or email address, but is instead some\nhuman-readable identifier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"permitted_dns_domains"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma separated string (or, string\narray) containing DNS domains for which certificates are allowed to be issued\nor signed by this CA certificate. Note that subdomains are allowed, as per\n",(0,i.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc5280#section-4.2.1.10",children:"RFC 5280 Section 4.2.1.10 - Name\nConstraints"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ou"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the OU (OrganizationalUnit) values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"organization"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the O (Organization) values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"country"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the C (Country) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"locality"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the L (Locality) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"province"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the ST (Province) values in the subject\nfield of the resulting certificate. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"street_address"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Street Address values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"postal_code"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Postal Code values in the\nsubject field of the resulting certificate. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -  - Specifies the default Subject's named\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc4519#section-2.31",children:"Serial Number"}),"\nvalue, if any. If you want more than one, specify alternative names in the\n",(0,i.jsx)(n.code,{children:"alt_names"})," map using OID 2.5.4.5. Note that this has no impact on the\nCertificate's serial number field, which OpenBao randomly generates."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_before_duration"})," ",(0,i.jsx)(n.code,{children:'(duration: "30s")'})," - Specifies the duration by which to\nbackdate the NotBefore property. This value has no impact in the validity period\nof the requested certificate, specified in the ",(0,i.jsx)(n.code,{children:"ttl"})," field.\nUses ",(0,i.jsx)(n.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_usage"})," ",(0,i.jsx)(n.code,{children:'(list: ["KeyAgreement", "KeyEncipherment"])'})," -\nSpecifies the default key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#KeyUsage",children:"https://golang.org/pkg/crypto/x509/#KeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," part of the value. Values are not case-sensitive."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," extension is missing\nfrom the CSR."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," -\nSpecifies the default extended key usage constraint on the issued certificate. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage",children:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no key default usage constraints, set this to an empty list."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: previous versions of this document incorrectly called this a constraint;\nthis value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"})," extension is\nmissing from the CSR."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage_oids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma-separated string or list of extended key usage oids."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This value is only used as a default when the ",(0,i.jsx)(n.code,{children:"ExtendedKeyUsage"}),"\nextension is missing from the CSR."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: Keys of type ",(0,i.jsx)(n.code,{children:"rsa"})," currently only support PKCS#1 v1.5 signatures."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-9",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "common_name": "example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-24",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/root/generate/internal\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-23",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": {\n    "expiration": "1654105687",\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "issuing_ca": "-----BEGIN CERTIFICATE-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE-----\\n",\n    "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58",\n    "issuer_id": "7b493f17-6c08-ff73-cf1a-99bfcc448a73",\n    "issuer_name": "",\n    "key_id": "22b82e37-529d-7251-7d78-3862bfd069ac",\n    "key_name": ""\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)("a",{name:"generate-intermediate"}),"\n",(0,i.jsx)(n.h3,{id:"generate-intermediate-csr",children:"Generate intermediate CSR"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns a new CSR for signing, optionally generating a new private\nkey. If using OpenBao as a root (and, like many other CAs), the various parameters\non the final signed certificate are set at signing time and ",(0,i.jsx)(n.em,{children:"may or may not honor\nthe parameters set here"})," (and transmitted in the returned CSR)."]}),"\n",(0,i.jsx)(n.p,{children:"The parameters below are mostly meant as a helper function; not all possible\nparameters that can be set in a CSR are supported in this request."}),"\n",(0,i.jsxs)(n.p,{children:["No new issuer is yet created by this call; note that a new key may be\ngenerated depending on the ",(0,i.jsx)(n.code,{children:"type"})," request parameter."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In order to complete the intermediate generation, the CSR must be\nsigned and the resulting certificate imported. This may involve working with\nexternal systems (such as an external or offline root CA) to transmit the\nCSR and complete the signing before the signed intermediate certificate is\n",(0,i.jsx)(n.a,{href:"#import-ca-certificate-and-keys",children:"imported"})," into this mount."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsxs)(n.th,{style:{textAlign:"left"},children:["Private key source (",(0,i.jsx)(n.code,{children:"type"}),")"]})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/intermediate/generate/:type"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"specified per request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuers/generate/intermediate/:type"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"specified per request"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/intermediate/cross-sign"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"existing"})})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-23",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the type of the intermediate to\ncreate. If ",(0,i.jsx)(n.code,{children:"exported"}),", the private key will be returned in the response; if\n",(0,i.jsx)(n.code,{children:"internal"})," the private key will not be returned and ",(0,i.jsx)(n.em,{children:"cannot be retrieved\nlater"}),"; if ",(0,i.jsx)(n.code,{children:"existing"}),", we expect the ",(0,i.jsx)(n.code,{children:"key_ref"})," parameter to use existing\nkey material to create the CSR. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"common_name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the requested CN for the\ncertificate. If more than one ",(0,i.jsx)(n.code,{children:"common_name"})," is desired, specify the\nalternative names in the ",(0,i.jsx)(n.code,{children:"alt_names"})," list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"alt_names"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Subject Alternative\nNames, in a comma-delimited list. These can be host names or email addresses;\nthey will be parsed into their respective fields."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ip_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested IP Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested URI Subject Alternative\nNames, in a comma-delimited list."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies custom OID/UTF8-string SANs. These\nmust match values specified on the role in ",(0,i.jsx)(n.code,{children:"allowed_other_sans"})," (see role\ncreation for allowed_other_sans globbing rules).\nThe format is the same as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"})," where the\nonly current valid type is ",(0,i.jsx)(n.code,{children:"UTF8"}),". This can be a comma-delimited list or a\nJSON string slice."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "pem")'})," - Specifies the format for returned data. This can be\n",(0,i.jsx)(n.code,{children:"pem"}),", ",(0,i.jsx)(n.code,{children:"der"}),", or ",(0,i.jsx)(n.code,{children:"pem_bundle"}),"; defaults to ",(0,i.jsx)(n.code,{children:"pem"}),". If ",(0,i.jsx)(n.code,{children:"der"}),", the output is\nbase64 encoded. If ",(0,i.jsx)(n.code,{children:"pem_bundle"}),", the ",(0,i.jsx)(n.code,{children:"csr"})," field will contain the private key\n(if exported) and CSR, concatenated."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"private_key_format"})," ",(0,i.jsx)(n.code,{children:'(string: "der")'})," - Specifies the format for marshaling\nthe private key within the private_key response field. Defaults to ",(0,i.jsx)(n.code,{children:"der"})," which will\nreturn either base64-encoded DER or PEM-encoded DER, depending on the value of\n",(0,i.jsx)(n.code,{children:"format"}),". The other option is ",(0,i.jsx)(n.code,{children:"pkcs8"})," which will return the key marshalled as\nPEM-encoded PKCS8."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," that this does not apply to the private key within the certificate\nfield if ",(0,i.jsx)(n.code,{children:"format=pem_bundle"})," parameter is specified."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:'(string: "rsa")'})," - Specifies the desired key type; must be ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ed25519"}),"\nor ",(0,i.jsx)(n.code,{children:"ec"}),". Not suitable for ",(0,i.jsx)(n.code,{children:"type=existing"})," requests."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"ed25519"}),"."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Keys of type ",(0,i.jsx)(n.code,{children:"rsa"})," currently only support PKCS#1 v1.5 signatures."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use for the\ngenerated keys. Allowed values are 0 (universal default); with\n",(0,i.jsx)(n.code,{children:"key_type=rsa"}),", allowed values are: 2048 (default), 3072, or\n4096; with ",(0,i.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: 224, 256 (default),\n384, or 521; ignored with ",(0,i.jsx)(n.code,{children:"key_type=ed25519"}),". Not suitable for\n",(0,i.jsx)(n.code,{children:"type=existing"})," requests."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - When a new key is created with this request,\noptionally specifies the name for this. The global ref ",(0,i.jsx)(n.code,{children:"default"})," may not\nbe used as a name."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_ref"})," ",(0,i.jsx)(n.code,{children:'(string: "default")'})," - Specifies the key (either ",(0,i.jsx)(n.code,{children:"default"}),", by\nname, or by identifier) to use for generating this request. Only suitable\nfor ",(0,i.jsx)(n.code,{children:"type=existing"})," requests."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use in\nthe signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,\nand 512 for SHA-2-512. Defaults to 0 to automatically detect based\non issuer's key length (SHA-2-256 for RSA keys, and matching the curve size\nfor NIST P-Curves)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": ECDSA and Ed25519 issuers do not follow configuration of the\n",(0,i.jsx)(n.code,{children:"signature_bits"})," value; only RSA issuers will change signature types\nbased on this parameter."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exclude_cn_from_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If true, the given ",(0,i.jsx)(n.code,{children:"common_name"})," will\nnot be included in DNS or Email Subject Alternate Names (as appropriate).\nUseful if the CN is not a hostname or email address, but is instead some\nhuman-readable identifier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ou"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the OU (OrganizationalUnit) values in the\nsubject field of the resulting CSR. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"organization"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the O (Organization) values in the\nsubject field of the resulting CSR. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"country"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the C (Country) values in the subject\nfield of the resulting CSR. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"locality"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the L (Locality) values in the subject\nfield of the resulting CSR. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"province"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the ST (Province) values in the subject\nfield of the resulting CSR. This is a comma-separated string or JSON\narray."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"street_address"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Street Address values in the\nsubject field of the resulting CSR. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"postal_code"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Postal Code values in the\nsubject field of the resulting CSR. This is a comma-separated string\nor JSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the requested Subject's named\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc4519#section-2.31",children:"Serial Number"}),"\nvalue, if any. If you want more than one, specify alternative names in the\n",(0,i.jsx)(n.code,{children:"alt_names"})," map using OID 2.5.4.5. Note that this has no impact on the\nCertificate's serial number field, which OpenBao randomly generates."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"add_basic_constraints"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Whether to add a Basic Constraints\nextension with CA: true. Only needed as a workaround in some compatibility\nscenarios with Active Directory Certificate Services."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-10",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "common_name": "www.example.com"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-25",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/intermediate/generate/exported\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "csr": "-----BEGIN CERTIFICATE REQUEST-----\\nMIIDzDCCAragAwIBAgIUOd0ukLcjH43TfTHFG9qE0FtlMVgwCwYJKoZIhvcNAQEL\\n...\\numkqeYeO30g1uYvDuWLXVA==\\n-----END CERTIFICATE REQUEST-----\\n",\n    "private_key": "-----BEGIN RSA PRIVATE KEY-----\\\\nMIIEpAIBAAKCAQEAwsANtGz9gS3o5SwTSlOG1l-----END RSA PRIVATE KEY-----",\n    "private_key_type": "rsa"\n  },\n  "warnings": null,\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)("a",{name:"submit-ca-information"}),"\n",(0,i.jsx)("a",{name:"set-signed-intermediate"}),"\n",(0,i.jsx)(n.h3,{id:"import-ca-certificates-and-keys",children:"Import CA certificates and keys"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows submitting (importing) the CA information for the backend\nvia a PEM file containing the CA certificate and any private keys, concatenated\ntogether, in any order."}),"\n",(0,i.jsx)(n.p,{children:"Each certificate will be validated to ensure it is a valid CA (has an asserted\nisCA basic constraint); non-CA certs will err. Any provided CRLs will be\nignored. Each unique certificate and private key will be imported as its own\nissuer or key entry; duplicates (including with existing keys) will be ignored."}),"\n",(0,i.jsxs)(n.p,{children:["The response will indicate what issuers and keys were created as part of this\nrequest (in the ",(0,i.jsx)(n.code,{children:"imported_issuers"})," and ",(0,i.jsx)(n.code,{children:"imported_keys"}),"), along with a ",(0,i.jsx)(n.code,{children:"mapping"}),"\nfield, indicating which keys belong to which issuers (including from already\nimported entries present in the same bundle). The response also contains an\n",(0,i.jsx)(n.code,{children:"existing_issuers"})," and ",(0,i.jsx)(n.code,{children:"existing_keys"})," fields, which specifies the issuer and\nkey IDs of any entries in the bundle that already existed within this mount."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Allows private keys"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Request Parameter"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/ca"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"yes"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"pem_bundle"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuers/import/bundle"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"yes"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"pem_bundle"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuers/import/cert"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"pem_bundle"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/intermediate/set-signed"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"no"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"certificate"})})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": endpoints which allow importing private keys ",(0,i.jsx)(n.em,{children:"should"})," be considered\nhighly privileged and restricted appropriately. Endpoints which allow\nimporting issuers should also be restricted, but note that issuers without\nkeys are unable to issue certificates or CRLs."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: OpenBao will deduplicate differently-encoded but same-valued keys and\nissuers. This means the returned certificate ",(0,i.jsx)(n.em,{children:"may"})," differ in encoding from\nthe one provided on subsequent re-imports of the same issuer or key."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: This import may fail due to CRL rebuilding issues or other potential\nissues; this may impact long-term use of these issuers, but some issuers or\nkeys may still be imported as a result of this process."})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Warning: See the ",(0,i.jsx)(n.a,{href:"/docs/secrets/pki/considerations#issuer-subjects-and-crls",children:"note"}),"\nregarding Subject naming on externally created CA certificates and\nshortcomings with CRL building."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-24",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pem_bundle"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the unencrypted private key\nand certificate, concatenated in PEM format."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: this parameter is on the ",(0,i.jsx)(n.code,{children:"/pki/config/ca"})," and ",(0,i.jsx)(n.code,{children:"/pki/issuers/import/*"}),"\npaths; it is not on the ",(0,i.jsx)(n.code,{children:"/pki/intermediate/set-signed"})," path."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"certificate"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the certificates to import,\nconcatenated in PEM format."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: this parameter is ",(0,i.jsx)(n.strong,{children:"only"})," on the ",(0,i.jsx)(n.code,{children:"/pki/intermediate/set-signed"})," path."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-26",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data "@payload.json" \\\n    http://127.0.0.1:8200/v1/pki/config/ca\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Note that if you provide the data through the HTTP API, it must be\nJSON-formatted, with newlines replaced with ",(0,i.jsx)(n.code,{children:"\\n"}),", like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "pem_bundle": "-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END CERTIFICATE-----"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-24",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "imported_issuers": ["1ae8ce9d-2f70-0761-a465-8c9840a247a2"],\n    "imported_keys": ["97be2525-717a-e2f7-88da-0a20e11aad88"],\n    "mapping": {\n      "1ae8ce9d-2f70-0761-a465-8c9840a247a2": "97be2525-717a-e2f7-88da-0a20e11aad88"\n    },\n    "existing_issuers": [],\n    "existing_keys": []\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-issuer",children:"Read issuer"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint allows an operator to fetch a single issuer certificate and its\nchain, including internal information not exposed on the ",(0,i.jsxs)(n.a,{href:"#read-issuer-certificate",children:["unauthenticated\n",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/json"})]})," endpoint. This\nincludes information about the name, the key material, if an explicitly\nconstructed chain has been set, what the behavior is for signing longer TTL'd\ncertificates, and what usage modes are set on this issuer."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-25",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-27",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/issuer/default\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-25",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n      "-----BEGIN CERTIFICATE-----\\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\\n..."\n    ],\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n    "issuer_id": "7545992c-1910-0898-9e64-d575549fbe9c",\n    "issuer_name": "root-x1",\n    "key_id": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf",\n    "leaf_not_after_behavior": "truncate",\n    "manual_chain": null,\n    "usage": "read-only,issuing-certificates,crl-signing,ocsp-signing"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"update-issuer",children:"Update issuer"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows an operator to manage a single issuer, updating various\nproperties about it, including its name, an explicitly constructed chain,\nwhat the behavior is for signing longer TTL'd certificates, and what usage\nmodes are set on this issuer."}),"\n",(0,i.jsxs)(n.p,{children:["Note that it is not possible to change the certificate of this issuer; to\ndo so, import a new issuer and a new ",(0,i.jsx)(n.code,{children:"issuer_id"})," will be assigned."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"PATCH"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref"})})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," ",(0,i.jsx)(n.code,{children:"POST"}),"ing to this endpoint causes OpenBao to overwrite the previous\ncontents of the issuer, using the provided request data (and any defaults\nfor elided parameters). It does not update only the provided fields.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nOpenBao supports the PATCH operation to this endpoint, using the ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6902",children:"JSON patch\nformat"})," supported by KVv2,\nallowing update of specific fields. Note that ",(0,i.jsx)(n.code,{children:"bao write"})," uses ",(0,i.jsx)(n.code,{children:"POST"}),"."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-26",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Provides a name to the specified issuer. The\nname must be unique across all issuers and not be the reserved value\n",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"leaf_not_after_behavior"})," ",(0,i.jsx)(n.code,{children:'(string: "err")'})," - Behavior of a leaf's\n",(0,i.jsx)(n.code,{children:"NotAfter"})," field during issuance. Valid options are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"err"}),", to error if the computed ",(0,i.jsx)(n.code,{children:"NotAfter"})," exceeds that of this issuer;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"truncate"})," to silently truncate the requested ",(0,i.jsx)(n.code,{children:"NotAfter"})," value to that\nof this issuer; or"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"permit"})," to allow this issuance to succeed with a ",(0,i.jsx)(n.code,{children:"NotAfter"})," value\nexceeding that of this issuer."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: Not all values result in leaf certificates that can be validated\nthrough the entire validity period. It is suggested to use ",(0,i.jsx)(n.code,{children:"truncate"})," for\nintermediate CAs and ",(0,i.jsx)(n.code,{children:"permit"})," only for root CAs. This is because\n(root) certificates in browsers' trust stores typically aren't checked\nfor validity, whereas intermediate CA certificates sent in TLS connections\nare checked for validity at the time of use. This means that a leaf\ncertificate permitted to be issued for longer than the intermediate likely\nwon't continue to validate after the intermediate has expired."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"manual_chain"})," ",(0,i.jsx)(n.code,{children:"([]string: nil)"})," - Chain of issuer references to build this\nissuer's computed CAChain field from, when non-empty."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: the ",(0,i.jsx)(n.code,{children:"manual_chain"})," field is an advanced field useful when automatic\nchain building isn't desired. The first element ",(0,i.jsx)(n.em,{children:"must"})," be the present\nissuer's reference. Subsequent references ",(0,i.jsx)(n.em,{children:"should"})," validate previous\nentries, terminating with a root certificate. ",(0,i.jsx)(n.em,{children:"Ideally"})," a single linear\nchain would come first (from this issuer to a single root certificate)\nbefore any parallel, alternate chains appear.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nThis field is especially useful for cross-signed intermediates within\nOpenBao. Because each cross-signed intermediate will only know of the\none root, but issuance should serve both, update the issuers' entries\nwith the desired ",(0,i.jsx)(n.code,{children:"manual_chain"})," value.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nThe CA Chain returned by a GET to the issuer configuration is the same\nchain presented during signing and (if this issuer is the default) on\nthe ",(0,i.jsx)(n.code,{children:"/ca_chain"})," path. Setting ",(0,i.jsx)(n.code,{children:"manual_chain"})," thus allows controlling\nthe presented chain as desired."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"usage"})," ",(0,i.jsx)(n.code,{children:"([]string: read-only,issuing-certificates,crl-signing,ocsp-signing)"})," - Allowed\nusages for this issuer. Valid options are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"read-only"}),", to allow this issuer to be read; implict; always allowed;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuing-certificates"}),", to allow this issuer to be used for issuing other\ncertificates; or"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"crl-signing"}),", to allow this issuer to be used for signing CRLs. This is\nseparate from the CRLSign KeyUsage on the x509 certificate, but this usage\ncannot be set unless that KeyUsage is allowed on the x509 certificate."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ocsp-signing"}),", to allow this issuer to be used for signing OCSP responses"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: The ",(0,i.jsx)(n.code,{children:"usage"})," field allows for a soft-delete capability on the issuer,\nor to prevent use of the issuer prior to it being enabled. For example,\nas issuance is rotated to a new issuer, the old issuer could be marked\n",(0,i.jsx)(n.code,{children:"usage=read-only,crl-signing,ocsp-signing"}),", allowing existing certificates to be revoked\n(and the CRL updated), but preventing new certificate issuance. After all\ncertificates issued under this certificate have expired, this certificate\ncould be marked ",(0,i.jsx)(n.code,{children:"usage=read-only"}),", freezing the CRL. Finally, after a grace\nperiod, the issuer could be deleted."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revocation_signature_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Which signature algorithm\nto use when building CRLs. See Go's ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/crypto/x509#SignatureAlgorithm",children:(0,i.jsx)(n.code,{children:"x509.SignatureAlgorithm"})}),"\nconstant for possible values. This flag allows control over hash function\nand signature scheme (PKCS#1v1.5 vs PSS). The default (empty string) value\nis for Go to select the signature algorithm automatically, which may not\nalways work."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: This can fail if the underlying key does not support the requested\nsignature algorithm; this may not always be known at modification time."})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuing_certificates"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values for\nthe Issuing Certificate field. This can be an array or a comma-separated\nstring list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1",children:"RFC 5280 Section 4.2.2.1"}),"\nfor information about the Authority Information Access field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"crl_distribution_points"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values\nfor the CRL Distribution Points field. This can be an array or a\ncomma-separated string list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.13",children:"RFC 5280 Section 4.2.1.13"}),"\nfor information about the CRL Distribution Points field."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: When multiple issuers are in use under a single mount, each issuer will\nhave its own CRL distribution point. These separate CRLs should either be\naggregated into a single CRL (externally; as OpenBao does not support this\nfunctionality) or multiple ",(0,i.jsx)(n.code,{children:"crl_distribution_points"})," and\n",(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"})," values should be specified here, pointing to\neach cluster and issuer."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values\nfor the Delta CRL Distribution Points field. This can be an array or a\ncomma-separated string list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.15",children:"RFC 5280 Section 4.2.1.15"}),"\nand ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-5.2.6",children:"Section 5.2.6"}),"\nfor information about the Delta CRL Distribution Points field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ocsp_servers"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values for the OCSP\nServers field. This can be an array or a comma-separated string list. See also\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1",children:"RFC 5280 Section 4.2.2.1"}),"\nfor information about the Authority Information Access field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enable_aia_url_templating"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies that the above AIA\nURL values (",(0,i.jsx)(n.code,{children:"issuing_certificates"}),", ",(0,i.jsx)(n.code,{children:"crl_distribution_points"}),",\n",(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"}),", and ",(0,i.jsx)(n.code,{children:"ocsp_servers"}),") should be\ntemplated. This replaces the literal value ",(0,i.jsx)(n.code,{children:"{{issuer_id}}"})," with the\nID of the issuer doing the issuance, the literal value\n",(0,i.jsx)(n.code,{children:"{{cluster_path}}"})," with the value of ",(0,i.jsx)(n.code,{children:"path"})," from the\ncluster-local configuration endpoint ",(0,i.jsx)(n.code,{children:"/config/cluster"}),", and the\nliteral value ",(0,i.jsx)(n.code,{children:"{{cluster_aia_path}}"})," with the value of ",(0,i.jsx)(n.code,{children:"aia_path"})," from\nthe cluster-local configuration endpoint ",(0,i.jsx)(n.code,{children:"/config/cluster"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": If no cluster-local address is present and templating is used,\nissuance will fail."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-11",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "issuer_name": "root-x1"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-28",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/issuer/default\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-26",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n      "-----BEGIN CERTIFICATE-----\\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\\n..."\n    ],\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n    "issuer_id": "7545992c-1910-0898-9e64-d575549fbe9c",\n    "issuer_name": "root-x1",\n    "key_id": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf",\n    "leaf_not_after_behavior": "truncate",\n    "manual_chain": null,\n    "usage": "read-only,issuing-certificates,crl-signing,ocsp-signing",\n    "revocation_signature_algorithm": "",\n    "issuing_certificates": ["<url1>", "<url2>"],\n    "crl_distribution_points": ["<url1>", "<url2>"],\n    "delta_crl_distribution_points": ["<url1>", "<url2>"],\n    "ocsp_servers": ["<url1>", "<url2>"]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"revoke-issuer",children:"Revoke issuer"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows an operator to revoke an issuer certificate, marking it\nunable to issue new certificates and adding it to other issuers' CRLs, if they\nhave signed this issuer's certificate. This will cause all CRLs to be rebuilt."}),"\n",(0,i.jsx)(n.p,{children:"This is mostly provided for book-keeping and as a soft-delete feature, to\nensure this issuer is not accidentally reused in the future."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Warning"}),": This operation cannot be undone!"]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This operation ",(0,i.jsx)(n.strong,{children:"does not"})," have any impact on other clusters or\nmounts and ",(0,i.jsx)(n.strong,{children:"may not"})," have any impact on whether clients consider these\nissuers revoked. Revoked issuers will not appear on their own CRLs. Revoked\nissuers may not appear on other CRLs if a suitable parent is not present in\nthe same mount point. Revoked issuers will still need to be revoked in any\nother mounts they appear in, both as issuers, in the event of issuer reuse,\nand as issued certificates, in the event of an external parent mount."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/revoke"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-27",children:"Parameters"}),"\n",(0,i.jsx)(n.p,{children:"No parameters."}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-29",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/pki/issuer/old-intermediate/revoke\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-27",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "ca_chain": [\n      "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n      "-----BEGIN CERTIFICATE-----\\nMIIDFTCCAf2gAwIBAgIUUo/qwLm5AyqUWqFHw1MlgwUtS/kwDQYJKoZIhvcNAQEL\\n..."\n    ],\n    "certificate": "-----BEGIN CERTIFICATE-----\\nMIIDFDCCAfygAwIBAgIUXgxy54mKooz5soqQoRINazH/3pQwDQYJKoZIhvcNAQEL\\n...",\n    "issuer_id": "7545992c-1910-0898-9e64-d575549fbe9c",\n    "issuer_name": "old-intermediate",\n    "key_id": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf",\n    "leaf_not_after_behavior": "truncate",\n    "manual_chain": null,\n    "usage": "read-only,issuing-certificates,crl-signing"\n    "revocation_time": 1433269787,\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delete-issuer",children:"Delete issuer"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint deletes the specified issuer. A warning is emitted and the\ndefault is cleared if this issuer is the default issuer."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": If an issuer is incorrectly deleted, but its key material\nremains, it is possible to re-import just the issuer certificate. The\n",(0,i.jsx)(n.code,{children:"issuer_id"})," will change, but the name can be re-assigned to the new\nissuer."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-30",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/pki/issuer/root-x1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"import-key",children:"Import key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint allows an operator to import a single pem encoded ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ec"}),", or ",(0,i.jsx)(n.code,{children:"ed25519"}),"\nkey."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This API does not protect against importing keys using insecure combinations of\nalgorithm and key length."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/keys/import"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-28",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"pem_bundle"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the unencrypted private key in PEM format."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Provides a name to the specified key. The\nname must be unique across all keys and not be the reserved value\n",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-12",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "key_name": "my-imported-key",\n  "pem_bundle": "-----BEGIN RSA PRIVATE KEY-----\\n...\\n-----END CERTIFICATE-----"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-31",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/keys/import\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-28",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "key_id": "2cf03991-b052-1dc3-393e-374b41f8dcd8",\n    "key_name": "my-imported-key",\n    "key_type": "rsa"\n  },\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-key",children:"Read key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows an operator to fetch information about an existing key."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": OpenBao does not allow reading the value of the private key after\nit has been created."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/key/:key_ref"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-29",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing key,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default key, or the name assigned\nto a key. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-32",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/key/default\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-29",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "key_id": "8c4046f8-52a8-0974-29d2-745d8a0dd848",\n    "key_name": "key-root-x1",\n    "key_type": "rsa"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"update-key",children:"Update key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows an operator to manage a single key. Currently, the only\nparameter that is configurable is the key's name."}),"\n",(0,i.jsxs)(n.p,{children:["Note that it is not possible to change the private key of this key; to\ndo so, import a new key and a new ",(0,i.jsx)(n.code,{children:"key_id"})," will be assigned."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/key/:key_ref"})})]})})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," ",(0,i.jsx)(n.code,{children:"POST"}),"ing to this endpoint causes OpenBao to overwrite the previous\ncontents of the key, using the provided request data (and any defaults\nfor elided parameters). It does not update only the provided fields."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-30",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing key,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default key, or the name assigned\nto a key. This parameter is part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Provides a name to the specified key. The\nname must be unique across all keys and not be the reserved value\n",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-13",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "key_name": "key-root-x1"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-33",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/key/default\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-30",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'{\n  "data": {\n    "key_id": "8c4046f8-52a8-0974-29d2-745d8a0dd848",\n    "key_name": "key-root-x1",\n    "key_type": "rsa"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delete-key",children:"Delete key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint deletes the specified key. A warning is emitted and the\ndefault is cleared if this key is the default key."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Because OpenBao does not allow exporting the private key\nafter it is initially generated, deletion of keys is a sensitive\noperation. Additionally, one key may be used by more than one issuer.\nAs a result, OpenBao prohibits deletion of keys until ",(0,i.jsx)(n.strong,{children:"all"})," issuers\nusing this key have also been deleted. If these issuers are still\nnecessary for chain building, re-import them without the corresponding\nkeys after the key has been deleted or use the soft-delete feature\nof issuers."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/key/:key_ref"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-34",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/pki/key/key-root-x1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delete-all-issuers-and-keys",children:"Delete all issuers and keys"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint deletes all issuers and keys within the mount. It is highly\nrecommended to use the individual delete operations instead. This mount\nwill be unusable until new issuers and keys are provisioned."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This endpoint requires sudo/root privileges."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-35",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/pki/root\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"managing-authority-information",children:"Managing authority information"}),"\n",(0,i.jsx)(n.p,{children:"The following privileged endpoints allow the operator to control information\nabout the core contents of certificates and to perform privileged operations\nlike rotating the CRLs or performing tidy operations."}),"\n",(0,i.jsx)(n.h3,{id:"list-roles-1",children:"List roles"}),"\n",(0,i.jsxs)(n.p,{children:["Refer to the ",(0,i.jsx)(n.a,{href:"#list-roles",children:"earlier section"})," for more information about\nlisting roles."]}),"\n",(0,i.jsx)(n.h3,{id:"createupdate-role",children:"Create/Update role"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint creates or updates the role definition. Note that the\n",(0,i.jsx)(n.code,{children:"allowed_domains"}),", ",(0,i.jsx)(n.code,{children:"allow_subdomains"}),", ",(0,i.jsx)(n.code,{children:"allow_glob_domains"}),", and\n",(0,i.jsx)(n.code,{children:"allow_any_name"})," attributes are additive; between them nearly and across\nmultiple roles nearly any issuing policy can be accommodated."]}),"\n",(0,i.jsxs)(n.p,{children:["Handling of ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," on the issued leaf is complex: if any of\n",(0,i.jsx)(n.code,{children:"server_flag"}),", ",(0,i.jsx)(n.code,{children:"client_flag"}),", ",(0,i.jsx)(n.code,{children:"code_signing_flag"}),", or ",(0,i.jsx)(n.code,{children:"email_protection_flag"}),"\nare set, they are added to the generated ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," value. Then names in\nthe ",(0,i.jsx)(n.code,{children:"ext_key_usage"})," field are added, followed by OIDs from\n",(0,i.jsx)(n.code,{children:"ext_key_usage_oids"}),". This can result in issuance of certificates with\nunexpected ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," values, as e.g., ",(0,i.jsx)(n.code,{children:"server_flag"})," and ",(0,i.jsx)(n.code,{children:"client_flag"}),"\ndefault to ",(0,i.jsx)(n.code,{children:"true"})," and need to be manually disabled before ",(0,i.jsx)(n.code,{children:"ext_key_usage"}),"\nand ",(0,i.jsx)(n.code,{children:"ext_key_usage_oids"})," will be respected."]}),"\n",(0,i.jsx)(n.p,{children:"If a client requests a certificate that is not allowed by the CN policy\nin the role, the request is denied."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:name"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"PATCH"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:name"})})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"})," ",(0,i.jsx)(n.code,{children:"POST"}),"ing to this endpoint when the role already exists causes\nOpenBao to overwrite the contents of the role, using the provided request\ndata (and any defaults for elided parameters). It does not update only\nthe provided fields.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nOpenBao supports the PATCH operation to this endpoint, using the ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc6902",children:"JSON patch\nformat"})," supported by KVv2,\nallowing update of specific fields. Note that ",(0,i.jsx)(n.code,{children:"bao write"})," uses ",(0,i.jsx)(n.code,{children:"POST"}),"."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-31",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the role to create. This\nis part of the request URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"}),": ",(0,i.jsx)(n.code,{children:'(string: "default")'})," - Specifies the default issuer of this\nrequest. May be the value ",(0,i.jsx)(n.code,{children:"default"}),", a name, or an issuer ID. Use ACLs to\nprevent access to the ",(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/{issue,sign}/:name"})," paths\nto prevent users overriding the role's ",(0,i.jsx)(n.code,{children:"issuer_ref"})," value."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: This parameter is stored as-is; if the reference is to a name, it\nis ",(0,i.jsx)(n.strong,{children:"not"})," resolve to an identifier. Deletion of issuers (or updating their\nnames) ",(0,i.jsx)(n.strong,{children:"may"})," result in issuance failing or using an unexpected issuer."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": existing roles from previous OpenBao versions are migrated to use\nthe ",(0,i.jsx)(n.code,{children:"issuer_ref=default"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Time To Live value to be used for the\nvalidity period of the requested certificate, provided as a string duration\nwith time suffix. Hour is the largest suffix. The value specified is strictly\nused for future validity. If not set, uses the system default value or the\nvalue of ",(0,i.jsx)(n.code,{children:"max_ttl"}),", whichever is shorter. See ",(0,i.jsx)(n.code,{children:"not_after"})," as an alternative\nfor setting an absolute end date (rather than a relative one)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"max_ttl"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the maximum Time To Live provided as a\nstring duration with time suffix. Hour is the largest suffix. If not set,\ndefaults to the system maximum lease TTL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_localhost"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Specifies if clients can request\ncertificates for ",(0,i.jsx)(n.code,{children:"localhost"})," as one of the requested common names. This is\nuseful for testing and to allow clients on a single host to talk securely."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This strictly applies to ",(0,i.jsx)(n.code,{children:"localhost"})," and ",(0,i.jsx)(n.code,{children:"localdomain"})," when this\noption is enabled. Additionally, even if this option is disabled, if either\nname is included in ",(0,i.jsx)(n.code,{children:"allowed_domains"}),", the match rules for that option\ncould permit issuance of a certificate for ",(0,i.jsx)(n.code,{children:"localhost"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"allowed_domains"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," - Specifies the domains this role is allowed\nto issue certificates for. This is used with the ",(0,i.jsx)(n.code,{children:"allow_bare_domains"}),",\n",(0,i.jsx)(n.code,{children:"allow_subdomains"}),", and ",(0,i.jsx)(n.code,{children:"allow_glob_domains"})," options to determine the type\nof matching between these domains and the values of common name, DNS-typed\nSAN entries, and Email-typed SAN entries. When ",(0,i.jsx)(n.code,{children:"allow_any_name"})," is used,\nthis attribute has no effect."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": The three options ",(0,i.jsx)(n.code,{children:"allow_bare_domains"}),", ",(0,i.jsx)(n.code,{children:"allow_subdomains"}),", and\n",(0,i.jsx)(n.code,{children:"allow_glob_domains"})," are each independent of each other. That is, at least\none type of allowed matching must describe the relationship between the\n",(0,i.jsx)(n.code,{children:"allowed_domains"})," list and the names on the issued certificate. For example,\ngiven ",(0,i.jsx)(n.code,{children:"allowed_domain=foo.*.example.com"})," and ",(0,i.jsx)(n.code,{children:"allow_subdomains=true"})," and\n",(0,i.jsx)(n.code,{children:"allow_glob_domains=true"}),", a request for ",(0,i.jsx)(n.code,{children:"bar.foo.baz.example.com"})," won't\nbe permitted, even though it ",(0,i.jsx)(n.code,{children:"foo.baz.example.com"})," matches the glob\n",(0,i.jsx)(n.code,{children:"foo.*.example.com"})," and ",(0,i.jsx)(n.code,{children:"bar"})," is a subdomain of that."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_domains_template"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - When set, ",(0,i.jsx)(n.code,{children:"allowed_domains"}),"\nmay contain templates, as with ",(0,i.jsx)(n.a,{href:"/docs/concepts/policies",children:"ACL Path Templating"}),".\nNon-templated domains are also still permitted."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_bare_domains"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if clients can request\ncertificates matching the value of the actual domains themselves; e.g. if a\nconfigured domain set with ",(0,i.jsx)(n.code,{children:"allowed_domains"})," is ",(0,i.jsx)(n.code,{children:"example.com"}),", this allows\nclients to actually request a certificate containing the name ",(0,i.jsx)(n.code,{children:"example.com"})," as\none of the DNS values on the final certificate. In some scenarios, this can be\nconsidered a security risk. Note that when an ",(0,i.jsx)(n.code,{children:"allowed_domain"})," field contains\na potential wildcard character (for example, ",(0,i.jsx)(n.code,{children:"allowed_domains=*.example.com"}),")\nand ",(0,i.jsx)(n.code,{children:"allow_bare_domains"})," and ",(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"})," are both enabled,\nissuance of a wildcard certificate for ",(0,i.jsx)(n.code,{children:"*.example.com"})," will be permitted."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_subdomains"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if clients can request\ncertificates with CNs that are subdomains of the CNs allowed by the other role\noptions. ",(0,i.jsx)(n.em,{children:"This includes wildcard subdomains."})," For example, an\n",(0,i.jsx)(n.code,{children:"allowed_domains"})," value of ",(0,i.jsx)(n.code,{children:"example.com"})," with this option set to true will\nallow ",(0,i.jsx)(n.code,{children:"foo.example.com"})," and ",(0,i.jsx)(n.code,{children:"bar.example.com"})," as well as ",(0,i.jsx)(n.code,{children:"*.example.com"}),". To\nrestrict issuance of wildcards by this option, see ",(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"}),"\nbelow. This option is redundant when using the ",(0,i.jsx)(n.code,{children:"allow_any_name"})," option."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_glob_domains"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Allows names specified in\n",(0,i.jsx)(n.code,{children:"allowed_domains"})," to contain glob patterns (e.g. ",(0,i.jsx)(n.code,{children:"ftp*.example.com"}),"). Clients\nwill be allowed to request certificates with names matching the glob\npatterns."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": These globs behave like shell-style globs and can match\nacross multiple domain parts. For example, ",(0,i.jsx)(n.code,{children:"allowed_domains=*.example.com"}),"\nwith ",(0,i.jsx)(n.code,{children:"allow_glob_domains"})," enabled will match not only ",(0,i.jsx)(n.code,{children:"foo.example.com"})," but\nalso ",(0,i.jsx)(n.code,{children:"baz.bar.foo.example.com"}),"."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Warning"}),": Glob patterns will match wildcard domains and permit their\nissuance unless otherwise restricted by ",(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"}),". For\ninstance, with ",(0,i.jsx)(n.code,{children:"allowed_domains=*.*.example.com"})," and both ",(0,i.jsx)(n.code,{children:"allow_glob_domains"}),"\nand ",(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"})," enabled, we will permit the issuance of\na wildcard certificate for ",(0,i.jsx)(n.code,{children:"*.foo.example.com"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Allows the issuance of\ncertificates with ",(0,i.jsx)(n.a,{href:"https://tools.ietf.org/html/rfc6125",children:"RFC 6125"})," wildcards\nin the CN field. When set to ",(0,i.jsx)(n.code,{children:"false"}),", this prevents wildcards from being\nissued even if they would've been allowed by an option above. We support\nthe following four wildcard types:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*.example.com"}),", a single wildcard as the entire left-most label,"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"foo*.example.com"}),", a single suffixed wildcard in the left-most label,"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*foo.example.com"}),", a single prefixed wildcard in the left-most label, and"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"f*o.example.com"}),", a single interior wildcard in the left-most label."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_any_name"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if clients can request any CN.\nUseful in some circumstances, but make sure you understand whether it is\nappropriate for your installation before enabling it. Note that both\n",(0,i.jsx)(n.code,{children:"enforce_hostnames"})," and ",(0,i.jsx)(n.code,{children:"allow_wildcard_certificates"})," are still checked,\nwhich may introduce limitations on issuance with this option."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enforce_hostnames"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Specifies if only valid host names are\nallowed for CNs, DNS SANs, and the host part of email addresses."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_ip_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Specifies if clients can request IP Subject\nAlternative Names. No authorization checking is performed except to verify\nthat the given values are valid IP addresses."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_uri_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Defines allowed URI Subject\nAlternative Names. No authorization checking is performed except to verify\nthat the given values are valid URIs. This can be a comma-delimited list or\na JSON string slice. Values can contain glob patterns (e.g.\n",(0,i.jsx)(n.code,{children:"spiffe://hostname/*"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_uri_sans_template"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - When set, ",(0,i.jsx)(n.code,{children:"allowed_uri_sans"}),"\nmay contain templates, as with ",(0,i.jsx)(n.a,{href:"/docs/concepts/policies",children:"ACL Path Templating"}),".\nNon-templated domains are also still permitted."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_other_sans"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Defines allowed custom OID/UTF8-string\nSANs. This can be a comma-delimited list or a JSON string slice, where\neach element has the same format as OpenSSL: ",(0,i.jsx)(n.code,{children:"<oid>;<type>:<value>"}),", but\nthe only valid type is ",(0,i.jsx)(n.code,{children:"UTF8"})," or ",(0,i.jsx)(n.code,{children:"UTF-8"}),". The ",(0,i.jsx)(n.code,{children:"value"})," part of an element\nmay be a ",(0,i.jsx)(n.code,{children:"*"})," to allow any value with that OID.\nAlternatively, specifying a single ",(0,i.jsx)(n.code,{children:"*"})," will allow any ",(0,i.jsx)(n.code,{children:"other_sans"})," input."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_serial_numbers"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - If set, an array of allowed serial\nnumbers to be requested during certificate issuance. These values support\nshell-style globbing. When empty, custom-specified serial numbers will be\nforbidden. It is strongly recommended to allow OpenBao to generate random\nserial numbers instead."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"server_flag"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Specifies if certificates are flagged for\nserver authentication use. See ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12",children:"RFC 5280 Section 4.2.1.12"}),"\nfor information about the Extended Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"client_flag"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - Specifies if certificates are flagged for\nclient authentication use. See ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12",children:"RFC 5280 Section 4.2.1.12"}),"\nfor information about the Extended Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"code_signing_flag"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if certificates are flagged\nfor code signing use. See ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12",children:"RFC 5280 Section 4.2.1.12"}),"\nfor information about the Extended Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"email_protection_flag"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if certificates are\nflagged for email protection use. See ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12",children:"RFC 5280 Section 4.2.1.12"}),"\nfor information about the Extended Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:'(string: "rsa")'})," - Specifies the type of key to generate for\ngenerated private keys and the type of key expected for submitted CSRs.\nCurrently, ",(0,i.jsx)(n.code,{children:"rsa"}),", ",(0,i.jsx)(n.code,{children:"ec"}),", and ",(0,i.jsx)(n.code,{children:"ed25519"})," are supported, or when signing\nexisting CSRs, ",(0,i.jsx)(n.code,{children:"any"})," can be specified to allow keys of either type\nand with any bit size (subject to >=2048 bits for RSA keys or >= 224 for EC keys).\nWhen ",(0,i.jsx)(n.code,{children:"any"})," is used, this role cannot generate certificates and can only\nbe used to sign CSRs."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"ed25519"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use for the\ngenerated keys. Allowed values are 0 (universal default); with\n",(0,i.jsx)(n.code,{children:"key_type=rsa"}),", allowed values are: 2048 (default), 3072, or\n4096; with ",(0,i.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: 224, 256 (default),\n384, or 521; ignored with ",(0,i.jsx)(n.code,{children:"key_type=ed25519"})," or in signing operations\nwhen ",(0,i.jsx)(n.code,{children:"key_type=any"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_bits"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the number of bits to use in\nthe signature algorithm; accepts 256 for SHA-2-256, 384 for SHA-2-384,\nand 512 for SHA-2-512. Defaults to 0 to automatically detect based\non issuer's key length (SHA-2-256 for RSA keys, and matching the curve size\nfor NIST P-Curves)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": ECDSA and Ed25519 issuers do not follow configuration of the\n",(0,i.jsx)(n.code,{children:"signature_bits"})," value; only RSA issuers will change signature types\nbased on this parameter."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_pss"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether or not to use PSS signatures\nover PKCS#1v1.5 signatures when a RSA-type issuer is used. Ignored for\nECDSA/Ed25519 issuers."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_usage"})," ",(0,i.jsx)(n.code,{children:'(list: ["DigitalSignature", "KeyAgreement", "KeyEncipherment"])'})," -\nSpecifies the allowed key usage constraint on issued certificates. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#KeyUsage",children:"https://golang.org/pkg/crypto/x509/#KeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"KeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no key usage constraints, set this to an empty list. See\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.3",children:"RFC 5280 Section 4.2.1.3"}),"\nfor more information about the Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," -\nSpecifies the allowed extended key usage constraint on issued certificates. Valid\nvalues can be found at ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage",children:"https://golang.org/pkg/crypto/x509/#ExtKeyUsage"})," - simply\ndrop the ",(0,i.jsx)(n.code,{children:"ExtKeyUsage"})," part of the value. Values are not case-sensitive. To\nspecify no key usage constraints, set this to an empty list. See\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.12",children:"RFC 5280 Section 4.2.1.12"}),"\nfor information about the Extended Key Usage field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ext_key_usage_oids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A comma-separated string or list of extended\nkey usage oids. Useful for adding EKUs not supported by the Go standard library."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_csr_common_name"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - When used with the CSR signing\nendpoint, the common name in the CSR will be used instead of taken from the\nJSON data. This does not include any requested SANs in the CSR; use\n",(0,i.jsx)(n.code,{children:"use_csr_sans"})," for that."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"use_csr_sans"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - When used with the CSR signing endpoint, the\nsubject alternate names in the CSR will be used instead of taken from the JSON\ndata. This does not include the common name in the CSR; use\n",(0,i.jsx)(n.code,{children:"use_csr_common_name"})," for that."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ou"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the OU (OrganizationalUnit) values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"organization"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the O (Organization) values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"country"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the C (Country) values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"locality"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the L (Locality) values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"province"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the ST (Province) values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"street_address"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Street Address values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"postal_code"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the Postal Code values in the\nsubject field of issued certificates. This is a comma-separated string or\nJSON array."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"generate_lease"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if certificates issued/signed\nagainst this role will have OpenBao leases attached to them. Certificates can be\nadded to the CRL by ",(0,i.jsx)(n.code,{children:"openbao revoke <lease_id>"})," when certificates are associated\nwith leases. It can also be done using the ",(0,i.jsx)(n.code,{children:"pki/revoke"})," endpoint. However,\nwhen lease generation is disabled, invoking ",(0,i.jsx)(n.code,{children:"pki/revoke"})," would be the only way\nto add the certificates to the CRL. When large number of certificates are\ngenerated with long lifetimes, it is recommended that lease generation be\ndisabled, as large amount of leases adversely affect the startup time of OpenBao."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"no_store"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, certificates issued/signed against this\nrole will not be stored in the storage backend. This can improve performance\nwhen issuing large numbers of certificates. However, certificates issued in\nthis way cannot be enumerated or revoked via serial number. Certificates may\nstill be revoked via ",(0,i.jsx)(n.a,{href:"#certificate-1",children:"BYOC revocation"}),".\nThis option is recommend only for certificates that are non-sensitive,\nextremely short-lived, or have high volume/turn-over that would prohibit\nstorage. This option implies a value of ",(0,i.jsx)(n.code,{children:"false"})," for ",(0,i.jsx)(n.code,{children:"generate_lease"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"require_cn"})," ",(0,i.jsx)(n.code,{children:"(bool: true)"})," - If set to false, makes the ",(0,i.jsx)(n.code,{children:"common_name"})," field\noptional while generating a certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"policy_identifiers"})," ",(0,i.jsx)(n.code,{children:"(list: [])"})," - A comma-separated string or list of policy\nOIDs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"basic_constraints_valid_for_non_ca"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Mark Basic Constraints\nvalid when issuing non-CA certificates."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_before_duration"})," ",(0,i.jsx)(n.code,{children:'(duration: "30s")'})," - Specifies the duration by which to\nbackdate the NotBefore property. This value has no impact in the validity period\nof the requested certificate, specified in the ",(0,i.jsx)(n.code,{children:"ttl"})," field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"not_after"})," ",(0,i.jsx)(n.code,{children:"(string)"})," - Set the Not After field of the certificate with\nspecified date value. The value format should be given in UTC format\n",(0,i.jsx)(n.code,{children:"YYYY-MM-ddTHH:MM:SSZ"}),". Supports the Y10K end date for IEEE 802.1AR-2018\nstandard devices, ",(0,i.jsx)(n.code,{children:"9999-12-31T23:59:59Z"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"cn_validations"})," ",(0,i.jsx)(n.code,{children:'(list: ["email", "hostname"])'})," - Validations to run on the\nCommon Name field of the certificate. Valid values include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"email"}),", to ensure the Common Name is an email address (contains an ",(0,i.jsx)(n.code,{children:"@"})," sign),"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hostname"}),", to ensure the Common Name is a hostname (otherwise)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:['Multiple values can be separated with a comma or specified as a list and use\nOR semantics (either email or hostname in the CN are allowed). When the\nspecial value "disabled" is used (must be specified alone), none of the usual\nvalidation is run (including but not limited to ',(0,i.jsx)(n.code,{children:"allowed_domains"})," and basic\ncorrectness validation around email addresses and domain names). This allows\nnon-standard CNs to be used verbatim from the request."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allowed_user_ids"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Comma separated, globbing list of User ID\nSubject components to allow on requests. By default, no user IDs are allowed.\nUse the bare wildcard ",(0,i.jsx)(n.code,{children:"*"})," value to allow any value. See also the ",(0,i.jsx)(n.code,{children:"user_ids"}),"\nrequest parameter."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-14",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "allowed_domains": ["example.com"],\n  "allow_subdomains": true\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-36",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/roles/my-role\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-role-1",children:"Read role"}),"\n",(0,i.jsxs)(n.p,{children:["Refer to the ",(0,i.jsx)(n.a,{href:"#read-role",children:"earlier section"})," for more information about\nreading roles."]}),"\n",(0,i.jsx)(n.h3,{id:"delete-role",children:"Delete role"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint deletes the role definition. Deleting a role ",(0,i.jsx)(n.strong,{children:"does not"}),"\nrevoke certificates previously issued under this role."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/roles/:name"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-32",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the role to delete. This\nis part of the request URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-37",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/pki/roles/my-role\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-urls",children:"Read URLs"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint fetches the URLs to be encoded in generated certificates. No URL\nconfiguration will be returned until the configuration is set."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/urls"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-38",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/urls\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-31",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "issuing_certificates": ["<url1>", "<url2>"],\n    "crl_distribution_points": ["<url1>", "<url2>"],\n    "delta_crl_distribution_points": ["<url1>", "<url2>"],\n    "ocsp_servers": ["<url1>", "<url2>"]\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"set-urls",children:"Set URLs"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows setting the issuing certificate endpoints, CRL distribution\npoints, and OCSP server endpoints that will be encoded into issued certificates.\nYou can update any of the values at any time without affecting the other\nexisting values. To remove the values, simply use a blank string as the\nparameter."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/urls"})})]})})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": When using multiple issuers within the same mount, it is strongly\nsuggested to use the per-issuer AIA information instead of the global\nAIA information. If any of the per-issuer AIA fields are set, the entire\nissuer's preferences will be used instead. Otherwise, these fields are used\nas a fallback.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"\nThis can be achieved by using ",(0,i.jsx)(n.em,{children:"templated"})," global AIA values, but setting\nthe cluster-local address in configuration."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-33",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuing_certificates"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values for\nthe Issuing Certificate field. This can be an array or a comma-separated\nstring list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1",children:"RFC 5280 Section 4.2.2.1"}),"\nfor information about the Authority Information Access field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"crl_distribution_points"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values\nfor the CRL Distribution Points field. This can be an array or a\ncomma-separated string list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.13",children:"RFC 5280 Section 4.2.1.13"}),"\nfor information about the CRL Distribution Points field."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: When multiple issuers are in use under a single mount, each issuer will\nhave its own CRL distribution point. These separate CRLs should either be\naggregated into a single CRL (externally; as OpenBao does not support this\nfunctionality) or multiple ",(0,i.jsx)(n.code,{children:"crl_distribution_points"})," and\n",(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"})," values should be specified here, pointing\nto each cluster and issuer."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values\nfor the Delta CRL Distribution Points field. This can be an array or a\ncomma-separated string list. See also ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.1.15",children:"RFC 5280 Section 4.2.1.15"}),"\nand ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-5.2.6",children:"Section 5.2.6"}),"\nfor information about the Delta CRL Distribution Points field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ocsp_servers"})," ",(0,i.jsx)(n.code,{children:"(array<string>: nil)"})," - Specifies the URL values for the OCSP\nServers field. This can be an array or a comma-separated string list. See also\n",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc5280#section-4.2.2.1",children:"RFC 5280 Section 4.2.2.1"}),"\nfor information about the Authority Information Access field."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enable_templating"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies that the above AIA\nURL values (",(0,i.jsx)(n.code,{children:"issuing_certificates"}),", ",(0,i.jsx)(n.code,{children:"crl_distribution_points"}),",\n",(0,i.jsx)(n.code,{children:"delta_crl_distribution_points"})," and ",(0,i.jsx)(n.code,{children:"ocsp_servers"}),") should\nbe templated. This replaces the literal value ",(0,i.jsx)(n.code,{children:"{{issuer_id}}"}),"\nwith the ID of the issuer doing the issuance, the literal\nvalue ",(0,i.jsx)(n.code,{children:"{{cluster_path}}"})," with the value of ",(0,i.jsx)(n.code,{children:"path"})," from the\ncluster-local configuration endpoint ",(0,i.jsx)(n.code,{children:"/config/cluster"}),", and the\nliteral value ",(0,i.jsx)(n.code,{children:"{{cluster_aia_path}}"})," with the value of ",(0,i.jsx)(n.code,{children:"aia_path"})," from\nthe cluster-local configuration endpoint ",(0,i.jsx)(n.code,{children:"/config/cluster"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For example, the following values can be used globally to ensure all AIA\nURIs use the cluster-local, per-issuer canonical reference, but with\nthe issuing CA certificate and CRL distribution points to potentially\nuse an external, non-OpenBao CDN."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"issuing_certificates={{cluster_aia_path}}/issuer/{{issuer_id}}/der"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"crl_distribution_points={{cluster_aia_path}}/issuer/{{issuer_id}}/crl/der"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"delta_crl_distribution_points={{cluster_aia_path}}/issuer/{{issuer_id}}/crl/delta/der"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"ocsp_servers={{cluster_aia_path}}/ocsp"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": If no cluster-local address is present and templating is used,\nissuance will fail."]})}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-15",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "issuing_certificates": ["{{cluster_aia_path}}/issuer/{{issuer_id}}/der"],\n  "crl_distribution_points": ["{{cluster_aia_path}}/issuer/{{issuer_id}}/crl/der"],\n  "delta_crl_distribution_points": ["{{cluster_aia_path}}/issuer/{{issuer_id}}/crl/delta/der"],\n  "ocsp_servers": ["{{cluster_aia_path}}/ocsp"]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-39",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/urls\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-issuers-configuration",children:"Read issuers configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows getting the value of the default issuer."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/issuers"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-40",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/issuers\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-32",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "default": "3dc79a5a-7a6c-70e2-1123-94b88557ba12",\n    "default_follows_latest_issuer": "false"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"set-issuers-configuration",children:"Set issuers configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows setting the value of the default issuer."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/issuers"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/root/replace"})})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-34",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"default"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the default issuer (by reference;\neither a name or an ID). When no value is specified and the path is\n",(0,i.jsx)(n.code,{children:"/pki/root/replace"}),", the default value of ",(0,i.jsx)(n.code,{children:'"next"'})," will be used."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"default_follows_latest_issuer"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether a\nroot creation or an issuer import operation updates the default issuer\nto the newly added issuer."]}),"\n",(0,i.jsxs)(n.p,{children:["While the new multi-issuer functionality of 1.11 was backwards compatible\non a per-API basis, some applications relied explicitly on unsafe behavior\nacross multiple APIs that we addressed. For instance, calling\n",(0,i.jsx)(n.code,{children:"/intermediate/generate/:type"})," would silently remove any (potentially\nin-use!) key material and generate new private keys. While our response to\nthis endpoint is backwards compatible (returning a new key and safely\npreserving old keys), some applications implicitly relied on this behavior.\nThis new option is meant to provide compatibility across API calls to these\ncallers: the newly created issuer (once ",(0,i.jsx)(n.em,{children:"imported"})," -- not on intermediate\ngeneration) will become the default and it will look (to anyone strictly\nusing old APIs) that it is the only issuer in the mount. However, it is\nencouraged for applications to update to the newer, safer semantics\nassociated with ",(0,i.jsx)(n.a,{href:"/docs/secrets/pki/rotation-primitives",children:"multi-issuer rotation"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: When an import creates more than one new issuer with key material\nknown to this mount, no default update will occur."})}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-16",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "default": "root-x1"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-41",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/issuers\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-33",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "default": "3dc79a5a-7a6c-70e2-1123-94b88557ba12"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-keys-configuration",children:"Read keys configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows getting the value of the default key."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/keys"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-42",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/keys\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-34",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "default": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"set-keys-configuration",children:"Set keys configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows setting the value of the default key."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/keys"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-35",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"default"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the default key (by reference;\neither a name or an ID)."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-17",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "default": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-43",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/keys\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-35",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "default": "baadd98d-ec5a-66ac-06b7-dfc91c02c9cf"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-cluster-configuration",children:"Read cluster configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint fetches the cluster-local configuration."}),"\n",(0,i.jsxs)(n.p,{children:["The cluster-local config has ",(0,i.jsx)(n.code,{children:"path"}),", which sets the URL to this mount on\na particular cluster. This is useful for populating ",(0,i.jsx)(n.code,{children:"{{cluster_path}}"})," during\nAIA URL templating, but may be used for other values in the future."]}),"\n",(0,i.jsxs)(n.p,{children:["It also has ",(0,i.jsx)(n.code,{children:"aia_path"}),", which allows using a non-OpenBao, external responder,\nsetting the ",(0,i.jsx)(n.code,{children:"{{cluster_aia_path}}"})," value for AIA URL templating. This is\nuseful for distributing CA and CRL information over an unsecured, non-TLS\nchannel."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/cluster"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-44",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/cluster\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-36",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "path": "<url>",\n    "aia_path": "<url>"\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"set-cluster-configuration",children:"Set cluster configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint sets cluster-local configuration."}),"\n",(0,i.jsxs)(n.p,{children:["The cluster-local config has ",(0,i.jsx)(n.code,{children:"path"}),", which sets the URL to this mount on a\nparticular cluster. This is useful for populating ",(0,i.jsx)(n.code,{children:"{{cluster_path}}"})," during AIA\nURL templating, but may be used for other values in the future."]}),"\n",(0,i.jsxs)(n.p,{children:["It also has ",(0,i.jsx)(n.code,{children:"aia_path"}),", which allows using a non-OpenBao, external responder,\nsetting the ",(0,i.jsx)(n.code,{children:"{{cluster_aia_path}}"})," value for AIA URL templating. This is\nuseful for distributing CA and CRL information over an unsecured, non-TLS\nchannel."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/cluster"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-36",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"path"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the path to this cluster's API mount path,\nincluding any namespaces as path components. For example,\n",(0,i.jsx)(n.code,{children:"https://a.openbao.example.com/v1/ns1/pki-root"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"aia_path"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the path to this  cluster's AIA\ndistribution point; may refer to an external, non-OpenBao responder.  This is\nfor resolving AIA URLs and providing the ",(0,i.jsx)(n.code,{children:"{{cluster_aia_path}}"})," template\nparameter and will not be used for other purposes. As such, unlike ",(0,i.jsx)(n.code,{children:"path"}),"\nabove, this could safely be an insecure transit mechanism (like HTTP without\nTLS)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-18",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "path": "https://...",\n  "aia_path": "http://..."\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-45",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/cluster\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-crl-configuration",children:"Read CRL configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows getting the duration for which the generated CRL should be\nmarked valid. No CRL configuration will be returned until the configuration is\nset, but the CRL will still default to enabled with 72h expiration."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/crl"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-46",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/crl\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-37",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "disable": false,\n    "expiry": "72h",\n    "ocsp_disable": false,\n    "ocsp_expiry": "12h",\n    "auto_rebuild": false,\n    "auto_rebuild_grace_period": "12h",\n    "enable_delta": false,\n    "delta_rebuild_interval": "15m",\n    "cross_cluster_revocation": true,\n    "unified_crl": true,\n    "unified_crl_on_existing_paths": true\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)("a",{name:"set-crl-configuration"}),"\n",(0,i.jsx)(n.h3,{id:"set-revocation-configuration",children:"Set revocation configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows setting the duration for which the generated CRL should be\nmarked valid. If the CRL is disabled, it will return a signed but zero-length\nCRL for any request. If enabled, it will re-build the CRL."}),"\n",(0,i.jsxs)(n.p,{children:["If the ",(0,i.jsx)(n.code,{children:"ocsp_disable"})," key is set to ",(0,i.jsx)(n.code,{children:"true"}),", the OCSP responder will always\nrespond with an Unauthorized OCSP response to any request."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": This parameter is global, across all clusters and issuers. Use\nthe per-issuer ",(0,i.jsx)(n.code,{children:"usage"})," field to disable CRL building for a specific\nissuer, while leaving the global CRL building enabled."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: Disabling the CRL does not affect whether revoked certificates are\nstored internally. Certificates that have been revoked when a role's\ncertificate storage is enabled will continue to be marked and stored as\nrevoked until ",(0,i.jsx)(n.code,{children:"tidy"})," has been run with the desired safety buffer. Re-enabling\nCRL generation will then result in all such certificates becoming a part of\nthe CRL."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: Enabling automatic rebuilding of CRLs disables immediate regeneration\non revocation. This is in line with the behavior of other CAs which only\nrebuild CRLs periodically. We suggest manually hitting the rotate if a\nfresh CRL is necessary after a revocation. For the most part though, CRLs\nshould not be relied upon for the latest certificate status information,\nand OCSP should be used instead."})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: The periodic function which controls automatic rebuilding of CRLs\nand delta CRLs only executes once a minute; this prevents high system load\nbut limits the granularity of the temporal options below."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/crl"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-37",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"expiry"})," ",(0,i.jsx)(n.code,{children:'(string: "72h")'})," - The amount of time the generated CRL should be valid."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"disable"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Disables or enables CRL building."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ocsp_disable"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Disables or enables the OCSP responder in OpenBao."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ocsp_expiry"})," ",(0,i.jsx)(n.code,{children:'(string: "12h")'})," - The amount of time an OCSP response can be cached for,\n(controls the NextUpdate field), useful for OCSP stapling refresh durations. If set to 0\nthe NextUpdate field is not set, indicating newer revocation information is available\nall the time."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"auto_rebuild"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Enables or disables periodic rebuilding of\nthe CRL upon expiry."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"auto_rebuild_grace_period"})," ",(0,i.jsx)(n.code,{children:'(string: "12h")'})," - Grace period before CRL expiry\nto attempt rebuild of CRL. Must be shorter than the CRL expiry period."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enable_delta"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Enables or disables building of delta CRLs\nwith up-to-date revocation information, augmenting the last complete CRL.\nThis option requires ",(0,i.jsx)(n.code,{children:"auto_rebuild"})," to also be enabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"delta_rebuild_interval"})," ",(0,i.jsx)(n.code,{children:'(string: "15m")'})," - Interval to check for new\nrevocations on, to regenerate the delta CRL. Must be shorter than CRL\nexpiry."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-19",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "expiry": "48h",\n  "disable": "false",\n  "ocsp_disable": "false",\n  "ocsp_expiry": "12h",\n  "auto_rebuild": "true",\n  "auto_rebuild_grace_period": "8h",\n  "enable_delta": "true",\n  "delta_rebuild_interval": "10m",\n  "cross_cluster_revocation": true,\n  "unified_crl": true,\n  "unified_crl_on_existing_paths": true,\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-47",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/crl\n'})}),"\n",(0,i.jsx)(n.h3,{id:"rotate-crls",children:"Rotate CRLs"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint forces a rotation of all issuers' CRLs. This can be used by\nadministrators to cut the size of the CRL if it contains a number of\ncertificates that have now expired, but has not been rotated due to no further\ncertificates being revoked. If no certificates have been revoked, but the CRL\nhas expired or is close to expiring, administrators ",(0,i.jsx)(n.strong,{children:"must"})," hit this endpoint\nto manually rotate the CRL. This rotates all CRLs on the present cluster,\nand ",(0,i.jsx)(n.strong,{children:"must"})," be called on every cluster."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Mirroring the behavior of earlier OpenBao versions, we add\ncertificates revoked by an unknown issuer to the default issuer's CRL.\nTo fully purge old revoked, unexpired certificates, it is not sufficient\nto delete their issuer and is instead necessary to ",(0,i.jsx)(n.strong,{children:"remove"})," the mount\ncompletely."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": It is suggested to switch to enabling the CRL's ",(0,i.jsx)(n.code,{children:"auto_rebuild"}),"\nfunctionality to avoid having to manually hit the Rotate endpoint when the\nCRL expires. This ensures a valid CRL is always maintained, at the expense of\npotentially not being up-to-date. If a revocation occurs that must be\nimmediately propagated, this endpoint can be used to regenerate the CRL,\nthough distribution must still occur outside of OpenBao (either manually or\nvia AIA where supported)."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl/rotate"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-48",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/crl/rotate\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-38",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "success": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"rotate-delta-crls",children:"Rotate delta CRLs"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint forces a rotation of all issuers' delta CRLs, when enabled.\nThis can be used by administrators to force a rebuild of a delta CRL if\nhigh-profile revocations have occurred and there's a long high interval\nbetween delta rebuilds (",(0,i.jsx)(n.code,{children:"delta_rebuild_interval"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"See notes about rotating regular CRLs above as they apply here as well."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/crl/rotate-delta"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-49",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/crl/rotate\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-39",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "success": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"combine-crls-from-the-same-issuer",children:"Combine CRLs from the same issuer"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows combining multiple different CRLs that have been signed by the\nsame issuer into a single signed CRL. This is useful to generate a single authoritative\nCRL of revocations across distinct OpenBao clusters."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/resign-crls"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-38",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"crls"})," ",(0,i.jsx)(n.code,{children:"(list of strings: <required>)"})," - A list of PEM encoded CRLs that have been\nsigned by the issuer"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"crl_number"})," ",(0,i.jsx)(n.code,{children:"(int: <required>)"})," - The sequence number to be written within the CRL\nNumber extension."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"delta_crl_base_number"})," ",(0,i.jsx)(n.code,{children:"(int: -1)"})," - Using a value of 0 or greater specifies the base CRL revision\nnumber to encode within a Delta CRL indicator extension, otherwise the extension will\nnot be added; defaults to -1."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:"(string: pem)"}),' - The format of the combined CRL, can be "pem" or "der".\nIf "der", the value will be base64 encoded; Defaults to "pem".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"next_update"})," ",(0,i.jsx)(n.code,{children:"(string: 72h)"})," - The amount of time the generated CRL should be\nvalid; defaults to 72 hours."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-20",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "crl_number": "10",\n  "next_update": "24h",\n  "crls": ["<PEM crl 1>", "<PEM crl 2>"],\n  "format": "pem"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-50",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    -request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/issuer/default/resign-crls\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-40",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "crl": "<PEM encoded crl>"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sign-revocation-list",children:"Sign revocation list"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows generating a CRL based on the provided parameter data from any external\nsource and signed by the specified issuer. Values are taken verbatim from the parameters provided."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"This is a potentially dangerous endpoint and only highly trusted users should have access."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/issuer/:issuer_ref/sign-revocation-list"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-39",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_ref"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Reference to an existing issuer,\neither by OpenBao-generated identifier, the literal string ",(0,i.jsx)(n.code,{children:"default"})," to\nrefer to the currently configured default issuer, or the name assigned\nto an issuer. This parameter is part of the request URL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"crl_number"})," ",(0,i.jsx)(n.code,{children:"(int: <required>)"})," - The sequence number to be written within the CRL\nNumber extension."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"delta_crl_base_number"})," ",(0,i.jsx)(n.code,{children:"(int: -1)"})," - Using a value of 0 or greater specifies the base CRL revision\nnumber to encode within a Delta CRL indicator extension, otherwise the extension will\nnot be added; defaults to -1."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:"(string: pem)"}),' - The format of the combined CRL, can be "pem" or "der".\nIf "der", the value will be base64 encoded; Defaults to "pem".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"next_update"})," ",(0,i.jsx)(n.code,{children:"(string: 72h)"})," - The amount of time the generated CRL should be\nvalid; defaults to 72 hours."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revoked_certs"})," ",(0,i.jsx)(n.code,{children:"(type: slice of maps)"})," - Each element contains revocation information for a\nsingle serial number along with the revocation time and the serial's extensions if any. Each\nelement can have the following key/values","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"serial_number"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - the serial number of the revoked cert"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revocation_time"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - the revocation time, unix int format or RFC3339 encoding supported"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"extensions"})," ",(0,i.jsx)(n.code,{children:"(type: slice of maps)"})," - A slice of all extensions that should be added to the revoked\ncertificate entry. Each ele,ent contains a map with the following entries","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - an ASN1 object identifier in dot notation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"critical"})," ",(0,i.jsx)(n.code,{children:"(type: bool)"})," - should the extension be marked critical"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"value"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - base64 encoded bytes for extension value"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"extensions"})," ",(0,i.jsx)(n.code,{children:"(type: slice of maps)"})," - A slice of all extensions that should be added to the generated\nCRL each element containing a map with the following entries.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - an ASN1 object identifier in dot notation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"critical"})," ",(0,i.jsx)(n.code,{children:"(type: bool)"})," - should the extension be marked critical"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"value"})," ",(0,i.jsx)(n.code,{children:"(type: string)"})," - base64 encoded bytes for extension value"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": The following extension ids are not allowed to be provided and can be influenced by other parameters"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2.5.29.20"}),": CRL Number"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2.5.29.27"}),": Delta CRL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2.5.29.35"}),": Authority Key Identifier"]}),"\n"]})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-21",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "crl_number": "10",\n  "next_update": "24h",\n  "format": "pem",\n  "revoked_certs": [\n    {\n      "serial_number": "39:dd:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58",\n      "revocation_time": "2009-11-10T23:00:00Z"\n    },\n    {\n      "serial_number": "40:33:2e:90:b7:23:1f:8d:d3:7d:31:c5:1b:da:84:d0:5b:65:31:58",\n      "revocation_time": "1257894000"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-51",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    -request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/issuer/default/sign-revocation-list\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-41",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "crl": "<PEM encoded crl>"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"tidy",children:"Tidy"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows tidying up the storage backend and/or CRL by removing\ncertificates that have expired and are past a certain buffer period beyond their\nexpiration time."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/tidy"})})]})})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: it is encouraged to use the ",(0,i.jsx)(n.a,{href:"#configure-automatic-tidy",children:"automatic tidy capabilities"}),"\nto ensure this gets run periodically."]})}),"\n",(0,i.jsx)(n.h4,{id:"parameters-40",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tidy_cert_store"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether to tidy up the certificate\nstore."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tidy_revoked_certs"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to true to remove all invalid and\nexpired certificates from storage. A revoked storage entry is considered\ninvalid if the entry is empty, or the value within the entry is empty. If a\ncertificate is removed due to expiry, the entry will also be removed from the\nCRL, and the CRL will be rotated."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tidy_revoked_cert_issuer_associations"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to true to associate\nrevoked certificates with their corresponding issuers; this improves the\nperformance of OCSP and CRL building, by shifting work to a tidy operation\ninstead."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"warning",children:[(0,i.jsx)(n.p,{children:"Note: With multiple issuers, a CA which issued a particular revoked\ncertificate may be removed and re-added, resulting in a different issuer\nID value. When building CRLs, these links are automatically updated for any\nmissing or added issuers, but during OCSP this value is computed and then\ndiscarded, potentially causing a performance penalty on each request.\nDuring regular CA operations, it is not necessary to run this operation."}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(n.p,{children:"It is suggested to run this tidy when removing or importing new issuers but\notherwise not to run it during automatic tidy operations."})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_expired_issuers"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to true to automatically remove\nexpired issuers after the ",(0,i.jsx)(n.code,{children:"issuer_safety_buffer"})," duration has elapsed. We\nlog the issuer certificate on removal to allow recovery; no keys are removed\nduring this process."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: The default issuer will not be removed even if it has expired and is\npast the ",(0,i.jsx)(n.code,{children:"issuer_safety_buffer"})," specified."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tidy_move_legacy_ca_bundle"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to true to backup any\nlegacy CA/issuers bundle to ",(0,i.jsx)(n.code,{children:"config/ca_bundle.bak"}),". This can be restored with\n",(0,i.jsx)(n.code,{children:"sys/raw"})," back to ",(0,i.jsx)(n.code,{children:"config/ca_bundle"})," if necessary, but won't impact mount\nstartup (as mounts will attempt to read the latter and do a migration of CA\nissuers if present). Migration will only occur after ",(0,i.jsx)(n.code,{children:"issuer_safety_buffer"}),"\nhas passed since the last successful migration."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"safety_buffer"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies a duration using ",(0,i.jsx)(n.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"\nused as a safety buffer to ensure certificates are not expunged prematurely; as an example, this can keep\ncertificates from being removed from the CRL that, due to clock skew, might\nstill be considered valid on other hosts. For a certificate to be expunged,\nthe time must be after the expiration time of the certificate (according to\nthe local clock) plus the duration of ",(0,i.jsx)(n.code,{children:"safety_buffer"}),". Defaults to ",(0,i.jsx)(n.code,{children:"72h"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"issuer_safety_buffer"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies a duration that issuers\nshould be kept for, past their ",(0,i.jsx)(n.code,{children:"NotAfter"})," validity period. Defaults to\n365 days as hours (",(0,i.jsx)(n.code,{children:"8760h"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"pause_duration"})," ",(0,i.jsx)(n.code,{children:'(string: "0s")'})," - Specifies the duration to pause\nbetween tidying individual certificates. This releases the revocation\nlock and allows other operations to continue while tidy is paused.\nThis allows an operator to control tidy's resource utilization within\na timespan: the LIST operation will remain in memory, but the space\nbetween reading, parsing, and updates on-disk cert entries will be\nincreased, decreasing resource utilization."]}),"\n",(0,i.jsxs)(n.p,{children:["Does not affect ",(0,i.jsx)(n.code,{children:"tidy_expired_issuers"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: Using too long of a ",(0,i.jsx)(n.code,{children:"pause_duration"})," can result in tidy operations\nnot concluding during this lifetime! Using too short of a pause duration\n(but non-zero) can lead to lock contention. Use ",(0,i.jsx)(n.a,{href:"#cancel-tidy",children:"tidy's cancellation"}),"\nto stop a running operation after the sleep period is over."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"revocation_queue_safety_buffer"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies a duration\nafter which cross-cluster revocation requests will be removed as expired.\nThis should be set high enough that, if a cluster disappears for a while\nbut later comes back, any revocation requests which it should process will\nstill be there, but not too long as to fill up storage with too many invalid\nrequests. Defaults to ",(0,i.jsx)(n.code,{children:"48h"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"tidy_acme"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to true to tidy stale ACME accounts,\norders, authorizations, EABs, and challenges. ACME orders are tidied (deleted)\n",(0,i.jsx)(n.code,{children:"safety_buffer"})," after the certificate associated with them expires, or after\nthe order and relevant authorizations have expired if no certificate was\nproduced. Authorizations are tidied with the corresponding order."]}),"\n",(0,i.jsxs)(n.p,{children:["When a valid ACME Account is at least ",(0,i.jsx)(n.code,{children:"acme_account_safety_buffer"}),"\nold, and has no remaining orders associated with it, the account is\nmarked as revoked. After another ",(0,i.jsx)(n.code,{children:"acme_account_safety_buffer"})," has\npassed from the revocation or deactivation date, a revoked or\ndeactivated ACME account is deleted."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"acme_account_safety_buffer"})," ",(0,i.jsx)(n.code,{children:'(string: "720h")'})," - The amount of time that\nmust pass after creation that an account with no orders is marked revoked,\nand the amount of time after being marked revoked or deactivated. The\ndefault is 30 days as hours."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-22",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "safety_buffer": "24h"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-52",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/tidy\n'})}),"\n",(0,i.jsx)(n.h3,{id:"read-automatic-tidy-configuration",children:"Read automatic tidy configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint fetches the current automatic tidy configuration."}),"\n",(0,i.jsxs)(n.p,{children:["This is the combination of the periodic invocation parameters described\n",(0,i.jsx)(n.a,{href:"#set-automatic-tidy-configuration",children:"in the below write handler"})," and\nthe tidy parameters ",(0,i.jsx)(n.a,{href:"#tidy",children:"described above in the tidy endpoint"}),"."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/auto-tidy"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-53",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/pki/config/auto-tidy\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-42",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": {\n    "enabled": false,\n    "interval_duration": 43200,\n    "issuer_safety_buffer": 31536000,\n    "maintain_stored_certificate_counts": false,\n    "pause_duration": "0s",\n    "publish_stored_certificate_count_metrics": false,\n    "revocation_queue_safety_buffer": 172800,\n    "safety_buffer": 259200,\n    "tidy_cert_store": false,\n    "tidy_cross_cluster_revoked_certs": false,\n    "tidy_expired_issuers": false,\n    "tidy_move_legacy_ca_bundle": false,\n    "tidy_revocation_queue": false,\n    "tidy_revoked_cert_issuer_associations": false,\n    "tidy_revoked_certs": false\n  },\n  "auth": null\n}\n'})}),"\n",(0,i.jsx)("a",{name:"configure-automatic-tidy"}),"\n",(0,i.jsx)(n.h3,{id:"set-automatic-tidy-configuration",children:"Set automatic tidy configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows configuring periodic tidy operations, using the tidy mechanism\ndescribed above. Status is from automatically run tidies are still reported at the\nstatus endpoint described below."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/config/auto-tidy"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"parameters-41",children:"Parameters"}),"\n",(0,i.jsxs)(n.p,{children:["The below parameters are in addition to the regular parameters accepted by the\n",(0,i.jsxs)(n.a,{href:"#tidy",children:[(0,i.jsx)(n.code,{children:"/pki/tidy"})," endpoint"]})," documented above."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"enabled"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether automatic tidy is enabled or not."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"interval_duration"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the duration between automatic tidy\noperations; note that this is from the end of one operation to the start of\nthe next so the time of the operation itself does not need to be considered.\nDefaults to 12h"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"maintain_stored_certificate_counts"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - When enabled,\nmaintains expensive counts of certificates. During initialization of the\nmount, a LIST of all certificates is performed to get a baseline figure and\nthroughout operations like issuance, revocation, and subsequent tidies, the\nfigure is updated."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Note"}),": It is strongly recommend to not enable this value if 50k or more\ncertificates are stored in the mount or if many PKI mounts are in use in\nthis cluster. Instead, use audit logs and aggregate this data externally\nto OpenBao so as not to impact OpenBao performance."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"publish_stored_certificate_count_metrics"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - When enabled,\npublishes the value computed by ",(0,i.jsx)(n.code,{children:"maintain_stored_certificate_counts"})," to\nthe mount's metrics. This requires the former to be enabled."]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sample-payload-23",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "enabled": true,\n  "tidy_revoked_cert_issuer_associations": true,\n  "safety_buffer": "24h"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-54",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/pki/config/auto-tidy\n'})}),"\n",(0,i.jsx)(n.h3,{id:"tidy-status",children:"Tidy status"}),"\n",(0,i.jsx)(n.p,{children:"This is a read only endpoint that returns information about the current tidy\noperation, or the most recent if none are currently running."}),"\n",(0,i.jsx)(n.p,{children:"The result includes the following fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"safety_buffer"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_cert_store"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_revoked_certs"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"state"}),": one of ",(0,i.jsx)(n.em,{children:"Inactive"}),", ",(0,i.jsx)(n.em,{children:"Running"}),", ",(0,i.jsx)(n.em,{children:"Finished"}),", ",(0,i.jsx)(n.em,{children:"Error"}),", ",(0,i.jsx)(n.em,{children:"Cancelling"}),", or ",(0,i.jsx)(n.em,{children:"Cancelled"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"error"}),": the error message, if the operation ran into an error"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"time_started"}),": the time the operation started"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"time_finished"}),": the time the operation finished"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"message"}),": One of ",(0,i.jsx)(n.em,{children:"Tidying certificate store: checking entry N of TOTAL"})," or\n",(0,i.jsx)(n.em,{children:"Tidying revoked certificates: checking certificate N of TOTAL"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cert_store_deleted_count"}),": The number of certificate storage entries deleted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revoked_cert_deleted_count"}),": The number of revoked certificate entries deleted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"missing_issuer_cert_count"}),": The number of revoked certificates which were missing a valid issuer reference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_expired_issuers"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"issuer_safety_buffer"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_move_legacy_ca_bundle"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_revocation_queue"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revocation_queue_deleted_count"}),": the number of revocation queue entries deleted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tidy_cross_cluster_revoked_certs"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cross_revoked_cert_deleted_count"}),": the number of cross-cluster revoked certificate entries deleted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"revocation_queue_safety_buffer"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pause_duration"}),": the value of this parameter when initiating the tidy operation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"last_auto_tidy_finished"}),": the time when the last auto-tidy operation finished; may be different than ",(0,i.jsx)(n.code,{children:"time_finished"})," especially if the last operation was a manually executed tidy operation. Set to current time at mount time to delay the initial auto-tidy operation; not persisted."]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/tidy-status"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-55",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/pki/tidy-status\n\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-43",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'  "data": {\n    "safety_buffer": 60,\n    "tidy_cert_store": true,\n    "tidy_revoked_certs": true,\n    "error": null,\n    "message": "Tidying certificate store: checking entry 234 of 488",\n    "revoked_cert_deleted_count": 0,\n    "cert_store_deleted_count": 2,\n    "state": "Running",\n    "time_started": "2021-10-20T14:52:13.510161-04:00",\n    "time_finished": null\n  },\n'})}),"\n",(0,i.jsx)(n.h3,{id:"cancel-tidy",children:"Cancel tidy"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows cancelling a running tidy operation. It takes no\nparameter and cancels the tidy at the next available checkpoint, which\nmay process additional certificates between when the operation was\nmarked as cancelled and when the operation stopped."}),"\n",(0,i.jsxs)(n.p,{children:["The response to this endpoint is the same as the ",(0,i.jsx)(n.a,{href:"#tidy-status",children:"status"}),"."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/pki/tidy-cancel"})})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"sample-request-56",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/pki/tidy-cancel\n\n'})}),"\n",(0,i.jsx)(n.h4,{id:"sample-response-44",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'  "data": {\n    "safety_buffer": 60,\n    "tidy_cert_store": true,\n    "tidy_revoked_certs": true,\n    "error": null,\n    "message": "Tidying certificate store: checking entry 234 of 488",\n    "revoked_cert_deleted_count": 0,\n    "cert_store_deleted_count": 2,\n    "state": "Cancelling",\n    "time_started": "2021-10-20T14:52:13.510161-04:00",\n    "time_finished": null\n  },\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"cluster-scalability",children:"Cluster scalability"}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/secrets/pki/considerations#cluster-scalability",children:"PKI Cluster Scalability"})," in the considerations page."]}),"\n",(0,i.jsx)(n.h2,{id:"openbao-cli-with-derpem-responses",children:"OpenBao CLI with DER/PEM responses"}),"\n",(0,i.jsxs)(n.p,{children:["The OpenBao CLI can only display JSON responses. For APIs that return non-JSON formatted\ndata such as DER and PEM formats, ",(0,i.jsx)(n.code,{children:"bao read"})," will fail without the ",(0,i.jsx)(n.code,{children:"-format=raw"}),"\noption or another client such as ",(0,i.jsx)(n.code,{children:"curl"})," must be used."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(96540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);