"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7798],{72228:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var s=t(74848),i=t(28453);const l={sidebar_label:"Login Enforcement",description:"The '/identity/mfa/login-enforcement' endpoint focuses on specifying which MFA methods should be used when logging in."},r=void 0,d={id:"secret/identity/mfa/login-enforcement",title:"login-enforcement",description:"The '/identity/mfa/login-enforcement' endpoint focuses on specifying which MFA methods should be used when logging in.",source:"@site/content/api-docs/secret/identity/mfa/login-enforcement.mdx",sourceDirName:"secret/identity/mfa",slug:"/secret/identity/mfa/login-enforcement",permalink:"/openbao/api-docs/secret/identity/mfa/login-enforcement",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/identity/mfa/login-enforcement.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Login Enforcement",description:"The '/identity/mfa/login-enforcement' endpoint focuses on specifying which MFA methods should be used when logging in."},sidebar:"api",previous:{title:"TOTP",permalink:"/openbao/api-docs/secret/identity/mfa/totp"},next:{title:"Overview",permalink:"/openbao/api-docs/secret/kv/"}},o={},c=[{value:"Create a login enforcement",id:"create-a-login-enforcement",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Read login enforcement",id:"read-login-enforcement",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Delete login enforcement",id:"delete-login-enforcement",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"List login enforcements",id:"list-login-enforcements",level:2},{value:"Sample request",id:"sample-request-3",level:3},{value:"Sample response",id:"sample-response-1",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"create-a-login-enforcement",children:"Create a login enforcement"}),"\n",(0,s.jsx)(n.p,{children:"This endpoint creates or updates a login enforcement that specifies which MFA methods should be used when logging into\nOpenBao. If there are multiple login enforcements, each one needs to be satisfied before a login attempt  succeeds."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"POST"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"/identity/mfa/login-enforcement/:name"})})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"})," - Name for this login enforcement configuration."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"mfa_method_ids"})," ",(0,s.jsx)(n.code,{children:"([]string: <required>)"})," - Array of MFA method UUIDs to use. These will be ORed together, meaning\nif several IDs are specified, any one of them is sufficient to login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"auth_method_accessors"})," ",(0,s.jsx)(n.code,{children:"([]string: [])"})," - Array of auth mount accessor IDs. If present, only auth methods\ncorresponding to the given accessors are checked during login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"auth_method_types"})," ",(0,s.jsx)(n.code,{children:"([]string: [])"})," - Array of auth method types. If present, only auth methods\ncorresponding to the given types are checked during login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"identity_group_ids"})," ",(0,s.jsx)(n.code,{children:"([]string: [])"})," - Array of identity group IDs. If present, only entities belonging\nto one of the given groups are checked during login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"identity_entity_ids"})," ",(0,s.jsx)(n.code,{children:"([]string: [])"})," - Array of identity entity IDs. If present, only entities with the given IDs are checked during login."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Note that while none of ",(0,s.jsx)(n.code,{children:"auth_method_accessors"}),", ",(0,s.jsx)(n.code,{children:"auth_method_types"}),", ",(0,s.jsx)(n.code,{children:"identity_group_ids"}),", or ",(0,s.jsx)(n.code,{children:"identity_entity_ids"})," is\nindividually required, at least one of those four fields must be present to create a login enforcement."]}),"\n",(0,s.jsx)(n.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "mfa_method_ids": ["134f7ce9-feae-4c6c-9ed7-ab3e413dbfce"],\n  "auth_method_accessors": ["auth_userpass_337fdb6a"]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/identity/mfa/login-enforcement/foo\n'})}),"\n",(0,s.jsx)(n.h2,{id:"read-login-enforcement",children:"Read login enforcement"}),"\n",(0,s.jsx)(n.p,{children:"This endpoint reads the login enforcement configuration for a given name."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"GET"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"/identity/mfa/login-enforcement/:name"})})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Name of the login enforcement."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/identity/mfa/login-enforcement/foo\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "auth_method_accessors": [\n      "auth_userpass_337fdb6a"\n    ],\n    "auth_method_types": [],\n    "id": "24167a6c-759a-c596-6d48-391c89c4befc",\n    "identity_entity_ids": [],\n    "identity_group_ids": [],\n    "mfa_method_ids": [\n      "c1372abf-bf64-1f26-c2a4-cbcfa135b775"\n    ],\n    "name": "foo",\n    "namespace_id": "root"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"delete-login-enforcement",children:"Delete login enforcement"}),"\n",(0,s.jsx)(n.p,{children:"This endpoint deletes a login enforcement configuration by the given name."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"DELETE"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"/identity/mfa/login-enforcement/:name"})})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"})," ",(0,s.jsx)(n.code,{children:"(string: <required>)"})," - Name of the login enforcement."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/identity/mfa/login-enforcement/foo\n\n'})}),"\n",(0,s.jsx)(n.h2,{id:"list-login-enforcements",children:"List login enforcements"}),"\n",(0,s.jsx)(n.p,{children:"This endpoint lists login enforcements that are visible."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"LIST"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.code,{children:"/identity/mfa/login-enforcement"})})]})})]}),"\n",(0,s.jsx)(n.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/identity/mfa/login-enforcement\n\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": [\n      "foo"\n    ]\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var s=t(96540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);