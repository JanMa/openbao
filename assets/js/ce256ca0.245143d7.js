"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9414],{33184:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>a});var r=l(74848),i=l(28453);const s={sidebar_label:"Availability metics",description:"Technical reference for availability related telemetry values."},d="Availability telemetry",n={id:"internals/telemetry/metrics/availability",title:"Availability telemetry",description:"Technical reference for availability related telemetry values.",source:"@site/content/docs/internals/telemetry/metrics/availability.mdx",sourceDirName:"internals/telemetry/metrics",slug:"/internals/telemetry/metrics/availability",permalink:"/openbao/docs/internals/telemetry/metrics/availability",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/internals/telemetry/metrics/availability.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Availability metics",description:"Technical reference for availability related telemetry values."},sidebar:"docs",previous:{title:"Authentication metrics",permalink:"/openbao/docs/internals/telemetry/metrics/authn"},next:{title:"Database metrics",permalink:"/openbao/docs/internals/telemetry/metrics/database"}},h={},a=[{value:"Default metrics",id:"default-metrics",level:2},{value:"vault.ha.rpc.client.echo",id:"vault-ha-rpc-client-echo",level:3},{value:"vault.ha.rpc.client.echo.errors",id:"vault-ha-rpc-client-echo-errors",level:3},{value:"vault.ha.rpc.client.forward",id:"vault-ha-rpc-client-forward",level:3},{value:"vault.ha.rpc.client.forward.errors",id:"vault-ha-rpc-client-forward-errors",level:3},{value:"Merkle tree metrics",id:"merkle-tree-metrics",level:2},{value:"vault.merkle.flushDirty",id:"vault-merkle-flushdirty",level:3},{value:"vault.merkle.flushDirty.num_pages",id:"vault-merkle-flushdirty-num_pages",level:3},{value:"vault.merkle.flushDirty.outstanding_pages",id:"vault-merkle-flushdirty-outstanding_pages",level:3},{value:"vault.merkle.saveCheckpoint",id:"vault-merkle-savecheckpoint",level:3},{value:"vault.merkle.saveCheckpoint.num_dirty",id:"vault-merkle-savecheckpoint-num_dirty",level:3},{value:"Write-ahead log (WAL) telemetry",id:"write-ahead-log-wal-telemetry",level:2},{value:"vault.wal.deleteWALs",id:"vault-wal-deletewals",level:3},{value:"vault.wal.flushReady",id:"vault-wal-flushready",level:3},{value:"vault.wal.flushReady.queue_len",id:"vault-wal-flushready-queue_len",level:3},{value:"vault.wal.gc.deleted",id:"vault-wal-gc-deleted",level:3},{value:"vault.wal.gc.total",id:"vault-wal-gc-total",level:3},{value:"vault.wal.loadWAL",id:"vault-wal-loadwal",level:3},{value:"vault.wal.persistWALs",id:"vault-wal-persistwals",level:3},{value:"Log shipping metrics",id:"log-shipping-metrics",level:2},{value:"vault.logshipper.buffer.length",id:"vault-logshipper-buffer-length",level:3},{value:"vault.logshipper.buffer.max_length",id:"vault-logshipper-buffer-max_length",level:3},{value:"vault.logshipper.buffer.max_size",id:"vault-logshipper-buffer-max_size",level:3},{value:"vault.logshipper.buffer.size",id:"vault-logshipper-buffer-size",level:3},{value:"vault.logshipper.streamWALs.guard_found",id:"vault-logshipper-streamwals-guard_found",level:3},{value:"vault.logshipper.streamWALs.missing_guard",id:"vault-logshipper-streamwals-missing_guard",level:3},{value:"vault.logshipper.streamWALs.scanned_entries",id:"vault-logshipper-streamwals-scanned_entries",level:3}];function c(e){const t={h1:"h1",h2:"h2",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"availability-telemetry",children:"Availability telemetry"}),"\n",(0,r.jsx)(t.p,{children:"Availability telemetry provides information about standby and active nodes in\nyour OpenBao instance."}),"\n",(0,r.jsx)(t.h2,{id:"default-metrics",children:"Default metrics"}),"\n",(0,r.jsx)(t.h3,{id:"vault-ha-rpc-client-echo",children:"vault.ha.rpc.client.echo"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time taken to send an echo request from a standby to the active node (also emitted by perf standbys)"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-ha-rpc-client-echo-errors",children:"vault.ha.rpc.client.echo.errors"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"counter"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Number of standby echo request failures (also emitted by perf standbys)"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-ha-rpc-client-forward",children:"vault.ha.rpc.client.forward"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time taken to forward a request from a standby to the active node"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-ha-rpc-client-forward-errors",children:"vault.ha.rpc.client.forward.errors"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"counter"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Number of standby request forwarding failures"})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"merkle-tree-metrics",children:"Merkle tree metrics"}),"\n",(0,r.jsx)(t.h3,{id:"vault-merkle-flushdirty",children:"vault.merkle.flushDirty"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"The average time required to flush dirty pages to storage"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-merkle-flushdirty-num_pages",children:"vault.merkle.flushDirty.num_pages"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"pages"}),(0,r.jsx)(t.td,{children:"Number of pages flushed"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-merkle-flushdirty-outstanding_pages",children:"vault.merkle.flushDirty.outstanding_pages"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"pages"}),(0,r.jsx)(t.td,{children:"Number of dirty pages waiting to be flushed"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-merkle-savecheckpoint",children:"vault.merkle.saveCheckpoint"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"The average time required to save a checkpoint"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-merkle-savecheckpoint-num_dirty",children:"vault.merkle.saveCheckpoint.num_dirty"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"pages"}),(0,r.jsx)(t.td,{children:"Number of dirty pages at checkpoint"})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"write-ahead-log-wal-telemetry",children:"Write-ahead log (WAL) telemetry"}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-deletewals",children:"vault.wal.deleteWALs"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time required to fully delete a write-ahead log"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-flushready",children:"vault.wal.flushReady"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time required to fully flush a write-ahead log that is ready for storage"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-flushready-queue_len",children:"vault.wal.flushReady.queue_len"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Current size of the write queue in the WAL system"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-gc-deleted",children:"vault.wal.gc.deleted"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Number of write-ahead logs deleted during garbage collection"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-gc-total",children:"vault.wal.gc.total"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Total number of write-ahead logs currently on disk"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-loadwal",children:"vault.wal.loadWAL"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time required to load a write-ahead log"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-wal-persistwals",children:"vault.wal.persistWALs"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"ms"}),(0,r.jsx)(t.td,{children:"Time required to persist a write-ahead log"})]})})]}),"\n",(0,r.jsx)(t.h2,{id:"log-shipping-metrics",children:"Log shipping metrics"}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-buffer-length",children:"vault.logshipper.buffer.length"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"buffer entries"}),(0,r.jsx)(t.td,{children:"Current length of the log shipper buffer"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-buffer-max_length",children:"vault.logshipper.buffer.max_length"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"buffer entries"}),(0,r.jsx)(t.td,{children:"Maximum length of the log shipper buffer seen to date"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-buffer-max_size",children:"vault.logshipper.buffer.max_size"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"bytes"}),(0,r.jsx)(t.td,{children:"Maximum allowable size of the log shipper buffer"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-buffer-size",children:"vault.logshipper.buffer.size"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"gauge"}),(0,r.jsx)(t.td,{children:"bytes"}),(0,r.jsx)(t.td,{children:"Current size of the log shipper buffer"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-streamwals-guard_found",children:"vault.logshipper.streamWALs.guard_found"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"counter"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Number of times OpenBao began streaming WAL entires and found a starting index in the merkle tree"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-streamwals-missing_guard",children:"vault.logshipper.streamWALs.missing_guard"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"counter"}),(0,r.jsx)(t.td,{children:"number"}),(0,r.jsx)(t.td,{children:"Number of times OpenBao began streaming WAL entires without finding a starting index in the Merkle tree"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"vault-logshipper-streamwals-scanned_entries",children:"vault.logshipper.streamWALs.scanned_entries"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric type"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"summary"}),(0,r.jsx)(t.td,{children:"entries"}),(0,r.jsx)(t.td,{children:"Number of entries scanned in the buffer before OpenBao found the correct entry"})]})})]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,t,l)=>{l.d(t,{R:()=>d,x:()=>n});var r=l(96540);const i={},s=r.createContext(i);function d(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);