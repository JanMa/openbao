"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3755],{70813:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>h});var s=t(74848),c=t(28453);const a={sidebar_label:"Kubernetes",description:"Kubernetes Persistent Cache for OpenBao Agent Caching"},i="OpenBao agent kubernetes persistent cache",o={id:"agent-and-proxy/agent/caching/persistent-caches/kubernetes",title:"OpenBao agent kubernetes persistent cache",description:"Kubernetes Persistent Cache for OpenBao Agent Caching",source:"@site/content/docs/agent-and-proxy/agent/caching/persistent-caches/kubernetes.mdx",sourceDirName:"agent-and-proxy/agent/caching/persistent-caches",slug:"/agent-and-proxy/agent/caching/persistent-caches/kubernetes",permalink:"/openbao/docs/agent-and-proxy/agent/caching/persistent-caches/kubernetes",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/agent-and-proxy/agent/caching/persistent-caches/kubernetes.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Kubernetes",description:"Kubernetes Persistent Cache for OpenBao Agent Caching"},sidebar:"docs",previous:{title:"Overview",permalink:"/openbao/docs/agent-and-proxy/agent/caching/persistent-caches/"},next:{title:"generate-config",permalink:"/openbao/docs/agent-and-proxy/agent/generate-config/"}},r={},h=[{value:"Configuration",id:"configuration",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"openbao-agent-kubernetes-persistent-cache",children:"OpenBao agent kubernetes persistent cache"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"kubernetes"})," is configured for the persistent cache type, OpenBao Agent will optimize the\npersistent cache specifically for Kubernetes. This type of persistent cache requires a Kubernetes\nservice account token. The service account token is used during encryption and decryption of the\npersistent cache as an additional integrity check."]}),"\n",(0,s.jsx)(n.p,{children:"The OpenBao Agent persistent cache file in Kubernetes should only be used for handing off OpenBao tokens\nand leases between initialization and sidecar OpenBao Agent containers. This cache file should be shared\nusing a memory volume between the OpenBao Agent containers."}),"\n",(0,s.jsxs)(n.p,{children:["If the OpenBao Agent Injector for Kubernetes is being used, the persistent cache is automatically configured\nand used if the annotation ",(0,s.jsx)(n.a,{href:"/docs/platform/k8s/injector/annotations#vault-hashicorp-com-agent-cache-enable",children:(0,s.jsx)(n.code,{children:"vault.hashicorp.com/agent-cache-enable: true"})})," is set."]}),"\n",(0,s.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"service_account_token_file"})," ",(0,s.jsx)(n.code,{children:"(string: optional)"})," - When type is set to ",(0,s.jsx)(n.code,{children:"kubernetes"}),",\nthis configures the path on disk where the Kubernetes service account token can be found.\nDefaults to ",(0,s.jsx)(n.code,{children:"/var/run/secrets/kubernetes.io/serviceaccount/token"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(96540);const c={},a=s.createContext(c);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);