"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[187],{44357:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var l=t(74848),s=t(28453);const i={sidebar_label:"Tokens",description:"This is the API documentation for the OpenBao token auth method."},a="Token auth method (API)",r={id:"auth/token",title:"Token auth method (API)",description:"This is the API documentation for the OpenBao token auth method.",source:"@site/content/api-docs/auth/token.mdx",sourceDirName:"auth",slug:"/auth/token",permalink:"/api-docs/auth/token",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/auth/token.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Tokens",description:"This is the API documentation for the OpenBao token auth method."},sidebar:"api",previous:{title:"TLS Certificates",permalink:"/api-docs/auth/cert"},next:{title:"Username and Password",permalink:"/api-docs/auth/userpass"}},o={},d=[{value:"List accessors",id:"list-accessors",level:2},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Create token",id:"create-token",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response-1",level:3},{value:"Lookup a token",id:"lookup-a-token",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample payload",id:"sample-payload-1",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"Sample response",id:"sample-response-2",level:3},{value:"Lookup a token (Self)",id:"lookup-a-token-self",level:2},{value:"Sample request",id:"sample-request-3",level:3},{value:"Sample response",id:"sample-response-3",level:3},{value:"Lookup a token (Accessor)",id:"lookup-a-token-accessor",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample payload",id:"sample-payload-2",level:3},{value:"Sample request",id:"sample-request-4",level:3},{value:"Sample response",id:"sample-response-4",level:3},{value:"Renew a token",id:"renew-a-token",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Sample payload",id:"sample-payload-3",level:3},{value:"Sample request",id:"sample-request-5",level:3},{value:"Sample response",id:"sample-response-5",level:3},{value:"Renew a token (Self)",id:"renew-a-token-self",level:2},{value:"Parameters",id:"parameters-4",level:3},{value:"Sample payload",id:"sample-payload-4",level:3},{value:"Sample request",id:"sample-request-6",level:3},{value:"Sample response",id:"sample-response-6",level:3},{value:"Renew a token (Accessor)",id:"renew-a-token-accessor",level:2},{value:"Parameters",id:"parameters-5",level:3},{value:"Sample payload",id:"sample-payload-5",level:3},{value:"Sample request",id:"sample-request-7",level:3},{value:"Sample response",id:"sample-response-7",level:3},{value:"Revoke a token",id:"revoke-a-token",level:2},{value:"Parameters",id:"parameters-6",level:3},{value:"Sample payload",id:"sample-payload-6",level:3},{value:"Sample request",id:"sample-request-8",level:3},{value:"Revoke a token (Self)",id:"revoke-a-token-self",level:2},{value:"Sample request",id:"sample-request-9",level:3},{value:"Revoke a token accessor",id:"revoke-a-token-accessor",level:2},{value:"Parameters",id:"parameters-7",level:3},{value:"Sample payload",id:"sample-payload-7",level:3},{value:"Sample request",id:"sample-request-10",level:3},{value:"Revoke token and orphan children",id:"revoke-token-and-orphan-children",level:2},{value:"Parameters",id:"parameters-8",level:3},{value:"Sample payload",id:"sample-payload-8",level:3},{value:"Sample request",id:"sample-request-11",level:3},{value:"Read token role",id:"read-token-role",level:2},{value:"Parameters",id:"parameters-9",level:3},{value:"Sample request",id:"sample-request-12",level:3},{value:"Sample response",id:"sample-response-8",level:3},{value:"List token roles",id:"list-token-roles",level:2},{value:"Sample request",id:"sample-request-13",level:3},{value:"Sample response",id:"sample-response-9",level:3},{value:"Create/Update token role",id:"createupdate-token-role",level:2},{value:"Parameters",id:"parameters-10",level:3},{value:"Sample payload",id:"sample-payload-9",level:3},{value:"Sample request",id:"sample-request-14",level:3},{value:"Delete token role",id:"delete-token-role",level:2},{value:"Parameters",id:"parameters-11",level:3},{value:"Sample request",id:"sample-request-15",level:3},{value:"Tidy tokens",id:"tidy-tokens",level:2},{value:"Sample request",id:"sample-request-16",level:3},{value:"Sample response",id:"sample-response-10",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"token-auth-method-api",children:"Token auth method (API)"}),"\n",(0,l.jsxs)(n.p,{children:["This is the API documentation for the OpenBao token auth method. For\ngeneral information about the usage and operation of the token method, please\nsee the ",(0,l.jsx)(n.a,{href:"/docs/auth/token",children:"OpenBao Token method documentation"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"list-accessors",children:"List accessors"}),"\n",(0,l.jsxs)(n.p,{children:["This endpoint lists token accessor. This requires ",(0,l.jsx)(n.code,{children:"sudo"})," capability, and access\nto it should be tightly controlled as the accessors can be used to revoke very\nlarge numbers of tokens and their associated leases at once."]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"LIST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/accessors"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/auth/token/accessors\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "auth": null,\n  "warnings": null,\n  "wrap_info": null,\n  "data": {\n    "keys": [\n      "476ea048-ded5-4d07-eeea-938c6b4e43ec",\n      "bb00c093-b7d3-b0e9-69cc-c4d85081165b"\n    ]\n  },\n  "lease_duration": 0,\n  "renewable": false,\n  "lease_id": ""\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"create-token",children:"Create token"}),"\n",(0,l.jsxs)(n.p,{children:["Creates a new token. Certain options are only available when called by a\nroot token. If used via the ",(0,l.jsx)(n.code,{children:"/auth/token/create-orphan"})," endpoint, a root\ntoken is not required to create an orphan token (otherwise set with the\n",(0,l.jsx)(n.code,{children:"no_parent"})," option). If used with a role name in the path, the token will\nbe created against the specified role name; this may override options set\nduring this call."]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/create"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/create-orphan"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/create/:role_name"})})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"id"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," \u2013 The ID of the client token. Can only be specified by a\nroot token. The ID provided may not contain a ",(0,l.jsx)(n.code,{children:"."})," character. Otherwise, the\ntoken ID is a randomly generated value."]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.em,{children:"Note:"})," The ID should not start with the ",(0,l.jsx)(n.code,{children:"s."})," prefix."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"role_name"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," \u2013 The name of the token role."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"policies"})," ",(0,l.jsx)(n.code,{children:'(array: "")'})," \u2013 A list of policies for the token. This must be a\nsubset of the policies belonging to the token making the request, unless\nthe calling token is root or contains ",(0,l.jsx)(n.code,{children:"sudo"})," capabilities to ",(0,l.jsx)(n.code,{children:"auth/token/create"}),".\nIf not specified, defaults to all the policies of the calling token."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"meta"})," ",(0,l.jsx)(n.code,{children:"(map: {})"})," \u2013 A map of string to string valued metadata. This is\npassed through to the audit devices."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"no_parent"})," ",(0,l.jsx)(n.code,{children:"(bool: false)"})," - This argument only has effect if used by a root\nor sudo caller. When set to true, the token created will not have a parent."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"no_default_policy"})," ",(0,l.jsx)(n.code,{children:"(bool: false)"})," - If true the ",(0,l.jsx)(n.code,{children:"default"})," policy will not be\ncontained in this token's policy set."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"renewable"})," ",(0,l.jsx)(n.code,{children:"(bool: true)"})," - Set to ",(0,l.jsx)(n.code,{children:"false"})," to disable the ability of the token\nto be renewed past its initial TTL. Setting the value to ",(0,l.jsx)(n.code,{children:"true"})," will allow\nthe token to be renewable up to the system/mount maximum TTL."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"lease"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - DEPRECATED; use ",(0,l.jsx)(n.code,{children:"ttl"})," instead"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"ttl"})," ",(0,l.jsx)(n.code,{children:'(string: "")'}),' - The TTL period of the token, provided as "1h", where\nhour is the largest suffix. If not provided, the token is valid for the\n',(0,l.jsx)(n.a,{href:"/docs/configuration",children:"default lease TTL"}),", or indefinitely if the\nroot policy is used."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"type"})," ",(0,l.jsx)(n.code,{children:'(string: "")'}),' - The token type. Can be "batch" or "service". Defaults\nto the type specified by the role configuration named by ',(0,l.jsx)(n.code,{children:"role_name"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"explicit_max_ttl"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - If set, the token will have an explicit\nmax TTL set upon it. This maximum token TTL ",(0,l.jsx)(n.em,{children:"cannot"})," be changed later, and\nunlike with normal tokens, updates to the system/mount max TTL value will\nhave no effect at renewal time -- the token will never be able to be renewed\nor used past the value set at issue time."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"display_name"})," ",(0,l.jsx)(n.code,{children:'(string: "token")'})," - The display name of the token."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"num_uses"})," ",(0,l.jsx)(n.code,{children:"(integer: 0)"})," - The maximum uses for the given token. This can be\nused to create a one-time-token or limited use token. The value of 0 has no\nlimit to the number of uses."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"period"})," ",(0,l.jsx)(n.code,{children:'(string: "")'}),' - If specified, the token will be periodic; it will have\nno maximum TTL (unless an "explicit-max-ttl" is also set) but every renewal\nwill use the given period. Requires a root token or one with the sudo capability.']}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"entity_alias"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - Name of the entity alias to associate with\nduring token creation. Only works in combination with ",(0,l.jsx)(n.code,{children:"role_name"})," argument\nand used entity alias must be listed in ",(0,l.jsx)(n.code,{children:"allowed_entity_aliases"}),". If this has\nbeen specified, the entity will not be inherited from the parent."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "policies": ["web", "stage"],\n  "meta": {\n    "user": "armon"\n  },\n  "ttl": "1h",\n  "renewable": true\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/create\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "request_id": "f00341c1-fad5-f6e6-13fd-235617f858a1",\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": null,\n  "wrap_info": null,\n  "warnings": [\n    "Policy \\"stage\\" does not exist",\n    "Policy \\"web\\" does not exist"\n  ],\n  "auth": {\n    "client_token": "s.wOrq9dO9kzOcuvB06CMviJhZ",\n    "accessor": "B6oixijqmeR4bsLOJH88Ska9",\n    "policies": ["default", "stage", "web"],\n    "token_policies": ["default", "stage", "web"],\n    "metadata": {\n      "user": "armon"\n    },\n    "lease_duration": 3600,\n    "renewable": true,\n    "entity_id": "",\n    "token_type": "service",\n    "orphan": false,\n    "num_uses": 0\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"lookup-a-token",children:"Lookup a token"}),"\n",(0,l.jsx)(n.p,{children:"Returns information about the client token."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/lookup"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Token to lookup."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-1",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "token": "ClientToken"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/lookup\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-2",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "accessor": "8609694a-cdbc-db9b-d345-e782dbb562ed",\n    "creation_time": 1523979354,\n    "creation_ttl": 2764800,\n    "display_name": "ldap2-tesla",\n    "entity_id": "7d2e3179-f69b-450c-7179-ac8ee8bd8ca9",\n    "expire_time": "2018-05-19T11:35:54.466476215-04:00",\n    "explicit_max_ttl": 0,\n    "id": "cf64a70f-3a12-3f6c-791d-6cef6d390eed",\n    "identity_policies": ["dev-group-policy"],\n    "issue_time": "2018-04-17T11:35:54.466476078-04:00",\n    "meta": {\n      "username": "tesla"\n    },\n    "num_uses": 0,\n    "orphan": true,\n    "path": "auth/ldap2/login/tesla",\n    "policies": ["default", "testgroup2-policy"],\n    "renewable": true,\n    "ttl": 2764790\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"lookup-a-token-self",children:"Lookup a token (Self)"}),"\n",(0,l.jsx)(n.p,{children:"Returns information about the current client token."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"GET"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/lookup-self"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/auth/token/lookup-self\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-3",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "accessor": "8609694a-cdbc-db9b-d345-e782dbb562ed",\n    "creation_time": 1523979354,\n    "creation_ttl": 2764800,\n    "display_name": "ldap2-tesla",\n    "entity_id": "7d2e3179-f69b-450c-7179-ac8ee8bd8ca9",\n    "expire_time": "2018-05-19T11:35:54.466476215-04:00",\n    "explicit_max_ttl": 0,\n    "id": "cf64a70f-3a12-3f6c-791d-6cef6d390eed",\n    "identity_policies": ["dev-group-policy"],\n    "issue_time": "2018-04-17T11:35:54.466476078-04:00",\n    "meta": {\n      "username": "tesla"\n    },\n    "num_uses": 0,\n    "orphan": true,\n    "path": "auth/ldap2/login/tesla",\n    "policies": ["default", "testgroup2-policy"],\n    "renewable": true,\n    "ttl": 2764790\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"lookup-a-token-accessor",children:"Lookup a token (Accessor)"}),"\n",(0,l.jsx)(n.p,{children:"Returns information about the client token from the accessor."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/lookup-accessor"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"accessor"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Token accessor to lookup."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-2",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "accessor": "8609694a-cdbc-db9b-d345-e782dbb562ed"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-4",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/lookup-accessor\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-4",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "accessor": "8609694a-cdbc-db9b-d345-e782dbb562ed",\n    "creation_time": 1523979354,\n    "creation_ttl": 2764800,\n    "display_name": "ldap2-tesla",\n    "entity_id": "7d2e3179-f69b-450c-7179-ac8ee8bd8ca9",\n    "expire_time": "2018-05-19T11:35:54.466476215-04:00",\n    "explicit_max_ttl": 0,\n    "id": "",\n    "identity_policies": ["dev-group-policy"],\n    "issue_time": "2018-04-17T11:35:54.466476078-04:00",\n    "meta": {\n      "username": "tesla"\n    },\n    "num_uses": 0,\n    "orphan": true,\n    "path": "auth/ldap2/login/tesla",\n    "policies": ["default", "testgroup2-policy"],\n    "renewable": true,\n    "ttl": 2763902\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"renew-a-token",children:"Renew a token"}),"\n",(0,l.jsx)(n.p,{children:"Renews a lease associated with a token. This is used to prevent the expiration\nof a token, and the automatic revocation of it. Token renewal is possible only\nif there is a lease associated with it."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/renew"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Token to renew. This can be part of the URL\nor the body."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"increment"})," ",(0,l.jsx)(n.code,{children:'(string: "")'}),' - An optional requested increment duration can be\nprovided. This increment may not be honored, for instance in the case of periodic tokens.\nIf not supplied, OpenBao will use the default TTL. This is specified as a numeric string\nwith suffix like "30s" or "5m".']}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-3",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "token": "ClientToken"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-5",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/renew\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-5",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "auth": {\n    "client_token": "ABCD",\n    "policies": ["web", "stage"],\n    "metadata": {\n      "user": "armon"\n    },\n    "lease_duration": 3600,\n    "renewable": true\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"renew-a-token-self",children:"Renew a token (Self)"}),"\n",(0,l.jsx)(n.p,{children:"Renews a lease associated with the calling token. This is used to prevent the\nexpiration of a token, and the automatic revocation of it. Token renewal is\npossible only if there is a lease associated with it."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/renew-self"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-4",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"increment"})," ",(0,l.jsx)(n.code,{children:'(string: "")'}),' - An optional requested increment duration can be\nprovided. This increment may not be honored, for instance in the case of periodic tokens.\nIf not supplied, OpenBao will use the default TTL. This is specified as a numeric string\nwith suffix like "30s" or "5m".']}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-4",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "increment": "1h"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-6",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/renew-self\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-6",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "auth": {\n    "client_token": "ABCD",\n    "policies": ["web", "stage"],\n    "metadata": {\n      "user": "armon"\n    },\n    "lease_duration": 3600,\n    "renewable": true\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"renew-a-token-accessor",children:"Renew a token (Accessor)"}),"\n",(0,l.jsx)(n.p,{children:"Renews a lease associated with a token using its accessor. This is used to\nprevent the expiration of a token, and the automatic revocation of it. Token\nrenewal is possible only if there is a lease associated with it."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/renew-accessor"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-5",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"accessor"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Accessor associated with the token to\nrenew."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"increment"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - An optional requested lease increment can be\nprovided. This increment may be ignored."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-5",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "accessor": "7JFKXuXKXa2D44YfDiovZ9aq"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-7",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/renew-accessor\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-7",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "auth": {\n    "client_token": "",\n    "policies": ["web", "stage"],\n    "metadata": {\n      "user": "armon"\n    },\n    "lease_duration": 3600,\n    "renewable": true\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"revoke-a-token",children:"Revoke a token"}),"\n",(0,l.jsx)(n.p,{children:"Revokes a token and all child tokens. When the token is revoked, all dynamic secrets\ngenerated with it are also revoked."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/revoke"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-6",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Token to revoke."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-6",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "token": "ClientToken"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-8",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/revoke\n'})}),"\n",(0,l.jsx)(n.h2,{id:"revoke-a-token-self",children:"Revoke a token (Self)"}),"\n",(0,l.jsx)(n.p,{children:"Revokes the token used to call it and all child tokens. When the token is\nrevoked, all dynamic secrets generated with it are also revoked."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/revoke-self"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-9",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/auth/token/revoke-self\n'})}),"\n",(0,l.jsx)(n.h2,{id:"revoke-a-token-accessor",children:"Revoke a token accessor"}),"\n",(0,l.jsx)(n.p,{children:"Revoke the token associated with the accessor and all the child tokens. This is\nmeant for purposes where there is no access to token ID but there is need to\nrevoke a token and its children."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/revoke-accessor"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-7",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"accessor"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Accessor of the token."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-7",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "accessor": "2c84f488-2133-4ced-87b0-570f93a76830"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-10",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/revoke-accessor\n'})}),"\n",(0,l.jsx)(n.h2,{id:"revoke-token-and-orphan-children",children:"Revoke token and orphan children"}),"\n",(0,l.jsxs)(n.p,{children:["Revokes a token but not its child tokens. When the token is revoked, all secrets\ngenerated with it are also revoked. All child tokens are orphaned, but can be\nrevoked sub-sequently using ",(0,l.jsx)(n.code,{children:"/auth/token/revoke/"}),". This is a root-protected\nendpoint."]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/revoke-orphan"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-8",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - Token to revoke. This can be part of the URL\nor the body."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-8",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "token": "ClientToken"\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-11",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/auth/token/revoke-orphan\n'})}),"\n",(0,l.jsx)(n.h2,{id:"read-token-role",children:"Read token role"}),"\n",(0,l.jsx)(n.p,{children:"Fetches the named role configuration."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"GET"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/roles/:role_name"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-9",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"role_name"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - The name of the token role."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-12",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/auth/token/roles/nomad\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-8",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:'{\n  "request_id": "075a19cd-4e56-a3ca-d956-7609819831ec",\n  "lease_id": "",\n  "lease_duration": 0,\n  "renewable": false,\n  "data": {\n    "allowed_entity_aliases": [\n      "my-entity-alias"\n    ],\n    "allowed_policies": [],\n    "disallowed_policies": [],\n    "allowed_policies_glob": [],\n    "disallowed_policies_glob": [],\n    "explicit_max_ttl": 0,\n    "name": "nomad",\n    "orphan": false,\n    "path_suffix": "",\n    "period": 0,\n    "renewable": true,\n    "token_explicit_max_ttl": 0,\n    "token_no_default_policy": false,\n    "token_period": 0,\n    "token_type": "default-service"\n  },\n  "warnings": null\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"list-token-roles",children:"List token roles"}),"\n",(0,l.jsx)(n.p,{children:"List available token roles."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"LIST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/roles"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-13",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST\n    http://127.0.0.1:8200/v1/auth/token/roles\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-9",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": ["role1", "role2"]\n  }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"createupdate-token-role",children:"Create/Update token role"}),"\n",(0,l.jsxs)(n.p,{children:["Creates (or replaces) the named role. Roles enforce specific behavior when\ncreating tokens that allow token functionality that is otherwise not\navailable or would require ",(0,l.jsx)(n.code,{children:"sudo"}),"/root privileges to access. Role\nparameters, when set, override any provided options to the ",(0,l.jsx)(n.code,{children:"create"}),"\nendpoints. The role name is also included in the token path, allowing all\ntokens created against a role to be revoked using the\n",(0,l.jsx)(n.code,{children:"/sys/leases/revoke-prefix"})," endpoint."]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/roles/:role_name"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-10",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"role_name"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," \u2013 The name of the token role."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allowed_policies"})," ",(0,l.jsx)(n.code,{children:"(list: [])"})," \u2013 If set, tokens can be created with any\nsubset of the policies in this list, rather than the normal semantics of\ntokens being a subset of the calling token's policies. The parameter is a\ncomma-delimited string of policy names. If at creation time\n",(0,l.jsx)(n.code,{children:"no_default_policy"})," is not set and ",(0,l.jsx)(n.code,{children:'"default"'})," is not contained in\n",(0,l.jsx)(n.code,{children:"disallowed_policies"})," or glob matched in ",(0,l.jsx)(n.code,{children:"disallowed_policies_glob"}),",\nthe ",(0,l.jsx)(n.code,{children:'"default"'})," policy will be added to the created token automatically."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"disallowed_policies"})," ",(0,l.jsx)(n.code,{children:"(list: [])"})," \u2013 If set, successful token creation via\nthis role will require that no policies in the given list are requested. The\nparameter is a comma-delimited string of policy names. Adding ",(0,l.jsx)(n.code,{children:'"default"'})," to\nthis list will prevent ",(0,l.jsx)(n.code,{children:'"default"'})," from being added automatically to created\ntokens."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allowed_policies_glob"})," ",(0,l.jsx)(n.code,{children:"(list: [])"})," \u2013 If set, tokens can be created with any\nsubset of glob matched policies in this list, rather than the normal semantics\nof tokens being a subset of the calling token's policies. The parameter is a\ncomma-delimited string of policy name globs. If at creation time\n",(0,l.jsx)(n.code,{children:"no_default_policy"})," is not set and ",(0,l.jsx)(n.code,{children:'"default"'})," is not contained in\n",(0,l.jsx)(n.code,{children:"disallowed_policies"})," or glob matched in ",(0,l.jsx)(n.code,{children:"disallowed_policies_glob"}),",\nthe ",(0,l.jsx)(n.code,{children:'"default"'})," policy will be added to the created token automatically.\nIf combined with ",(0,l.jsx)(n.code,{children:"allowed_policies"})," policies need to only match one of the two\nlists to be permitted. Note that unlike ",(0,l.jsx)(n.code,{children:"allowed_policies"})," the policies listed\nin ",(0,l.jsx)(n.code,{children:"allowed_policies_glob"})," will not be added to the token when no policies are\nspecified in the call to ",(0,l.jsx)(n.code,{children:"/auth/token/create/:role_name"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"disallowed_policies_glob"})," ",(0,l.jsx)(n.code,{children:"(list: [])"})," \u2013 If set, successful token creation via\nthis role will require that no requested policies glob match any of policies in\nthis list. The parameter is a comma-delimited string of policy name globs.\nAdding any glob that matches ",(0,l.jsx)(n.code,{children:'"default"'})," to this list will prevent ",(0,l.jsx)(n.code,{children:'"default"'}),"\nfrom being added automatically to created tokens.\nIf combined with ",(0,l.jsx)(n.code,{children:"disallowed_policies"})," policies need to only match one of the\ntwo lists to be blocked."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"orphan"})," ",(0,l.jsx)(n.code,{children:"(bool: false)"})," - If ",(0,l.jsx)(n.code,{children:"true"}),", tokens created against this policy will\nbe orphan tokens (they will have no parent). As such, they will not be\nautomatically revoked by the revocation of any other token."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"renewable"})," ",(0,l.jsx)(n.code,{children:"(bool: true)"})," - Set to ",(0,l.jsx)(n.code,{children:"false"})," to disable the ability of the token\nto be renewed past its initial TTL. Setting the value to ",(0,l.jsx)(n.code,{children:"true"})," will allow\nthe token to be renewable up to the system/mount maximum TTL."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"path_suffix"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - If set, tokens created against this role will\nhave the given suffix as part of their path in addition to the role name. This\ncan be useful in certain scenarios, such as keeping the same role name in the\nfuture but revoking all tokens created against it before some point in time.\nThe suffix can be changed, allowing new callers to have the new suffix as part\nof their path, and then tokens with the old suffix can be revoked via\n",(0,l.jsx)(n.code,{children:"/sys/leases/revoke-prefix"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"allowed_entity_aliases"})," ",(0,l.jsx)(n.code,{children:'(string: "", or list: [])'})," - String or JSON list\nof allowed entity aliases. If set, specifies the entity aliases which are\nallowed to be used during token generation. This field supports globbing.\nNote that ",(0,l.jsx)(n.code,{children:"allowed_entity_aliases"})," is not case sensitive."]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_bound_cidrs"})," ",(0,l.jsx)(n.code,{children:'(array: [] or comma-delimited string: "")'})," - List of\nCIDR blocks; if set, specifies blocks of IP addresses which can authenticate\nsuccessfully, and ties the resulting token to these blocks as well."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_explicit_max_ttl"})," ",(0,l.jsx)(n.code,{children:'(integer: 0 or string: "")'})," - If set, will encode\nan ",(0,l.jsx)(n.a,{href:"/docs/concepts/tokens#token-time-to-live-periodic-tokens-and-explicit-max-ttls",children:"explicit max\nTTL"}),"\nonto the token. This is a hard cap even if ",(0,l.jsx)(n.code,{children:"token_ttl"})," and ",(0,l.jsx)(n.code,{children:"token_max_ttl"}),"\nwould otherwise allow a renewal."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_no_default_policy"})," ",(0,l.jsx)(n.code,{children:"(bool: false)"})," - If set, the ",(0,l.jsx)(n.code,{children:"default"})," policy will\nnot be set on generated tokens; otherwise it will be added to the policies set\nin ",(0,l.jsx)(n.code,{children:"token_policies"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_num_uses"})," ",(0,l.jsx)(n.code,{children:"(integer: 0)"})," - The maximum number of times a generated\ntoken may be used (within its lifetime); 0 means unlimited.\nIf you require the token to have the ability to create child tokens,\nyou will need to set this value to 0."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_period"})," ",(0,l.jsx)(n.code,{children:'(integer: 0 or string: "")'})," - The maximum allowed ",(0,l.jsx)(n.a,{href:"/docs/concepts/tokens#token-time-to-live-periodic-tokens-and-explicit-max-ttls",children:"period"})," value when a periodic token is requested from this role."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_type"})," ",(0,l.jsx)(n.code,{children:'(string: "")'})," - The type of token that should be generated. Can\nbe ",(0,l.jsx)(n.code,{children:"service"}),", ",(0,l.jsx)(n.code,{children:"batch"}),", or ",(0,l.jsx)(n.code,{children:"default"})," to use the mount's tuned default (which\nunless changed will be ",(0,l.jsx)(n.code,{children:"service"})," tokens). For token store roles, there are two\nadditional possibilities: ",(0,l.jsx)(n.code,{children:"default-service"})," and ",(0,l.jsx)(n.code,{children:"default-batch"})," which specify\nthe type to return unless the client requests a different type at generation\ntime."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-payload-9",children:"Sample payload"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'  "allowed_policies": [\n    "dev"\n  ],\n  "name": "nomad",\n  "orphan": false,\n  "bound_cidrs": ["127.0.0.1/32", "128.252.0.0/16"],\n  "renewable": true,\n  "allowed_entity_aliases": ["web-entity-alias", "app-entity-*"]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-14",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST\n    --data @payload.json\n    http://127.0.0.1:8200/v1/auth/token/roles/nomad\n'})}),"\n",(0,l.jsx)(n.h2,{id:"delete-token-role",children:"Delete token role"}),"\n",(0,l.jsx)(n.p,{children:"This endpoint deletes the named token role."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"DELETE"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/roles/:role_name"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"parameters-11",children:"Parameters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"role_name"})," ",(0,l.jsx)(n.code,{children:"(string: <required>)"})," - The name of the token role."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-15",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/auth/token/roles/admins\n'})}),"\n",(0,l.jsx)(n.h2,{id:"tidy-tokens",children:"Tidy tokens"}),"\n",(0,l.jsx)(n.p,{children:"Performs some maintenance tasks to clean up invalid entries that may remain\nin the token store."}),"\n",(0,l.jsxs)(n.p,{children:["Generally, running this is not needed unless upgrade notes or support personnel\nsuggest it. There are two potential dangers to running tidy: first, this will\nperform a lot of read I/O to the storage method, as it will essentially reload the\nentirety of the token store into memory. Depending on how much cleanup is\nrequired (usually very little) there may also be a large number of writes.\nSecond, this will cause OpenBao's memory usage to balloon up, because the default\nOpenBao internal cache is unlimited in size and every value read from storage will\nbe cached. Listing the ",(0,l.jsx)(n.code,{children:"/auth/token/accessors"})," endpoint is a good way to get\nsome sense of the potential impact: tidy does this and more, so if this call creates problems\nfor your cluster, it would be wise to give OpenBao more resources before attempting\ntidy. Note that the request may time out depending on\n",(0,l.jsx)(n.a,{href:"/docs/configuration#default_max_request_duration",children:"max duration"}),"\nand your client's timeout configuration, make sure to allow it run to completion\nto properly judge the impact."]}),"\n",(0,l.jsx)(n.p,{children:"Tidy will load every token accessor and cubbyhole, as well\nas all the secondary index entries that are used to group tokens into trees so\nthat parent token revocation also revokes child tokens."}),"\n",(0,l.jsx)(n.p,{children:"For each parent token listed in the secondary index, tidy will check if the token\nstill exists in storage, and if not its child tokens that still exist will be\nmade orphans, then the parent token will be removed from the secondary index."}),"\n",(0,l.jsx)(n.p,{children:"For each accessor found, tidy will check if the corresponding token still exists\nin storage, and if not will delete the accessor. If the token still exists in\nstorage but shouldn't, tidy will try to revoke it and any child leases it might\nhave, then delete the accessor."}),"\n",(0,l.jsx)(n.p,{children:"Finally, any cubbyhole entries that are associated with tokens which weren't deemed\nvalid in the above steps will be deleted."}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"POST"})}),(0,l.jsx)(n.td,{style:{textAlign:"left"},children:(0,l.jsx)(n.code,{children:"/auth/token/tidy"})})]})})]}),"\n",(0,l.jsx)(n.h3,{id:"sample-request-16",children:"Sample request"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/auth/token/tidy\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sample-response-10",children:"Sample response"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "request_id": "84437c7f-36a1-6c1d-381d-14ec99217e94",\n  "lease_id": "",\n  "renewable": false,\n  "lease_duration": 0,\n  "data": null,\n  "wrap_info": null,\n  "warnings": [\n    "Tidy operation successfully started. Any information from the operation will be printed to OpenBao\'s server logs."\n  ],\n  "auth": null\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var l=t(96540);const s={},i=l.createContext(s);function a(e){const n=l.useContext(i);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);