"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[927],{4998:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var r=n(74848),a=n(28453),s=n(11470),o=n(19365);const i={layout:"docs",page_title:"Developer Quick Start",description:"Learn how to store and retrieve your first secret."},l="Developer quick start",c={id:"get-started/developer-qs",title:"Developer quick start",description:"Learn how to store and retrieve your first secret.",source:"@site/content/docs/get-started/developer-qs.mdx",sourceDirName:"get-started",slug:"/get-started/developer-qs",permalink:"/openbao/docs/get-started/developer-qs",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/get-started/developer-qs.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"Developer Quick Start",description:"Learn how to store and retrieve your first secret."},sidebar:"tutorialSidebar",previous:{title:"Product features FAQ",permalink:"/openbao/docs/faq/"},next:{title:"Glossary",permalink:"/openbao/docs/glossary"}},d={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: start OpenBao",id:"step-1-start-openbao",level:2},{value:"Step 2: install a client library",id:"step-2-install-a-client-library",level:2},{value:"Step 3: authenticate to OpenBao",id:"step-3-authenticate-to-openbao",level:2},{value:"Step 4: store a secret",id:"step-4-store-a-secret",level:2},{value:"Step 5: retrieve a secret",id:"step-5-retrieve-a-secret",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"developer-quick-start",children:"Developer quick start"}),"\n",(0,r.jsx)(t.p,{children:"This quick start will explore how to use OpenBao client libraries inside your application code to store and retrieve your first secret value. OpenBao takes the security burden away from developers by providing a secure, centralized secret store for an application\u2019s sensitive data: credentials, certificates, encryption keys, and more."}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["A development environment applicable to one of the languages in this quick start (currently ",(0,r.jsx)(t.strong,{children:"Go"})," and ",(0,r.jsx)(t.strong,{children:"Bash (curl)"}),")"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-1-start-openbao",children:"Step 1: start OpenBao"}),"\n",(0,r.jsxs)(t.p,{children:["!> ",(0,r.jsx)(t.strong,{children:"Warning"}),": This in-memory \u201cdev\u201d server is useful for practicing with OpenBao locally for the first time, but is insecure and ",(0,r.jsx)(t.strong,{children:"should never be used in production"}),". For developers who need to manage their own production OpenBao installations, this ",(0,r.jsx)(t.a,{href:"/tutorials/operations/production-hardening",children:"page"})," provides some guidance on how to make your setup more production-friendly."]}),"\n",(0,r.jsx)(t.p,{children:'Run the OpenBao server in a non-production "dev" mode:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:'$ bao server -dev -dev-root-token-id="dev-only-token"\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"-dev-root-token-id"}),' flag for dev servers tells the OpenBao server to allow full root access to anyone who presents a token with the specified value (in this case "dev-only-token").']}),"\n",(0,r.jsxs)(t.p,{children:["!> ",(0,r.jsx)(t.strong,{children:"Warning"}),": The ",(0,r.jsx)(t.a,{href:"/docs/concepts/tokens#root-tokens",children:"root token"})," is useful for development, but allows full access to all data and functionality of OpenBao, so it must be carefully guarded in production. Ideally, even an administrator of OpenBao would use their own token with limited privileges instead of the root token."]}),"\n",(0,r.jsxs)(t.p,{children:["OpenBao is now listening over HTTP on port ",(0,r.jsx)(t.strong,{children:"8200"}),". With all the setup out of the way, it's time to get coding!"]}),"\n",(0,r.jsx)(t.h2,{id:"step-2-install-a-client-library",children:"Step 2: install a client library"}),"\n",(0,r.jsx)(t.p,{children:"To read and write secrets in your application, you need to first configure a client to connect to OpenBao.\nLet's install the OpenBao client library for your language of choice."}),"\n",(0,r.jsx)(s.A,{children:(0,r.jsxs)(o.A,{value:"Go",group:"go",heading:"Go",group:"go",children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://pkg.go.dev/github.com/openbao/openbao/api",children:"Go"})," (official) client library:"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:"$ go get github.com/openbao/openbao/api\n"})}),(0,r.jsx)(t.p,{children:"Now, let's add the import statements for the client library to the top of the file."}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",metastring:'title="import statements for client library" showLineNumbers',children:'import openbao "github.com/openbao/openbao/api"\n'})})]})}),"\n",(0,r.jsx)(t.h2,{id:"step-3-authenticate-to-openbao",children:"Step 3: authenticate to OpenBao"}),"\n",(0,r.jsxs)(t.p,{children:["A variety of ",(0,r.jsx)(t.a,{href:"/docs/auth",children:"authentication methods"})," can be used to prove\nyour application's identity to the OpenBao server.  To keep things simple for\nour example, we'll just use the root token created in ",(0,r.jsx)(t.strong,{children:"Step 1"}),".  Paste the\nfollowing code to initialize a new OpenBao client that will use token-based\nauthentication for all its requests:"]}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(o.A,{value:"Go",heading:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'config := openbao.DefaultConfig()\n\nconfig.Address = "http://127.0.0.1:8200"\n\nclient, err := openbao.NewClient(config)\nif err != nil {\n    log.Fatalf("unable to initialize OpenBao client: %v", err)\n}\n\nclient.SetToken("dev-only-token")\n'})})}),(0,r.jsx)(o.A,{value:"Bash",group:"bash",heading:"Bash",group:"bash",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:'$ export VAULT_TOKEN="dev-only-token"\n'})})})]}),"\n",(0,r.jsx)(t.h2,{id:"step-4-store-a-secret",children:"Step 4: store a secret"}),"\n",(0,r.jsx)(t.p,{children:"Secrets are sensitive data like API keys and passwords that we shouldn\u2019t be storing in our code or configuration files. Instead, we want to store values like this in OpenBao."}),"\n",(0,r.jsx)(t.p,{children:"We'll use the OpenBao client we just initialized to write a secret to OpenBao, like so:"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(o.A,{value:"Go",heading:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'secretData := map[string]interface{}{\n    "password": "OpenBao123",\n}\n\n\n_, err = client.KVv2("secret").Put(context.Background(), "my-secret-password", secretData)\nif err != nil {\n    log.Fatalf("unable to write secret: %v", err)\n}\n\nfmt.Println("Secret written successfully.")\n'})})}),(0,r.jsx)(o.A,{value:"Bash",group:"bash",heading:"Bash",group:"bash",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: $VAULT_TOKEN" \\\n    --header "Content-Type: application/json" \\\n    --request POST \\\n    --data \'{"data": {"password": "OpenBao123"}}\' \\\n    http://127.0.0.1:8200/v1/secret/data/my-secret-password\n'})})})]}),"\n",(0,r.jsxs)(t.p,{children:["A common way of storing secrets is as key-value pairs using the ",(0,r.jsx)(t.a,{href:"/docs/secrets/kv/kv-v2",children:"KV secrets engine (v2)"}),". In the code we've just added, ",(0,r.jsx)(t.code,{children:"password"})," is the key in the key-value pair, and ",(0,r.jsx)(t.code,{children:"OpenBao123"})," is the value."]}),"\n",(0,r.jsx)(t.p,{children:"We also provided the path to our secret in OpenBao. We will reference this path in a moment when we learn how to retrieve our secret."}),"\n",(0,r.jsxs)(t.p,{children:["Run the code now, and you should see ",(0,r.jsx)(t.code,{children:"Secret written successfully"}),". If not, check that you've used the correct value for the root token and OpenBao server address."]}),"\n",(0,r.jsx)(t.h2,{id:"step-5-retrieve-a-secret",children:"Step 5: retrieve a secret"}),"\n",(0,r.jsx)(t.p,{children:"Now that we know how to write a secret, let's practice reading one."}),"\n",(0,r.jsx)(t.p,{children:"Underneath the line where you wrote a secret to OpenBao, let's add a few more lines, where we will be retrieving the secret and unpacking the value:"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(o.A,{value:"Go",heading:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'secret, err := client.KVv2("secret").Get(context.Background(), "my-secret-password")\nif err != nil {\n    log.Fatalf("unable to read secret: %v", err)\n}\n\nvalue, ok := secret.Data["password"].(string)\nif !ok {\nlog.Fatalf("value type assertion failed: %T %#v", secret.Data["password"], secret.Data["password"])\n}\n'})})}),(0,r.jsx)(o.A,{value:"Bash",group:"bash",heading:"Bash",group:"bash",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: $VAULT_TOKEN" \\\n    http://127.0.0.1:8200/v1/secret/data/my-secret-password > secrets.json\n'})})})]}),"\n",(0,r.jsx)(t.p,{children:"Last, confirm that the value we unpacked from the read response is correct:"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(o.A,{value:"Go",heading:"Go",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-go",children:'if value != "OpenBao123" {\n    log.Fatalf("unexpected password value %q retrieved from openbao", value)\n}\n\nfmt.Println("Access granted!")\n'})})}),(0,r.jsx)(o.A,{value:"Bash",group:"bash",heading:"Bash",group:"bash",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:"$ cat secrets.json | jq '.data.data'\n"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["If the secret was fetched successfully, you should see the ",(0,r.jsx)(t.code,{children:"Access granted!"})," message after you run the code. If not, check to see if you provided the correct path to your secret."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"That's it! You've just written and retrieved your first OpenBao secret!"})}),"\n",(0,r.jsx)(t.h1,{id:"additional-examples",children:"Additional examples"}),"\n",(0,r.jsxs)(t.p,{children:["To learn how to integrate applications with OpenBao without needing to always change your application code, see the ",(0,r.jsx)(t.a,{href:"/docs/agent-and-proxy/agent",children:"OpenBao Agent"})," documentation."]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},19365:(e,t,n)=>{n.d(t,{A:()=>o});n(96540);var r=n(34164);const a={tabItem:"tabItem_Ymn6"};var s=n(74848);function o(e){let{children:t,hidden:n,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,o),hidden:n,children:t})}},11470:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(96540),a=n(34164),s=n(23104),o=n(56347),i=n(205),l=n(57485),c=n(31682),d=n(89466);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=h(e),[o,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[c,u]=g({queryString:n,groupId:a}),[f,v]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,d.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),m=(()=>{const e=c??f;return p({value:e,tabValues:s})?e:null})();(0,i.A)((()=>{m&&l(m)}),[m]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),v(e)}),[u,v,s]),tabValues:s}}var v=n(92303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=n(74848);function x(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const t=e.currentTarget,n=l.indexOf(t),a=i[n].value;a!==r&&(c(t),o(a))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},t),children:i.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:u,onClick:d,...s,className:(0,a.A)("tabs__item",m.tabItem,s?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function j(e){let{lazy:t,children:n,selectedValue:a}=e;const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function w(e){const t=f(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",m.tabList),children:[(0,b.jsx)(x,{...e,...t}),(0,b.jsx)(j,{...e,...t})]})}function y(e){const t=(0,v.A)();return(0,b.jsx)(w,{...e,children:u(e.children)},String(t))}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var r=n(96540);const a={},s=r.createContext(a);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);