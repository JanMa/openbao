"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8394],{83387:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var t=s(74848),i=s(28453);const l={layout:"api",page_title:"Database - Secrets Engines - HTTP API",description:"Top page for database secrets engine information"},r="Database secrets engine (API)",a={id:"secret/databases/index",title:"Database secrets engine (API)",description:"Top page for database secrets engine information",source:"@site/content/api-docs/secret/databases/index.mdx",sourceDirName:"secret/databases",slug:"/secret/databases/",permalink:"/openbao/api-docs/secret/databases/",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/databases/index.mdx",tags:[],version:"current",frontMatter:{layout:"api",page_title:"Database - Secrets Engines - HTTP API",description:"Top page for database secrets engine information"},sidebar:"apiSidebar",previous:{title:"Cubbyhole secrets engine (API)",permalink:"/openbao/api-docs/secret/cubbyhole"},next:{title:"Cassandra database plugin HTTP API",permalink:"/openbao/api-docs/secret/databases/cassandra"}},d={},c=[{value:"Configure connection",id:"configure-connection",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Common fields",id:"common-fields",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample cURL request",id:"sample-curl-request",level:3},{value:"Sample CLI request",id:"sample-cli-request",level:3},{value:"Sample CLI request with ADO-style connection string",id:"sample-cli-request-with-ado-style-connection-string",level:3},{value:"Read connection",id:"read-connection",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"List connections",id:"list-connections",level:2},{value:"Sample request",id:"sample-request-1",level:3},{value:"Sample response",id:"sample-response-1",level:3},{value:"Delete connection",id:"delete-connection",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"Reset connection",id:"reset-connection",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Sample request",id:"sample-request-3",level:3},{value:"Rotate root credentials",id:"rotate-root-credentials",level:2},{value:"Parameters",id:"parameters-4",level:3},{value:"Sample request",id:"sample-request-4",level:3},{value:"Create role",id:"create-role",level:2},{value:"Parameters",id:"parameters-5",level:3},{value:"Sample payload",id:"sample-payload-1",level:3},{value:"Sample request",id:"sample-request-5",level:3},{value:"Read role",id:"read-role",level:2},{value:"Parameters",id:"parameters-6",level:3},{value:"Sample request",id:"sample-request-6",level:3},{value:"Sample response",id:"sample-response-2",level:3},{value:"List roles",id:"list-roles",level:2},{value:"Sample request",id:"sample-request-7",level:3},{value:"Sample response",id:"sample-response-3",level:3},{value:"Delete role",id:"delete-role",level:2},{value:"Parameters",id:"parameters-7",level:3},{value:"Sample request",id:"sample-request-8",level:3},{value:"Generate credentials",id:"generate-credentials",level:2},{value:"Parameters",id:"parameters-8",level:3},{value:"Sample request",id:"sample-request-9",level:3},{value:"Sample response",id:"sample-response-4",level:3},{value:"Create static role",id:"create-static-role",level:2},{value:"Parameters",id:"parameters-9",level:3},{value:"Sample payload",id:"sample-payload-2",level:3},{value:"Sample request",id:"sample-request-10",level:3},{value:"Read static role",id:"read-static-role",level:2},{value:"Parameters",id:"parameters-10",level:3},{value:"Sample request",id:"sample-request-11",level:3},{value:"Sample response",id:"sample-response-5",level:3},{value:"List static roles",id:"list-static-roles",level:2},{value:"Sample request",id:"sample-request-12",level:3},{value:"Sample response",id:"sample-response-6",level:3},{value:"Delete static role",id:"delete-static-role",level:2},{value:"Parameters",id:"parameters-11",level:3},{value:"Sample request",id:"sample-request-13",level:3},{value:"Get static credentials",id:"get-static-credentials",level:2},{value:"Parameters",id:"parameters-12",level:3},{value:"Sample request",id:"sample-request-14",level:3},{value:"Sample response",id:"sample-response-7",level:3},{value:"Rotate static role credentials",id:"rotate-static-role-credentials",level:2},{value:"Parameters",id:"parameters-13",level:3},{value:"Sample request",id:"sample-request-15",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"database-secrets-engine-api",children:"Database secrets engine (API)"}),"\n",(0,t.jsxs)(n.p,{children:["This is the API documentation for the OpenBao Database secrets engine. For\ngeneral information about the usage and operation of the database secrets engine,\nplease see the\n",(0,t.jsx)(n.a,{href:"/docs/secrets/databases",children:"OpenBao database secrets engine documentation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["This documentation assumes the database secrets engine is enabled at the\n",(0,t.jsx)(n.code,{children:"/database"})," path in OpenBao. Since it is possible to enable secrets engines at any\nlocation, please update your API calls accordingly."]}),"\n",(0,t.jsx)(n.h2,{id:"configure-connection",children:"Configure connection"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint configures the connection string used to communicate with the\ndesired database. In addition to the parameters listed here, each Database\nplugin has additional, database plugin specific, parameters for this endpoint.\nPlease read the HTTP API for the plugin you'd wish to configure to see the full\nlist of additional parameters."}),"\n",(0,t.jsxs)(n.p,{children:["~> This endpoint distinguishes between ",(0,t.jsx)(n.code,{children:"create"})," and ",(0,t.jsx)(n.code,{children:"update"})," ACL capabilities."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/config/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name for this database\nconnection. This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"plugin_name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the plugin to use\nfor this connection."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"plugin_version"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - Specifies the semantic version of the plugin\nto use for this connection."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"verify_connection"})," ",(0,t.jsx)(n.code,{children:"(bool: true)"})," \u2013 Specifies if the connection is verified\nduring initial configuration. Defaults to true."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"allowed_roles"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," - List of the roles allowed to use this connection.\nDefaults to empty (no roles), if contains a ",(0,t.jsx)(n.code,{children:"*"})," any role can use this connection."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"root_rotation_statements"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," - Specifies the database statements to be\nexecuted to rotate the root user's credentials. See the plugin's API page for more\ninformation on support and formatting for this parameter."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"password_policy"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - The name of the\n",(0,t.jsx)(n.a,{href:"/docs/concepts/password-policies",children:"password policy"})," to use when generating passwords\nfor this database. If not specified, this will use a default policy defined as:\n20 characters with at least 1 uppercase, 1 lowercase, 1 number, and 1 dash character."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["~> We highly recommended that you use an OpenBao-specific user rather than the admin user\nin your database when configuring the plugin. This user will be used to\ncreate/update/delete users within the database so it will need to have the appropriate\npermissions to do so. If the plugin supports\n",(0,t.jsx)(n.a,{href:"#rotate-root-credentials",children:"rotating the root credentials"}),", we highly recommended\nyou perform that action after configuring the plugin. This will change the password\nof the user configured in this step. The new password will ",(0,t.jsx)(n.strong,{children:"not"})," be viewable by users."]}),"\n",(0,t.jsx)(n.h3,{id:"common-fields",children:"Common fields"}),"\n",(0,t.jsx)(n.p,{children:"There are several common fields that you will see across many of the database plugins.\nPlease reference the individual plugin documentation for details on whether these fields\nare supported and any additional details about them."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"connection_url"})," ",(0,t.jsx)(n.code,{children:"(string)"})," - Specifies the connection string used to connect to the\ndatabase. Some plugins use ",(0,t.jsx)(n.code,{children:"url"})," rather than ",(0,t.jsx)(n.code,{children:"connection_url"}),". This allows for simple\ntemplating of the username and password of the root user. Typically, this is done by\nincluding a ",(0,t.jsx)(n.code,{children:"{{username}}"}),", ",(0,t.jsx)(n.code,{children:"{{name}}"}),", and/or ",(0,t.jsx)(n.code,{children:"{{password}}"})," field within the string.\nThese fields are typically be replaced with the values in the ",(0,t.jsx)(n.code,{children:"username"})," and\n",(0,t.jsx)(n.code,{children:"password"})," fields."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"username"})," ",(0,t.jsx)(n.code,{children:"(string)"}),' - Specifies the name of the user to use as the "root" user when\nconnecting to the database. This "root" user is used to create/update/delete users\nmanaged by these plugins, so you will need to ensure that this user has permissions to\nmanipulate users appropriate to the database. This is typically used in the\n',(0,t.jsx)(n.code,{children:"connection_url"})," field via the templating directive ",(0,t.jsx)(n.code,{children:"{{username}}"})," or ",(0,t.jsx)(n.code,{children:"{{name}}"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"password"})," ",(0,t.jsx)(n.code,{children:"(string)"})," - Specifies the password to use when connecting with the\n",(0,t.jsx)(n.code,{children:"username"}),". This value will not be returned by OpenBao when performing a read upon the\nconfiguration. This is typically used in the ",(0,t.jsx)(n.code,{children:"connection_url"})," field via the templating\ndirective ",(0,t.jsx)(n.code,{children:"{{password}}"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"disable_escaping"})," ",(0,t.jsx)(n.code,{children:"(boolean: false)"})," - Determines whether special characters in the\nusername and password fields will be escaped. Useful for alternate connection string\nformats like ADO. More information regarding this parameter can be found on the\n",(0,t.jsx)(n.a,{href:"/docs/secrets/databases#disable-character-escaping",children:"databases secrets engine docs."}),"\nDefaults to ",(0,t.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "plugin_name": "mysql-database-plugin",\n  "allowed_roles": "readonly",\n  "connection_url": "{{username}}:{{password}}@tcp(127.0.0.1:3306)/",\n  "username": "openbaouser",\n  "password": "secretpassword"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-curl-request",children:"Sample cURL request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/database/config/mysql\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-cli-request",children:"Sample CLI request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ openbao write database/config/mysql \\\n    plugin_name="mysql-database-plugin" \\\n    allowed_roles="readonly" \\\n    connection_url="{{username}}:{{password}}@tcp(127.0.0.1:3306)/" \\\n    username="openbaouser" \\\n    password="secretpassword"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-cli-request-with-ado-style-connection-string",children:"Sample CLI request with ADO-style connection string"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ openbao write database/config/mysql \\\n    plugin_name="mysql-database-plugin" \\\n    connection_url=\'server=localhost;port=3306;user id={{username}};password={{password}};database=mysql;\' \\\n    username="openbaouser" \\\n    password=\'your#StrongPassword%\' \\\n    disable_escaping="true"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"read-connection",children:"Read connection"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint returns the configuration settings for a connection."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"GET"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/config/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the connection to read.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/database/config/mysql\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "allowed_roles": ["readonly"],\n    "connection_details": {\n      "connection_url": "{{username}}:{{password}}@tcp(127.0.0.1:3306)/",\n      "username": "openbaouser"\n    },\n    "password_policy": "",\n    "plugin_name": "mysql-database-plugin",\n    "plugin_version": "",\n    "root_credentials_rotate_statements": []\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"list-connections",children:"List connections"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint returns a list of available connections. Only the connection names\nare returned, not any values."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"LIST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/config"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/database/config\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": ["db-one", "db-two"]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"delete-connection",children:"Delete connection"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint deletes a connection."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"DELETE"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/config/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the connection to delete.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/database/config/mysql\n'})}),"\n",(0,t.jsx)(n.h2,{id:"reset-connection",children:"Reset connection"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint closes a connection and it's underlying plugin and restarts it\nwith the configuration stored in the barrier."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/reset/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the connection to reset.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/database/reset/mysql\n'})}),"\n",(0,t.jsx)(n.h2,{id:"rotate-root-credentials",children:"Rotate root credentials"}),"\n",(0,t.jsx)(n.p,{children:'This endpoint is used to rotate the "root" user credentials stored for\nthe database connection. This user must have permissions to update its own\npassword.'}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/rotate-root/:name"})})]})})]}),"\n",(0,t.jsxs)(n.p,{children:["!> ",(0,t.jsx)(n.strong,{children:"Use caution:"})," the root user's password will not be accessible once rotated so it is highly\nrecommended that you create a user for OpenBao to utilize rather than using the actual root user."]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-4",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the connection to rotate.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-4",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/database/rotate-root/mysql\n'})}),"\n",(0,t.jsx)(n.h2,{id:"create-role",children:"Create role"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint creates or updates a role definition."}),"\n",(0,t.jsxs)(n.p,{children:["~> This endpoint distinguishes between ",(0,t.jsx)(n.code,{children:"create"})," and ",(0,t.jsx)(n.code,{children:"update"})," ACL capabilities."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-5",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the role to create. This\nis specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"db_name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," - The name of the database connection to use\nfor this role."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"default_ttl"})," ",(0,t.jsx)(n.code,{children:"(string/int: 0)"})," - Specifies the TTL for the leases\nassociated with this role. Accepts time suffixed strings (",(0,t.jsx)(n.code,{children:"1h"}),") or an integer\nnumber of seconds. Defaults to system/engine default TTL time."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"max_ttl"})," ",(0,t.jsx)(n.code,{children:"(string/int: 0)"})," - Specifies the maximum TTL for the leases\nassociated with this role. Accepts time suffixed strings (",(0,t.jsx)(n.code,{children:"1h"}),") or an integer\nnumber of seconds. Defaults to ",(0,t.jsx)(n.code,{children:"sys/mounts"}),"'s default TTL time; this value is allowed to be less than the mount max TTL (or, if not set, the system max TTL), but it is not allowed to be longer. See also ",(0,t.jsx)(n.a,{href:"/docs/concepts/tokens#the-general-case",children:"The TTL General Case"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"creation_statements"})," ",(0,t.jsx)(n.code,{children:"(list: <required>)"})," \u2013 Specifies the database\nstatements executed to create and configure a user. See the plugin's API page\nfor more information on support and formatting for this parameter."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"revocation_statements"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," \u2013 Specifies the database statements to\nbe executed to revoke a user. See the plugin's API page for more information\non support and formatting for this parameter."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"rollback_statements"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," \u2013 Specifies the database statements to be\nexecuted to rollback a create operation in the event of an error. Not every\nplugin type will support this functionality. See the plugin's API page for\nmore information on support and formatting for this parameter."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"renew_statements"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," \u2013 Specifies the database statements to be\nexecuted to renew a user. Not every plugin type will support this\nfunctionality. See the plugin's API page for more information on support and\nformatting for this parameter."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"credential_type"})," ",(0,t.jsx)(n.code,{children:'(string: "password")'})," \u2013 Specifies the type of credential that\nwill be generated for the role. Options include: ",(0,t.jsx)(n.code,{children:"password"}),", ",(0,t.jsx)(n.code,{children:"rsa_private_key"}),", ",(0,t.jsx)(n.code,{children:"client_certificate"}),".\nSee the plugin's API page for credential types supported by individual databases."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"credential_config"})," ",(0,t.jsx)(n.code,{children:"(map<string|string>: <optional>)"})," \u2013 Specifies the configuration\nfor the given ",(0,t.jsx)(n.code,{children:"credential_type"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The following options are available for each ",(0,t.jsx)(n.code,{children:"credential_type"})," value:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"password"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"password_policy"})," ",(0,t.jsx)(n.code,{children:"(string: <optional>)"})," - The ",(0,t.jsx)(n.a,{href:"/docs/concepts/password-policies",children:"policy"}),"\nused for password generation. If not provided, defaults to the password policy of the\ndatabase ",(0,t.jsx)(n.a,{href:"/api-docs/secret/databases#password_policy",children:"configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"rsa_private_key"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 2048)"})," - The bit size of the RSA key to generate. Options include:\n",(0,t.jsx)(n.code,{children:"2048"}),", ",(0,t.jsx)(n.code,{children:"3072"}),", ",(0,t.jsx)(n.code,{children:"4096"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"format"})," ",(0,t.jsx)(n.code,{children:'(string: "pkcs8")'})," - The output format of the generated private key\ncredential. The private key will be returned from the API in PEM encoding. Options\ninclude: ",(0,t.jsx)(n.code,{children:"pkcs8"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"client_certificate"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"common_name_template"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - A ",(0,t.jsx)(n.a,{href:"/docs/concepts/username-templating",children:"username template"}),"\nto be used for the client certificate common name."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ca_cert"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - The PEM-encoded CA certificate."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ca_private_key"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - The PEM-encoded private key for the given ",(0,t.jsx)(n.code,{children:"ca_cert"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_type"})," ",(0,t.jsx)(n.code,{children:'(string: <required>")'})," - Specifies the desired key type. Options include:\n",(0,t.jsx)(n.code,{children:"rsa"}),", ",(0,t.jsx)(n.code,{children:"ed25519"}),", ",(0,t.jsx)(n.code,{children:"ec"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 2048)"})," - Number of bits to use for the generated keys. Options include:\n",(0,t.jsx)(n.code,{children:"2048"})," (default), ",(0,t.jsx)(n.code,{children:"3072"}),", ",(0,t.jsx)(n.code,{children:"4096"}),"; with ",(0,t.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: ",(0,t.jsx)(n.code,{children:"224"}),", ",(0,t.jsx)(n.code,{children:"256"})," (default),\n",(0,t.jsx)(n.code,{children:"384"}),", ",(0,t.jsx)(n.code,{children:"521"}),"; ignored with ",(0,t.jsx)(n.code,{children:"key_type=ed25519"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"signature_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 256)"})," - The number of bits to use in the signature algorithm. Options include:\n",(0,t.jsx)(n.code,{children:"256"})," (default), ",(0,t.jsx)(n.code,{children:"384"}),", ",(0,t.jsx)(n.code,{children:"512"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-payload-1",children:"Sample payload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "db_name": "mysql",\n  "creation_statements": [\n    "CREATE USER \'{{name}}\'@\'%\' IDENTIFIED BY \'{{password}}\'",\n    "GRANT SELECT ON *.* TO \'{{name}}\'@\'%\'"\n  ],\n  "default_ttl": "1h",\n  "max_ttl": "24h"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-5",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/database/roles/my-role\n'})}),"\n",(0,t.jsx)(n.h2,{id:"read-role",children:"Read role"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint queries the role definition."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"GET"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-6",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the role to read. This\nis specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-6",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/database/roles/my-role\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-2",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "creation_statements": [\n      "CREATE ROLE \\"{{name}}\\" WITH LOGIN PASSWORD \'{{password}}\' VALID UNTIL \'{{expiration}}\';",\n      "GRANT SELECT ON ALL TABLES IN SCHEMA public TO \\"{{name}}\\";"\n    ],\n    "credential_type": "password",\n    "db_name": "mysql",\n    "default_ttl": 3600,\n    "max_ttl": 86400,\n    "renew_statements": [],\n    "revocation_statements": [],\n    "rollback_statements": []\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"list-roles",children:"List roles"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint returns a list of available roles. Only the role names are\nreturned, not any values."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"LIST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/roles"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-7",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/database/roles\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-3",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "keys": ["dev", "prod"]\n  },\n  "lease_duration": 2764800,\n  "lease_id": "",\n  "renewable": false\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"delete-role",children:"Delete role"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint deletes the role definition."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"DELETE"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-7",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the role to delete. This\nis specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-8",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/database/roles/my-role\n'})}),"\n",(0,t.jsx)(n.h2,{id:"generate-credentials",children:"Generate credentials"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint generates a new set of dynamic credentials based on the named\nrole."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"GET"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/creds/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-8",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the role to create\ncredentials against. This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-9",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/database/creds/my-role\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-4",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "username": "root-1430158508-126",\n    "password": "132ae3ef-5a64-7499-351e-bfe59f3a2a21"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"create-static-role",children:"Create static role"}),"\n",(0,t.jsxs)(n.p,{children:["This endpoint creates or updates a static role definition. Static Roles are a\n1-to-1 mapping of an OpenBao Role to a user in a database which are automatically\nrotated based on the configured ",(0,t.jsx)(n.code,{children:"rotation_period"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["~> This endpoint distinguishes between ",(0,t.jsx)(n.code,{children:"create"})," and ",(0,t.jsx)(n.code,{children:"update"})," ACL capabilities."]}),"\n",(0,t.jsx)(n.p,{children:"~> OpenBao will rotate the password when creating a static role. OpenBao must do\nthis in order to know the password."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/static-roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-9",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the role to create. This\nis specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"username"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the database username that this\nOpenBao role corresponds to."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"rotation_period"})," ",(0,t.jsx)(n.code,{children:"(string/int: <required>)"})," \u2013 Specifies the amount of time\nOpenBao should wait before rotating the password. The minimum is 5 seconds."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"db_name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," - The name of the database connection to use\nfor this role."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"rotation_statements"})," ",(0,t.jsx)(n.code,{children:"(list: [])"})," \u2013 Specifies the database statements to be\nexecuted to rotate the password for the configured database user. Not every\nplugin type will support this functionality. See the plugin's API page for\nmore information on support and formatting for this parameter."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"credential_type"})," ",(0,t.jsx)(n.code,{children:'(string: "password")'})," \u2013 Specifies the type of credential that\nwill be generated for the role. Options include: ",(0,t.jsx)(n.code,{children:"password"}),", ",(0,t.jsx)(n.code,{children:"rsa_private_key"}),", ",(0,t.jsx)(n.code,{children:"client_certificate"}),".\nSee the plugin's API page for credential types supported by individual databases."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"credential_config"})," ",(0,t.jsx)(n.code,{children:"(map<string|string>: <optional>)"})," \u2013 Specifies the configuration\nfor the given ",(0,t.jsx)(n.code,{children:"credential_type"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["The following options are available for each ",(0,t.jsx)(n.code,{children:"credential_type"})," value:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"password"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"password_policy"})," ",(0,t.jsx)(n.code,{children:"(string: <optional>)"})," - The ",(0,t.jsx)(n.a,{href:"/docs/concepts/password-policies",children:"policy"}),"\nused for password generation. If not provided, defaults to the password policy of the\ndatabase ",(0,t.jsx)(n.a,{href:"/api-docs/secret/databases#password_policy",children:"configuration"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"rsa_private_key"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 2048)"})," - The bit size of the RSA key to generate. Options include:\n",(0,t.jsx)(n.code,{children:"2048"}),", ",(0,t.jsx)(n.code,{children:"3072"}),", ",(0,t.jsx)(n.code,{children:"4096"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"format"})," ",(0,t.jsx)(n.code,{children:'(string: "pkcs8")'})," - The output format of the generated private key\ncredential. The private key will be returned from the API in PEM encoding. Options\ninclude: ",(0,t.jsx)(n.code,{children:"pkcs8"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"client_certificate"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"common_name_template"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - A ",(0,t.jsx)(n.a,{href:"/docs/concepts/username-templating",children:"username template"}),"\nto be used for the client certificate common name."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ca_cert"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - The PEM-encoded CA certificate."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ca_private_key"})," ",(0,t.jsx)(n.code,{children:'(string: "")'})," - The PEM-encoded private key for the given ",(0,t.jsx)(n.code,{children:"ca_cert"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_type"})," ",(0,t.jsx)(n.code,{children:'(string: <required>")'})," - Specifies the desired key type. Options include:\n",(0,t.jsx)(n.code,{children:"rsa"}),", ",(0,t.jsx)(n.code,{children:"ed25519"}),", ",(0,t.jsx)(n.code,{children:"ec"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 2048)"})," - Number of bits to use for the generated keys. Options include:\n",(0,t.jsx)(n.code,{children:"2048"})," (default), ",(0,t.jsx)(n.code,{children:"3072"}),", ",(0,t.jsx)(n.code,{children:"4096"}),"; with ",(0,t.jsx)(n.code,{children:"key_type=ec"}),", allowed values are: ",(0,t.jsx)(n.code,{children:"224"}),", ",(0,t.jsx)(n.code,{children:"256"})," (default),\n",(0,t.jsx)(n.code,{children:"384"}),", ",(0,t.jsx)(n.code,{children:"521"}),"; ignored with ",(0,t.jsx)(n.code,{children:"key_type=ed25519"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"signature_bits"})," ",(0,t.jsx)(n.code,{children:"(int: 256)"})," - The number of bits to use in the signature algorithm. Options include:\n",(0,t.jsx)(n.code,{children:"256"})," (default), ",(0,t.jsx)(n.code,{children:"384"}),", ",(0,t.jsx)(n.code,{children:"512"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-payload-2",children:"Sample payload"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "db_name": "mysql",\n  "username": "static-database-user",\n  "rotation_statements": [\n    "ALTER USER \\"{{name}}\\" IDENTIFIED BY \'{{password}}\';"\n  ],\n  "rotation_period": "1h"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-10",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/database/static-roles/my-static-role\n'})}),"\n",(0,t.jsx)(n.h2,{id:"read-static-role",children:"Read static role"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint queries the static role definition."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"GET"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/static-roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-10",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the static role to read.\nThis is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-11",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/database/static-roles/my-static-role\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-5",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "credential_type": "password",\n    "db_name": "mysql",\n    "username": "static-user",\n    "rotation_statements": [\n      "ALTER USER \\"{{name}}\\" IDENTIFIED BY \'{{password}}\';"\n    ],\n    "rotation_period": "1h"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"list-static-roles",children:"List static roles"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint returns a list of available static roles. Only the role names are\nreturned, not any values."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"LIST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/static-roles"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-12",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/database/static-roles\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-6",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "auth": null,\n  "data": {\n    "keys": ["dev-static", "prod-static"]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"delete-static-role",children:"Delete static role"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint deletes the static role definition. The user, having been defined externally,\nmust be cleaned up manually."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"DELETE"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/static-roles/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-11",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the static role to\ndelete. This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-13",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/database/static-roles/my-role\n'})}),"\n",(0,t.jsx)(n.h2,{id:"get-static-credentials",children:"Get static credentials"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint returns the current credentials based on the named static role."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"GET"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/static-creds/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-12",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the static role to get\ncredentials for. This is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-14",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/database/static-creds/my-static-role\n'})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-7",children:"Sample response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "username": "static-user",\n    "password": "132ae3ef-5a64-7499-351e-bfe59f3a2a21",\n    "last_openbao_rotation": "2019-05-06T15:26:42.525302-05:00",\n    "rotation_period": 30,\n    "ttl": 28\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"rotate-static-role-credentials",children:"Rotate static role credentials"}),"\n",(0,t.jsx)(n.p,{children:"This endpoint is used to rotate the Static Role credentials stored for a given\nrole name. While Static Roles are rotated automatically by OpenBao at configured\nrotation periods, users can use this endpoint to manually trigger a rotation to\nchange the stored password and reset the TTL of the Static Role's password."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"POST"})}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.code,{children:"/database/rotate-role/:name"})})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"parameters-13",children:"Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"})," ",(0,t.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the Static Role to\ntrigger the password rotation for. The name is specified as part of the URL."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-request-15",children:"Sample request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/database/rotate-role/my-static-role\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(96540);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);