"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6517],{87148:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var o=n(74848),i=n(28453);const a={description:"Learn about the client token authentication in OpenBao."},s="Token authentication",r={id:"internals/token",title:"Token authentication",description:"Learn about the client token authentication in OpenBao.",source:"@site/content/docs/internals/token.mdx",sourceDirName:"internals",slug:"/internals/token",permalink:"/docs/internals/token",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/internals/token.mdx",tags:[],version:"current",frontMatter:{description:"Learn about the client token authentication in OpenBao."},sidebar:"docs",previous:{title:"All metrics list",permalink:"/docs/internals/telemetry/metrics/all"},next:{title:"Key rotation",permalink:"/docs/internals/rotation"}},l={},c=[];function h(e){const t={code:"code",em:"em",h1:"h1",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"token-authentication",children:"Token authentication"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"token"})," auth method is built-in and is at the core of\nclient authentication. Other auth methods may be used to\nauthenticate a client, but they eventually result in the generation of a client\ntoken managed by the ",(0,o.jsx)(t.code,{children:"token"})," backend."]}),"\n",(0,o.jsx)(t.p,{children:"Every token has a number of properties:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"ID - The primary ID of a token is a randomly generated value"}),"\n",(0,o.jsx)(t.li,{children:"Display Name - Optionally, a human readable display name"}),"\n",(0,o.jsx)(t.li,{children:"Metadata - Metadata used for audit logging"}),"\n",(0,o.jsx)(t.li,{children:"Number of Uses - Optionally, a restricted use count"}),"\n",(0,o.jsx)(t.li,{children:"Parent ID - Optionally, a parent token which created this child token"}),"\n",(0,o.jsx)(t.li,{children:"Policies - An associated list of ACL policies"}),"\n",(0,o.jsxs)(t.li,{children:["Source Path - The path at which the token was generated (e.g. ",(0,o.jsx)(t.code,{children:"auth/github/login"}),")"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"The properties of a token are immutable once created. The exception to this\nis the number of uses, which is decremented on each request. Each of these\nproperties enable OpenBao to do a number of interesting things."}),"\n",(0,o.jsxs)(t.p,{children:["Each token maintains the source path, or the login path, that was used\nto create the token. This is used to allow source based revocation. For example,\nif we believe our GitHub organization was compromised, we may want to revoke\nall tokens generated via ",(0,o.jsx)(t.code,{children:"auth/github/login"}),". This would be done by using the\n",(0,o.jsx)(t.code,{children:"sys/revoke-prefix/"})," API with the ",(0,o.jsx)(t.code,{children:"auth/github/"}),' prefix. Revoking the\nprefix will revoke all client tokens generated at that path, as well as all\ndynamic secrets generated by those tokens. This provides a powerful "break glass"\nprocedure during a potential compromise.']}),"\n",(0,o.jsxs)(t.p,{children:["If a token is created by another auth method, they do not have\na parent token. However, any tokens created by the ",(0,o.jsx)(t.code,{children:"auth/token/create"})," API\nhave a parent token, namely the token used to make that request. By maintaining\nthis parent-child relationship, OpenBao models token trees. Child tokens can\nbe created with a subset of the parent policies, allowing for dropping of\nprivileges. When a token is revoked, the entire sub-tree of tokens is revoked\nwith it. This allows clients to safely generate child tokens and then revoke\nthem all along with the root."]}),"\n",(0,o.jsxs)(t.p,{children:["Child tokens are very useful, especially when combined with limited use tokens.\nWhen a token is created, its use count can be optionally specified. Providing\na use count of one makes a ",(0,o.jsx)(t.em,{children:"one time token"}),". This means the token can be used\nfor a single request before being automatically revoked. This can be generalized\nto any number of uses. Limited use tokens cannot be used to create sub-tokens,\nbut they can be a powerful way to allow extremely limited access to OpenBao."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var o=n(96540);const i={},a=o.createContext(i);function s(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);