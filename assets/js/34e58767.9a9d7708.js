"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1270],{12068:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>o,toc:()=>l});var r=s(74848),n=s(28453);const c={description:"The Vault Secrets Operator allows Pods to consume HCP Vault Secrets natively from Kubernetes Secrets."},a="HCP Vault Secrets source",o={id:"platform/k8s/vso/sources/hvs",title:"HCP Vault Secrets source",description:"The Vault Secrets Operator allows Pods to consume HCP Vault Secrets natively from Kubernetes Secrets.",source:"@site/content/docs/platform/k8s/vso/sources/hvs.mdx",sourceDirName:"platform/k8s/vso/sources",slug:"/platform/k8s/vso/sources/hvs",permalink:"/openbao/docs/platform/k8s/vso/sources/hvs",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/platform/k8s/vso/sources/hvs.mdx",tags:[],version:"current",frontMatter:{description:"The Vault Secrets Operator allows Pods to consume HCP Vault Secrets natively from Kubernetes Secrets."},sidebar:"docs",previous:{title:"Vault Secrets Operator",permalink:"/openbao/docs/platform/k8s/vso/sources/vault"},next:{title:"Vault Secrets Operator examples",permalink:"/openbao/docs/platform/k8s/vso/examples"}},i={},l=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Supported HCP authentication methods",id:"supported-hcp-authentication-methods",level:3},{value:"HCP Vault Secrets sync example",id:"hcp-vault-secrets-sync-example",level:3}];function p(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"hcp-vault-secrets-source",children:"HCP Vault Secrets source"}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(t.p,{children:["The Vault secrets operator (VSO) syncs your ",(0,r.jsx)(t.a,{href:"/hcp/docs/vault-secrets",children:"HCP Vault Secrets app"})," (HVSA) to\na Kubernetes Secret. Vault syncs each ",(0,r.jsx)(t.code,{children:"HCPVaultSecretsApp"})," custom resource periodically to ensure that\nchanges to the secret source are properly reflected in the Kubernetes secret."]}),"\n",(0,r.jsx)(t.h2,{id:"features",children:"Features"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Periodic synchronization of HCP Vault Secrets app to a ",(0,r.jsx)(t.em,{children:"destination"})," Kubernetes Secret."]}),"\n",(0,r.jsx)(t.li,{children:"Automatic drift detection and remediation when the destination Kubernetes Secret\nis modified or deleted."}),"\n",(0,r.jsx)(t.li,{children:"Supports all VSO features, including rollout-restarts on secret rotation or\nduring drift remediation."}),"\n",(0,r.jsxs)(t.li,{children:["Supports authentication to HCP using ",(0,r.jsx)(t.a,{href:"/hcp/docs/hcp/admin/iam/service-principals",children:"HCP service principals"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"supported-hcp-authentication-methods",children:"Supported HCP authentication methods"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Backend"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"/hcp/docs/hcp/admin/iam/service-principals",children:"HCP Service Principals"})}),(0,r.jsx)(t.td,{children:"Relies on static credentials for authenticating to HCP"})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"hcp-vault-secrets-sync-example",children:"HCP Vault Secrets sync example"}),"\n",(0,r.jsxs)(t.p,{children:["The following Kubernetes configuration can be used to sync the HCP Vault Secrets app, ",(0,r.jsx)(t.code,{children:"vso-example"}),",\nto the Kubernetes Secret, ",(0,r.jsx)(t.code,{children:"vso-app-secret"}),", in the ",(0,r.jsx)(t.code,{children:"vso-example-ns"})," Kubernetes Namespace. It assumes that\nyou have already setup ",(0,r.jsx)(t.a,{href:"/docs/platform/k8s/vso/api-reference#hcpauthserviceprincipal",children:"service principal Kubernetes secret"}),",\nand have created the HCP Vault Secrets app."]}),"\n",(0,r.jsxs)(t.p,{children:["Use the following Kubernetes configuration to sync your HCP Vault Secrets app, ",(0,r.jsx)(t.code,{children:"vso-example"}),",\nto the Kubernetes secret, ",(0,r.jsx)(t.code,{children:"vso-app-secret"}),", in the ",(0,r.jsx)(t.code,{children:"vso-example-ns"})," Kubernetes namespace.\nThe example configuration assumes you already a HCP Vault Secrets app created and have your\n",(0,r.jsx)(t.a,{href:"/docs/platform/k8s/vso/api-reference#hcpauthserviceprincipal",children:"service principal Kubernetes secret"}),"\nconfigured."]}),"\n",(0,r.jsxs)(t.p,{children:["Refer to the ",(0,r.jsx)(t.a,{href:"/docs/platform/k8s/vso/installation",children:"Kubernetes VSO installation guide"}),"\nbefore applying any of the example configurations below."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"---\napiVersion: secrets.hashicorp.com/v1beta1\nkind: HCPAuth\nmetadata:\n  name: hcp-auth\n  namespace: vso-example-ns\nspec:\n  organizationID: xxxxxxxx-76e9-4e17-b5e9-xxxxxxxx4c33\n  projectID: xxxxxxxx-bd16-443f-a266-xxxxxxxxcb52\n  servicePrincipal:\n    secretRef: vso-app-sp\n---\napiVersion: secrets.hashicorp.com/v1beta1\nkind: HCPVaultSecretsApp\nmetadata:\n  name: vso-app\n  namespace: vso-example-ns\nspec:\n  appName: vso-app\n  hcpAuthRef: hcp-auth\n  destination:\n    create: true\n    name: vso-app-secret\n"})}),"\n",(0,r.jsxs)(t.p,{children:["For more details on any of the custom resources mentioned here, please see the\n",(0,r.jsx)(t.a,{href:"/docs/platform/k8s/vso/api-reference",children:"api-reference"}),"."]})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var r=s(96540);const n={},c=r.createContext(n);function a(e){const t=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(c.Provider,{value:t},e.children)}}}]);