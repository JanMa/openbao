"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9209],{47746:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>r});var i=s(74848),n=s(28453);const a={description:"The `/sys/capabilities-self` endpoint is used to fetch the capabilities of\nclient token on the given paths."},l="/sys/capabilities-self",c={id:"system/capabilities-self",title:"/sys/capabilities-self",description:"The `/sys/capabilities-self` endpoint is used to fetch the capabilities of\nclient token on the given paths.",source:"@site/content/api-docs/system/capabilities-self.mdx",sourceDirName:"system",slug:"/system/capabilities-self",permalink:"/openbao/api-docs/system/capabilities-self",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/capabilities-self.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/capabilities-self` endpoint is used to fetch the capabilities of\nclient token on the given paths."},sidebar:"api",previous:{title:"/sys/capabilities-accessor",permalink:"/openbao/api-docs/system/capabilities-accessor"},next:{title:"/sys/config/auditing",permalink:"/openbao/api-docs/system/config-auditing"}},o={},r=[{value:"Query self capabilities",id:"query-self-capabilities",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"syscapabilities-self",children:(0,i.jsx)(t.code,{children:"/sys/capabilities-self"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"/sys/capabilities-self"})," endpoint is used to fetch the capabilities of the\ntoken used to make the API call, on the given paths. The capabilities returned\nwill be derived from the policies that are on the token, and from the policies\nto which the token is entitled to through the entity and entity's group\nmemberships."]}),"\n",(0,i.jsx)(t.h2,{id:"query-self-capabilities",children:"Query self capabilities"}),"\n",(0,i.jsxs)(t.p,{children:["This endpoint returns the capabilities of client token on the given paths. The\nclient token is the OpenBao token with which this API call is made. Multiple\npaths are taken in at once and the capabilities of the token for each path is\nreturned. For backwards compatibility, if a single path is supplied, a\n",(0,i.jsx)(t.code,{children:"capabilities"})," field will also be returned."]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"POST"})}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"/sys/capabilities-self"})})]})})]}),"\n",(0,i.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"paths"})," ",(0,i.jsx)(t.code,{children:"(list: <required>)"})," \u2013\xa0Paths on which capabilities are being queried."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "paths": ["secret/foo"]\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/capabilities-self\n'})}),"\n",(0,i.jsx)(t.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "capabilities": ["delete", "list", "read", "update"],\n  "secret/foo": ["delete", "list", "read", "update"]\n}\n'})})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>c});var i=s(96540);const n={},a=i.createContext(n);function l(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);