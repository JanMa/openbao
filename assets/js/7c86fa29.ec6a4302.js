"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4147],{66049:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>o});var t=n(74848),l=n(28453);const r={description:"The `/sys/unseal` endpoint is used to unseal the OpenBao."},a="/sys/unseal",i={id:"system/unseal",title:"/sys/unseal",description:"The `/sys/unseal` endpoint is used to unseal the OpenBao.",source:"@site/content/api-docs/system/unseal.mdx",sourceDirName:"system",slug:"/system/unseal",permalink:"/api-docs/system/unseal",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/unseal.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/unseal` endpoint is used to unseal the OpenBao."},sidebar:"api",previous:{title:"/sys/tools",permalink:"/api-docs/system/tools"},next:{title:"/sys/locked-users",permalink:"/api-docs/system/user-lockout"}},d={},o=[{value:"Submit unseal key",id:"submit-unseal-key",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3}];function c(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"sysunseal",children:(0,t.jsx)(s.code,{children:"/sys/unseal"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"/sys/unseal"})," endpoint is used to unseal the OpenBao."]}),"\n",(0,t.jsx)(s.h2,{id:"submit-unseal-key",children:"Submit unseal key"}),"\n",(0,t.jsx)(s.p,{children:"This endpoint is used to enter a single root key share to progress the\nunsealing of the OpenBao. If the threshold number of root key shares is reached,\nOpenBao will attempt to unseal the OpenBao. Otherwise, this API must be called\nmultiple times until that threshold is met."}),"\n",(0,t.jsxs)(s.p,{children:["Either the ",(0,t.jsx)(s.code,{children:"key"})," or ",(0,t.jsx)(s.code,{children:"reset"})," parameter must be provided; if both are provided,\n",(0,t.jsx)(s.code,{children:"reset"})," takes precedence."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Method"}),(0,t.jsx)(s.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,t.jsx)(s.tbody,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"POST"})}),(0,t.jsx)(s.td,{style:{textAlign:"left"},children:(0,t.jsx)(s.code,{children:"/sys/unseal"})})]})})]}),"\n",(0,t.jsx)(s.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"key"})," ",(0,t.jsx)(s.code,{children:'(string: "")'})," \u2013 Specifies a single root key share. This is required\nunless ",(0,t.jsx)(s.code,{children:"reset"})," is true."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"reset"})," ",(0,t.jsx)(s.code,{children:"(bool: false)"})," \u2013\xa0Specifies if previously-provided unseal keys are\ndiscarded and the unseal process is reset."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"migrate"})," ",(0,t.jsx)(s.code,{children:"(bool: false)"})," - Available in 1.0 - Used to migrate the seal\nfrom shamir to autoseal or autoseal to shamir. Must be provided on all unseal\nkey calls."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "key": "abcd1234..."\n}\n'})}),"\n",(0,t.jsx)(s.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell-session",children:"$ curl \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/unseal\n"})}),"\n",(0,t.jsx)(s.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,t.jsx)(s.p,{children:'The "t" parameter is the threshold, and "n" is the number of shares.'}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "sealed": true,\n  "t": 3,\n  "n": 5,\n  "progress": 2,\n  "version": "0.6.2"\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"Sample response when OpenBao is unsealed."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "sealed": false,\n  "t": 3,\n  "n": 5,\n  "progress": 0,\n  "version": "0.6.2",\n  "cluster_name": "openbao-cluster-d6ec3c7f",\n  "cluster_id": "3e8b3fec-3749-e056-ba41-b62a63b997e8"\n}\n'})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>i});var t=n(96540);const l={},r=t.createContext(l);function a(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);