"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8467],{97784:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});var a=n(74848),s=n(28453);const d={sidebar_label:"metadata",description:'The "kv metadata" command has subcommands for interacting with the metadata\nendpoint in OpenBao\'s key-value store.'},i="kv metadata",r={id:"commands/kv/metadata",title:"kv metadata",description:'The "kv metadata" command has subcommands for interacting with the metadata\nendpoint in OpenBao\'s key-value store.',source:"@site/content/docs/commands/kv/metadata.mdx",sourceDirName:"commands/kv",slug:"/commands/kv/metadata",permalink:"/openbao/docs/commands/kv/metadata",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/commands/kv/metadata.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"metadata",description:'The "kv metadata" command has subcommands for interacting with the metadata\nendpoint in OpenBao\'s key-value store.'},sidebar:"docs",previous:{title:"list",permalink:"/openbao/docs/commands/kv/list"},next:{title:"patch",permalink:"/openbao/docs/commands/kv/patch"}},o={},c=[{value:"Usage",id:"usage",level:2},{value:"kv metadata delete",id:"kv-metadata-delete",level:3},{value:"Examples",id:"examples",level:4},{value:"kv metadata get",id:"kv-metadata-get",level:3},{value:"Examples",id:"examples-1",level:4},{value:"kv metadata put",id:"kv-metadata-put",level:3},{value:"Examples",id:"examples-2",level:4},{value:"Output options",id:"output-options",level:4},{value:"Subcommand options",id:"subcommand-options",level:4}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"kv-metadata",children:"kv metadata"}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"NOTE:"})," This is a ",(0,a.jsx)(t.a,{href:"/docs/secrets/kv/kv-v2",children:"K/V Version 2"})," secrets\nengine command, and not available for Version 1."]})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"kv metadata"})," command has subcommands for interacting with the metadata and\nversions for the versioned secrets (K/V Version 2 secrets engine) at the\nspecified path."]}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"Usage: bao kv metadata <subcommand> [options] [args]\n\n  # ...\n\nSubcommands:\n    delete    Deletes all versions and metadata for a key in the KV store\n    get       Retrieves key metadata from the KV store\n    put       Sets or updates key settings in the KV store\n"})}),"\n",(0,a.jsx)(t.h3,{id:"kv-metadata-delete",children:"kv metadata delete"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"kv metadata delete"})," command deletes all versions and metadata for the\nprovided key."]}),"\n",(0,a.jsx)(t.h4,{id:"examples",children:"Examples"}),"\n",(0,a.jsx)(t.p,{children:'Deletes all versions and metadata of the key "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:"$ bao kv metadata delete -mount=secret creds\nSuccess! Data deleted (if it existed) at: secret/metadata/creds\n"})}),"\n",(0,a.jsx)(t.h3,{id:"kv-metadata-get",children:"kv metadata get"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"kv metadata get"})," command retrieves the metadata of the versioned secrets at\nthe given key name. If no key exists with that name, an error is returned."]}),"\n",(0,a.jsx)(t.h4,{id:"examples-1",children:"Examples"}),"\n",(0,a.jsx)(t.p,{children:'Retrieves the metadata of the key name, "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:"$ bao kv metadata get -mount=secret creds\n=== Metadata Path ===\nsecret/metadata/creds\n\n========== Metadata ==========\nKey                     Value\n---                     -----\ncas_required            false\ncreated_time            2019-06-28T15:53:30.395814Z\ncurrent_version         5\ndelete_version_after    0s\nmax_versions            0\noldest_version          0\nupdated_time            2019-06-28T16:01:47.40064Z\n\n====== Version 1 ======\nKey              Value\n---              -----\ncreated_time     2019-06-28T15:53:30.395814Z\ndeletion_time    n/a\ndestroyed        false\n\n====== Version 2 ======\nKey              Value\n---              -----\ncreated_time     2019-06-28T16:01:36.676912Z\ndeletion_time    n/a\ndestroyed        false\n\n...\n"})}),"\n",(0,a.jsx)(t.h3,{id:"kv-metadata-put",children:"kv metadata put"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"kv metadata put"})," command can be used to create a blank key in the K/V v2\nsecrets engine or to update key configuration for a specified key."]}),"\n",(0,a.jsx)(t.h4,{id:"examples-2",children:"Examples"}),"\n",(0,a.jsx)(t.p,{children:'Create a key in the K/V v2 with no data at the key "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:"$ bao kv metadata put -mount=secret creds\nSuccess! Data written to: secret/metadata/creds\n"})}),"\n",(0,a.jsx)(t.p,{children:'Set the maximum number of versions to keep for the key "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:"$ bao kv metadata put -mount=secret -max-versions=5 creds\nSuccess! Data written to: secret/metadata/creds\n"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"NOTE:"})," If not set, the backend\u2019s configured max version is used. Once a key\nhas more than the configured allowed versions the oldest version will be\npermanently deleted."]}),"\n",(0,a.jsx)(t.p,{children:'Require Check-and-Set for the key "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:"$ bao kv metadata put -mount=secret -cas-required creds\n"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"NOTE:"})," When check-and-set is required, the key will require the ",(0,a.jsx)(t.code,{children:"cas"}),"\nparameter to be set on all write requests. Otherwise, the backend\u2019s\nconfiguration will be used."]}),"\n",(0,a.jsx)(t.p,{children:'Set the length of time before a version is deleted for the key "creds":'}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell-session",children:'$ bao kv metadata put -mount=secret -delete-version-after="3h25m19s" creds\n'})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"NOTE:"})," If not set, the backend's configured Delete-Version-After is used. If\nset to a duration greater than the backend's, the backend's Delete-Version-After\nsetting will be used. Any changes to the Delete-Version-After setting will only\nbe applied to new versions."]}),"\n",(0,a.jsx)(t.h4,{id:"output-options",children:"Output options"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"-format"})," ",(0,a.jsx)(t.code,{children:'(string: "table")'}),' - Print the output in the given format. Valid\nformats are "table", "json", or "yaml". This can also be specified via the\n',(0,a.jsx)(t.code,{children:"VAULT_FORMAT"})," environment variable."]}),"\n"]}),"\n",(0,a.jsx)(t.h4,{id:"subcommand-options",children:"Subcommand options"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"-cas-required"})," ",(0,a.jsx)(t.code,{children:"(bool: false)"})," - If true the key will require the cas\nparameter to be set on all write requests. If false, the backend\u2019s\nconfiguration will be used. The default is false."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"-max-versions"})," ",(0,a.jsx)(t.code,{children:"(int: 0)"})," - The number of versions to keep per key. If not\nset, the backend\u2019s configured max version is used. Once a key has more than the\nconfigured allowed versions the oldest version will be permanently deleted."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"-delete-version-after"})," ",(0,a.jsx)(t.code,{children:'(string:"0s")'})," \u2013 Set the ",(0,a.jsx)(t.code,{children:"delete-version-after"})," value\nto a duration to specify the ",(0,a.jsx)(t.code,{children:"deletion_time"})," for all new versions written to\nthis key. If not set, the backend's ",(0,a.jsx)(t.code,{children:"delete_version_after"})," will be used. If\nthe value is greater than the backend's ",(0,a.jsx)(t.code,{children:"delete_version_after"}),", the backend's\n",(0,a.jsx)(t.code,{children:"delete_version_after"})," will be used. Accepts ",(0,a.jsx)(t.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"-custom-metadata"})," ",(0,a.jsx)(t.code,{children:'(string: "")'})," - Specifies a key-value pair for the\n",(0,a.jsx)(t.code,{children:"custom_metadata"})," field. This can be specified multiple times to add multiple\npieces of metadata."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"-mount"})," ",(0,a.jsx)(t.code,{children:'(string: "")'})," - Specifies the path where the KV backend is mounted.\nIf specified, the next argument will be interpreted as the secret path. If\nthis flag is not specified, the next argument will be interpreted as the\ncombined mount path and secret path, with /data/ automatically inserted for\nKV v2 secrets."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var a=n(96540);const s={},d=a.createContext(s);function i(e){const t=a.useContext(d);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(d.Provider,{value:t},e.children)}}}]);