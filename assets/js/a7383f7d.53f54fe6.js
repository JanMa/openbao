"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6500],{81209:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>c,toc:()=>r});var s=t(74848),a=t(28453);const i={sidebar_label:"patch",description:'The "kv patch" command writes the data to the given path in the key-value\nstore. The data can be of any type.'},o="kv patch",c={id:"commands/kv/patch",title:"kv patch",description:'The "kv patch" command writes the data to the given path in the key-value\nstore. The data can be of any type.',source:"@site/content/docs/commands/kv/patch.mdx",sourceDirName:"commands/kv",slug:"/commands/kv/patch",permalink:"/openbao/docs/commands/kv/patch",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/commands/kv/patch.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"patch",description:'The "kv patch" command writes the data to the given path in the key-value\nstore. The data can be of any type.'},sidebar:"docs",previous:{title:"metadata",permalink:"/openbao/docs/commands/kv/metadata"},next:{title:"put",permalink:"/openbao/docs/commands/kv/put"}},d={},r=[{value:"Examples",id:"examples",level:2},{value:"Usage",id:"usage",level:2},{value:"Output options",id:"output-options",level:3},{value:"Command options",id:"command-options",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"kv-patch",children:"kv patch"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"NOTE:"})," This is a ",(0,s.jsx)(n.a,{href:"/docs/secrets/kv/kv-v2",children:"K/V Version 2"})," secrets\nengine command, and not available for Version 1."]})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"kv patch"})," command writes the data to the given path in the K/V v2 secrets\nengine. The data can be of any type. Unlike the ",(0,s.jsx)(n.code,{children:"kv put"})," command, the ",(0,s.jsx)(n.code,{children:"patch"}),"\ncommand combines the change with existing data instead of replacing them.\nTherefore, this command makes it easy to make a partial updates to an existing\ndata."]}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(n.p,{children:["If you wish to add an additional key-value (",(0,s.jsx)(n.code,{children:"ttl=48h"}),') to the existing data at\nthe key "creds":']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"$ bao kv patch -mount=secret creds ttl=48h\n== Secret Path ==\nsecret/data/creds\n\n======= Metadata =======\nKey              Value\n---              -----\ncreated_time     2019-06-06T16:46:22.090654Z\ndeletion_time    n/a\ndestroyed        false\nversion          6\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"NOTE:"})," The ",(0,s.jsx)(n.code,{children:"kv put"})," command requires both the existing data and\nthe data you wish to add in order to accomplish the same result."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"$ bao kv put -mount=secret creds ttl=48h passcode=my-long-passcode\n"})}),"\n",(0,s.jsx)(n.p,{children:'The data can also be consumed from a file on disk by prefixing with the "@"\nsymbol. For example:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"$ bao kv patch -mount=secret creds @data.json\n"})}),"\n",(0,s.jsx)(n.p,{children:'Or it can be read from stdin using the "-" symbol:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ echo "abcd1234" | bao kv patch -mount=secret foo bar=-\n'})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.h3,{id:"output-options",children:"Output options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-field"})," ",(0,s.jsx)(n.code,{children:'(string: "")'})," - Print only the field with the given name. Specifying\nthis option will take precedence over other formatting directives. The result\nwill not have a trailing newline making it ideal for piping to other\nprocesses."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-format"})," ",(0,s.jsx)(n.code,{children:'(string: "table")'}),' - Print the output in the given format. Valid\nformats are "table", "json", or "yaml". This can also be specified via the\n',(0,s.jsx)(n.code,{children:"BAO_FORMAT"})," environment variable."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"command-options",children:"Command options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-method"})," ",(0,s.jsx)(n.code,{children:'(string: "patch")'})," - Specifies the patch method to use. Valid\nmethods are ",(0,s.jsx)(n.code,{children:"patch"})," and ",(0,s.jsx)(n.code,{children:"rw"}),". The ",(0,s.jsx)(n.code,{children:"patch"})," method uses an HTTP ",(0,s.jsx)(n.code,{children:"PATCH"})," request\nto apply the partial update. The ",(0,s.jsx)(n.code,{children:"rw"})," method will fetch the secret's data,\nperform an in-memory update, and write the updated data."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-cas"})," ",(0,s.jsx)(n.code,{children:"(int: 0)"})," - Specifies the value to use for the Check-And-Set operation.\nThis flag will only be used for the ",(0,s.jsx)(n.code,{children:"patch"})," method. This flag is required if\n",(0,s.jsx)(n.code,{children:"cas_required"})," is set to ",(0,s.jsx)(n.code,{children:"true"})," on either the secret or the engine's config.\nIn order for a ",(0,s.jsx)(n.code,{children:"patch"})," to be successful, ",(0,s.jsx)(n.code,{children:"-cas"})," must be set to the current\nversion of the secret. This flag will be ignored for the ",(0,s.jsx)(n.code,{children:"rw"})," method.\nInstead, its value will be derived from fetching the current version of the\nsecret."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-mount"})," ",(0,s.jsx)(n.code,{children:'(string: "")'})," - Specifies the path where the KV backend is mounted.\nIf specified, the next argument will be interpreted as the secret path. If\nthis flag is not specified, the next argument will be interpreted as the\ncombined mount path and secret path, with /data/ automatically inserted for\nKV v2 secrets."]}),"\n"]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(96540);const a={},i=s.createContext(a);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);