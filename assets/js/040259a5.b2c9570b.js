"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[749],{27256:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var s=t(74848),i=t(28453);const a={layout:"docs",page_title:"write - Command",description:'The "write" command writes data to OpenBao at the given path. The data can be\ncredentials, secrets, configuration, or arbitrary data. The specific behavior\nof this command is determined at the thing mounted at the path.'},o="write",r={id:"commands/write",title:"write",description:'The "write" command writes data to OpenBao at the given path. The data can be\ncredentials, secrets, configuration, or arbitrary data. The specific behavior\nof this command is determined at the thing mounted at the path.',source:"@site/content/docs/commands/write.mdx",sourceDirName:"commands",slug:"/commands/write",permalink:"/openbao/docs/commands/write",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/commands/write.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"write - Command",description:'The "write" command writes data to OpenBao at the given path. The data can be\ncredentials, secrets, configuration, or arbitrary data. The specific behavior\nof this command is determined at the thing mounted at the path.'},sidebar:"docs",previous:{title:"version-history",permalink:"/openbao/docs/commands/version-history"},next:{title:"Token helpers",permalink:"/openbao/docs/commands/token-helper"}},c={},d=[{value:"Examples",id:"examples",level:2},{value:"API versus CLI",id:"api-versus-cli",level:3},{value:"Usage",id:"usage",level:2},{value:"Output options",id:"output-options",level:3},{value:"Command options",id:"command-options",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"write",children:"write"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"write"})," command writes data to OpenBao at the given path (wrapper command for\nHTTP PUT or POST). The data can be credentials, secrets, configuration, or\narbitrary data. The specific behavior of the ",(0,s.jsx)(n.code,{children:"write"})," command is determined at\nthe thing mounted at the path."]}),"\n",(0,s.jsxs)(n.p,{children:['Data is specified as "',(0,s.jsx)(n.strong,{children:"key=value"}),'" pairs on the command line. If the value begins\nwith an "',(0,s.jsx)(n.strong,{children:"@"}),'", then it is loaded from a file. If the value for a key is "',(0,s.jsx)(n.strong,{children:"-"}),'", OpenBao\nwill read the value from stdin rather than the command line.']}),"\n",(0,s.jsxs)(n.p,{children:["Some API fields require more advanced structures such as maps. These cannot\ndirectly be represented on the command line. However, direct control of the\nrequest parameters can be achieved by using ",(0,s.jsx)(n.code,{children:"-"})," as the only data argument.\nThis causes ",(0,s.jsx)(n.code,{children:"bao write"}),' to read a JSON blob containing all request parameters\nfrom stdin. This argument will be ignored if used in conjunction with any\n"key=value" pairs.']}),"\n",(0,s.jsx)(n.p,{children:"For a full list of examples and paths, please see the documentation that\ncorresponds to the secrets engines in use."}),"\n",(0,s.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.p,{children:"Store an arbitrary secrets in the token's cubbyhole."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ bao write cubbyhole/git-credentials username="student01" password="p@$$w0rd"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Create a new encryption key in the transit secrets engine:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"$ bao write -force transit/keys/my-key\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"-force"})," flag allows the write operation without input data. (See ",(0,s.jsx)(n.a,{href:"#command-options",children:"command\noptions"}),".)"]}),"\n",(0,s.jsx)(n.h3,{id:"api-versus-cli",children:"API versus CLI"}),"\n",(0,s.jsxs)(n.p,{children:["Create a token with TTL set to 8 hours, limited to 3 uses, and attach ",(0,s.jsx)(n.code,{children:"admin"}),"\nand ",(0,s.jsx)(n.code,{children:"secops"})," policies."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ bao write auth/token/create policies="admin" policies="secops" ttl=8h num_uses=3\n'})}),"\n",(0,s.jsx)(n.p,{children:"Equivalent cURL command for this operation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:'$ tee request_payload.json -<<EOF\n{\n   "policies": ["admin", "secops"],\n   "ttl": "8h",\n   "num_uses": 3\n}\nEOF\n\n$ curl --header "X-Vault-Token: $OPENBAO_TOKEN" \\\n    --request POST \\\n    --data @request_payload.json \\\n    $OPENBAO_ADDR/v1/auth/token/create\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"bao write"})," command simplifies the API call."]}),"\n",(0,s.jsxs)(n.p,{children:["Since token management is a common task, OpenBao CLI provides a\n",(0,s.jsx)(n.a,{href:"/docs/commands/token",children:(0,s.jsx)(n.code,{children:"token"})})," command with\n",(0,s.jsx)(n.a,{href:"/docs/commands/token/create",children:(0,s.jsx)(n.code,{children:"create"})})," subcommand. The CLI command simplifies\nthe token creation. Use the ",(0,s.jsx)(n.code,{children:"bao create"})," command with options to set the token\nTTL, policies, and use limit."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell-session",children:"$ bao token create -policy=admin -policy=secops -ttl=8h -use-limit=3\n"})}),"\n",(0,s.jsxs)(n.p,{children:["-> ",(0,s.jsx)(n.strong,{children:"Syntax:"})," The command options start with ",(0,s.jsx)(n.code,{children:"-"})," (e.g. ",(0,s.jsx)(n.code,{children:"-ttl"}),") while API path\nparameters do not (e.g. ",(0,s.jsx)(n.code,{children:"ttl"}),"). You always set the API parameters after the path\nyou are invoking."]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:["The following flags are available in addition to the ",(0,s.jsx)(n.a,{href:"/docs/commands",children:"standard set of\nflags"})," included on all commands."]}),"\n",(0,s.jsx)(n.h3,{id:"output-options",children:"Output options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-field"})," ",(0,s.jsx)(n.code,{children:'(string: "")'})," - Print only the field with the given name. Specifying\nthis option will take precedence over other formatting directives. The result\nwill not have a trailing newline making it ideal for piping to other processes."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-format"})," ",(0,s.jsx)(n.code,{children:'(string: "table")'}),' - Print the output in the given format. Valid\nformats are "table", "json", or "yaml". This can also be specified via the\n',(0,s.jsx)(n.code,{children:"VAULT_FORMAT"})," environment variable."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"command-options",children:"Command options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-force"})," ",(0,s.jsx)(n.code,{children:"(bool: false)"})," - Allow the operation to continue with no key=value\npairs. This allows writing to keys that do not need or expect data. This is\naliased as ",(0,s.jsx)(n.code,{children:"-f"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(96540);const i={},a=s.createContext(i);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);