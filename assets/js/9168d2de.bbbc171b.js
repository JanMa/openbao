"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4500],{47350:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>c});var n=s(74848),t=s(28453);const d={description:"The `/sys/audit` endpoint is used to enable and disable audit devices."},l="/sys/audit",a={id:"system/audit",title:"/sys/audit",description:"The `/sys/audit` endpoint is used to enable and disable audit devices.",source:"@site/content/api-docs/system/audit.mdx",sourceDirName:"system",slug:"/system/audit",permalink:"/openbao/api-docs/system/audit",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/audit.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/audit` endpoint is used to enable and disable audit devices."},sidebar:"api",previous:{title:"Overview",permalink:"/openbao/api-docs/system/"},next:{title:"/sys/audit-hash",permalink:"/openbao/api-docs/system/audit-hash"}},r={},c=[{value:"List enabled audit devices",id:"list-enabled-audit-devices",level:2},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Enable audit device",id:"enable-audit-device",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Disable audit device",id:"disable-audit-device",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample request",id:"sample-request-2",level:3}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{id:"sysaudit",children:(0,n.jsx)(i.code,{children:"/sys/audit"})}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.code,{children:"/sys/audit"})," endpoint is used to list, enable, and disable audit devices.\nAudit devices must be enabled before use, and more than one device may be\nenabled at a time."]}),"\n",(0,n.jsx)(i.h2,{id:"list-enabled-audit-devices",children:"List enabled audit devices"}),"\n",(0,n.jsx)(i.p,{children:"This endpoint lists only the enabled audit devices (it does not list all\navailable audit devices)."}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsxs)(i.strong,{children:[(0,n.jsx)(i.code,{children:"sudo"})," required"]})," \u2013\xa0This endpoint requires ",(0,n.jsx)(i.code,{children:"sudo"})," capability in addition to\nany path-specific capabilities."]}),"\n"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(i.tbody,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"GET"})}),(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"/sys/audit"})})]})})]}),"\n",(0,n.jsx)(i.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/sys/audit\n'})}),"\n",(0,n.jsx)(i.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-javascript",children:'{\n  "file": {\n    "type": "file",\n    "description": "Store logs in a file",\n    "options": {\n      "file_path": "/var/log/openbao.log"\n    }\n  }\n}\n'})}),"\n",(0,n.jsx)(i.h2,{id:"enable-audit-device",children:"Enable audit device"}),"\n",(0,n.jsx)(i.p,{children:"This endpoint enables a new audit device at the supplied path. The path can be a\nsingle word name or a more complex, nested path."}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsxs)(i.strong,{children:[(0,n.jsx)(i.code,{children:"sudo"})," required"]})," \u2013\xa0This endpoint requires ",(0,n.jsx)(i.code,{children:"sudo"})," capability in addition to\nany path-specific capabilities."]}),"\n"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(i.tbody,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"POST"})}),(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"/sys/audit/:path"})})]})})]}),"\n",(0,n.jsx)(i.h3,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"path"})," ",(0,n.jsx)(i.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the path in which to enable the audit\ndevice. This is part of the request URL."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"description"})," ",(0,n.jsx)(i.code,{children:'(string: "")'})," \u2013\xa0Specifies a human-friendly description of the\naudit device."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"options"})," ",(0,n.jsx)(i.code,{children:"(map<string|string>: nil)"})," \u2013\xa0Specifies configuration options to pass to the audit device itself.\nFor more details, please see the relevant page for an audit device ",(0,n.jsx)(i.code,{children:"type"}),", under ",(0,n.jsx)(i.a,{href:"/docs/audit",children:"Audit Devices docs"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"type"})," ",(0,n.jsx)(i.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the type of the audit device.\nValid types are ",(0,n.jsx)(i.code,{children:"file"}),", ",(0,n.jsx)(i.code,{children:"socket"})," and ",(0,n.jsx)(i.code,{children:"syslog"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-json",children:'{\n  "type": "file",\n  "options": {\n    "file_path": "/var/log/openbao/log"\n  }\n}\n'})}),"\n",(0,n.jsx)(i.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/sys/audit/example-audit\n'})}),"\n",(0,n.jsx)(i.h2,{id:"disable-audit-device",children:"Disable audit device"}),"\n",(0,n.jsx)(i.p,{children:"This endpoint disables the audit device at the given path."}),"\n",(0,n.jsx)(i.admonition,{type:"warning",children:(0,n.jsx)(i.p,{children:"Note: Once an audit device is disabled, you will no longer be able to HMAC values\nfor comparison with entries in the audit logs. This is true even if you re-enable\nthe audit device at the same path, as a new salt will be created for hashing."})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsxs)(i.strong,{children:[(0,n.jsx)(i.code,{children:"sudo"})," required"]})," \u2013\xa0This endpoint requires ",(0,n.jsx)(i.code,{children:"sudo"})," capability in addition to\nany path-specific capabilities."]}),"\n"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Method"}),(0,n.jsx)(i.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,n.jsx)(i.tbody,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"DELETE"})}),(0,n.jsx)(i.td,{style:{textAlign:"left"},children:(0,n.jsx)(i.code,{children:"/sys/audit/:path"})})]})})]}),"\n",(0,n.jsx)(i.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"path"})," ",(0,n.jsx)(i.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the path of the audit device to\ndelete. This is part of the request URL."]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/sys/audit/example-audit\n'})})]})}function h(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>l,x:()=>a});var n=s(96540);const t={},d=n.createContext(t);function l(e){const i=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(d.Provider,{value:i},e.children)}}}]);