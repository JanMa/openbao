"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9414],{33184:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>n,default:()=>x,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var i=r(74848),s=r(28453);const l={sidebar_label:"Availability metics",description:"Technical reference for availability related telemetry values."},n="Availability telemetry",d={id:"internals/telemetry/metrics/availability",title:"Availability telemetry",description:"Technical reference for availability related telemetry values.",source:"@site/content/docs/internals/telemetry/metrics/availability.mdx",sourceDirName:"internals/telemetry/metrics",slug:"/internals/telemetry/metrics/availability",permalink:"/openbao/docs/internals/telemetry/metrics/availability",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/internals/telemetry/metrics/availability.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Availability metics",description:"Technical reference for availability related telemetry values."},sidebar:"docs",previous:{title:"Authentication metrics",permalink:"/openbao/docs/internals/telemetry/metrics/authn"},next:{title:"Database metrics",permalink:"/openbao/docs/internals/telemetry/metrics/database"}},h={},c=[{value:"Default metrics",id:"default-metrics",level:2},{value:"Merkle tree metrics",id:"merkle-tree-metrics",level:2},{value:"Write-ahead log (WAL) telemetry",id:"write-ahead-log-wal-telemetry",level:2},{value:"Log shipping metrics",id:"log-shipping-metrics",level:2}];function a(e){const t={h1:"h1",h2:"h2",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"availability-telemetry",children:"Availability telemetry"}),"\n",(0,i.jsx)(t.p,{children:"Availability telemetry provides information about standby and active nodes in\nyour OpenBao instance."}),"\n",(0,i.jsx)(t.h2,{id:"default-metrics",children:"Default metrics"}),"\n",(0,i.jsx)(t.h3,{children:"vault.ha.rpc.client.echo {#vault-ha-rpc-client-echo}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time taken to send an echo request from a standby to the active node (also emitted by perf standbys)"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.ha.rpc.client.echo.errors {#vault-ha-rpc-client-echo-errors}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"counter"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Number of standby echo request failures (also emitted by perf standbys)"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.ha.rpc.client.forward {#vault-ha-rpc-client-forward}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time taken to forward a request from a standby to the active node"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.ha.rpc.client.forward.errors {#vault-ha-rpc-client-forward-errors}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"counter"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Number of standby request forwarding failures"})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"merkle-tree-metrics",children:"Merkle tree metrics"}),"\n",(0,i.jsx)(t.h3,{children:"vault.merkle.flushDirty {#vault-merkle-flushdirty}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"The average time required to flush dirty pages to storage"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.merkle.flushDirty.num_pages {#vault-merkle-flushdirty-num_pages}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"pages"}),(0,i.jsx)(t.td,{children:"Number of pages flushed"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.merkle.flushDirty.outstanding_pages {#vault-merkle-flushdirty-outstanding_pages}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"pages"}),(0,i.jsx)(t.td,{children:"Number of dirty pages waiting to be flushed"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.merkle.saveCheckpoint {#vault-merkle-savecheckpoint}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"The average time required to save a checkpoint"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.merkle.saveCheckpoint.num_dirty {#vault-merkle-savecheckpoint-num_dirty}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"pages"}),(0,i.jsx)(t.td,{children:"Number of dirty pages at checkpoint"})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"write-ahead-log-wal-telemetry",children:"Write-ahead log (WAL) telemetry"}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.deleteWALs {#vault-wal-deletewals}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time required to fully delete a write-ahead log"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.flushReady {#vault-wal-flushready}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time required to fully flush a write-ahead log that is ready for storage"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.flushReady.queue_len {#vault-wal-flushready-queue_len}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Current size of the write queue in the WAL system"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.gc.deleted {#vault-wal-gc-deleted}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Number of write-ahead logs deleted during garbage collection"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.gc.total {#vault-wal-gc-total}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Total number of write-ahead logs currently on disk"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.loadWAL {#vault-wal-loadwal}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time required to load a write-ahead log"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.wal.persistWALs {#vault-wal-persistwals}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"ms"}),(0,i.jsx)(t.td,{children:"Time required to persist a write-ahead log"})]})})]}),"\n",(0,i.jsx)(t.h2,{id:"log-shipping-metrics",children:"Log shipping metrics"}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.buffer.length {#vault-logshipper-buffer-length}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"buffer entries"}),(0,i.jsx)(t.td,{children:"Current length of the log shipper buffer"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.buffer.max_length {#vault-logshipper-buffer-max_length}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"buffer entries"}),(0,i.jsx)(t.td,{children:"Maximum length of the log shipper buffer seen to date"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.buffer.max_size {#vault-logshipper-buffer-max_size}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"bytes"}),(0,i.jsx)(t.td,{children:"Maximum allowable size of the log shipper buffer"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.buffer.size {#vault-logshipper-buffer-size}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"gauge"}),(0,i.jsx)(t.td,{children:"bytes"}),(0,i.jsx)(t.td,{children:"Current size of the log shipper buffer"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.streamWALs.guard_found {#vault-logshipper-streamwals-guard_found}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"counter"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Number of times OpenBao began streaming WAL entires and found a starting index in the merkle tree"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.streamWALs.missing_guard {#vault-logshipper-streamwals-missing_guard}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"counter"}),(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"Number of times OpenBao began streaming WAL entires without finding a starting index in the Merkle tree"})]})})]}),"\n",(0,i.jsx)(t.h3,{children:"vault.logshipper.streamWALs.scanned_entries {#vault-logshipper-streamwals-scanned_entries}"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric type"}),(0,i.jsx)(t.th,{children:"Value"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsx)(t.tbody,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"summary"}),(0,i.jsx)(t.td,{children:"entries"}),(0,i.jsx)(t.td,{children:"Number of entries scanned in the buffer before OpenBao found the correct entry"})]})})]})]})}function x(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>n,x:()=>d});var i=r(96540);const s={},l=i.createContext(s);function n(e){const t=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);