"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3015],{88745:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>r});var i=n(74848),o=n(28453);const s={layout:"docs",page_title:"Socket - Audit Devices",description:'The "socket" audit device writes audit writes to a TCP or UDP socket.'},c="Socket audit device",d={id:"audit/socket",title:"Socket audit device",description:'The "socket" audit device writes audit writes to a TCP or UDP socket.',source:"@site/content/docs/audit/socket.mdx",sourceDirName:"audit",slug:"/audit/socket",permalink:"/openbao/docs/audit/socket",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/audit/socket.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"Socket - Audit Devices",description:'The "socket" audit device writes audit writes to a TCP or UDP socket.'},sidebar:"tutorialSidebar",previous:{title:"File audit device",permalink:"/openbao/docs/audit/file"},next:{title:"Syslog audit device",permalink:"/openbao/docs/audit/syslog"}},a={},r=[{value:"Enabling",id:"enabling",level:2},{value:"Configuration",id:"configuration",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"socket-audit-device",children:"Socket audit device"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"socket"})," audit device writes to a TCP, UDP, or UNIX socket."]}),"\n",(0,i.jsxs)(t.p,{children:["~> ",(0,i.jsx)(t.strong,{children:"Warning:"})," The loss of audit logs may occur when using the UDP socket audit type. Because UDP socket audit type is connectionless, meaning the UDP endpoint becomes unavailable, it\u2019s possible that any number of audit logs written to it may get lost, even though the request will still succeed. OpenBao does not provide an indication for the loss of audit logs. Therefore, we recommend using your device in conjunction with a secondary \u201cnon-socket\u201d audit device to ensure accuracy and to guarantee that audit logs will not be lost."]}),"\n",(0,i.jsxs)(t.p,{children:["~> ",(0,i.jsx)(t.strong,{children:"Warning:"})," When using a TCP socket audit type, and connection loss to the socket occurs, a single audit entry may be omitted from the audit entry. The request from the TCP socket audit type will succeed despite the omission of the audit entry."]}),"\n",(0,i.jsx)(t.h2,{id:"enabling",children:"Enabling"}),"\n",(0,i.jsx)(t.p,{children:"Enable at the default path:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell-session",children:"$ bao audit enable socket\n"})}),"\n",(0,i.jsx)(t.p,{children:"Supply configuration parameters via K=V pairs:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell-session",children:"$ bao audit enable socket address=127.0.0.1:9090 socket_type=tcp\n"})}),"\n",(0,i.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"socket"})," audit device supports the common configuration options documented on\nthe ",(0,i.jsx)(t.a,{href:"/docs/audit#common-configuration-options",children:"main Audit Devices page"}),", and\nthese device-specific options:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"address"})," ",(0,i.jsx)(t.code,{children:'(string: "")'})," - The socket server address to use. Example\n",(0,i.jsx)(t.code,{children:"127.0.0.1:9090"})," or ",(0,i.jsx)(t.code,{children:"/tmp/audit.sock"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"socket_type"})," ",(0,i.jsx)(t.code,{children:'(string: "tcp")'})," - The socket type to use, any type compatible\nwith ",(0,i.jsx)("a",{href:"https://golang.org/pkg/net/#Dial",children:"net.Dial"})," is acceptable. It's\nimportant to note if TCP is used and the destination socket becomes unavailable\nOpenBao may become unresponsive per ",(0,i.jsx)(t.a,{href:"/docs/audit/#blocked-audit-devices",children:"Blocked Audit Devices"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"write_timeout"})," ",(0,i.jsx)(t.code,{children:"(string: 2s)"})," - The (deadline) time in seconds to allow writes to be completed over the socket.\nA zero value means that write attempts will ",(0,i.jsx)(t.em,{children:"not"})," time out."]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>d});var i=n(96540);const o={},s=i.createContext(o);function c(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);