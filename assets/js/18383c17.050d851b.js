"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2643],{60364:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>a,toc:()=>u});var r=s(74848),n=s(28453);const i={description:"The `/sys/metrics` endpoint is used to get telemetry metrics for OpenBao."},l="/sys/metrics",a={id:"system/metrics",title:"/sys/metrics",description:"The `/sys/metrics` endpoint is used to get telemetry metrics for OpenBao.",source:"@site/content/api-docs/system/metrics.mdx",sourceDirName:"system",slug:"/system/metrics",permalink:"/openbao/api-docs/system/metrics",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/system/metrics.mdx",tags:[],version:"current",frontMatter:{description:"The `/sys/metrics` endpoint is used to get telemetry metrics for OpenBao."},sidebar:"api",previous:{title:"/sys/loggers",permalink:"/openbao/api-docs/system/loggers"},next:{title:"mfa-validate",permalink:"/openbao/api-docs/system/mfa-validate"}},o={},u=[{value:"Read telemetry metrics",id:"read-telemetry-metrics",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Sample response",id:"sample-response",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"sysmetrics",children:(0,r.jsx)(t.code,{children:"/sys/metrics"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"/sys/metrics"})," endpoint is used to get telemetry metrics for OpenBao."]}),"\n",(0,r.jsx)(t.h2,{id:"read-telemetry-metrics",children:"Read telemetry metrics"}),"\n",(0,r.jsxs)(t.p,{children:["This endpoint returns the telemetry metrics for OpenBao. It can be used by metrics\ncollections systems like ",(0,r.jsx)(t.a,{href:"https://prometheus.io",children:"Prometheus"})," that use a pull\nmodel for metrics collection."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Method"}),(0,r.jsx)(t.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"GET"})}),(0,r.jsx)(t.td,{style:{textAlign:"left"},children:(0,r.jsx)(t.code,{children:"/sys/metrics"})})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"format"})," ",(0,r.jsx)(t.code,{children:'(string: "")'})," \u2013 Specifies the format used for the returned metrics. The\ndefault metrics format is JSON. Setting ",(0,r.jsx)(t.code,{children:"format"})," to ",(0,r.jsx)(t.code,{children:"prometheus"})," will return the\nmetrics in ",(0,r.jsx)(t.a,{href:"https://prometheus.io/docs/instrumenting/exposition_formats/#text-based-format",children:"Prometheus format"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell-session",children:"$ curl \\\n  --header \"X-Vault-Token: ...\" \\\n    'http://127.0.0.1:8200/v1/sys/metrics?format=prometheus'\n"})}),"\n",(0,r.jsx)(t.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,r.jsxs)(t.p,{children:["This response is only returned for a ",(0,r.jsx)(t.code,{children:"GET"})," request."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'# HELP vault_audit_log_request vault_audit_log_request\n# TYPE vault_audit_log_request summary\nvault_audit_log_request{quantile="0.5"} 0.005927000194787979\nvault_audit_log_request{quantile="0.9"} 0.005927000194787979\nvault_audit_log_request{quantile="0.99"} 0.005927000194787979\nvault_audit_log_request_sum 0.014550999738276005\nvault_audit_log_request_count 2\n# HELP vault_audit_log_request_failure vault_audit_log_request_failure\n# TYPE vault_audit_log_request_failure counter\nvault_audit_log_request_failure 0\n# HELP vault_audit_log_response vault_audit_log_response\n# TYPE vault_audit_log_response summary\nvault_audit_log_response{quantile="0.5"} NaN\nvault_audit_log_response{quantile="0.9"} NaN\nvault_audit_log_response{quantile="0.99"} NaN\nvault_audit_log_response_sum 0.0057669999077916145\nvault_audit_log_response_count 1\n# HELP vault_audit_log_response_failure vault_audit_log_response_failure\n# TYPE vault_audit_log_response_failure counter\nvault_audit_log_response_failure 0\n# HELP vault_barrier_get vault_barrier_get\n# TYPE vault_barrier_get summary\nvault_barrier_get{quantile="0.5"} 0.011938000097870827\nvault_barrier_get{quantile="0.9"} 0.011938000097870827\nvault_barrier_get{quantile="0.99"} 0.011938000097870827\nvault_barrier_get_sum 0.1814980012131855\nvault_barrier_get_count 36\n...\n'})})]})}function c(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>a});var r=s(96540);const n={},i=r.createContext(n);function l(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);