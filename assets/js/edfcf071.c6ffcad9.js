"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6147],{17081:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=s(74848),t=s(28453);const r={sidebar_label:"Transit",description:"This is the API documentation for the OpenBao Transit secrets engine."},l="Transit secrets engine (API)",d={id:"secret/transit",title:"Transit secrets engine (API)",description:"This is the API documentation for the OpenBao Transit secrets engine.",source:"@site/content/api-docs/secret/transit.mdx",sourceDirName:"secret",slug:"/secret/transit",permalink:"/openbao/api-docs/secret/transit",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/api-docs/secret/transit.mdx",tags:[],version:"current",frontMatter:{sidebar_label:"Transit",description:"This is the API documentation for the OpenBao Transit secrets engine."},sidebar:"api",previous:{title:"TOTP",permalink:"/openbao/api-docs/secret/totp"},next:{title:"Overview",permalink:"/openbao/api-docs/auth/"}},a={},c=[{value:"Create key",id:"create-key",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Sample payload",id:"sample-payload",level:3},{value:"Sample request",id:"sample-request",level:3},{value:"Import key",id:"import-key",level:2},{value:"Parameters",id:"parameters-1",level:3},{value:"Sample payload",id:"sample-payload-1",level:3},{value:"Sample request",id:"sample-request-1",level:3},{value:"Import key version",id:"import-key-version",level:2},{value:"Parameters",id:"parameters-2",level:3},{value:"Sample payload",id:"sample-payload-2",level:3},{value:"Sample request",id:"sample-request-2",level:3},{value:"Get wrapping key",id:"get-wrapping-key",level:2},{value:"Sample request",id:"sample-request-3",level:3},{value:"Sample response",id:"sample-response",level:3},{value:"Read key",id:"read-key",level:2},{value:"Parameters",id:"parameters-3",level:3},{value:"Sample request",id:"sample-request-4",level:3},{value:"Sample response",id:"sample-response-1",level:3},{value:"List keys",id:"list-keys",level:2},{value:"Sample request",id:"sample-request-5",level:3},{value:"Sample response",id:"sample-response-2",level:3},{value:"Delete key",id:"delete-key",level:2},{value:"Parameters",id:"parameters-4",level:3},{value:"Sample request",id:"sample-request-6",level:3},{value:"Update key configuration",id:"update-key-configuration",level:2},{value:"Parameters",id:"parameters-5",level:3},{value:"Sample payload",id:"sample-payload-3",level:3},{value:"Sample request",id:"sample-request-7",level:3},{value:"Rotate key",id:"rotate-key",level:2},{value:"Parameters",id:"parameters-6",level:3},{value:"Sample request",id:"sample-request-8",level:3},{value:"Securely export key",id:"securely-export-key",level:2},{value:"Parameters",id:"parameters-7",level:3},{value:"Sample request",id:"sample-request-9",level:3},{value:"Sample response",id:"sample-response-3",level:3},{value:"Export key",id:"export-key",level:2},{value:"Parameters",id:"parameters-8",level:3},{value:"Sample request",id:"sample-request-10",level:3},{value:"Sample response",id:"sample-response-4",level:3},{value:"Write keys configuration",id:"write-keys-configuration",level:2},{value:"Parameters",id:"parameters-9",level:3},{value:"Sample payload",id:"sample-payload-4",level:3},{value:"Sample request",id:"sample-request-11",level:3},{value:"Sample response",id:"sample-response-5",level:3},{value:"Read keys configuration",id:"read-keys-configuration",level:2},{value:"Sample request",id:"sample-request-12",level:3},{value:"Sample response",id:"sample-response-6",level:3},{value:"Encrypt data",id:"encrypt-data",level:2},{value:"Parameters",id:"parameters-10",level:3},{value:"Sample payload",id:"sample-payload-5",level:3},{value:"Sample request",id:"sample-request-13",level:3},{value:"Sample response",id:"sample-response-7",level:3},{value:"Decrypt data",id:"decrypt-data",level:2},{value:"Parameters",id:"parameters-11",level:3},{value:"Sample payload",id:"sample-payload-6",level:3},{value:"Sample request",id:"sample-request-14",level:3},{value:"Sample response",id:"sample-response-8",level:3},{value:"Rewrap data",id:"rewrap-data",level:2},{value:"Parameters",id:"parameters-12",level:3},{value:"Sample payload",id:"sample-payload-7",level:3},{value:"Sample request",id:"sample-request-15",level:3},{value:"Sample response",id:"sample-response-9",level:3},{value:"Generate data key",id:"generate-data-key",level:2},{value:"Parameters",id:"parameters-13",level:3},{value:"Sample payload",id:"sample-payload-8",level:3},{value:"Sample request",id:"sample-request-16",level:3},{value:"Sample response",id:"sample-response-10",level:3},{value:"Generate random bytes",id:"generate-random-bytes",level:2},{value:"Parameters",id:"parameters-14",level:3},{value:"Sample payload",id:"sample-payload-9",level:3},{value:"Sample request",id:"sample-request-17",level:3},{value:"Sample response",id:"sample-response-11",level:3},{value:"Hash data",id:"hash-data",level:2},{value:"Parameters",id:"parameters-15",level:3},{value:"Sample payload",id:"sample-payload-10",level:3},{value:"Sample request",id:"sample-request-18",level:3},{value:"Sample response",id:"sample-response-12",level:3},{value:"Generate HMAC",id:"generate-hmac",level:2},{value:"Parameters",id:"parameters-16",level:3},{value:"Sample request",id:"sample-request-19",level:3},{value:"Sample payload",id:"sample-payload-11",level:3},{value:"Sample response",id:"sample-response-13",level:3},{value:"Sample payload with batch_input",id:"sample-payload-with-batch_input",level:3},{value:"Sample response for batch_input",id:"sample-response-for-batch_input",level:3},{value:"Sign data",id:"sign-data",level:2},{value:"Parameters",id:"parameters-17",level:3},{value:"Sample request",id:"sample-request-20",level:3},{value:"Sample payload",id:"sample-payload-12",level:3},{value:"Sample response",id:"sample-response-14",level:3},{value:"Sample payload with batch_input",id:"sample-payload-with-batch_input-1",level:3},{value:"Sample response for batch_input",id:"sample-response-for-batch_input-1",level:3},{value:"Verify signed data",id:"verify-signed-data",level:2},{value:"Parameters",id:"parameters-18",level:3},{value:"Sample request",id:"sample-request-21",level:3},{value:"Sample payload",id:"sample-payload-13",level:3},{value:"Sample response",id:"sample-response-15",level:3},{value:"Sample payload with batch_input",id:"sample-payload-with-batch_input-2",level:3},{value:"Sample response for batch_input",id:"sample-response-for-batch_input-2",level:3},{value:"Backup key",id:"backup-key",level:2},{value:"Parameters",id:"parameters-19",level:3},{value:"Sample request",id:"sample-request-22",level:3},{value:"Sample response",id:"sample-response-16",level:3},{value:"Restore key",id:"restore-key",level:2},{value:"Parameters",id:"parameters-20",level:3},{value:"Sample payload",id:"sample-payload-14",level:3},{value:"Sample request",id:"sample-request-23",level:3},{value:"Trim key",id:"trim-key",level:2},{value:"Parameters",id:"parameters-21",level:3},{value:"Sample payload",id:"sample-payload-15",level:3},{value:"Sample request",id:"sample-request-24",level:3},{value:"Configure cache",id:"configure-cache",level:2},{value:"Parameters",id:"parameters-22",level:3},{value:"Sample payload",id:"sample-payload-16",level:3},{value:"Sample request",id:"sample-request-25",level:3},{value:"Read transit cache configuration",id:"read-transit-cache-configuration",level:2},{value:"Sample request",id:"sample-request-26",level:3},{value:"Sample response",id:"sample-response-17",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"transit-secrets-engine-api",children:"Transit secrets engine (API)"}),"\n",(0,i.jsxs)(n.p,{children:["This is the API documentation for the OpenBao Transit secrets engine. For general\ninformation about the usage and operation of the Transit secrets engine, please\nsee the ",(0,i.jsx)(n.a,{href:"/docs/secrets/transit",children:"transit documentation"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This documentation assumes the transit secrets engine is enabled at the\n",(0,i.jsx)(n.code,{children:"/transit"})," path in OpenBao. Since it is possible to enable secrets engines at any\nlocation, please update your API calls accordingly."]}),"\n",(0,i.jsx)(n.h2,{id:"create-key",children:"Create key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint creates a new named encryption key of the specified type. The\nvalues set here cannot be changed after key creation."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ncreate. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"convergent_encryption"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," \u2013 If enabled, the key will support\nconvergent encryption, where the same plaintext creates the same ciphertext.\nThis requires ",(0,i.jsx)(n.em,{children:"derived"})," to be set to ",(0,i.jsx)(n.code,{children:"true"}),". When enabled, each\nencryption(/decryption/rewrap/datakey) operation will derive a nonce value\nrather than randomly generate it."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"derived"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," \u2013\xa0Specifies if key derivation is to be used. If\nenabled, all encrypt/decrypt requests to this named key must provide a context\nwhich is used for key derivation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exportable"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Enables keys to be exportable. This\nallows for all the valid keys in the key ring to be exported. Once set, this\ncannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_plaintext_backup"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, enables taking backup of\nnamed key in the plaintext format. Once set, this cannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:'(string: "aes256-gcm96")'})," \u2013\xa0Specifies the type of key to create. The\ncurrently-supported types are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aes128-gcm96"})," \u2013 AES-128 wrapped with GCM using a 96-bit nonce size AEAD\n(symmetric, supports derivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aes256-gcm96"})," \u2013 AES-256 wrapped with GCM using a 96-bit nonce size AEAD\n(symmetric, supports derivation and convergent encryption, default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"chacha20-poly1305"})," \u2013 ChaCha20-Poly1305 AEAD (symmetric, supports\nderivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"xchacha20-poly1305"})," \u2013 XChaCha20-Poly1305 AEAD (symmetric, supports\nderivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ed25519"})," \u2013 ED25519 (asymmetric, supports derivation). When using\nderivation, a sign operation with the same context will derive the same\nkey and signature; this is a signing analogue to ",(0,i.jsx)(n.code,{children:"convergent_encryption"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p256"})," \u2013 ECDSA using the P-256 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p384"})," \u2013 ECDSA using the P-384 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p521"})," \u2013 ECDSA using the P-521 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-2048"})," - RSA with bit size of 2048 (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-3072"})," - RSA with bit size of 3072 (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-4096"})," - RSA with bit size of 4096 (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hmac"})," - HMAC (HMAC generation, verification)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_size"})," ",(0,i.jsx)(n.code,{children:'(int: "0", optional)'})," - The key size in bytes for algorithms\nthat allow variable key sizes.  Currently only applicable to HMAC, where\nit must be between 32 and 512 bytes."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"auto_rotate_period"})," ",(0,i.jsx)(n.code,{children:'(duration: "0", optional)'}),' \u2013 The period at which\nthis key should be rotated automatically. Setting this to "0" (the default)\nwill disable automatic key rotation. This value cannot be shorter than one\nhour. Uses ',(0,i.jsx)(n.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "ecdsa-p256",\n  "derived": true\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key\n'})}),"\n",(0,i.jsx)(n.h2,{id:"import-key",children:"Import key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint imports existing key material into a new transit-managed encryption key.\nTo import key material into an existing key, see the ",(0,i.jsx)(n.code,{children:"import_version/"})," endpoint."]}),"\n",(0,i.jsx)(n.p,{children:"This supports one of two forms:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Private/Symmetric Key import, requiring the ",(0,i.jsx)(n.code,{children:"ciphertext"}),", ",(0,i.jsx)(n.code,{children:"hash_function"}),"\nparameters be set (and automatically deriving the public key), or"]}),"\n",(0,i.jsxs)(n.li,{children:["Public Key-only import, restricting the operations that can be done with\nthis key, and requiring only the ",(0,i.jsx)(n.code,{children:"public_key"})," parameter."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The remaining parameters (including ",(0,i.jsx)(n.code,{children:"name"}),", ",(0,i.jsx)(n.code,{children:"type"}),", ",(0,i.jsx)(n.code,{children:"allow_rotation"}),",\n",(0,i.jsx)(n.code,{children:"derived"}),", ",(0,i.jsx)(n.code,{children:"context"}),", ",(0,i.jsx)(n.code,{children:"exportable"}),", ",(0,i.jsx)(n.code,{children:"allow_plaintext_backup"}),", and\n",(0,i.jsx)(n.code,{children:"auto_rotate_period"}),") remain the same across both versions of this call."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name/import"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ncreate. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ciphertext"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - A base64-encoded string that contains\ntwo values: an ephemeral 256-bit AES key wrapped using the wrapping key\nreturned by OpenBao and the encryption of the import key material under the\nprovided AES key. The wrapped AES key should be the first 512 bytes of the\nciphertext, and the encrypted key material should be the remaining bytes.\nSee the BYOK section of the ",(0,i.jsx)(n.a,{href:"/docs/secrets/transit#bring-your-own-key-byok",children:"Transit secrets engine documentation"}),"\nfor more information on constructing the ciphertext. If ",(0,i.jsx)(n.code,{children:"public_key"})," is set,\nthis field is not required."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"hash_function"})," ",(0,i.jsx)(n.code,{children:'(string: "SHA256")'})," - The hash function used for the\nRSA-OAEP step of creating the ciphertext. Supported hash functions are:\n",(0,i.jsx)(n.code,{children:"SHA1"}),", ",(0,i.jsx)(n.code,{children:"SHA224"}),", ",(0,i.jsx)(n.code,{children:"SHA256"}),", ",(0,i.jsx)(n.code,{children:"SHA384"}),", and ",(0,i.jsx)(n.code,{children:"SHA512"}),". If not specified,\nthe hash function defaults to SHA256."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the type of key to create. The\ncurrently-supported types are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aes128-gcm96"})," \u2013 AES-128 wrapped with GCM using a 96-bit nonce size AEAD\n(symmetric, supports derivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aes256-gcm96"})," \u2013 AES-256 wrapped with GCM using a 96-bit nonce size AEAD\n(symmetric, supports derivation and convergent encryption, default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"chacha20-poly1305"})," \u2013 ChaCha20-Poly1305 AEAD (symmetric, supports\nderivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"xchacha20-poly1305"})," \u2013 XChaCha20-Poly1305 AEAD (symmetric, supports\nderivation and convergent encryption)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ed25519"})," \u2013 ED25519 (asymmetric, supports derivation). When using\nderivation, a sign operation with the same context will derive the same\nkey and signature; this is a signing analogue to ",(0,i.jsx)(n.code,{children:"convergent_encryption"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p256"})," \u2013 ECDSA using the P-256 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p384"})," \u2013 ECDSA using the P-384 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ecdsa-p521"})," \u2013 ECDSA using the P-521 elliptic curve (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-2048"})," - RSA with bit size of 2048 (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-3072"})," - RSA with bit size of 3072 (asymmetric)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rsa-4096"})," - RSA with bit size of 4096 (asymmetric)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public_key"})," ",(0,i.jsx)(n.code,{children:'(string: "", optional)'})," - A plaintext PEM public key to be\nimported. This limits the operations available under this key to verification\nand encryption, depending on the key type and algorithm, as no private key\nis available."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_rotation"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, the imported key can be rotated\nwithin OpenBao by using the ",(0,i.jsx)(n.code,{children:"rotate"})," endpoint."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE"}),": Once an imported key is rotated within OpenBao, it will no longer\nsupport importing key material with the ",(0,i.jsx)(n.code,{children:"import_version"})," endpoint."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"derived"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," \u2013\xa0Specifies if key derivation is to be used. If\nenabled, all encrypt/decrypt requests to this named key must provide a context\nwhich is used for key derivation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - A base64-encoded string providing a context for\nkey derivation. Required if ",(0,i.jsx)(n.code,{children:"derived"})," is set to ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exportable"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Enables keys to be exportable. This\nallows for all the valid keys in the key ring to be exported. Once set, this\ncannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_plaintext_backup"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, enables taking backup of\nnamed key in the plaintext format. Once set, this cannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"auto_rotate_period"})," ",(0,i.jsx)(n.code,{children:'(duration: "0", optional)'}),' \u2013 The period at which\nthis key should be rotated automatically. Setting this to "0" (the default)\nwill disable automatic key rotation. This value cannot be shorter than one\nhour.']}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-1",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "ed25519",\n  "ciphertext": "..."\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-1",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key/import\n'})}),"\n",(0,i.jsx)(n.h2,{id:"import-key-version",children:"Import key version"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint imports new key material into an existing imported key."}),"\n",(0,i.jsxs)(n.p,{children:["See description and note in ",(0,i.jsx)(n.a,{href:"#import-key",children:"Import Key"})," above about importing\npublic and private keys."]}),"\n",(0,i.jsx)(n.p,{children:"Notably, using this method, a private key matching a public key can be\nimported at a later date."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name/import_version"})})]})})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": Keys whose material was generated by OpenBao do not support\nimporting key material. Only keys that were previously imported into\nOpenBao can import new key material from an external source."]})}),"\n",(0,i.jsx)(n.h3,{id:"parameters-2",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ncreate. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ciphertext"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - A base64-encoded string that contains\ntwo values: an ephemeral 256-bit AES key wrapped using the wrapping key\nreturned by OpenBao and the encryption of the import key material under the\nprovided AES key. The wrapped AES key should be the first 512 bytes of the\nciphertext, and the encrypted key material should be the remaining bytes.\nSee the BYOK section of the ",(0,i.jsx)(n.a,{href:"/docs/secrets/transit#bring-your-own-key-byok",children:"Transit secrets engine documentation"}),"\nfor more information on constructing the ciphertext."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"hash_function"})," ",(0,i.jsx)(n.code,{children:'(string: "SHA256")'})," - The hash function used for the\nRSA-OAEP step of creating the ciphertext. Supported hash functions are:\n",(0,i.jsx)(n.code,{children:"SHA1"}),", ",(0,i.jsx)(n.code,{children:"SHA224"}),", ",(0,i.jsx)(n.code,{children:"SHA256"}),", ",(0,i.jsx)(n.code,{children:"SHA384"}),", and ",(0,i.jsx)(n.code,{children:"SHA512"}),". If not specified,\nthe hash function defaults to SHA256."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public_key"})," ",(0,i.jsx)(n.code,{children:'(string: "", optional)'})," - A plaintext PEM public key to be\nimported. This limits the operations available under this key to verification\nand encryption, depending on the key type and algorithm, as no private key\nis available."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"version"})," ",(0,i.jsx)(n.code,{children:"(int, optional)"})," - Key version to be updated, if left empty,\na new version will be created unless a private key is specified and the\n'Latest' key is missing a private key."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-2",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ciphertext": "..."\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-2",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key/import_version\n'})}),"\n",(0,i.jsx)(n.h2,{id:"get-wrapping-key",children:"Get wrapping key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint is used to retrieve the wrapping key to use for importing keys.\nThe returned key will be a 4096-bit RSA public key."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/wrapping_key"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-3",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request GET \\\n    http://127.0.0.1:8200/v1/transit/wrapping_key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "public_key": "..."\n  },\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"read-key",children:"Read key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns information about a named encryption key. The ",(0,i.jsx)(n.code,{children:"keys"}),"\nobject shows the creation time of each key version; the values are not the keys\nthemselves. Depending on the type of key, different information may be returned,\ne.g. an asymmetric key will return its public key in a standard format for the\ntype."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-3",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\nread. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-4",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-1",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "type": "aes256-gcm96",\n    "deletion_allowed": false,\n    "derived": false,\n    "exportable": false,\n    "allow_plaintext_backup": false,\n    "keys": {\n      "1": 1442851412\n    },\n    "min_decryption_version": 1,\n    "min_encryption_version": 0,\n    "name": "foo",\n    "supports_encryption": true,\n    "supports_decryption": true,\n    "supports_derivation": true,\n    "supports_signing": false,\n    "imported": false\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"keys"})," attribute lists each version of the key, and the time that key was created as seconds since the Unix epoch.\nThe sample response shows a key that was created on September 22, 2015 7:50:12 PM GMT, and has not been rotated."]}),"\n",(0,i.jsxs)(n.p,{children:["The fields ",(0,i.jsx)(n.code,{children:"supports_encryption"}),", ",(0,i.jsx)(n.code,{children:"supports_decryption"}),", ",(0,i.jsx)(n.code,{children:"supports_derivation"})," and ",(0,i.jsx)(n.code,{children:"supports_signing"})," are\nderived from the type of the key, and indicate which operations may be performed with it."]}),"\n",(0,i.jsx)(n.h2,{id:"list-keys",children:"List keys"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns a list of keys. Only the key names are returned (not the\nactual keys themselves)."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"LIST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-5",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request LIST \\\n    http://127.0.0.1:8200/v1/transit/keys\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-2",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "keys": ["foo", "bar"]\n  },\n  "lease_duration": 0,\n  "lease_id": "",\n  "renewable": false\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"delete-key",children:"Delete key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint deletes a named encryption key. It will no longer be possible to\ndecrypt any data encrypted with the named key. Because this is a potentially\ncatastrophic operation, the ",(0,i.jsx)(n.code,{children:"deletion_allowed"})," tunable must be set in the key's\n",(0,i.jsx)(n.code,{children:"/config"})," endpoint."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"DELETE"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-4",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ndelete. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-6",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request DELETE \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key\n'})}),"\n",(0,i.jsx)(n.h2,{id:"update-key-configuration",children:"Update key configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows tuning configuration values for a given key. (These values\nare returned during a read operation on the named key.)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name/config"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-5",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"min_decryption_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the minimum version of\nciphertext allowed to be decrypted. Adjusting this as part of a key rotation\npolicy can prevent old copies of ciphertext from being decrypted, should they\nfall into the wrong hands. For signatures, this value controls the minimum\nversion of signature that can be verified against. For HMACs, this controls\nthe minimum version of a key allowed to be used as the key for verification."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"min_encryption_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the minimum version of the\nkey that can be used to encrypt plaintext, sign payloads, or generate HMACs.\nMust be ",(0,i.jsx)(n.code,{children:"0"})," (which will use the latest version) or a value greater or equal\nto ",(0,i.jsx)(n.code,{children:"min_decryption_version"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"deletion_allowed"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies if the key is allowed to be\ndeleted."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"exportable"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Enables keys to be exportable. This\nallows for all the valid keys in the key ring to be exported. Once set, this\ncannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"allow_plaintext_backup"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, enables taking backup of\nnamed key in the plaintext format. Once set, this cannot be disabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"auto_rotate_period"})," ",(0,i.jsx)(n.code,{children:'(duration: "", optional)'}),' \u2013 The period at which this\nkey should be rotated automatically. Setting this to "0" will disable automatic\nkey rotation. This value cannot be shorter than one hour. When no value is\nprovided, the period remains unchanged. Uses ',(0,i.jsx)(n.a,{href:"/docs/concepts/duration-format",children:"duration format strings"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-3",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "deletion_allowed": true\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-7",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key/config\n'})}),"\n",(0,i.jsx)(n.h2,{id:"rotate-key",children:"Rotate key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint rotates the version of the named key. After rotation, new\nplaintext requests will be encrypted with the new version of the key. To upgrade\nciphertext to be encrypted with the latest version of the key, use the ",(0,i.jsx)(n.code,{children:"rewrap"}),"\nendpoint. This is only supported with keys that support encryption and\ndecryption operations."]}),"\n",(0,i.jsx)(n.p,{children:"For algorithms with a configurable key size, the rotated key will use the same\nkey size as the previous version."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": For imported keys, rotation is only supported if the\n",(0,i.jsx)(n.code,{children:"allow_rotation"})," field was set to ",(0,i.jsx)(n.code,{children:"true"})," on import. Once an imported key is\nrotated within OpenBao, it will not support further import operations."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name/rotate"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-6",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"managed_key_name"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - The name of the managed key to use for this transit key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"managed_key_id"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - The UUID of the managed key to use for this transit key."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": If the key to be rotated is of type ",(0,i.jsx)(n.code,{children:"managed_key"}),", either the ",(0,i.jsx)(n.code,{children:"managed_key_name"})," or\nthe ",(0,i.jsx)(n.code,{children:"managed_key_id"})," for the new key must be provided."]})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-8",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key/rotate\n'})}),"\n",(0,i.jsx)(n.h2,{id:"securely-export-key",children:"Securely export key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns a wrapped copy of the ",(0,i.jsx)(n.code,{children:"source"})," key, protected by the\n",(0,i.jsx)(n.code,{children:"destination"})," key using BYOK method accepted by the\n",(0,i.jsx)(n.code,{children:"/transit/keys/:name/import"})," API. This allows an operator using two separate\nOpenBao instances to secure established shared key material, withing exposing\neither key in plaintext and needing to run a manual BYOK import using the\nCLI helper utility."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/byok-export/:destination/:source(/:version)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-7",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"destination"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the name of the key to\nencrypt the ",(0,i.jsx)(n.code,{children:"source"})," key to: this is usually another mount or cluster's\nwrapping key (from ",(0,i.jsx)(n.code,{children:"/transit/wrapping_key"}),"). This is specified as part of\nthe URL."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Note: This destination key type must be an RSA key type."})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"source"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Specifies the source key to encrypt, to\ncopy (encrypted) to another cluster. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"version"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies the version of the source key to\nwrap. If omitted, all versions of the key will be returned. This is\nspecified as part of the URL. If the version is set to ",(0,i.jsx)(n.code,{children:"latest"}),", the\ncurrent key will be returned."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-9",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/transit/byok-export/wrapping-key/to-be-shared-key/1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-3",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "name": "foo",\n    "keys": {\n      "1": "H/0T+CKQ8I82KJWpPk ... additional response elided ...",\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"export-key",children:"Export key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns the named key. The ",(0,i.jsx)(n.code,{children:"keys"})," object shows the value of the\nkey for each version. If ",(0,i.jsx)(n.code,{children:"version"})," is specified, the specific version will be\nreturned. If ",(0,i.jsx)(n.code,{children:"latest"})," is provided as the version, the current key will be\nprovided. Depending on the type of key, different information may be returned.\nThe key must be exportable to support this operation and the version must still\nbe valid."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/export/:key_type/:name(/:version)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-8",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the type of the key to export.\nThis is specified as part of the URL. Valid values are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"encryption-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"signing-key"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"hmac-key"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public-key"}),", to return the corresponding public keys of private key\nasymmetric keys (EC with NIST P-curves or Ed25519 and RSA)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the key to read\ninformation about. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"version"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the version of the key to read. If omitted,\nall versions of the key will be returned. This is specified as part of the\nURL. If the version is set to ",(0,i.jsx)(n.code,{children:"latest"}),", the current key will be returned."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-10",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/transit/export/encryption-key/my-key/1\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-4",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "name": "foo",\n    "keys": {\n      "1": "eyXYGHbTmugUJn6EtYD/yVEoF6pCxm4R/cMEutUm3MY=",\n      "2": "Euzymqx6iXjS3/NuGKDCiM2Ev6wdhnU+rBiKnJ7YpHE="\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"write-keys-configuration",children:"Write keys configuration"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint maintains global configuration across all keys. This\nallows removing the upsert capability of the ",(0,i.jsx)(n.code,{children:"/encrypt/:key"})," endpoint,\npreventing new keys from being created if none exists."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/config/keys"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-9",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"disable_upsert"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Specifies whether to disable upserting on\nencryption (automatic creation of unknown keys)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-4",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "disable_upsert": true\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-11",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/config/keys\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-5",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "disable_upsert": true,\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"read-keys-configuration",children:"Read keys configuration"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint maintains global configuration across all keys. This\nallows removing the upsert capability of the ",(0,i.jsx)(n.code,{children:"/encrypt/:key"})," endpoint,\npreventing new keys from being created if none exists."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/config/keys"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-12",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/transit/config/keys\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-6",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "disable_upsert": false,\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"encrypt-data",children:"Encrypt data"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint encrypts the provided plaintext using the named key. This path\nsupports the ",(0,i.jsx)(n.code,{children:"create"})," and ",(0,i.jsx)(n.code,{children:"update"})," policy capabilities as follows: if the user\nhas the ",(0,i.jsx)(n.code,{children:"create"})," capability for this endpoint in their policies, and the key\ndoes not exist, it will be upserted with default values (whether the key\nrequires derivation depends on whether the context parameter is empty or not).\nIf the user only has ",(0,i.jsx)(n.code,{children:"update"})," capability and the key does not exist, an error\nwill be returned."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Note: If upsert is disallowed by global keys configuration, ",(0,i.jsx)(n.code,{children:"create"}),"\nrequests will behave like ",(0,i.jsx)(n.code,{children:"update"})," requests."]})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/encrypt/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-10",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\nencrypt against. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"plaintext"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," plaintext to\nbe encoded."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"associated_data"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," associated\ndata (also known as additional data or AAD) to also be authenticated with\nAEAD ciphers (",(0,i.jsx)(n.code,{children:"aes128-gcm96"}),", ",(0,i.jsx)(n.code,{children:"aes256-gcm"}),", ",(0,i.jsx)(n.code,{children:"chacha20-poly1305"}),", and\n",(0,i.jsx)(n.code,{children:"xchacha20-poly1305"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," context for key\nderivation. This is required if key derivation is enabled for this key."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the version of the key to use for\nencryption. If not set, uses the latest version. Must be greater than or\nequal to the key's ",(0,i.jsx)(n.code,{children:"min_encryption_version"}),", if set."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nonce"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013 Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," nonce value. The\nvalue must be exactly 96 bits (12 bytes) long and the user must ensure that\nfor any given context (and thus, any given encryption key) this nonce value is\n",(0,i.jsx)(n.strong,{children:"never reused"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items to be\nencrypted in a single batch. When this parameter is set, if the parameters\n'plaintext' and 'context' are also set, they will be ignored.\nAny batch output will preserve the order of the batch input. The\nformat for the input is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "context": "c2FtcGxlY29udGV4dA==",\n    "plaintext": "dGhlIHF1aWNrIGJyb3duIGZveA=="\n  },\n  {\n    "context": "YW5vdGhlcnNhbXBsZWNvbnRleHQ=",\n    "plaintext": "dGhlIHF1aWNrIGJyb3duIGZveA=="\n  }\n]\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:'(string: "aes256-gcm96")'})," \u2013This parameter is required when encryption\nkey is expected to be created. When performing an upsert operation, the type\nof key to create."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"convergent_encryption"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0This parameter will only be used when\na key is expected to be created. Whether to support convergent encryption.\nThis is only supported when using a key with key derivation enabled and will\nrequire all requests to carry both a context and 96-bit (12-byte) for AES and\nChaCha20 or 192-bit (24-byte) for XChaCha20 nonce. The given nonce will be used\nin place of a randomly generated nonce. As a result, when the same context and\nnonce are supplied, the same ciphertext is generated. It is ",(0,i.jsx)(n.em,{children:"very important"})," when\nusing this mode that you ensure that all nonces are unique for a given context.\nFailing to do so will severely impact the ciphertext's security."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"partial_failure_response_code"})," ",(0,i.jsx)(n.code,{children:"(int: 400)"})," Ordinarily, if a batch item fails\nto encrypt due to a bad input, but other batch items succeed, the HTTP response\ncode is 400 (Bad Request).  Some applications may want to treat partial failures\ndifferently.  Providing the parameter returns the given response code integer\ninstead of a failed status code in this case. If all values fail an error\ncode is still returned.  Be warned that some failures (such as failure to\ndecrypt) could be indicative of a security breach and should not be\nignored."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," All plaintext data ",(0,i.jsx)(n.strong,{children:"must be base64-encoded"}),'. The reason for this\nrequirement is that OpenBao does not require that the plaintext is "text". It\ncould be a binary file such as a PDF or image. The easiest safe transport\nmechanism for this data as part of a JSON payload is to base64-encode it.']})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-5",children:"Sample payload"}),"\n",(0,i.jsx)(n.p,{children:"Fist, encode the plaintext with base64:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ echo "the quick brown fox" | base64\ndGhlIHF1aWNrIGJyb3duIGZveAo=\n'})}),"\n",(0,i.jsx)(n.p,{children:"Use the base64-encoded plaintext in the payload:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "plaintext": "dGhlIHF1aWNrIGJyb3duIGZveAo="\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["OpenBao HTTP API imposes a maximum request size of 32MB to prevent a denial of service attack. This can be tuned per ",(0,i.jsxs)(n.a,{href:"/docs/configuration/listener/tcp",children:[(0,i.jsx)(n.code,{children:"listener"})," block"]})," in the OpenBao server configuration."]})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-13",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/encrypt/my-key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-7",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "ciphertext": "vault:v1:XjsPWPjqPrBi1N2Ms2s1QM798YyFWnO4TR4lsFA="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"decrypt-data",children:"Decrypt data"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint decrypts the provided ciphertext using the named key."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/decrypt/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-11",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ndecrypt against. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ciphertext"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the ciphertext to decrypt."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"associated_data"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Specifies ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," associated\ndata (also known as additional data or AAD) to also be authenticated with\nAEAD ciphers (",(0,i.jsx)(n.code,{children:"aes128-gcm96"}),", ",(0,i.jsx)(n.code,{children:"aes256-gcm"}),", ",(0,i.jsx)(n.code,{children:"chacha20-poly1305"}),", and\n",(0,i.jsx)(n.code,{children:"xchacha20-poly1305"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013 Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," context for key\nderivation. This is required if key derivation is enabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nonce"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies a base64 encoded nonce value used during\nencryption."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items to be\ndecrypted in a single batch. When this parameter is set, if the parameters\n'ciphertext' and 'context' are also set, they will be ignored.\nAny batch output will preserve the order of the batch input. Format\nfor the input goes like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "context": "c2FtcGxlY29udGV4dA==",\n    "ciphertext": "vault:v1:/DupSiSbX/ATkGmKAmhqD0tvukByrx6gmps7dVI="\n  },\n  {\n    "context": "YW5vdGhlcnNhbXBsZWNvbnRleHQ=",\n    "ciphertext": "vault:v1:XjsPWPjqPrBi1N2Ms2s1QM798YyFWnO4TR4lsFA="\n  }\n]\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"partial_failure_response_code"})," ",(0,i.jsx)(n.code,{children:"(int: 400)"})," Ordinarily, if a batch item fails\nto encrypt due to a bad input, but other batch items succeed, the HTTP response\ncode is 400 (Bad Request).  Some applications may want to treat partial failures\ndifferently.  Providing the parameter returns the given response code integer\ninstead of a failed status code in this case. If all values fail an error\ncode is still returned.  Be warned that some failures (such as failure to\ndecrypt) could be indicative of a security breach and should not be\nignored."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-6",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ciphertext": "vault:v1:XjsPWPjqPrBi1N2Ms2s1QM798YyFWnO4TR4lsFA="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-14",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/decrypt/my-key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-8",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "plaintext": "dGhlIHF1aWNrIGJyb3duIGZveAo="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"rewrap-data",children:"Rewrap data"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint rewraps the provided ciphertext using the latest version of the\nnamed key. Because this never returns plaintext, it is possible to delegate this\nfunctionality to untrusted users or scripts."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/rewrap/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-12",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\nre-encrypt against. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ciphertext"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the ciphertext to re-encrypt."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013 Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," context for key\nderivation. This is required if key derivation is enabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the version of the key to use for the\noperation. If not set, uses the latest version. Must be greater than or equal\nto the key's ",(0,i.jsx)(n.code,{children:"min_encryption_version"}),", if set."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nonce"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies a base64 encoded nonce value used during\nencryption."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items to be\nre-encrypted in a single batch. When this parameter is set, if the parameters\n'ciphertext' and 'context' are also set, they will be ignored.\nAny batch output will preserve the order of the batch input. Format\nfor the input goes like this:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "context": "c2FtcGxlY29udGV4dA==",\n    "ciphertext": "vault:v1:/DupSiSbX/ATkGmKAmhqD0tvukByrx6gmps7dVI="\n  },\n  {\n    "context": "YW5vdGhlcnNhbXBsZWNvbnRleHQ=",\n    "ciphertext": "vault:v1:XjsPWPjqPrBi1N2Ms2s1QM798YyFWnO4TR4lsFA="\n  }\n]\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-7",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ciphertext": "vault:v1:XjsPWPjqPrBi1N2Ms2s1QM798YyFWnO4TR4lsFA="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-15",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/rewrap/my-key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-9",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "ciphertext": "vault:v2:abcdefgh"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"generate-data-key",children:"Generate data key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint generates a new high-entropy key and the value encrypted with the\nnamed key. Optionally return the plaintext of the key as well. Whether plaintext\nis returned depends on the path; as a result, you can use OpenBao ACL policies to\ncontrol whether a user is allowed to retrieve the plaintext value of a key. This\nis useful if you want an untrusted user or operation to generate keys that are\nthen made available to trusted users."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/datakey/:type/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-13",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"type"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the type of key to generate. If\n",(0,i.jsx)(n.code,{children:"plaintext"}),", the plaintext key will be returned along with the ciphertext. If\n",(0,i.jsx)(n.code,{children:"wrapped"}),", only the ciphertext value will be returned. This is specified as\npart of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\nuse to encrypt the datakey. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the key derivation context, provided as a\nbase64-encoded string. This must be provided if derivation is enabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"nonce"})," ",(0,i.jsx)(n.code,{children:'(string: "")'}),"\xa0\u2013 Specifies a nonce value, provided as base64 encoded.\nThe value must be exactly 96 bits (12 bytes) long and the user must ensure\nthat for any given context (and thus, any given encryption key) this nonce\nvalue is ",(0,i.jsx)(n.strong,{children:"never reused"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bits"})," ",(0,i.jsx)(n.code,{children:"(int: 256)"})," \u2013\xa0Specifies the number of bits in the desired key. Can be\n128, 256, or 512."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-8",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "context": "Ab3=="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-16",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/datakey/plaintext/my-key\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-10",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "plaintext": "dGhlIHF1aWNrIGJyb3duIGZveAo=",\n    "ciphertext": "vault:v1:abcdefgh"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"generate-random-bytes",children:"Generate random bytes"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns high-quality random bytes of the specified length."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/random(/:source)(/:bytes)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-14",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"bytes"})," ",(0,i.jsx)(n.code,{children:"(int: 32)"})," \u2013\xa0Specifies the number of bytes to return. This value can\nbe specified either in the request body, or as a part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "base64")'})," \u2013 Specifies the output encoding. Valid options\nare ",(0,i.jsx)(n.code,{children:"hex"})," or ",(0,i.jsx)(n.code,{children:"base64"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"source"})," ",(0,i.jsx)(n.code,{children:'(string: "platform")'})," - Specifies the source of the requested bytes.\n",(0,i.jsx)(n.code,{children:"platform"}),", the default, sources bytes from the platform's entropy source.\n",(0,i.jsx)(n.code,{children:"all"})," mixes bytes from all available sources."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-9",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "format": "hex"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-17",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/random/164\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-11",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "random_bytes": "dGhlIHF1aWNrIGJyb3duIGZveAo="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"hash-data",children:"Hash data"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns the cryptographic hash of given data using the specified\nalgorithm."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/hash(/:algorithm)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-15",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "sha2-256")'})," \u2013 Specifies the hash algorithm to use. This\ncan also be specified as part of the URL. Currently-supported algorithms are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-512"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"sha3-224"}),", ",(0,i.jsx)(n.code,{children:"sha3-256"}),", ",(0,i.jsx)(n.code,{children:"sha3-384"}),", and\n",(0,i.jsx)(n.code,{children:"sha3-512"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"input"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013\xa0Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," input data."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"format"})," ",(0,i.jsx)(n.code,{children:'(string: "hex")'})," \u2013\xa0Specifies the output encoding. This can be either\n",(0,i.jsx)(n.code,{children:"hex"})," or ",(0,i.jsx)(n.code,{children:"base64"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-10",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "input": "adba32=="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-18",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/hash/sha2-512\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-12",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "sum": "dGhlIHF1aWNrIGJyb3duIGZveAo="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"generate-hmac",children:"Generate HMAC"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns the digest of given data using the specified hash\nalgorithm and the named key. The key can be of any type supported by ",(0,i.jsx)(n.code,{children:"transit"}),",\nas each ",(0,i.jsx)(n.code,{children:"transit"})," key version has an independent, random 256-bit HMAC secret key. If\nthe key is of a type that supports rotation, the latest (current) version will\nbe used."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/hmac/:name(/:algorithm)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-16",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\ngenerate hmac against. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the version of the key to use for the\noperation. If not set, uses the latest version. Must be greater than or equal\nto the key's ",(0,i.jsx)(n.code,{children:"min_encryption_version"}),", if set."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "sha2-256")'})," \u2013 Specifies the hash algorithm to use. This\ncan also be specified as part of the URL. Currently-supported algorithms are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-512"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"sha3-224"}),", ",(0,i.jsx)(n.code,{children:"sha3-256"}),", ",(0,i.jsx)(n.code,{children:"sha3-384"}),", and\n",(0,i.jsx)(n.code,{children:"sha3-512"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"input"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," input data. One of\n",(0,i.jsx)(n.code,{children:"input"})," or ",(0,i.jsx)(n.code,{children:"batch_input"})," must be supplied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items for processing.\nWhen this parameter is set, if the parameter 'input' is also set, it will be\nignored. Responses are returned in the 'batch_results' array component of the\n'data' element of the response. Any batch output will preserve the order of\nthe batch input. If the input data value of an item is invalid, the\ncorresponding item in the 'batch_results' will have the key 'error' with a value\ndescribing the error. The format for batch_input is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "batch_input": [\n    {\n      "input": "adba32=="\n    },\n    {\n      "input": "aGVsbG8gd29ybGQuCg=="\n    }\n  ]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-19",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/hmac/my-key/sha2-512\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-11",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "input": "adba32=="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-13",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "hmac": "dGhlIHF1aWNrIGJyb3duIGZveAo="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-with-batch_input",children:"Sample payload with batch_input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "batch_input": [\n    {\n      "input": "adba32=="\n    },\n    {\n      "input": "adba32=="\n    },\n    {},\n    {\n      "input": ""\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-for-batch_input",children:"Sample response for batch_input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "batch_results": [\n      {\n        "hmac": "vault:v1:1jFhRYWHiddSKgEFyVRpX8ieX7UU+748NBwHKecXE3hnGBoAxrfgoD5U0yAvji7b5X6V1fP"\n      },\n      {\n        "hmac": "vault:v1:1jFhRYWHiddSKgEFyVRpX8ieX7UU+748NBwHKecXE3hnGBoAxrfgoD5U0yAvji7b5X6V1fP"\n      },\n      {\n        "error": "missing input for HMAC"\n      },\n      {\n        "hmac": "vault:v1:/wsSP6iQ9ECO9RRkefKLXey9sDntzSjoiW0vBrWfUsYB0ISroyC6plUt/jN7gcOv9O+Ecow"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"sign-data",children:"Sign data"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns the cryptographic signature of the given data using the\nnamed key and the specified hash algorithm. The key must be of a type that\nsupports signing."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/sign/:name(/:hash_algorithm)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-17",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key to\nuse for signing. This is specified as part of the URL."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key_version"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," \u2013\xa0Specifies the version of the key to use for\nsigning. If not set, uses the latest version. Must be greater than or equal\nto the key's ",(0,i.jsx)(n.code,{children:"min_encryption_version"}),", if set."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"hash_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "sha2-256")'})," \u2013 Specifies the hash algorithm to use for\nsupporting key types (notably, not including ",(0,i.jsx)(n.code,{children:"ed25519"})," which specifies its\nown hash algorithm). This can also be specified as part of the URL.\nCurrently-supported algorithms are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha1"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"none"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"sha3-224"}),", ",(0,i.jsx)(n.code,{children:"sha3-256"}),", ",(0,i.jsx)(n.code,{children:"sha3-384"}),", and\n",(0,i.jsx)(n.code,{children:"sha3-512"}),"."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["** Warning:** ",(0,i.jsx)(n.code,{children:"sha1"})," should be considered a compromised algorithm and used\nonly for legacy applications. Signing using SHA-1 can be blocked by operators by\nassigning the following policy corresponding to a named key:"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'path "/transit/sign/:name/sha1" {\n  capabilities = ["deny"]\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": using ",(0,i.jsx)(n.code,{children:"hash_algorithm=none"})," requires setting ",(0,i.jsx)(n.code,{children:"prehashed=true"}),"\nand ",(0,i.jsx)(n.code,{children:"signature_algorithm=pkcs1v15"}),". This generates a ",(0,i.jsx)(n.code,{children:"PKCSv1_5_NoOID"}),"\nsignature rather than the ",(0,i.jsx)(n.code,{children:"PKCSv1_5_DERnull"})," signature type usually\ncreated. See ",(0,i.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc3447#section-9.2",children:"RFC 3447 Section 9.2"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"input"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," input data. One of\n",(0,i.jsx)(n.code,{children:"input"})," or ",(0,i.jsx)(n.code,{children:"batch_input"})," must be supplied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items for processing.\nWhen this parameter is set, any supplied 'input' or 'context' parameters will be\nignored. Responses are returned in the 'batch_results' array component of the\n'data' element of the response. Any batch output will preserve the order of the\nbatch input. If the input data value of an item is invalid, the\ncorresponding item in the 'batch_results' will have the key 'error' with a value\ndescribing the error. The format for batch_input is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "batch_input": [\n    {\n      "input": "adba32==",\n      "context": "abcd"\n    },\n    {\n      "input": "aGVsbG8gd29ybGQuCg==",\n      "context": "efgh"\n    }\n  ]\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Base64 encoded context for key derivation.\nRequired if key derivation is enabled; currently only available with ed25519\nkeys."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"prehashed"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to ",(0,i.jsx)(n.code,{children:"true"})," when the input is already hashed.\nIf the key type is ",(0,i.jsx)(n.code,{children:"rsa-2048"}),", ",(0,i.jsx)(n.code,{children:"rsa-3072"})," or ",(0,i.jsx)(n.code,{children:"rsa-4096"}),", then the algorithm used to hash\nthe input should be indicated by the ",(0,i.jsx)(n.code,{children:"hash_algorithm"})," parameter. Just as the\nvalue to sign should be the base64-encoded representation of the exact binary\ndata you want signed, when set, ",(0,i.jsx)(n.code,{children:"input"})," is expected to be base64-encoded\nbinary hashed data, not hex-formatted. (As an example, on the command line,\nyou could generate a suitable input via ",(0,i.jsx)(n.code,{children:"openssl dgst -sha256 -binary | base64"}),".)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "pss")'})," \u2013\xa0When using a RSA key, specifies the RSA\nsignature algorithm to use for signing. Supported signature types are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pss"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pkcs1v15"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"marshaling_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "asn1")'})," \u2013\xa0Specifies the way in which the signature should be marshaled. This currently only applies to ECDSA keys. Supported types are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"asn1"}),": The default, used by OpenSSL and X.509"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"jws"}),": The version used by JWS (and thus for JWTs). Selecting this will\nalso change the output encoding to URL-safe Base64 encoding instead of\nstandard Base64-encoding."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"salt_length"})," ",(0,i.jsx)(n.code,{children:'(string: "auto")'})," \u2013\xa0The salt length used to sign. This currently only applies to the RSA PSS signature scheme. Options are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"auto"}),": The default used by Golang (causing the salt to be as large as possible when signing)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hash"}),": Causes the salt length to equal the length of the hash used in the signature"]}),"\n",(0,i.jsx)(n.li,{children:"An integer between the minimum and the maximum permissible salt lengths for the given RSA key size."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-20",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/sign/my-key/sha2-512\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-12",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "input": "adba32=="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-14",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "signature": "vault:v1:MEUCIQCyb869d7KWuA0hBM9b5NJrmWzMW3/pT+0XYCM9VmGR+QIgWWF6ufi4OS2xo1eS2V5IeJQfsi59qeMWtgX0LipxEHI="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-with-batch_input-1",children:"Sample payload with batch_input"}),"\n",(0,i.jsx)(n.p,{children:"Given an ed25519 key with derived keys set, the context parameter is expected for each batch_input item, and\nthe response will include the derived public key for each item."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "batch_input": [\n    {\n      "input": "adba32==",\n      "context": "efgh"\n    },\n    {\n      "input": "adba32==",\n      "context": "abcd"\n    },\n    {}\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-for-batch_input-1",children:"Sample response for batch_input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "batch_results": [\n      {\n        "signature": "vault:v1:+R3cxAy6j4KriYzAyExU6p1glnyT/eLDSaUZO7gr8a8kgi/zSynNbOBSDJcGaAfLD1OF2hGupYBYTjmZMNoVAA==",\n        "publickey": "2fQIaaem7+EhSGs3jUebAS/8qP2+sUrmxOmgqZIZc0c="\n      },\n      {\n        "signature": "vault:v1:3hBwA88lnuAVJqb5rCCEstzKYaBTeSdejk356BTCE/nKwySOhzQH3mWCvJZwbRptNGa7ia5ykosYYdJz+aIKDA==",\n        "publickey": "goDXuePo7L9z6HOw+a54O4HeV189BLECK9nAUudwp4Y="\n      },\n      {\n        "error": "missing input"\n      }\n    ]\n  },\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"verify-signed-data",children:"Verify signed data"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint returns whether the provided signature is valid for the given\ndata."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/verify/:name(/:hash_algorithm)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-18",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," \u2013 Specifies the name of the encryption key that\nwas used to generate the signature or HMAC."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"hash_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "sha2-256")'})," \u2013 Specifies the hash algorithm to use. This\ncan also be specified as part of the URL. Currently-supported algorithms are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha1"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha2-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-224"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-256"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-384"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"sha3-512"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"none"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": In FIPS 140-2 mode, the following algorithms are not certified\nand thus should not be used: ",(0,i.jsx)(n.code,{children:"sha3-224"}),", ",(0,i.jsx)(n.code,{children:"sha3-256"}),", ",(0,i.jsx)(n.code,{children:"sha3-384"}),", and\n",(0,i.jsx)(n.code,{children:"sha3-512"}),"."]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["** Warning:** ",(0,i.jsx)(n.code,{children:"sha1"})," should be considered a compromised algorithm. Signatures\nverified using the algorithm could be forgeries. Verification using SHA-1 can\nbe blocked by operators by assigning the following policy corresponding to a\nnamed key:"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hcl",children:'path "/transit/verify/:name/sha1" {\n  capabilities = ["deny"]\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": using ",(0,i.jsx)(n.code,{children:"hash_algorithm=none"})," requires setting ",(0,i.jsx)(n.code,{children:"prehashed=true"}),"\nand ",(0,i.jsx)(n.code,{children:"signature_algorithm=pkcs1v15"}),". This verifies a ",(0,i.jsx)(n.code,{children:"PKCSv1_5_NoOID"}),"\nsignature rather than the ",(0,i.jsx)(n.code,{children:"PKCSv1_5_DERnull"})," signature type usually\nverified. See ",(0,i.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc3447#section-9.2",children:"RFC 3447 Section 9.2"}),"."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"input"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the ",(0,i.jsx)(n.strong,{children:"base64 encoded"})," input data. One of\n",(0,i.jsx)(n.code,{children:"input"})," or ",(0,i.jsx)(n.code,{children:"batch_input"})," must be supplied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the signature output from the\n",(0,i.jsx)(n.code,{children:"/transit/sign"})," function. Either this must be supplied or ",(0,i.jsx)(n.code,{children:"hmac"})," must be\nsupplied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"hmac"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," \u2013\xa0Specifies the signature output from the\n",(0,i.jsx)(n.code,{children:"/transit/hmac"})," function. Either this must be supplied or ",(0,i.jsx)(n.code,{children:"signature"})," must be\nsupplied."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"reference"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," -\nA user-supplied string that will be present in the ",(0,i.jsx)(n.code,{children:"reference"})," field on the\ncorresponding ",(0,i.jsx)(n.code,{children:"batch_results"})," item in the response, to assist in understanding\nwhich result corresponds to a particular input. Only valid on batch requests\nwhen using \u2018batch_input\u2019 below."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"batch_input"})," ",(0,i.jsx)(n.code,{children:"(array<object>: nil)"})," \u2013\xa0Specifies a list of items for processing.\nWhen this parameter is set, any supplied 'input', 'hmac' or 'signature' parameters\nwill be ignored. 'batch_input' items should contain an 'input' parameter and\neither an 'hmac' or 'signature' parameter. All items in the batch must consistently\nsupply either 'hmac' or 'signature' parameters. It is an error for some items to\nsupply 'hmac' while others supply 'signature'. Responses are returned in the\n'batch_results' array component of the 'data' element of the response. Any batch\noutput will preserve the order of the batch input. If the input data value of an\nitem is invalid, the corresponding item in the 'batch_results' will have the key\n'error' with a value describing the error. The format for batch_input is:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "batch_input": [\n    {\n      "input": "adba32==",\n      "hmac": "vault:v1:1jFhRYWHiddSKgEFyVRpX8ieX7UU+748NBwHKecXE3hnGBoAxrfgoD5U0yAvji7b5X6V1fP"\n    },\n    {\n      "input": "aGVsbG8gd29ybGQuCg==",\n      "hmac": "vault:v1:/wsSP6iQ9ECO9RRkefKLXey9sDntzSjoiW0vBrWfUsYB0ISroyC6plUt/jN7gcOv9O+Ecow"\n    }\n  ]\n}\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"context"})," ",(0,i.jsx)(n.code,{children:'(string: "")'})," - Base64 encoded context for key derivation.\nRequired if key derivation is enabled; currently only available with ed25519\nkeys."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"prehashed"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - Set to ",(0,i.jsx)(n.code,{children:"true"})," when the input is already\nhashed. If the key type is ",(0,i.jsx)(n.code,{children:"rsa-2048"}),", ",(0,i.jsx)(n.code,{children:"rsa-3072"})," or ",(0,i.jsx)(n.code,{children:"rsa-4096"}),", then the algorithm used\nto hash the input should be indicated by the ",(0,i.jsx)(n.code,{children:"hash_algorithm"})," parameter."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"signature_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "pss")'})," \u2013\xa0When using a RSA key, specifies the RSA\nsignature algorithm to use for signature verification. Supported signature types\nare:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pss"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"pkcs1v15"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"marshaling_algorithm"})," ",(0,i.jsx)(n.code,{children:'(string: "asn1")'})," \u2013\xa0Specifies the way in which the signature was originally marshaled. This currently only applies to ECDSA keys. Supported types are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"asn1"}),": The default, used by OpenSSL and X.509"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"jws"}),": The version used by JWS (and thus for JWTs). Selecting this will\nalso expect the input encoding to URL-safe Base64 encoding instead of\nstandard Base64-encoding."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"salt_length"})," ",(0,i.jsx)(n.code,{children:'(string: "auto")'})," \u2013\xa0The salt length used to sign. This currently only applies to the RSA PSS signature scheme. Options are:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"auto"}),": The default used by Golang (causing the salt to be as large as possible when signing)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hash"}),": Causes the salt length to equal the length of the hash used in the signature"]}),"\n",(0,i.jsx)(n.li,{children:"An integer between the minimum and the maximum permissible salt lengths for the given RSA key size."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-21",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/verify/my-key/sha2-512\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-13",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "input": "abcd13==",\n  "signature": "vault:v1:MEUCIQCyb869d7KWuA..."\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-15",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "valid": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-with-batch_input-2",children:"Sample payload with batch_input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "batch_input": [\n    {\n      "input": "adba32==",\n      "context": "abcd",\n      "signature": "vault:v1:3hBwA88lnuAVJqb5rCCEstzKYaBTeSdejk356BTCE/nKwySOhzQH3mWCvJZwbRptNGa7ia5ykosYYdJz+aIKDA=="\n    },\n    {\n      "input": "adba32==",\n      "context": "efgh",\n      "signature": "vault:v1:3hBwA88lnuAVJqb5rCCEstzKYaBTeSdejk356BTCE/nKwySOhzQH3mWCvJZwbRptNGa7ia5ykosYYdJz+aIKDA=="\n    },\n    {\n      "input": "",\n      "context": "abcd",\n      "signature": "vault:v1:C/pxm5V1RI6kqudLdbLdj5Bpm2P38FKgvxoV69oNXphvJukRcQIqjZO793jCa2JPYPG21Y7vquDWy/Ff4Ma4AQ=="\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-for-batch_input-2",children:"Sample response for batch_input"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "data": {\n    "batch_results": [\n      {\n        "valid": true\n      },\n      {\n        "valid": false\n      },\n      {\n        "valid": true\n      }\n    ]\n  },\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"backup-key",children:"Backup key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint returns a plaintext backup of a named key. The backup contains all\nthe configuration data and keys of all the versions along with the HMAC key.\nThe response from this endpoint can be used with the ",(0,i.jsx)(n.code,{children:"/restore"})," endpoint to\nrestore the key."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/backup/:name"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-19",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Name of the key."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-22",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    http://127.0.0.1:8200/v1/transit/backup/aes\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-16",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "backup": "eyJwb2xpY3kiOnsibmFtZSI6ImFlcyIsImtleXMiOnsiMSI6eyJrZXkiOiJXK3k4Z0dOMHdiTDJLOU95NXFPN1laMGtjdzMvR0ZiNWM4STBzdlNMMnFNPSIsImhtYWNfa2V5IjoiUDBTcjh1YTJaZERNUTdPd2h4RGp1Z0U5d0JSR3Q2QXl6K0t4TzN5Z2M5ST0iLCJ0aW1lIjoiMjAxNy0xMi0wOFQxMTo1MDowOC42MTM4MzctMDU6MDAiLCJlY194IjpudWxsLCJlY195IjpudWxsLCJlY19kIjpudWxsLCJyc2Ffa2V5IjpudWxsLCJwdWJsaWNfa2V5IjoiIiwiY3JlYXRpb25fdGltZSI6MTUxMjc1MTgwOH19LCJkZXJpdmVkIjpmYWxzZSwia2RmIjowLCJjb252ZXJnZW50X2VuY3J5cHRpb24iOmZhbHNlLCJleHBvcnRhYmxlIjpmYWxzZSwibWluX2RlY3J5cHRpb25fdmVyc2lvbiI6MSwibWluX2VuY3J5cHRpb25fdmVyc2lvbiI6MCwibGF0ZXN0X3ZlcnNpb24iOjEsImFyY2hpdmVfdmVyc2lvbiI6MSwiZGVsZXRpb25fYWxsb3dlZCI6ZmFsc2UsImNvbnZlcmdlbnRfdmVyc2lvbiI6MCwidHlwZSI6MCwiYmFja3VwX2luZm8iOnsidGltZSI6IjIwMTctMTItMDhUMTE6NTA6MjkuMjI4MTU3LTA1OjAwIiwidmVyc2lvbiI6MX0sInJlc3RvcmVfaW5mbyI6bnVsbH0sImFyY2hpdmVkX2tleXMiOnsia2V5cyI6W3sia2V5IjpudWxsLCJobWFjX2tleSI6bnVsbCwidGltZSI6IjAwMDEtMDEtMDFUMDA6MDA6MDBaIiwiZWNfeCI6bnVsbCwiZWNfeSI6bnVsbCwiZWNfZCI6bnVsbCwicnNhX2tleSI6bnVsbCwicHVibGljX2tleSI6IiIsImNyZWF0aW9uX3RpbWUiOjB9LHsia2V5IjoiVyt5OGdHTjB3YkwySzlPeTVxTzdZWjBrY3czL0dGYjVjOEkwc3ZTTDJxTT0iLCJobWFjX2tleSI6IlAwU3I4dWEyWmRETVE3T3doeERqdWdFOXdCUkd0NkF5eitLeE8zeWdjOUk9IiwidGltZSI6IjIwMTctMTItMDhUMTE6NTA6MDguNjEzODM3LTA1OjAwIiwiZWNfeCI6bnVsbCwiZWNfeSI6bnVsbCwiZWNfZCI6bnVsbCwicnNhX2tleSI6bnVsbCwicHVibGljX2tleSI6IiIsImNyZWF0aW9uX3RpbWUiOjE1MTI3NTE4MDh9XX19Cg=="\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"restore-key",children:"Restore key"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint restores the backup as a named key. This will restore the key\nconfigurations and all the versions of the named key along with HMAC keys. The\ninput to this endpoint should be the output of ",(0,i.jsx)(n.code,{children:"/backup"})," endpoint."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"For safety, by default the backend will refuse to restore to an existing\nkey. If you want to reuse a key name, it is recommended you delete the key\nbefore restoring. It is a good idea to attempt restoring to a different key\nname first to verify that the operation successfully completes."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/restore(/:name)"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-20",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"backup"})," ",(0,i.jsx)(n.code,{children:"(string: <required>)"})," - Backed up key data to be restored. This\nshould be the output from the ",(0,i.jsx)(n.code,{children:"/backup"})," endpoint."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"})," ",(0,i.jsx)(n.code,{children:"(string: <optional>)"})," - If set, this will be the name of the\nrestored key."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"force"})," ",(0,i.jsx)(n.code,{children:"(bool: false)"})," - If set, force the restore to proceed even if a key\nby this name already exists."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-14",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "backup": "eyJwb2xpY3kiOnsibmFtZSI6ImFlcyIsImtleXMiOnsiMSI6eyJrZXkiOiJXK3k4Z0dOMHdiTDJLOU95NXFPN1laMGtjdzMvR0ZiNWM4STBzdlNMMnFNPSIsImhtYWNfa2V5IjoiUDBTcjh1YTJaZERNUTdPd2h4RGp1Z0U5d0JSR3Q2QXl6K0t4TzN5Z2M5ST0iLCJ0aW1lIjoiMjAxNy0xMi0wOFQxMTo1MDowOC42MTM4MzctMDU6MDAiLCJlY194IjpudWxsLCJlY195IjpudWxsLCJlY19kIjpudWxsLCJyc2Ffa2V5IjpudWxsLCJwdWJsaWNfa2V5IjoiIiwiY3JlYXRpb25fdGltZSI6MTUxMjc1MTgwOH19LCJkZXJpdmVkIjpmYWxzZSwia2RmIjowLCJjb252ZXJnZW50X2VuY3J5cHRpb24iOmZhbHNlLCJleHBvcnRhYmxlIjpmYWxzZSwibWluX2RlY3J5cHRpb25fdmVyc2lvbiI6MSwibWluX2VuY3J5cHRpb25fdmVyc2lvbiI6MCwibGF0ZXN0X3ZlcnNpb24iOjEsImFyY2hpdmVfdmVyc2lvbiI6MSwiZGVsZXRpb25fYWxsb3dlZCI6ZmFsc2UsImNvbnZlcmdlbnRfdmVyc2lvbiI6MCwidHlwZSI6MCwiYmFja3VwX2luZm8iOnsidGltZSI6IjIwMTctMTItMDhUMTE6NTA6MjkuMjI4MTU3LTA1OjAwIiwidmVyc2lvbiI6MX0sInJlc3RvcmVfaW5mbyI6bnVsbH0sImFyY2hpdmVkX2tleXMiOnsia2V5cyI6W3sia2V5IjpudWxsLCJobWFjX2tleSI6bnVsbCwidGltZSI6IjAwMDEtMDEtMDFUMDA6MDA6MDBaIiwiZWNfeCI6bnVsbCwiZWNfeSI6bnVsbCwiZWNfZCI6bnVsbCwicnNhX2tleSI6bnVsbCwicHVibGljX2tleSI6IiIsImNyZWF0aW9uX3RpbWUiOjB9LHsia2V5IjoiVyt5OGdHTjB3YkwySzlPeTVxTzdZWjBrY3czL0dGYjVjOEkwc3ZTTDJxTT0iLCJobWFjX2tleSI6IlAwU3I4dWEyWmRETVE3T3doeERqdWdFOXdCUkd0NkF5eitLeE8zeWdjOUk9IiwidGltZSI6IjIwMTctMTItMDhUMTE6NTA6MDguNjEzODM3LTA1OjAwIiwiZWNfeCI6bnVsbCwiZWNfeSI6bnVsbCwiZWNfZCI6bnVsbCwicnNhX2tleSI6bnVsbCwicHVibGljX2tleSI6IiIsImNyZWF0aW9uX3RpbWUiOjE1MTI3NTE4MDh9XX19Cg=="\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-23",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/restore\n'})}),"\n",(0,i.jsx)(n.h2,{id:"trim-key",children:"Trim key"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint trims older key versions setting a minimum version for the\nkeyring. Once trimmed, previous versions of the key cannot be recovered."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/keys/:name/trim"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-21",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"min_available_version"})," ",(0,i.jsx)(n.code,{children:"(int: <required>)"})," - The minimum available version\nfor the key ring. All versions before this version will be permanently\ndeleted. This value can at most be equal to the lesser of\n",(0,i.jsx)(n.code,{children:"min_decryption_version"})," and ",(0,i.jsx)(n.code,{children:"min_encryption_version"}),". This is not allowed to\nbe set when either ",(0,i.jsx)(n.code,{children:"min_encryption_version"})," or ",(0,i.jsx)(n.code,{children:"min_decryption_version"})," is set\nto zero."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-15",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "min_available_version": 2\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-24",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..." \\\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/keys/my-key/trim\n'})}),"\n",(0,i.jsx)(n.h2,{id:"configure-cache",children:"Configure cache"}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint is used to configure the transit engine's cache. Note that configuration\nchanges will not be applied until the transit plugin is reloaded which can be achieved\nusing the [",(0,i.jsx)(n.code,{children:"/sys/plugins/reload/backend"}),"][sys-plugin-reload-backend] endpoint."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"POST"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/cache-config"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"parameters-22",children:"Parameters"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"size"})," ",(0,i.jsx)(n.code,{children:"(int: 0)"})," - Specifies the size in terms of number of entries. A size of\n",(0,i.jsx)(n.code,{children:"0"})," means unlimited. A ",(0,i.jsx)(n.em,{children:"Least Recently Used"})," (LRU) caching strategy is used for a\nnon-zero cache size. Must be 0 (default) or a value greater or equal to 10 (minimum cache size)."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sample-payload-16",children:"Sample payload"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "size": 456\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-25",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..."\n    --request POST \\\n    --data @payload.json \\\n    http://127.0.0.1:8200/v1/transit/cache-config\n'})}),"\n",(0,i.jsx)(n.h2,{id:"read-transit-cache-configuration",children:"Read transit cache configuration"}),"\n",(0,i.jsx)(n.p,{children:"This endpoint retrieves configurations for the transit engine's cache."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Method"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Path"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"GET"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"/transit/cache-config"})})]})})]}),"\n",(0,i.jsx)(n.h3,{id:"sample-request-26",children:"Sample request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell-session",children:'$ curl \\\n    --header "X-Vault-Token: ..."\n    --request GET \\\n    http://127.0.0.1:8200/v1/transit/cache-config\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sample-response-17",children:"Sample response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'  "data": {\n    "size": 0\n  },\n'})})]})}function o(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(96540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);