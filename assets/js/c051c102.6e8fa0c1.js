"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6706],{22788:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=t(74848),s=t(28453);const o={layout:"docs",page_title:"FAQ",description:"Answers to the most commonly asked questions about client count in OpenBao."},c="Client count FAQ",r={id:"concepts/client-count/faq",title:"Client count FAQ",description:"Answers to the most commonly asked questions about client count in OpenBao.",source:"@site/content/docs/concepts/client-count/faq.mdx",sourceDirName:"concepts/client-count",slug:"/concepts/client-count/faq",permalink:"/openbao/docs/concepts/client-count/faq",draft:!1,unlisted:!1,editUrl:"https://github.com/openbao/openbao/tree/main/website/content/docs/concepts/client-count/faq.mdx",tags:[],version:"current",frontMatter:{layout:"docs",page_title:"FAQ",description:"Answers to the most commonly asked questions about client count in OpenBao."},sidebar:"docs",previous:{title:"Client count calculation",permalink:"/openbao/docs/concepts/client-count/counting"},next:{title:"Transform secrets engine",permalink:"/openbao/docs/concepts/transform"}},a={},l=[{value:"Definitions ((#definitions))",id:"definitions-definitions",level:2},{value:"Computing client count ((#computing-clients))",id:"computing-client-count-computing-clients",level:2},{value:"Upgrading and migration ((#upgrading))",id:"upgrading-and-migration-upgrading",level:2},{value:"Usage ((#usage))",id:"usage-usage",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"client-count-faq",children:"Client count FAQ"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{children:"Definitions"})})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#what-is-a-client",children:"What is a client?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#eclient-vs-neclient",children:"What is the difference between an entity client, non-entity client, and certificate client?"})})})]})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{children:"Computing client count"})})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#nomad",children:"Does the Nomad-OpenBao integration affect client counts?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#batch-tokens",children:"Are batch tokens counted differently than service tokens?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#custom-filters",children:"Do custom user filters affect client counts?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#mount-migration",children:"Does mount migration affect client counts?"})})})]})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{children:"Upgrading and migration"})})}),(0,i.jsx)(n.tbody,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#what-happens-at-upgrade",children:"What happens to client count when I upgrade?"})})})})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.th,{children:"Usage"})})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#view-data",children:"Can I view the list of unique client IDs that contributed to my client count aggregate?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#clientid-in-logs",children:"Is clientID viewable in the audit logs for non-entity tokens?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#skip-computation",children:"Can I skip client computation for a period of time during the period?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#lost-data",children:"Are there conditions that will cause me to lose client data?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#missing-data",children:"What happens if a portion of the data is missing for my period?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#disable-client-count",children:"Can I disable client counting?"})})}),(0,i.jsx)(n.tr,{children:(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"#log-client-count",children:"Can I configure OpenBao to log the client count data?"})})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"definitions-definitions",children:"Definitions ((#definitions))"}),"\n",(0,i.jsx)(n.h3,{children:"What is a client? ((#what-is-a-client))"}),"\n",(0,i.jsx)(n.p,{children:"Any unique application, service, or user that authenticates to an\nOpenBao cluster. The client count metric is a combination of entity clients and\nnon-entity clients."}),"\n",(0,i.jsxs)(n.p,{children:["Consult the ",(0,i.jsx)(n.a,{href:"/docs/concepts/client-count",children:"clients and entities"})," overview\nfor more information on client definitions."]}),"\n",(0,i.jsx)(n.h3,{children:"What is the difference between an entity client, non-entity client, and certificate client? ((#eclient-vs-neclient))"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Entity clients"})," map to an active identity."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Non-entity clients"})," map to an active non-entity token."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Certificate clients"})," map to an active ACME PKI certificate."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Consult the ",(0,i.jsx)(n.a,{href:"/docs/concepts/client-count",children:"clients and entities"})," overview\nfor more information about how OpenBao determines entity assignments."]}),"\n",(0,i.jsx)(n.h2,{id:"computing-client-count-computing-clients",children:"Computing client count ((#computing-clients))"}),"\n",(0,i.jsx)(n.h3,{children:"Does the Nomad-Openbao integration affect client counts? ((#nomad))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Maybe"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"/nomad/docs/integrations/vault-integration#token-role-based-integration",children:"Nomad Openbao integration"}),"\nuses token roles where a single token role creates tokens for many Nomad jobs.\nUnless you have configured explicit identity aliases for your Nomad tokens,\nOpenbao will record every running instance of a Nomad job as a unique client."]}),"\n",(0,i.jsx)(n.h3,{children:"Are batch tokens counted differently than service tokens? ((#batch-tokens))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"No"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Batch token clients are counted like service token clients. The batch token is\nmapped to either to the associated active entity or an artificial entity that\nOpenbao creates by combining the assigned namespace and policy. See the\n",(0,i.jsx)(n.a,{href:"/docs/concepts/client-count",children:"clients and entities"})," overview for more\ndetails."]}),"\n",(0,i.jsx)(n.h3,{children:"Do custom user filters affect client counts? ((#custom-filters))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Custom ",(0,i.jsx)(n.a,{href:"/api-docs/auth/ldap#userfilter",children:"user filters"})," can change the way\nthat entity aliases are mapped, which can affect the client count computation."]}),"\n",(0,i.jsxs)(n.p,{children:["Consult the ",(0,i.jsx)(n.a,{href:"/docs/concepts/client-count",children:"clients and entities"})," overview\nfor more information about how Openbao determines entity assignments."]}),"\n",(0,i.jsx)(n.h3,{children:"Does mount migration affect client counts? ((#mount-migration))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Maybe"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Migrating mounts ",(0,i.jsx)(n.strong,{children:"across"})," namespace will create duplication in the client count."]}),"\n",(0,i.jsxs)(n.li,{children:["Migrating mounts ",(0,i.jsx)(n.strong,{children:"within"})," a namespace will not affect client count."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"upgrading-and-migration-upgrading",children:"Upgrading and migration ((#upgrading))"}),"\n",(0,i.jsx)(n.h3,{children:"What happens to client count when I upgrade? ((#what-happens-at-upgrade))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"OpenBao will only reflect the number of active unique clients since the upgrade"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"usage-usage",children:"Usage ((#usage))"}),"\n",(0,i.jsx)(n.h3,{children:"Can I view the list of unique client IDs that contributed to my client count aggregate? ((#view-data))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can export the list of unique\nclients that contributed to your client count for a given period with\nthe\n",(0,i.jsx)(n.a,{href:"/api-docs/system/internal-counters#activity-export",children:"activity export API endpoint"}),"."]}),"\n",(0,i.jsx)(n.h3,{children:"Is clientID viewable in the audit logs for non-entity tokens? ((#clientid-in-logs))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Audit logs include a field called ",(0,i.jsx)(n.code,{children:"clientID"})," that records the\nactive or computed entity ID of the associated token."]}),"\n",(0,i.jsx)(n.h3,{children:"Can I skip client computation for a period of time during the period? ((#skip-computation))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes, but the data may be inaccurate"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Breaking up the data will likely result in client duplication. For example,\nassume your period runs from January 1st to December 31st, and you break\nthe computation into two periods to exclude the month of April:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Period","<sub>","1","</sub>"," runs from January 1st to March 31st"]}),"\n",(0,i.jsxs)(n.li,{children:["Period","<sub>","2","</sub>"," runs from June 1st to December 31st"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["OpenBao treats the two requests independently so January 1st and June 1st are both\nused as a fresh start to re-count unique clients. Any client that was active\nduring both periods will appear in both result sets, even though OpenBao will only\ncounted that client ",(0,i.jsx)(n.strong,{children:"once"})," for the actual period."]}),"\n",(0,i.jsx)(n.h3,{children:"Are there conditions that will cause me to lose client data? ((#lost-data))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The OpenBao activity log handles client computation. The standby nodes track and\naccumulate activity log data then transmit updates to the active node over gRPC\nwhenever the log grows by 8KB or 10 minutes has elapsed, whichever happens\nfirst."}),"\n",(0,i.jsx)(n.p,{children:"If a node goes down during the accumulation phase you will lose the\nuntransmitted data in addition to any client count data that would have been\ncollected during the outage."}),"\n",(0,i.jsx)(n.h3,{children:"What happens if a portion of the data is missing for my period? ((#missing-data))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"OpenBao only returns the most recent contiguous set of data"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For example, assume your period runs from January 1st to December 31st\nbut you disabled tracking for the month of April. OpenBao will look for the\nlargest, contiguous window of time where data is available, May through December,\nand compute results for that period of time. May 2021 through December 2021."}),"\n",(0,i.jsx)(n.h3,{children:"Can I disable client counting? ((#disable-client-count))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can use the OpenBao API to\n",(0,i.jsx)(n.a,{href:"/api-docs/system/internal-counters#update-the-client-count-configuration",children:"update the client count configuration"}),"\nand disable the tracking parameter. If you disable client counting in the middle\nof a month, OpenBao will discard any data currently recorded for the month. Data\nfor previous months is preserved."]}),"\n",(0,i.jsx)(n.h3,{children:"Can I configure OpenBao to log the client count data? ((#log-client-count))"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Yes"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can use the OpenBao API to\n",(0,i.jsx)(n.a,{href:"/api-docs/system/internal-counters#update-the-client-count-configuration",children:"update the client count configuration"}),"\nand specify your preferred retention period."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>r});var i=t(96540);const s={},o=i.createContext(s);function c(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);