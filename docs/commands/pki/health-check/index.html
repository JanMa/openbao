<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-commands/pki/health-check" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">pki health-check | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/docs/commands/pki/health-check/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="pki health-check | OpenBao"><meta data-rh="true" name="description" content="The &quot;pki health-check&quot; command verifies the health of the given PKI secrets
engine mount against an optional configuration."><meta data-rh="true" property="og:description" content="The &quot;pki health-check&quot; command verifies the health of the given PKI secrets
engine mount against an optional configuration."><link data-rh="true" rel="icon" href="/openbao/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/docs/commands/pki/health-check/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/commands/pki/health-check/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/commands/pki/health-check/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.a7459e73.css">
<script src="/openbao/assets/js/runtime~main.905ad1f5.js" defer="defer"></script>
<script src="/openbao/assets/js/main.e1fe259b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/docs/">Docs</a><a class="navbar__item navbar__link" href="/openbao/api-docs/">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/what-is-openbao/">What is OpenBao?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/use-cases/">Use cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/get-started/developer-qs/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/browser-support/">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/install/">Installing OpenBao</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/internals/">Internals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/concepts/">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/openbao/docs/commands/">Commands (CLI)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/agent/">agent</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/audit/">audit</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/auth/">auth</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/debug/">debug</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/delete/">delete</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/kv/">kv</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/lease/">lease</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/list/">list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/login/">login</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/monitor/">monitor</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/operator/">operator</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/patch/">patch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/path-help/">path-help</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/openbao/docs/commands/pki/">pki</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/pki/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/docs/commands/pki/health-check/">health-check</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/pki/verify-sign/">verify-sign</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/pki/list-intermediates/">list-intermediates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/pki/issue/">issue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/pki/reissue/">reissue</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/plugin/">plugin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/policy/">policy</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/print/">print</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/proxy/">proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/read/">read</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/secrets/">secrets</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/server/">server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/ssh/">ssh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/status/">status</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/token/">token</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/commands/transit/">transit</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/unwrap/">unwrap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/version/">version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/version-history/">version-history</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/write/">write</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/commands/token-helper/">Token helpers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/agent-and-proxy/">OpenBao Agent and Proxy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/secrets/">Secret Engines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/auth/">Auth Methods</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/audit/">Audit Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/plugins/">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/platform/">Platforms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/upgrading/">Upgrade Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/release-notes/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/deprecation/">Deprecation Notices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/policies/">Policies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/faq/">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/glossary/">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Commands (CLI)</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">pki</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">health-check</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>pki health-check</h1>
<p>The <code>pki health-check</code> command verifies the health of the given PKI secrets
engine mount against an optional configuration.</p>
<p>This runs with the permissions of the given token, reading various APIs from
the mount and <code>/sys</code> against the given OpenBao server</p>
<p>Mounts need to be specified with any namespaces prefixed in the path, e.g.,
<code>ns1/pki</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2>
<p>Performs a basic health check against the <code>pki-root</code> mount:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao pki health-check pki-root/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Configuration can be specified using the <code>-health-config</code> flag:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao pki health-check -health-config=mycorp-root.json pki-root/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using the <code>-list</code> flag will show the list of health checks and any
known configuration values (with their defaults) that will be run
against this mount:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao pki health-check -list pki-root/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<p>The following flags are unique to this command:</p>
<ul>
<li>
<p><code>-default-disabled</code> - When specified, results in all health checks being
disabled by default unless enabled by the configuration file explicitly.
The default is <code>false</code>, meaning all default-enabled health checks will run.</p>
</li>
<li>
<p><code>-health-config</code> <code>(string: &quot;&quot;)</code> - Path to JSON configuration file to
modify health check execution and parameters.</p>
</li>
<li>
<p><code>-list</code> - When specified, no health checks are run, but all known health
checks are printed. Still requires a positional mount argument. The default
is <code>false</code>, meaning no listing is printed and health checks will execute.</p>
</li>
<li>
<p><code>-return-indicator</code> <code>(string: &quot;default&quot;)</code> - Behavior of the return value
(exit code) of this command:</p>
<ul>
<li><code>permission</code>, for exiting with a non-zero code when the tool lacks
permissions or has a version mismatch with
the server;</li>
<li><code>critical</code>, for exiting with a non-zero code when a check returns a
critical status in addition to the above;</li>
<li><code>warning</code>, for exiting with a non-zero status when a check returns a
warning status in addition to the above;</li>
<li><code>informational</code>, for exiting with a non-zero status when a check
returns an informational status in addition to the above;</li>
<li><code>default</code>, for the default behavior based on severity of message
and only returning a zero exit status when all checks have passed
and no execution errors have occurred.</li>
</ul>
</li>
</ul>
<p>This command respects the <code>-format</code> parameter to control the presentation of
output sent to stdout. Fatal errors that prevent health checks from executing
may not follow this formatting.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="return-status-and-output">Return status and output<a href="#return-status-and-output" class="hash-link" aria-label="Direct link to Return status and output" title="Direct link to Return status and output">​</a></h2>
<p>This command returns the following exit codes:</p>
<ul>
<li><code>0</code> - Everything is good.</li>
<li><code>1</code> - Usage error (check CLI parameters).</li>
<li><code>2</code> - Informational message from a health check.</li>
<li><code>3</code> - Warning message from a health check.</li>
<li><code>4</code> - Critical message from a health check.</li>
<li><code>5</code> - A version mismatch between health check and OpenBao Server occurred,
preventing one or more health checks from being fully run.</li>
<li><code>6</code> - A permission denied message was returned from OpenBao Server for
one or more health checks.</li>
</ul>
<p>Note that an exit code of <code>5</code> (due to a version mismatch) is not necessarily
fatal to the health check.</p>
<p>Each health check outputs one or results in a list. This list contains a
mapping of keys (<code>status</code>, <code>status_code</code>, <code>endpoint</code>, and <code>message</code>) to
values returned by the health check. An endpoint may occur in more than
one health check and is not necessarily guaranteed to exist on the server
(e.g., using wildcards to indicate all matching paths have the same
result). Tabular form elides the status code, as this is meant to be
consumed programatically.</p>
<p>These correspond to the following health check status values:</p>
<ul>
<li>status <code>not_applicable</code> / status code <code>0</code>: exit code <code>0</code>.</li>
<li>status <code>ok</code> / status code <code>1</code>: exit code <code>0</code></li>
<li>status <code>informational</code> / status code <code>2</code>: exit code <code>2</code>.</li>
<li>status <code>warning</code> / status code <code>3</code>: exit code <code>3</code>.</li>
<li>status <code>critical</code> / status code <code>4</code>: exit code <code>4</code>.</li>
<li>status <code>invalid_version</code> / status code <code>5</code>: exit code <code>5</code>.</li>
<li>status <code>insufficient_permissions</code> / status code <code>6</code>: exit code <code>6</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="health-checks">Health checks<a href="#health-checks" class="hash-link" aria-label="Direct link to Health checks" title="Direct link to Health checks">​</a></h2>
<p>The following health checks are currently implemented. More health checks may
be added in future releases and may default to being enabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ca-validity-period">CA validity period<a href="#ca-validity-period" class="hash-link" aria-label="Direct link to CA validity period" title="Direct link to CA validity period">​</a></h3>
<p><strong>Name</strong>: <code>ca_validity_period</code></p>
<p><strong>Accessed APIs</strong>:</p>
<ul>
<li><code>LIST /issuers</code> (unauthenticated)</li>
<li><code>READ /issuer/:issuer_ref/json</code> (unauthenticated)</li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>root_expiry_critical</code> <code>(duration: 182d)</code> - for a duration within which the root&#x27;s lifetime is considered critical</li>
<li><code>intermediate_expiry_critical</code> <code>(duration: 30d)</code> - for a duration within which the intermediate&#x27;s lifetime is considered critical</li>
<li><code>root_expiry_warning</code> <code>(duration: 365d)</code> -  for a duration within which the root&#x27;s lifetime is considered warning</li>
<li><code>intermediate_expiry_warning</code> <code>(duration: 60d)</code> - for a duration within which the intermediate&#x27;s lifetime is considered warning</li>
<li><code>root_expiry_informational</code> <code>(duration: 730d)</code> - for a duration within which the root&#x27;s lifetime is considered informational</li>
<li><code>intermediate_expiry_informational</code> <code>(duration: 180d)</code> - for a duration within which the intermediate&#x27;s lifetime is considered informational</li>
</ul>
<p>This health check will check each issuer in the mount for validity status, returning a list. If a CA expires within the next 30 days, the result will be critical. If a root CA expires within the next 12 months or an intermediate CA within the next 2 months, the result will be a warning. If a root CA expires within 24 months or an intermediate CA within 6 months, the result will be informational.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Perform a <a href="/openbao/docs/secrets/pki/rotation-primitives/">CA rotation operation</a>
to check for CAs that are about to expire.</li>
<li>Migrate from expiring CAs to new CAs.</li>
<li>Delete any expired CAs with one of the following options:</li>
</ol>
<ul>
<li>Run <a href="/openbao/api-docs/secret/pki/#tidy">tidy</a> manually with <code>bao write &lt;mount&gt;/tidy tidy_expired_issuers=true</code>.</li>
<li>Use the OpenBao API to call <a href="/openbao/api-docs/secret/pki/#delete-issuer">delete issuer</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="crl-validity-period">CRL validity period<a href="#crl-validity-period" class="hash-link" aria-label="Direct link to CRL validity period" title="Direct link to CRL validity period">​</a></h3>
<p><strong>Name</strong>: <code>crl_validity_period</code></p>
<p><strong>Accessed APIs</strong>:</p>
<ul>
<li><code>LIST /issuers</code> (unauthenticated)</li>
<li><code>READ /config/crl</code> (optional)</li>
<li><code>READ /issuer/:issuer_ref/crl</code> (unauthenticated)</li>
<li><code>READ /issuer/:issuer_ref/crl/delta</code> (unauthenticated)</li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>crl_expiry_pct_critical</code> <code>(int: 95)</code> - the percentage of validity period after which a CRL should be considered critically close to expiry</li>
<li><code>delta_crl_expiry_pct_critical</code> <code>(int: 95)</code> - the percentage of validity period after which a Delta CRL should be considered critically close to expiry</li>
</ul>
<p>This health check checks each issuer&#x27;s CRL for validity status, returning a list. Unlike CAs, where a date-based duration makes sense due to effort required to successfully rotate, rotating CRLs are much easier, so a percentage based approach makes sense. If the chosen percentage exceeds that of the <code>grace_period</code> from the CRL configuration, an informational message will be issued rather than OK.</p>
<p>For informational purposes, it reads the CRL config and suggests enabling auto-rebuild CRLs if not enabled.</p>
<p><strong>Remediation steps</strong>:</p>
<p>Use <code>bao write</code> to enable CRL auto-rebuild:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write &lt;mount&gt;/config/crl auto_rebuild=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="root-certificate-issued-non-ca-leaves">Root certificate issued Non-CA leaves<a href="#root-certificate-issued-non-ca-leaves" class="hash-link" aria-label="Direct link to Root certificate issued Non-CA leaves" title="Direct link to Root certificate issued Non-CA leaves">​</a></h3>
<p><strong>Name</strong>: <code>root_issued_leaves</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>LIST /issuers</code> (unauthenticated)</li>
<li><code>READ /issuer/:issuer_ref/pem</code> (unauthenticated)</li>
<li><code>LIST /certs</code></li>
<li><code>READ /certs/:serial</code> (unauthenticated)</li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>certs_to_fetch</code> <code>(int: 100)</code> - a quantity of leaf certificates to fetch to see if any leaves have been issued by a root directly.</li>
</ul>
<p>This health check verifies whether a proper CA hierarchy is in use. We do this by fetching <code>certs_to_fetch</code> leaf certificates (configurable) and seeing if they are a non-issuer leaf and if they were signed by a root issuer in this mount. If one is found, we&#x27;ll issue a warning about this, and recommend setting up an intermediate CA.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Restrict the use of <code>sign</code>, <code>sign-verbatim</code>, <code>issue</code>, and ACME APIs against
the root issuer.</li>
<li>Create an intermediary issuer in a different mount.</li>
<li>Have the root issuer sign the new intermediary issuer.</li>
<li>Issue new leaf certificates using the intermediary issuer.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="role-allows-implicit-localhost-issuance">Role allows implicit localhost issuance<a href="#role-allows-implicit-localhost-issuance" class="hash-link" aria-label="Direct link to Role allows implicit localhost issuance" title="Direct link to Role allows implicit localhost issuance">​</a></h3>
<p><strong>Name</strong>: <code>role_allows_localhost</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>LIST /roles</code></li>
<li><code>READ /roles/:name</code></li>
</ul>
<p><strong>Config Parameters</strong>: (none)</p>
<p>Checks whether any roles exist that allow implicit localhost based issuance
(<code>allow_localhost=true</code>) with a non-empty <code>allowed_domains</code> value.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Set <code>allow_localhost</code> to <code>false</code> for all roles.</li>
<li>Update the <code>allowed_domains</code> field with an explicit list of allowed
localhost-like domains.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="role-allows-glob-based-wildcard-issuance">Role allows Glob-Based wildcard issuance<a href="#role-allows-glob-based-wildcard-issuance" class="hash-link" aria-label="Direct link to Role allows Glob-Based wildcard issuance" title="Direct link to Role allows Glob-Based wildcard issuance">​</a></h3>
<p><strong>Name</strong>: <code>role_allows_glob_wildcards</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>LIST /roles</code></li>
<li><code>READ /roles/:name</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>allowed_roles</code> <code>(list: nil)</code> - an allow-list of roles to ignore.</li>
</ul>
<p>Check each role to see whether or not it allows wildcard issuance <strong>and</strong> glob
domains. Wildcards and globs can interact and result in nested wildcards among
other (potentially dangerous) quirks.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Split any role that need both of <code>allow_glob_domains</code> and <code>allow_wildcard_certificates</code> to be true into two roles.</li>
<li>Continue splitting roles until both of the following are true for all roles:<!-- -->
<ul>
<li>The role has <code>allow_glob_domains</code> <strong>or</strong> <code>allow_wildcard_certificates</code>, but
not both.</li>
<li>Roles with <code>allow_glob_domains</code> <strong>and</strong> <code>allow_wildcard_certificates</code> are
the only roles required for <strong>all</strong> SANs on the certificate.</li>
</ul>
</li>
<li>Add the roles that allow glob domains and wildcards to <code>allowed_roles</code> so
OpenBao ignores them in future checks.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="role-sets-no_storefalse-and-performance">Role sets <code>no_store=false</code> and performance<a href="#role-sets-no_storefalse-and-performance" class="hash-link" aria-label="Direct link to role-sets-no_storefalse-and-performance" title="Direct link to role-sets-no_storefalse-and-performance">​</a></h3>
<p><strong>Name</strong>: <code>role_no_store_false</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>LIST /roles</code></li>
<li><code>READ /roles/:name</code></li>
<li><code>LIST /certs</code></li>
<li><code>READ /config/crl</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>allowed_roles</code> <code>(list: nil)</code> - an allow-list of roles to ignore.</li>
</ul>
<p>Checks each role to see whether <code>no_store</code> is set to <code>false</code>.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>OpenBao will provide warnings and performance will suffer if you have a large
number of certificates without temporal CRL auto-rebuilding and set <code>no_store</code>
to <code>true</code>.</p></div></div>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Update none-ACME roles with <code>no_store=false</code>. <strong>NOTE</strong>: Roles used for ACME
issuance must have <code>no_store</code>  set to <code>true</code>.</li>
<li>Set your certificate lifetimes as short as possible.</li>
<li>Use <a href="/openbao/api-docs/secret/pki/#revoke-certificate">BYOC revocations</a> to
revoke certificates as needed.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="accessibility-of-audit-information">Accessibility of audit information<a href="#accessibility-of-audit-information" class="hash-link" aria-label="Direct link to Accessibility of audit information" title="Direct link to Accessibility of audit information">​</a></h3>
<p><strong>Name</strong>: <code>audit_visibility</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /sys/mounts/:mount/tune</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>ignored_parameters</code> <code>(list: nil)</code> - a list of parameters to ignore their HMAC status.</li>
</ul>
<p>This health check checks whether audit information is accessible to log consumers, validating whether our list of safe and unsafe audit parameters are generally followed. These are informational responses, if any are present.</p>
<p><strong>Remediation steps</strong>:</p>
<p>Use <code>bao secrets tune</code> to set the desired audit parameters:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets tune \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-response-keys=certificate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-response-keys=issuing_ca \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-response-keys=serial_number \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-response-keys=error \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-response-keys=ca_chain \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=certificate \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=issuer_ref \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=common_name \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=alt_names \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=other_sans \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=ip_sans \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=uri_sans \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=ttl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=not_after \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=serial_number \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=key_type \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=private_key_format \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=managed_key_name \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=managed_key_id \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=ou \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=organization \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=country \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=locality \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=province \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=street_address \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=postal_code \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=permitted_dns_domains \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=policy_identifiers \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=ext_key_usage_oids \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -audit-non-hmac-request-keys=csr \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;mount&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acl-policies-allow-problematic-endpoints">ACL policies allow problematic endpoints<a href="#acl-policies-allow-problematic-endpoints" class="hash-link" aria-label="Direct link to ACL policies allow problematic endpoints" title="Direct link to ACL policies allow problematic endpoints">​</a></h3>
<p><strong>Name</strong>: <code>policy_allow_endpoints</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>LIST /sys/policy</code></li>
<li><code>READ /sys/policy/:name</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>allowed_policies</code> <code>(list: nil)</code> -  a list of policies to allow-list for access to insecure APIs.</li>
</ul>
<p>This health check checks whether unsafe access to APIs (such as <code>sign-intermediate</code>, <code>sign-verbatim</code>, and <code>sign-self-issued</code>) are allowed. Any findings are a critical result and should be rectified by the administrator or explicitly allowed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow-if-modified-since-requests">Allow If-Modified-Since requests<a href="#allow-if-modified-since-requests" class="hash-link" aria-label="Direct link to Allow If-Modified-Since requests" title="Direct link to Allow If-Modified-Since requests">​</a></h3>
<p><strong>Name</strong>: <code>allow_if_modified_since</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /sys/internal/ui/mounts</code></li>
</ul>
<p><strong>Config Parameters</strong>: (none)</p>
<p>This health check verifies if the <code>If-Modified-Since</code> header has been added to <code>passthrough_request_headers</code> and if <code>Last-Modified</code> header has been added to <code>allowed_response_headers</code>. This is an informational message if both haven&#x27;t been configured, or a warning if only one has been configured.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Update <code>allowed_response_headers</code> and <code>passthrough_request_headers</code> for all
policies with <code>bao secrets tune</code>:</li>
</ol>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets tune \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -passthrough-request-headers=&quot;If-Modified-Since&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -allowed-response-headers=&quot;Last-Modified&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;mount&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>Update ACME-specific headers with <code>bao secrets tune</code> (if you are using ACME):</li>
</ol>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets tune \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -passthrough-request-headers=&quot;If-Modified-Since&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -allowed-response-headers=&quot;Last-Modified&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -allowed-response-headers=&quot;Replay-Nonce&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -allowed-response-headers=&quot;Link&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -allowed-response-headers=&quot;Location&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;mount&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-tidy-disabled">Auto-Tidy disabled<a href="#auto-tidy-disabled" class="hash-link" aria-label="Direct link to Auto-Tidy disabled" title="Direct link to Auto-Tidy disabled">​</a></h3>
<p><strong>Name</strong>: <code>enable_auto_tidy</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /config/auto-tidy</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>interval_duration_critical</code> <code>(duration: 7d)</code> - the maximum allowed interval_duration to hit critical threshold.</li>
<li><code>interval_duration_warning</code> <code>(duration: 2d)</code> - the maximum allowed interval_duration to hit a warning threshold.</li>
<li><code>pause_duration_critical</code> <code>(duration: 1s)</code> - the maximum allowed pause_duration to hit a critical threshold.</li>
<li><code>pause_duration_warning</code> <code>(duration: 200ms)</code> - the maximum allowed pause_duration to hit a warning threshold.</li>
</ul>
<p>This health check verifies that auto-tidy is enabled, with sane defaults for interval_duration and pause_duration. Any disabled findings will be informational, as this is a best-practice but not strictly required, but other findings w.r.t. <code>interval_duration</code> or <code>pause_duration</code> will be critical/warnings.</p>
<p><strong>Remediation steps</strong></p>
<p>Use <code>bao write</code> to enable auto-tidy with the recommended defaults:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write &lt;mount&gt;/config/auto-tidy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enabled=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_cert_store=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_acme=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revocation_queue=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_cross_cluster_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revoked_cert_issuer_associations=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tidy-hasnt-run">Tidy hasn&#x27;t run<a href="#tidy-hasnt-run" class="hash-link" aria-label="Direct link to Tidy hasn&#x27;t run" title="Direct link to Tidy hasn&#x27;t run">​</a></h3>
<p><strong>Name</strong>: <code>tidy_last_run</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /tidy-status</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>last_run_critical</code> <code>(duration: 7d)</code> - the critical delay threshold between when tidy should have last run.</li>
<li><code>last_run_warning</code> <code>(duration: 2d)</code> - the warning delay threshold between when tidy should have last run.</li>
</ul>
<p>This health check verifies that tidy has run within the last run window. This can be critical/warning alerts as this can start to seriously impact OpenBao&#x27;s performance.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Schedule a manual run of tidy with <code>bao write</code>:</li>
</ol>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write &lt;mount&gt;/tidy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_cert_store=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_acme=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revocation_queue=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_cross_cluster_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tidy_revoked_cert_issuer_associations=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>Review the tidy status endpoint, <code>bao read &lt;mount&gt;/tidy-status</code> for
additional information.</li>
<li>Re-configure auto-tidy based on the log information and results of your
manual run.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="too-many-certificates">Too many certificates<a href="#too-many-certificates" class="hash-link" aria-label="Direct link to Too many certificates" title="Direct link to Too many certificates">​</a></h3>
<p><strong>Name</strong>: <code>too_many_certs</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /tidy-status</code></li>
<li><code>LIST /certs</code></li>
</ul>
<p><strong>Config Parameters</strong>:</p>
<ul>
<li><code>count_critical</code> <code>(int: 250000)</code> - the critical threshold at which there are too many certs.</li>
<li><code>count_warning</code> <code>(int: 50000)</code> - the warning threshold at which there are too many certs.</li>
</ul>
<p>This health check verifies that this cluster has a reasonable number of certificates. Ideally this would be fetched from tidy&#x27;s status or a new metric reporting format, but as a fallback when tidy hasn&#x27;t run, a list operation will be performed instead.</p>
<p><strong>Remediation steps</strong>:</p>
<ol>
<li>Verify that tidy ran recently with <code>bao read</code>:<!-- -->
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read &lt;mount&gt;/tidy-status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Schedule a manual run of tidy with <code>bao write</code>:<!-- -->
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write &lt;mount&gt;/tidy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_cert_store=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_acme=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_revocation_queue=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_cross_cluster_revoked_certs=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tidy_revoked_cert_issuer_associations=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Enable <code>auto-tidy</code>.</li>
<li>Make sure that you are not renewing certificates too soon. Certificate
lifetimes should reflect the expected usage of the certificate. If the TTL is
set appropriately, most certificates renew at approximately 2/3 of their
lifespan.</li>
<li>Consider setting the <code>no_store</code> field for all roles to <code>true</code> and use <a href="/openbao/api-docs/secret/pki/#revoke-certificate">BYOC revocations</a> to avoid storage.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-acme-issuance">Enable ACME issuance<a href="#enable-acme-issuance" class="hash-link" aria-label="Direct link to Enable ACME issuance" title="Direct link to Enable ACME issuance">​</a></h3>
<p><strong>Name</strong>: <code>enable_acme_issuance</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /config/acme</code></li>
<li><code>READ /config/cluster</code></li>
<li><code>LIST /issuers</code> (unauthenticated)</li>
<li><code>READ /issuer/:issuer_ref/json</code> (unauthenticated)</li>
</ul>
<p><strong>Config Parameters</strong>: (none)</p>
<p>This health check verifies that ACME is enabled within a mount that contains an intermediary issuer, as this is considered a best-practice to support a self-rotating PKI infrastructure.</p>
<p>Review the <a href="/openbao/api-docs/secret/pki/#acme-certificate-issuance">ACME Certificate Issuance</a>
API documentation to learn about enabling ACME support in OpenBao.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acme-response-headers">ACME response headers<a href="#acme-response-headers" class="hash-link" aria-label="Direct link to ACME response headers" title="Direct link to ACME response headers">​</a></h3>
<p><strong>Name</strong>: <code>allow_acme_headers</code></p>
<p><strong>APIs</strong>:</p>
<ul>
<li><code>READ /sys/internal/ui/mounts</code></li>
</ul>
<p><strong>Config Parameters</strong>: (none)</p>
<p>This health check verifies if the <code>&quot;Replay-Nonce</code>, <code>Link</code>, and <code>Location</code> headers have been added to <code>allowed_response_headers</code>, when the ACME feature is enabled. The ACME protocol will not work if these headers are not added to the mount.</p>
<p><strong>Remediation steps</strong>:</p>
<p>Use <code>bao secrets tune</code> to add the missing headers to <code>allowed_response_headers</code>:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets tune \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -allowed-response-headers=&quot;Last-Modified&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -allowed-response-headers=&quot;Replay-Nonce&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -allowed-response-headers=&quot;Link&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -allowed-response-headers=&quot;Location&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;mount&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/docs/commands/pki/health-check.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/docs/commands/pki/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/docs/commands/pki/verify-sign/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">verify-sign</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#return-status-and-output" class="table-of-contents__link toc-highlight">Return status and output</a></li><li><a href="#health-checks" class="table-of-contents__link toc-highlight">Health checks</a><ul><li><a href="#ca-validity-period" class="table-of-contents__link toc-highlight">CA validity period</a></li><li><a href="#crl-validity-period" class="table-of-contents__link toc-highlight">CRL validity period</a></li><li><a href="#root-certificate-issued-non-ca-leaves" class="table-of-contents__link toc-highlight">Root certificate issued Non-CA leaves</a></li><li><a href="#role-allows-implicit-localhost-issuance" class="table-of-contents__link toc-highlight">Role allows implicit localhost issuance</a></li><li><a href="#role-allows-glob-based-wildcard-issuance" class="table-of-contents__link toc-highlight">Role allows Glob-Based wildcard issuance</a></li><li><a href="#role-sets-no_storefalse-and-performance" class="table-of-contents__link toc-highlight">Role sets <code>no_store=false</code> and performance</a></li><li><a href="#accessibility-of-audit-information" class="table-of-contents__link toc-highlight">Accessibility of audit information</a></li><li><a href="#acl-policies-allow-problematic-endpoints" class="table-of-contents__link toc-highlight">ACL policies allow problematic endpoints</a></li><li><a href="#allow-if-modified-since-requests" class="table-of-contents__link toc-highlight">Allow If-Modified-Since requests</a></li><li><a href="#auto-tidy-disabled" class="table-of-contents__link toc-highlight">Auto-Tidy disabled</a></li><li><a href="#tidy-hasnt-run" class="table-of-contents__link toc-highlight">Tidy hasn&#39;t run</a></li><li><a href="#too-many-certificates" class="table-of-contents__link toc-highlight">Too many certificates</a></li><li><a href="#enable-acme-issuance" class="table-of-contents__link toc-highlight">Enable ACME issuance</a></li><li><a href="#acme-response-headers" class="table-of-contents__link toc-highlight">ACME response headers</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/openbao/docs/">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chat Server<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The OpenBao Authors. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>