<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-secrets/ldap" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">LDAP secrets engine | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/docs/secrets/ldap/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="LDAP secrets engine | OpenBao"><meta data-rh="true" name="description" content="The LDAP secret engine manages LDAP entry passwords."><meta data-rh="true" property="og:description" content="The LDAP secret engine manages LDAP entry passwords."><link data-rh="true" rel="icon" href="/openbao/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/docs/secrets/ldap/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/secrets/ldap/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/secrets/ldap/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.d5536c37.css">
<script src="/openbao/assets/js/runtime~main.296b8af3.js" defer="defer"></script>
<script src="/openbao/assets/js/main.c1d49162.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#ffba00;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">The documentation is still work in progress. If you find any mistakes, please open an <a href="https://github.com/openbao/openbao/issues" target="_blank">issue</a></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo-black.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo-white.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/docs/">Docs</a><a class="navbar__item navbar__link" href="/openbao/api-docs/">API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Chat Server<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/what-is-openbao/">What is OpenBao?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/use-cases/">Use cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/get-started/developer-qs/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/browser-support/">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/install/">Installing OpenBao</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/internals/">Internals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/concepts/">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/commands/">Commands (CLI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/agent-and-proxy/">OpenBao Agent and Proxy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/openbao/docs/secrets/">Secret Engines</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/secrets/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/secrets/cubbyhole/">Cubbyhole</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/databases/">Databases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/identity/">Identity</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/kv/">Key/Value</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/secrets/kubernetes/">Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/docs/secrets/ldap/">LDAP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/pki/">PKI (Certificates)</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/secrets/rabbitmq/">RabbitMQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/ssh/">SSH</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/secrets/totp/">TOTP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/openbao/docs/secrets/transit/">Transit</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/auth/">Auth Methods</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/audit/">Audit Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/plugins/">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/upgrading/">Upgrade Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/release-notes/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/deprecation/">Deprecation Notices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/policies/">Policies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/rfcs/">RFCs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/openbao/docs/faq/">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/glossary/">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Secret Engines</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">LDAP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>LDAP secrets engine</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This engine can use external X.509 certificates as part of TLS or signature validation.
Verifying signatures against X.509 certificates that use SHA-1 is deprecated and is no longer
usable without a workaround. See the
<a href="/openbao/docs/deprecation/faq/#q-what-is-the-impact-of-removing-support-for-x-509-certificates-with-signatures-that-use-sha-1">deprecation FAQ</a>
for more information.</p></div></div>
<p>The LDAP secrets engine provides management of LDAP credentials as well as dynamic
creation of credentials. It supports integration with implementations of the LDAP
v3 protocol, including OpenLDAP, Active Directory, and IBM Resource Access Control
Facility (RACF).</p>
<p>The secrets engine has three primary features:</p>
<ul>
<li><a href="/openbao/docs/secrets/ldap/#static-credentials">Static Credentials</a></li>
<li><a href="/openbao/docs/secrets/ldap/#dynamic-credentials">Dynamic Credentials</a></li>
<li><a href="/openbao/docs/secrets/ldap/#service-account-check-out">Service Account Check-Out</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<ol>
<li>
<p>Enable the LDAP secret engine:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets enable ldap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, the secrets engine will mount at the name of the engine. To
enable the secrets engine at a different path, use the <code>-path</code> argument.</p>
</li>
<li>
<p>Configure the credentials that OpenBao uses to communicate with LDAP
to generate passwords:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    binddn=$USERNAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindpass=$PASSWORD \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url=ldaps://138.91.247.105</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: it&#x27;s recommended a dedicated entry management account be created specifically for OpenBao.</p>
</li>
<li>
<p>Rotate the root password so only OpenBao knows the credentials:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write -f ldap/rotate-root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note: it&#x27;s not possible to retrieve the generated password once rotated by OpenBao.
It&#x27;s recommended a dedicated entry management account be created specifically for OpenBao.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="schemas">Schemas<a href="#schemas" class="hash-link" aria-label="Direct link to Schemas" title="Direct link to Schemas">​</a></h3>
<p>The LDAP Secret Engine supports three different schemas:</p>
<ul>
<li><code>openldap</code> (default)</li>
<li><code>racf</code></li>
<li><code>ad</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openldap">OpenLDAP<a href="#openldap" class="hash-link" aria-label="Direct link to OpenLDAP" title="Direct link to OpenLDAP">​</a></h4>
<p>By default, the LDAP Secret Engine assumes the entry password is stored in <code>userPassword</code>.
There are many object classes that provide <code>userPassword</code> including for example:</p>
<ul>
<li><code>organization</code></li>
<li><code>organizationalUnit</code></li>
<li><code>organizationalRole</code></li>
<li><code>inetOrgPerson</code></li>
<li><code>person</code></li>
<li><code>posixAccount</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-access-control-facility-racf">Resource access control facility (RACF)<a href="#resource-access-control-facility-racf" class="hash-link" aria-label="Direct link to Resource access control facility (RACF)" title="Direct link to Resource access control facility (RACF)">​</a></h4>
<p>For managing IBM&#x27;s Resource Access Control Facility (RACF) security system, the secret
engine must be configured to use the schema <code>racf</code>.</p>
<p>Generated passwords must be 8 characters or less to support RACF. The length of the
password can be configured using a <a href="/openbao/docs/concepts/password-policies/">password policy</a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	binddn=$USERNAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	bindpass=$PASSWORD \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	url=ldaps://138.91.247.105 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	schema=racf \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	password_policy=racf_password_policy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="active-directory-ad">Active directory (AD)<a href="#active-directory-ad" class="hash-link" aria-label="Direct link to Active directory (AD)" title="Direct link to Active directory (AD)">​</a></h4>
<p>For managing Active Directory instances, the secret engine must be configured to use the
schema <code>ad</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	binddn=$USERNAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	bindpass=$PASSWORD \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	url=ldaps://138.91.247.105 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	schema=ad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="static-credentials">Static credentials<a href="#static-credentials" class="hash-link" aria-label="Direct link to Static credentials" title="Direct link to Static credentials">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-1">Setup<a href="#setup-1" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3>
<ol>
<li>
<p>Configure a static role that maps a name in OpenBao to an entry in LDAP.
Password rotation settings will be managed by this role.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/static-role/lf-edge\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dn=&#x27;uid=lf-edge,ou=users,dc=lf-edge,dc=com&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username=&#x27;openbao&#x27;\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rotation_period=&quot;24h&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Request credentials for the &quot;openbao&quot; role:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read ldap/static-cred/lf-edge</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="password-rotation">Password rotation<a href="#password-rotation" class="hash-link" aria-label="Direct link to Password rotation" title="Direct link to Password rotation">​</a></h3>
<p>Passwords can be managed in two ways:</p>
<ul>
<li>automatic time based rotation</li>
<li>manual rotation</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="auto-password-rotation">Auto password rotation<a href="#auto-password-rotation" class="hash-link" aria-label="Direct link to Auto password rotation" title="Direct link to Auto password rotation">​</a></h3>
<p>Passwords will automatically be rotated based on the <code>rotation_period</code> configured
in the static role (minimum of 5 seconds). When requesting credentials for a static
role, the response will include the time before the next rotation (<code>ttl</code>).</p>
<p>Auto-rotation is currently only supported for static roles. The <code>binddn</code> account used
by OpenBao should be rotated using the <code>rotate-root</code> endpoint to generate a password
only OpenBao will know.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-rotation">Manual rotation<a href="#manual-rotation" class="hash-link" aria-label="Direct link to Manual rotation" title="Direct link to Manual rotation">​</a></h3>
<p>Static roles can be manually rotated using the <code>rotate-role</code> endpoint. When manually
rotated the rotation period will start over.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deleting-static-roles">Deleting static roles<a href="#deleting-static-roles" class="hash-link" aria-label="Direct link to Deleting static roles" title="Direct link to Deleting static roles">​</a></h3>
<p>Passwords are not rotated upon deletion of a static role. The password should be manually
rotated prior to deleting the role or revoking access to the static role.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-credentials">Dynamic credentials<a href="#dynamic-credentials" class="hash-link" aria-label="Direct link to Dynamic credentials" title="Direct link to Dynamic credentials">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-2">Setup<a href="#setup-2" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3>
<p>Dynamic credentials can be configured by calling the <code>/role/:role_name</code> endpoint:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/role/dynamic-role \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  creation_ldif=@/path/to/creation.ldif \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deletion_ldif=@/path/to/deletion.ldif \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rollback_ldif=@/path/to/rollback.ldif \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_ttl=1h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  max_ttl=24h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note: The <code>rollback_ldif</code> argument is optional, but recommended. The statements within <code>rollback_ldif</code> will be
executed if the creation fails for any reason. This ensures any entities are removed in the event of a failure.</p></div></div>
<p>To generate credentials:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read ldap/creds/dynamic-role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key                    Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---                    -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_id               ldap/creds/dynamic-role/HFgd6uKaDomVMvJpYbn9q4q5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_duration         1h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_renewable        true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">distinguished_names    [cn=v_token_dynamic-role_FfH2i1c4dO_1611952635,ou=users,dc=learn,dc=example]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password               xWMjkIFMerYttEbzfnBVZvhRQGmhpAA0yeTya8fdmDB3LXDzGrjNEPV2bCPE9CW6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username               v_token_testrole_FfH2i1c4dO_1611952635</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>distinguished_names</code> field is an array of DNs that are created from the <code>creation_ldif</code> statements. If more than
one LDIF entry is included, the DN from each statement will be included in this field. Each entry in this field
corresponds to a single LDIF statement. No de-duplication occurs and order is maintained.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ldif-entries">LDIF entries<a href="#ldif-entries" class="hash-link" aria-label="Direct link to LDIF entries" title="Direct link to LDIF entries">​</a></h3>
<p>User account management is provided through LDIF entries. The LDIF entries may be a base64-encoded version of the
LDIF string. The string will be parsed and validated to ensure that it adheres to LDIF syntax. A good reference
for proper LDIF syntax can be found <a href="https://ldap.com/ldif-the-ldap-data-interchange-format/" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Some important things to remember when crafting your LDIF entries:</p>
<ul>
<li>There should not be any trailing spaces on any line, including empty lines</li>
<li>Each <code>modify</code> block needs to be preceded with an empty line</li>
<li>Multiple modifications for a <code>dn</code> can be defined in a single <code>modify</code> block. Each modification needs to close
with a single dash (<code>-</code>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-directory-ad-1">Active directory (AD)<a href="#active-directory-ad-1" class="hash-link" aria-label="Direct link to Active directory (AD)" title="Direct link to Active directory (AD)">​</a></h3>
<p>For Active Directory, there are a few additional details that are important to remember:</p>
<p>To create a user programmatically in AD, you first <code>add</code> a user object and then <code>modify</code> that user to provide a
password and enable the account.</p>
<ul>
<li>
<p>Passwords in AD are set using the <code>unicodePwd</code> field. This must be proceeded by two (2) colons (<code>::</code>).</p>
</li>
<li>
<p>When setting a password programmatically in AD, the following criteria must be met:</p>
<ul>
<li>The password must be enclosed in double quotes (<code>&quot; &quot;</code>)</li>
<li>The password must be in <a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2" target="_blank" rel="noopener noreferrer"><code>UTF16LE</code> format</a></li>
<li>The password must be <code>base64</code>-encoded</li>
<li>Additional details can be found <a href="https://docs.microsoft.com/en-us/troubleshoot/windows-server/identity/set-user-password-with-ldifde" target="_blank" rel="noopener noreferrer">here</a></li>
</ul>
</li>
<li>
<p>Once a user&#x27;s password has been set, it can be enabled. AD uses the <code>userAccountControl</code> field for this purpose:</p>
<ul>
<li>To enable the account, set <code>userAccountControl</code> to <code>512</code></li>
<li>You will likely also want to disable AD&#x27;s password expiration for this dynamic user account. The
<code>userAccountControl</code> value for this is: <code>65536</code></li>
<li><code>userAccountControl</code> flags are cumulative, so to set both of the above two flags, add up the two values
(<code>512 + 65536 = 66048</code>): set <code>userAccountControl</code> to <code>66048</code></li>
<li>See <a href="https://docs.microsoft.com/en-us/troubleshoot/windows-server/identity/useraccountcontrol-manipulate-account-properties#property-flag-descriptions" target="_blank" rel="noopener noreferrer">here</a>
for details on <code>userAccountControl</code> flags</li>
</ul>
</li>
</ul>
<p><code>sAMAccountName</code> is a common field when working with AD users. It is used to provide compatibility with legacy
Windows NT systems and has a limit of 20 characters. Keep this in mind when defining your <code>username_template</code>.
See <a href="https://docs.microsoft.com/en-us/windows/win32/adschema/a-samaccountname" target="_blank" rel="noopener noreferrer">here</a> for additional details.</p>
<p>Since the default <code>username_template</code> is longer than 20 characters which follows the template of <code>v_{{.DisplayName}}_{{.RoleName}}_{{random 10}}_{{unix_time}}</code>, we recommend customising the <code>username_template</code> on the role configuration to generate accounts with names less than 20 characters. Please refer to the <a href="/openbao/docs/concepts/username-templating/">username templating document</a> for more information.</p>
<p>With regard to adding dynamic users to groups, AD doesn&#x27;t let you directly modify a user&#x27;s <code>memberOf</code> attribute.
The <code>member</code> attribute of a group and <code>memberOf</code> attribute of a user are
<a href="https://docs.microsoft.com/en-us/windows/win32/ad/linked-attributes" target="_blank" rel="noopener noreferrer">linked attributes</a>. Linked attributes are
forward link/back link pairs, with the forward link able to be modified. In the case of AD group membership, the
group&#x27;s <code>member</code> attribute is the forward link. In order to add a newly-created dynamic user to a group, we also
need to issue a <code>modify</code> request to the desired group and update the group membership with the new user.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="active-directory-ldif-example">Active directory LDIF example<a href="#active-directory-ldif-example" class="hash-link" aria-label="Direct link to Active directory LDIF example" title="Direct link to Active directory LDIF example">​</a></h4>
<p>The various <code>*_ldif</code> parameters are templates that use the <a href="https://golang.org/pkg/text/template/" target="_blank" rel="noopener noreferrer">go template</a>
language. A complete LDIF example for creating an Active Directory user account is provided here for reference:</p>
<div class="language-ldif codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ldif codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dn: CN={{.Username}},OU=OpenBao,DC=adtesting,DC=lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changetype: add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: top</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: organizationalPerson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userPrincipalName: {{.Username}}@adtesting.lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sAMAccountName: {{.Username}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: CN={{.Username}},OU=OpenBao,DC=adtesting,DC=lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changetype: modify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replace: unicodePwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unicodePwd::{{ printf &quot;%q&quot; .Password | utf16le | base64 }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">replace: userAccountControl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userAccountControl: 66048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: CN=test-group,OU=OpenBao,DC=adtesting,DC=lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changetype: modify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add: member</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">member: CN={{.Username}},OU=OpenBao,DC=adtesting,DC=lab</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-account-check-out">Service account Check-Out<a href="#service-account-check-out" class="hash-link" aria-label="Direct link to Service account Check-Out" title="Direct link to Service account Check-Out">​</a></h2>
<p>Service account check-out provides a library of service accounts that can be checked out
by a person or by machines. OpenBao will automatically rotate the password each time a
service account is checked in. Service accounts can be voluntarily checked in, or OpenBao
will check them in when their lending period (or, &quot;ttl&quot;, in OpenBao&#x27;s language) ends.</p>
<p>The service account check-out functionality works with various <a href="/openbao/api-docs/secret/ldap/#schema">schemas</a>,
including OpenLDAP, Active Directory, and RACF. In the following usage example, the secrets
engine is configured to manage a library of service accounts in an Active Directory instance.</p>
<p>First we&#x27;ll need to enable the LDAP secrets engine and tell it how to securely connect
to an AD server.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao secrets enable ldap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success! Enabled the ad secrets engine at: ldap/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    binddn=$USERNAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindpass=$PASSWORD \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url=ldaps://138.91.247.105 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userdn=&#x27;dc=example,dc=com&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our next step is to designate a set of service accounts for check-out.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/library/accounting-team \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    service_account_names=fizz@example.com,buzz@example.com \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ttl=10h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_ttl=20h \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    disable_check_in_enforcement=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, the service account names of <code>fizz@example.com</code> and <code>buzz@example.com</code> have
already been created on the remote AD server. They&#x27;ve been set aside solely for OpenBao to handle.
The <code>ttl</code> is how long each check-out will last before OpenBao checks in a service account,
rotating its password during check-in. The <code>max_ttl</code> is the maximum amount of time it can live
if it&#x27;s renewed. These default to <code>24h</code>, and both use <a href="/openbao/docs/concepts/duration-format/">duration format strings</a>.
Also by default, a service account must be checked in by the same OpenBao entity or client token that
checked it out. However, if this behavior causes problems, set <code>disable_check_in_enforcement=true</code>.</p>
<p>When a library of service accounts has been created, view their status at any time to see if they&#x27;re
available or checked out.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read ldap/library/accounting-team/status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key                 Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---                 -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">buzz@example.com    map[available:true]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fizz@example.com    map[available:true]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To check out any service account that&#x27;s available, simply execute:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write -f ldap/library/accounting-team/check-out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key                     Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---                     -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_id                ldap/library/accounting-team/check-out/EpuS8cX7uEsDzOwW9kkKOyGW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_duration          10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_renewable         true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password                ?@09AZKh03hBORZPJcTDgLfntlHqxLy29tcQjPVThzuwWAx/Twx4a2ZcRQRqrZ1w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service_account_name    fizz@example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the default <code>ttl</code> for the check-out is higher than needed, set the check-out to last
for a shorter time by using:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/library/accounting-team/check-out ttl=30m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key                     Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---                     -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_id                ldap/library/accounting-team/check-out/gMonJ2jB6kYs6d3Vw37WFDCY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_duration          30m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_renewable         true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password                ?@09AZerLLuJfEMbRqP+3yfQYDSq6laP48TCJRBJaJu/kDKLsq9WxL9szVAvL/E1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service_account_name    buzz@example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This can be a nice way to say, &quot;Although I <em>can</em> have a check-out for 24 hours, if I
haven&#x27;t checked it in after 30 minutes, I forgot or I&#x27;m a dead instance, so you can just
check it back in.&quot;</p>
<p>If no service accounts are available for check-out, OpenBao will return a 400 Bad Request.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write -f ldap/library/accounting-team/check-out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error writing data to ldap/library/accounting-team/check-out: Error making API request.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL: POST http://localhost:8200/v1/ldap/library/accounting-team/check-out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Code: 400. Errors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* No service accounts available for check-out.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To extend a check-out, renew its lease.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao lease renew ldap/library/accounting-team/check-out/0C2wmeaDmsToVFc0zDiX9cMq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key                Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---                -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_id           ldap/library/accounting-team/check-out/0C2wmeaDmsToVFc0zDiX9cMq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_duration     10h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lease_renewable    true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Renewing a check-out means its current password will live longer, since passwords are rotated
anytime a password is <em>checked in</em> either by a caller, or by OpenBao because the check-out <code>ttl</code>
ends.</p>
<p>To check a service account back in for others to use, call:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write -f ldap/library/accounting-team/check-in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key          Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---          -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_ins    [fizz@example.com]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Most of the time this will just work, but if multiple service accounts are checked out by the same
caller, OpenBao will need to know which one(s) to check in.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write ldap/library/accounting-team/check-in service_account_names=fizz@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key          Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---          -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_ins    [fizz@example.com]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To perform a check-in, OpenBao verifies that the caller <em>should</em> be able to check in a given service account.
To do this, OpenBao looks for either the same <a href="/openbao/tutorials/auth-methods/identity/">entity ID</a>
used to check out the service account, or the same client token.</p>
<p>If a caller is unable to check in a service account, or simply doesn&#x27;t try,
OpenBao will check it back in automatically when the <code>ttl</code> expires. However, if that is too long,
service accounts can be forcibly checked in by a highly privileged user through:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write -f ldap/library/manage/accounting-team/check-in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Key          Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---          -----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_ins    [fizz@example.com]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, alternatively, revoking the secret&#x27;s lease has the same effect.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao lease revoke ldap/library/accounting-team/check-out/PvBVG0m7pEg2940Cb3Jw3KpJ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">All revocation operations queued successfully!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ldap-password-policy">LDAP password policy<a href="#ldap-password-policy" class="hash-link" aria-label="Direct link to LDAP password policy" title="Direct link to LDAP password policy">​</a></h2>
<p>The LDAP secret engine does not hash or encrypt passwords prior to modifying
values in LDAP. This behavior can cause plaintext passwords to be stored in LDAP.</p>
<p>To avoid having plaintext passwords stored, the LDAP server should be configured
with an LDAP password policy (ppolicy, not to be confused with an OpenBao password
policy). A ppolicy can enforce rules such as hashing plaintext passwords by default.</p>
<p>The following is an example of an LDAP password policy to enforce hashing on the
data information tree (DIT) <code>dc=openbao,dc=com</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dn: cn=module{0},cn=config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changetype: modify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add: olcModuleLoad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcModuleLoad: ppolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dn: olcOverlay={2}ppolicy,olcDatabase={1}mdb,cn=config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">changetype: add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: olcPPolicyConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">objectClass: olcOverlayConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcOverlay: {2}ppolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcPPolicyDefault: cn=default,ou=pwpolicies,dc=openbao,dc=com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcPPolicyForwardUpdates: FALSE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcPPolicyHashCleartext: TRUE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">olcPPolicyUseLockout: TRUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tutorial">Tutorial<a href="#tutorial" class="hash-link" aria-label="Direct link to Tutorial" title="Direct link to Tutorial">​</a></h2>
<p>Refer to the <a href="/openbao/tutorials/secrets-management/openldap/">LDAP Secrets Engine</a>
tutorial to learn how to configure and use the LDAP secrets engine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h2>
<p>The LDAP secrets engine has a full HTTP API. Please see the <a href="/openbao/api-docs/secret/ldap/">LDAP secrets engine API docs</a>
for more details.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/docs/secrets/ldap.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/docs/secrets/kubernetes/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/docs/secrets/pki/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a><ul><li><a href="#schemas" class="table-of-contents__link toc-highlight">Schemas</a></li></ul></li><li><a href="#static-credentials" class="table-of-contents__link toc-highlight">Static credentials</a><ul><li><a href="#setup-1" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#password-rotation" class="table-of-contents__link toc-highlight">Password rotation</a></li><li><a href="#auto-password-rotation" class="table-of-contents__link toc-highlight">Auto password rotation</a></li><li><a href="#manual-rotation" class="table-of-contents__link toc-highlight">Manual rotation</a></li><li><a href="#deleting-static-roles" class="table-of-contents__link toc-highlight">Deleting static roles</a></li></ul></li><li><a href="#dynamic-credentials" class="table-of-contents__link toc-highlight">Dynamic credentials</a><ul><li><a href="#setup-2" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#ldif-entries" class="table-of-contents__link toc-highlight">LDIF entries</a></li><li><a href="#active-directory-ad-1" class="table-of-contents__link toc-highlight">Active directory (AD)</a></li></ul></li><li><a href="#service-account-check-out" class="table-of-contents__link toc-highlight">Service account Check-Out</a></li><li><a href="#ldap-password-policy" class="table-of-contents__link toc-highlight">LDAP password policy</a></li><li><a href="#tutorial" class="table-of-contents__link toc-highlight">Tutorial</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 The OpenBao Authors. OpenBao is a <a href="https://wiki.lfedge.org/display/LE/Stage+1%3A+At+Large">Stage One project</a> at <a href="https://www.lfedge.org/"><img src="/openbao/img/lfedge-logo.svg" alt="LF Edge Logo" width="90px"></a>.</div></div></div></footer></div>
</body>
</html>