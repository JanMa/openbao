<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/policies" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Policies | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/docs/concepts/policies/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Policies | OpenBao"><meta data-rh="true" name="description" content="Policies are how authorization is done in OpenBao, allowing you to restrict which parts of OpenBao a user can access."><meta data-rh="true" property="og:description" content="Policies are how authorization is done in OpenBao, allowing you to restrict which parts of OpenBao a user can access."><link data-rh="true" rel="icon" href="/openbao/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/docs/concepts/policies/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/concepts/policies/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/concepts/policies/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.21d6cb17.css">
<script src="/openbao/assets/js/runtime~main.6f3294b2.js" defer="defer"></script>
<script src="/openbao/assets/js/main.44d7b642.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#ffba00;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">The documentation is still work in progress. If you find any mistakes, please open an <a href="https://github.com/openbao/openbao/issues" target="_blank">issue</a></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo-black.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo-white.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/docs/">Docs</a><a class="navbar__item navbar__link" href="/openbao/api-docs/">API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Chat Server<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/what-is-openbao/">What is OpenBao?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/use-cases/">Use cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/get-started/developer-qs/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/browser-support/">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/install/">Installing OpenBao</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/internals/">Internals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/openbao/docs/concepts/">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/dev-server/">&#x27;Dev&#x27; Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/seal/">Seal/Unseal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/lease/">Lease, renew, and revoke</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/auth/">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/tokens/">Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/identity/">Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/oidc-provider/">OIDC provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/response-wrapping/">Response wrapping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/docs/concepts/policies/">Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/password-policies/">Password policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/username-templating/">Username templating</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/ha/">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/storage/">Storage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/openbao/docs/concepts/integrated-storage/">Integrated Storage</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/pgp-gpg-keybase/">PGP, GnuPG and Keybase</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/recovery-mode/">Recovery mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/resource-quotas/">Resource quotas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/transform/">Transform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/mount-migration/">Mount migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/duration-format/">Duration string format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/concepts/user-lockout/">User lockout</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/commands/">Commands (CLI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/agent-and-proxy/">OpenBao Agent and Proxy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/secrets/">Secret Engines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/auth/">Auth Methods</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/audit/">Audit Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/plugins/">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/upgrading/">Upgrade Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/release-notes/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/deprecation/">Deprecation Notices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/policies/">Policies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/contributing/">Contributing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/rfcs/">RFCs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/faq/">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/glossary/">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Policies</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Policies</h1>
<p>Everything in OpenBao is path-based, and policies are no exception. Policies
provide a declarative way to grant or forbid access to certain paths and
operations in OpenBao. This section discusses policy workflows and syntaxes.</p>
<p>Policies are <strong>deny by default</strong>, so an empty policy grants no permission in the
system.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policy-authorization-workflow">Policy-authorization workflow<a href="#policy-authorization-workflow" class="hash-link" aria-label="Direct link to Policy-authorization workflow" title="Direct link to Policy-authorization workflow">​</a></h2>
<p>Before a human or machine can gain access, an administrator must configure OpenBao
with an <a href="/openbao/docs/concepts/auth/">auth method</a>. Authentication is
the process by which human or machine-supplied information is verified against
an internal or external system.</p>
<p>Consider the following diagram, which illustrates the steps a security team
would take to configure OpenBao to authenticate using a corporate LDAP or
ActiveDirectory installation. Even though this example uses LDAP, the concept
applies to all auth methods.</p>
<p><a href="/openbao/assets/files/vault-policy-workflow-9df94d46dd5b2f6829755c2f5b6b2f1b.svg/" target="_blank"><img decoding="async" loading="lazy" alt="OpenBao Auth Workflow" src="/openbao/assets/images/vault-policy-workflow-9df94d46dd5b2f6829755c2f5b6b2f1b.svg" width="669" height="497" class="img_ev3q"></a></p>
<ol>
<li>
<p>The security team configures OpenBao to connect to an auth method.
This configuration varies by auth method. In the case of LDAP, OpenBao
needs to know the address of the LDAP server and whether to connect using TLS.
It is important to note that OpenBao does not store a copy of the LDAP database -
OpenBao will delegate the authentication to the auth method.</p>
</li>
<li>
<p>The security team authors a policy (or uses an existing policy) which grants
access to paths in OpenBao. Policies are written in HCL in your editor of
preference and saved to disk.</p>
</li>
<li>
<p>The policy&#x27;s contents are uploaded and stored in OpenBao and referenced by name.
You can think of the policy&#x27;s name as a pointer or symlink to its set of rules.</p>
</li>
<li>
<p>Most importantly, the security team maps data in the auth method to a policy.
For example, the security team might create mappings like:</p>
<blockquote>
<p>Members of the OU group &quot;dev&quot; map to the OpenBao policy named &quot;readonly-dev&quot;.</p>
</blockquote>
<p>or</p>
<blockquote>
<p>Members of the OU group &quot;ops&quot; map to the OpenBao policies &quot;admin&quot; and &quot;auditor&quot;.</p>
</blockquote>
</li>
</ol>
<p>Now OpenBao has an internal mapping between a backend authentication system and
internal policy. When a user authenticates to OpenBao, the actual authentication
is delegated to the auth method. As a user, the flow looks like:</p>
<p><a href="/openbao/assets/files/vault-auth-workflow-6f4f40f89fb36ebcec16790e0dccc9b3.svg/" target="_blank"><img decoding="async" loading="lazy" alt="OpenBao Auth Workflow" src="/openbao/assets/images/vault-auth-workflow-6f4f40f89fb36ebcec16790e0dccc9b3.svg" width="669" height="497" class="img_ev3q"></a></p>
<ol>
<li>
<p>A user attempts to authenticate to OpenBao using their LDAP credentials,
providing OpenBao with their LDAP username and password.</p>
</li>
<li>
<p>OpenBao establishes a connection to LDAP and asks the LDAP server to verify the
given credentials. Assuming this is successful, the LDAP server returns the
information about the user, including the OU groups.</p>
</li>
<li>
<p>OpenBao maps the result from the LDAP server to policies inside OpenBao using the
mapping configured by the security team in the previous section. OpenBao then
generates a token and attaches the matching policies.</p>
</li>
<li>
<p>OpenBao returns the token to the user. This token has the correct policies
assigned, as dictated by the mapping configuration that was setup by the
security team in advance.</p>
</li>
</ol>
<p>The user then uses this OpenBao token for future operations. If the user performs
the authentication steps again, they will get a <em>new</em> token. The token will have
the same permissions, but the actual token will be different. Authenticating a
second time does not invalidate the original token.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policy-syntax">Policy syntax<a href="#policy-syntax" class="hash-link" aria-label="Direct link to Policy syntax" title="Direct link to Policy syntax">​</a></h2>
<p>Policies are written in <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a> or JSON and describe which paths in OpenBao a
user or machine is allowed to access.</p>
<p>Here is a very simple policy which grants read capabilities to the <a href="/openbao/api-docs/secret/kv/kv-v1/">KVv1</a> path
<code>&quot;secret/foo&quot;</code>:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When this policy is assigned to a token, the token can read from <code>&quot;secret/foo&quot;</code>.
However, the token cannot update or delete <code>&quot;secret/foo&quot;</code>, since the
capabilities do not allow it. Because policies are <strong>deny by default</strong>, the
token would have no other access in OpenBao.</p>
<p>Here is a more detailed policy, and it is documented inline:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This section grants all access on &quot;secret/*&quot;. further restrictions can be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># applied to this broad policy, as shown below.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;read&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;delete&quot;, &quot;list&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Even though we allowed secret/*, this line explicitly denies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># secret/super-secret. this takes precedence.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/super-secret&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;deny&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Policies can also specify allowed, disallowed, and required parameters. here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the key &quot;secret/restricted&quot; can only contain &quot;foo&quot; (any value) and &quot;bar&quot; (one</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># of &quot;zip&quot; or &quot;zap&quot;).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/restricted&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;foo&quot; = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bar&quot; = [&quot;zip&quot;, &quot;zap&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Policies use path-based matching to test the set of capabilities against a
request. A policy <code>path</code> may specify an exact path to match, or it could specify
a glob pattern which instructs OpenBao to use a prefix match:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Permit reading only &quot;secret/foo&quot;. an attached token cannot read &quot;secret/food&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or &quot;secret/foo/bar&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Permit reading everything under &quot;secret/bar&quot;. an attached token could read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;secret/bar/zip&quot;, &quot;secret/bar/zip/zap&quot;, but not &quot;secret/bars/zip&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/bar/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Permit reading everything prefixed with &quot;zip-&quot;. an attached token could read</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;secret/zip-zap&quot; or &quot;secret/zip-zap/zong&quot;, but not &quot;secret/zip/zap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/zip-*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition, a <code>+</code> can be used to denote any number of characters bounded
within a single path segment:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Permit reading the &quot;teamb&quot; path under any top-level path under secret/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/+/teamb&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Permit reading secret/foo/bar/teamb, secret/bar/foo/teamb, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/+/+/teamb&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OpenBao&#x27;s architecture is similar to a filesystem. Every action in OpenBao has a
corresponding path and capability - even OpenBao&#x27;s internal core configuration
endpoints live under the <code>&quot;sys/&quot;</code> path. Policies define access to these paths and
capabilities, which controls a token&#x27;s access to credentials in OpenBao.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> The policy rules that OpenBao applies are determined by the most-specific match
available, using the priority rules described below. This may be an exact match
or the longest-prefix match of a glob. If the same pattern appears in multiple
policies, we take the union of the capabilities. If different patterns appear in
the applicable policies, we take only the highest-priority match from those
policies.</p></div></div>
<p>This means if you define a policy for <code>&quot;secret/foo*&quot;</code>, the policy would
also match <code>&quot;secret/foobar&quot;</code>. Specifically, when there are potentially multiple
matching policy paths, <code>P1</code> and <code>P2</code>, the following matching criteria is applied:</p>
<ol>
<li>If the first wildcard (<code>+</code>) or glob (<code>*</code>) occurs earlier in <code>P1</code>, <code>P1</code> is lower priority</li>
<li>If <code>P1</code> ends in <code>*</code> and <code>P2</code> doesn&#x27;t, <code>P1</code> is lower priority</li>
<li>If <code>P1</code> has more <code>+</code> (wildcard) segments, <code>P1</code> is lower priority</li>
<li>If <code>P1</code> is shorter, it is lower priority</li>
<li>If <code>P1</code> is smaller lexicographically, it is lower priority</li>
</ol>
<p>For example, given the two paths, <code>&quot;secret/*&quot;</code> and <code>&quot;secret/+/+/foo/*&quot;</code>, the first
wildcard appears in the same place, both end in <code>*</code> and the latter has two wildcard
segments while the former has zero. So we end at rule (3), and give <code>&quot;secret/+/+/foo/*&quot;</code>
<em>lower</em> priority.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>**Informational:**The glob character referred to in this documentation is the asterisk (<code>*</code>).
It <em>is not a regular expression</em> and is only supported <strong>as the last character of the path</strong>!</p></div></div>
<p>When providing <code>list</code> capability, it is important to note that since listing
always operates on a prefix, policies must operate on a prefix because OpenBao
will sanitize request paths to be prefixes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="capabilities">Capabilities<a href="#capabilities" class="hash-link" aria-label="Direct link to Capabilities" title="Direct link to Capabilities">​</a></h3>
<p>Each path must define one or more capabilities which provide fine-grained
control over permitted (or denied) operations. As shown in the examples above,
capabilities are always specified as a list of strings, even if there is only
one capability.</p>
<p>To determine the capabilities needed to perform a specific operation, the <code>-output-policy</code> flag can be added to the CLI subcommand. For an example, refer to the <a href="/openbao/docs/commands/#print-policy-requirements">Print Policy Requirements</a> document section.</p>
<p>The list of capabilities include the following:</p>
<ul>
<li>
<p><code>create</code> (<code>POST/PUT</code>) - Allows creating data at the given path. Very few
parts of OpenBao distinguish between <code>create</code> and <code>update</code>, so most operations
require both <code>create</code> and <code>update</code> capabilities. Parts of OpenBao that
provide such a distinction are noted in documentation.</p>
</li>
<li>
<p><code>read</code> (<code>GET</code>) - Allows reading the data at the given path.</p>
</li>
<li>
<p><code>update</code> (<code>POST/PUT</code>) - Allows changing the data at the given path. In most
parts of OpenBao, this implicitly includes the ability to create the initial
value at the path.</p>
</li>
<li>
<p><code>patch</code> (<code>PATCH</code>) -  Allows partial updates to the data at a given path.</p>
</li>
<li>
<p><code>delete</code> (<code>DELETE</code>) - Allows deleting the data at the given path.</p>
</li>
<li>
<p><code>list</code> (<code>LIST</code>) - Allows listing values at the given path. Note that the
keys returned by a <code>list</code> operation are <em>not</em> filtered by policies. Do not
encode sensitive information in key names. Not all backends support listing.</p>
</li>
</ul>
<p>In the list above, the associated HTTP verbs are shown in parenthesis next to
the capability. When authoring policy, it is usually helpful to look at the HTTP
API documentation for the paths and HTTP verbs and map them back onto
capabilities. While the mapping is not strictly 1:1, they are often very
similarly matched.</p>
<p>In addition to the standard set, there are some capabilities that do not map to
HTTP verbs.</p>
<ul>
<li>
<p><code>sudo</code> - Allows access to paths that are <em>root-protected</em>. Tokens are not
permitted to interact with these paths unless they have the <code>sudo</code>
capability (in addition to the other necessary capabilities for performing
an operation against that path, such as <code>read</code> or <code>delete</code>).</p>
<p>For example, modifying the audit log backends requires a token with <code>sudo</code>
privileges.</p>
</li>
<li>
<p><code>deny</code> - Disallows access. This always takes precedence regardless of any
other defined capabilities, including <code>sudo</code>.</p>
</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> Capabilities usually map to the HTTP verb, and not the underlying
action taken. This can be a common source of confusion. Generating database
credentials <em>creates</em> database credentials, but the HTTP request is a GET which
corresponds to a <code>read</code> capability. Thus, to grant access to generate database
credentials, the policy would grant <code>read</code> access on the appropriate path.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="templated-policies">Templated policies<a href="#templated-policies" class="hash-link" aria-label="Direct link to Templated policies" title="Direct link to Templated policies">​</a></h2>
<p>The policy syntax allows for doing variable replacement in some policy strings
with values available to the token. Currently <code>identity</code> information can be
injected, and currently the <code>path</code> keys in policies allow injection.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h3>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>identity.entity.id</code></td><td style="text-align:left">The entity&#x27;s ID</td></tr><tr><td style="text-align:left"><code>identity.entity.name</code></td><td style="text-align:left">The entity&#x27;s name</td></tr><tr><td style="text-align:left"><code>identity.entity.metadata.&lt;metadata key&gt;</code></td><td style="text-align:left">Metadata associated with the entity for the given key</td></tr><tr><td style="text-align:left"><code>identity.entity.aliases.&lt;mount accessor&gt;.id</code></td><td style="text-align:left">Entity alias ID for the given mount</td></tr><tr><td style="text-align:left"><code>identity.entity.aliases.&lt;mount accessor&gt;.name</code></td><td style="text-align:left">Entity alias name for the given mount</td></tr><tr><td style="text-align:left"><code>identity.entity.aliases.&lt;mount accessor&gt;.metadata.&lt;metadata key&gt;</code></td><td style="text-align:left">Metadata associated with the alias for the given mount and metadata key</td></tr><tr><td style="text-align:left"><code>identity.entity.aliases.&lt;mount accessor&gt;.custom_metadata.&lt;custom_metadata key&gt;</code></td><td style="text-align:left">Custom metadata associated with the alias for the given mount and custom metadata key</td></tr><tr><td style="text-align:left"><code>identity.groups.ids.&lt;group id&gt;.name</code></td><td style="text-align:left">The group name for the given group ID</td></tr><tr><td style="text-align:left"><code>identity.groups.names.&lt;group name&gt;.id</code></td><td style="text-align:left">The group ID for the given group name</td></tr><tr><td style="text-align:left"><code>identity.groups.ids.&lt;group id&gt;.metadata.&lt;metadata key&gt;</code></td><td style="text-align:left">Metadata associated with the group for the given key</td></tr><tr><td style="text-align:left"><code>identity.groups.names.&lt;group name&gt;.metadata.&lt;metadata key&gt;</code></td><td style="text-align:left">Metadata associated with the group for the given key</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h3>
<p>The following policy creates a section of the KVv2 Secret Engine to a specific user</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/data/{{identity.entity.id}}/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;read&quot;, &quot;delete&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/metadata/{{identity.entity.id}}/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;list&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you wanted to create a shared section of KV that is associated with entities that are in a
group.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># In the example below, the group ID maps a group and the path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/data/groups/{{identity.groups.ids.fb036ebc-2f62-4124-9503-42aa7A869741.name}}/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;patch&quot;, &quot;read&quot;, &quot;delete&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/metadata/groups/{{identity.groups.ids.fb036ebc-2f62-4124-9503-42aa7A869741.name}}/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;list&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> When developing templated policies, use IDs wherever possible. Each ID is
unique to the user, whereas names can change over time and can be reused. This
ensures that if a given user or group name is changed, the policy will be
mapped to the intended entity or group.</p></div></div>
<p>If you want to use the metadata associated with an authentication plugin in your
templates, you will need to get its <em>mount accessor</em> and access it via the
<code>aliases</code> key.</p>
<p>You can get the mount accessor value using the following command:</p>
<div class="language-shellsession codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shellsession codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$&gt; bao auth list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Path           Type          Accessor                    Description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----           ----          --------                    -----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes/    kubernetes    auth_kubernetes_xxxx        n/a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">token/         token         auth_token_yyyy             token based credentials</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following templated policy allow to read the path associated with the
Kubernetes service account namespace of the identity:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/data/{{identity.entity.aliases.auth_kubernetes_xxxx.metadata.service_account_namespace}}/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;read&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fine-grained-control">Fine-grained control<a href="#fine-grained-control" class="hash-link" aria-label="Direct link to Fine-grained control" title="Direct link to Fine-grained control">​</a></h2>
<p>In addition to the standard set of capabilities, OpenBao offers finer-grained
control over permissions at a given path. The capabilities associated with a
path take precedence over permissions on parameters.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameter-constraints">Parameter constraints<a href="#parameter-constraints" class="hash-link" aria-label="Direct link to Parameter constraints" title="Direct link to Parameter constraints">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> The use of <a href="/openbao/docs/concepts/policies/#policy-syntax">globs</a> (<code>*</code>) may result in <a href="#parameter-constraints-limitations">surprising or unexpected behavior</a>.</p></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> The <code>allowed_parameters</code>, <code>denied_parameters</code>, and <code>required_parameters</code> fields are not supported for policies used with the <a href="/openbao/docs/secrets/kv/kv-v2/">version 2 kv secrets engine</a>.</p></div></div>
<p>See the <a href="/openbao/api-docs/secret/kv/kv-v2/">API Specification</a> for more information.</p>
<p>Policies can take into account HTTP request parameters to further
constrain requests, using the following options:</p>
<ul>
<li>
<p><code>required_parameters</code> - A list of parameters that must be specified.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This requires the user to create &quot;secret/profile&quot; with a parameter/key named</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;name&quot; and &quot;id&quot; where kv v1 is enabled at &quot;secret/&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/profile&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_parameters = [&quot;name&quot;, &quot;id&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><code>allowed_parameters</code> - A list of keys and values that are
permitted on the given path.</p>
<ul>
<li>
<p>Setting a parameter with a value of the empty list allows the parameter to
contain any value.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to update the password parameter value set on any</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># users configured for userpass auth method. The password value can be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># anything. However, the user cannot update other parameter values such as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># token_ttl.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;auth/userpass/users/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;password&quot; = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Setting a parameter with a value of a populated list allows the parameter
to contain only those values.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to create or update an encryption key for transit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># secrets engine enabled at &quot;transit/&quot;. When you do, you can set the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;auto_rotate_period&quot; parameter value so that the key gets rotated.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># However, the rotation period must be &quot;8h&quot;, &quot;24h&quot;, or &quot;5d&quot;. Any other value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># will result in an error.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;transit/keys/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;auto_rotate_period&quot; = [&quot;8h&quot;, &quot;24h&quot;, &quot;5d&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If any keys are specified, all non-specified parameters will be denied
unless the parameter <code>&quot;*&quot;</code> is set to an empty array, which will
allow all other parameters to be modified. Parameters with specific values
will still be restricted to those values.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># When kv v1 secrets engine is enabled at &quot;secret/&quot;, this allows the user to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># create &quot;secret/foo&quot; with a parameter named &quot;bar&quot;. The parameter &quot;bar&quot; can</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># only contain the values &quot;zip&quot; or &quot;zap&quot;, but any other parameters may be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># created with any value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bar&quot; = [&quot;zip&quot;, &quot;zap&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;*&quot;   = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p><code>denied_parameters</code> - A list of keys and values that are not permitted on the given
path. Any values specified here take precedence over <code>allowed_parameters</code>.</p>
<ul>
<li>
<p>Setting a parameter with a value of the empty list denies any changes to
that parameter.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to update the userpass auth method&#x27;s user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># configurations (e.g., &quot;password&quot;) but cannot update the &quot;token_policies&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># and &quot;policies&quot; parameter values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;auth/userpass/users/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  denied_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;token_policies&quot; = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;policies&quot; = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Setting a parameter with a value of a populated list denies any parameter
containing those values.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to create or update token roles. However, the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;allowed_policies&quot; parameter value cannot be &quot;admin&quot;, but the user can</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># assign any other policies to the parameter.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;auth/token/roles/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  denied_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;allowed_policies&quot; = [&quot;admin&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Setting to <code>&quot;*&quot;</code> will deny any parameter.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to create or update an encryption key for transit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># secrets engine enabled at &quot;transit/&quot;. However, the user cannot set any of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># the configuration parameters. As a result, the created key will have all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># parameters set to default values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;transit/keys/*&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  denied_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;*&quot; = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If any parameters are specified, all non-specified parameters are allowed,
unless <code>allowed_parameters</code> is also set, in which case normal rules apply.</p>
</li>
</ul>
</li>
</ul>
<p>Parameter values also support prefix/suffix globbing. Globbing is enabled by
prepending or appending or prepending a splat (<code>*</code>) to the value:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Only allow a parameter named &quot;bar&quot; with a value starting with &quot;foo-*&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bar&quot; = [&quot;foo-*&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> the only value that can be used with the <code>*</code> parameter is <code>[]</code>.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="parameter-constraints-limitations">Parameter constraints limitations<a href="#parameter-constraints-limitations" class="hash-link" aria-label="Direct link to Parameter constraints limitations" title="Direct link to Parameter constraints limitations">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="default-values">Default values<a href="#default-values" class="hash-link" aria-label="Direct link to Default values" title="Direct link to Default values">​</a></h5>
<p>Evaluation of policies with <code>allowed_parameters</code>, <code>denied_parameters</code>, and <code>required_parameters</code> happens
without consideration of parameters&#x27; default values.</p>
<p>Given the following policy:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># The &quot;no_store&quot; parameter cannot be false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  denied_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;no_store&quot; = [false, &quot;false&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following operation will error, because &quot;no_store&quot; is set to false:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write secret/foo no_store=false value=bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Whereas the following operation will succeed, even if the &quot;no_store&quot;
parameter must be a boolean, and it defaults to false:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Succeeds because &quot;no_store=false&quot; isn&#x27;t present in the parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write secret/foo value=bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is because the policy evaluator does not know what the default value is for
the &quot;no_store&quot; parameter. All it sees is that the denied parameter isn&#x27;t present
in the command.</p>
<p>This can be resolved by requiring the &quot;no_store&quot; parameter in your policy:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_parameters = [&quot;no_store&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  denied_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;no_store&quot; = [false, &quot;false&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following command, which previously succeeded, will now fail under the new policy
because there is no &quot;no_store&quot; parameter:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write secret/foo value=bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="globbing">Globbing<a href="#globbing" class="hash-link" aria-label="Direct link to Globbing" title="Direct link to Globbing">​</a></h5>
<p>It&#x27;s also important to note that the use of globbing may result in surprising
or unexpected behavior:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This allows the user to create, update, or patch &quot;secret/foo&quot; with a parameter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># named &quot;bar&quot;. the values passed to parameter &quot;bar&quot; must start with &quot;baz/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># so values like &quot;baz/quux&quot; are fine. however, values like</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;baz/quux,wibble,wobble,wubble&quot; would also be accepted. the API that</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># underlies &quot;secret/foo&quot; might allow comma delimited values for the &quot;bar&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># parameter, and if it did, specifying a value like</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;baz/quux,wibble,wobble,wubble&quot; would result in 4 different values getting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># passed along. seeing values like &quot;wibble&quot; or &quot;wobble&quot; getting passed to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;secret/foo&quot; might surprise someone that expected the allowed_parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># constraint to only allow values starting with &quot;baz/&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;secret/foo&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capabilities = [&quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_parameters = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bar&quot; = [&quot;baz/*&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-response-wrapping-ttls">Required response wrapping TTLs<a href="#required-response-wrapping-ttls" class="hash-link" aria-label="Direct link to Required response wrapping TTLs" title="Direct link to Required response wrapping TTLs">​</a></h3>
<p>These parameters can be used to set minimums/maximums on TTLs set by clients
when requesting that a response be
<a href="/openbao/docs/concepts/response-wrapping/">wrapped</a>, with a granularity of a
second. These use <a href="/openbao/docs/concepts/duration-format/">duration format strings</a>.</p>
<p>In practice, setting a minimum TTL of one second effectively makes response
wrapping mandatory for a particular path.</p>
<ul>
<li>
<p><code>min_wrapping_ttl</code> - The minimum allowed TTL that clients can specify for a
wrapped response. In practice, setting a minimum TTL of one second
effectively makes response wrapping mandatory for a particular path. It can
also be used to ensure that the TTL is not too low, leading to end targets
being unable to unwrap before the token expires.</p>
</li>
<li>
<p><code>max_wrapping_ttl</code> - The maximum allowed TTL that clients can specify for a
wrapped response.</p>
</li>
</ul>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># This effectively makes response wrapping mandatory for this path by setting min_wrapping_ttl to 1 second.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This also sets this path&#x27;s wrapped response maximum allowed TTL to 90 seconds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path &quot;auth/approle/role/my-role/secret-id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    capabilities = [&quot;create&quot;, &quot;update&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    min_wrapping_ttl = &quot;1s&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max_wrapping_ttl = &quot;90s&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If both are specified, the minimum value must be less than the maximum. In
addition, if paths are merged from different stanzas, the lowest value
specified for each is the value that will result, in line with the idea of
keeping token lifetimes as short as possible.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-policies">Built-in policies<a href="#built-in-policies" class="hash-link" aria-label="Direct link to Built-in policies" title="Direct link to Built-in policies">​</a></h2>
<p>OpenBao has two built-in policies: <code>default</code> and <code>root</code>. This section describes
the two built-in policies.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-policy">Default policy<a href="#default-policy" class="hash-link" aria-label="Direct link to Default policy" title="Direct link to Default policy">​</a></h3>
<p>The <code>default</code> policy is a built-in OpenBao policy that cannot be removed. By
default, it is attached to all tokens, but may be explicitly excluded at token
creation time by supporting authentication methods.</p>
<p>The policy contains basic functionality such as the ability for the token to
look up data about itself and to use its cubbyhole data. However, OpenBao is not
prescriptive about its contents. It can be modified to suit your needs; OpenBao
will never overwrite your modifications. If you want to stay up-to-date with
the latest upstream version of the <code>default</code> policy, simply read the contents
of the policy from an up-to-date <code>dev</code> server, and write those contents into
your OpenBao&#x27;s <code>default</code> policy.</p>
<p>To view all permissions granted by the default policy on your OpenBao
installation, run:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read sys/policy/default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To disable attachment of the default policy:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao token create -no-default-policy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data &#x27;{&quot;no_default_policy&quot;: &quot;true&quot;}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/auth/token/create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="root-policy">Root policy<a href="#root-policy" class="hash-link" aria-label="Direct link to Root policy" title="Direct link to Root policy">​</a></h3>
<p>The <code>root</code> policy is a built-in OpenBao policy that cannot be modified or removed.
Any user associated with this policy becomes a root user. A root user can do
<em>anything</em> within OpenBao. As such, it is <strong>highly recommended</strong> that you revoke
any root tokens before running OpenBao in production.</p>
<p>When an OpenBao server is first initialized, there always exists one root user.
This user is used to do the initial configuration and setup of OpenBao. After
configured, the initial root token should be revoked and more strictly
controlled users and authentication should be used.</p>
<p>To revoke a root token, run:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao token revoke &quot;&lt;token&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data &#x27;{&quot;token&quot;: &quot;&lt;token&gt;&quot;}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/auth/token/revoke</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-policies">Managing policies<a href="#managing-policies" class="hash-link" aria-label="Direct link to Managing policies" title="Direct link to Managing policies">​</a></h2>
<p>Policies are authored (written) in your editor of choice. They can be authored
in HCL or JSON, and the syntax is described in detail above. Once saved,
policies must be uploaded to OpenBao before they can be used.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="listing-policies">Listing policies<a href="#listing-policies" class="hash-link" aria-label="Direct link to Listing policies" title="Direct link to Listing policies">​</a></h3>
<p>To list all registered policies in OpenBao:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao read sys/policy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/sys/policy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> You may also see the CLI command <code>bao policies</code>. This is a convenience
wrapper around reading the sys endpoint directly. It provides the same
functionality but formats the output in a special manner.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-policies">Creating policies<a href="#creating-policies" class="hash-link" aria-label="Direct link to Creating policies" title="Direct link to Creating policies">​</a></h3>
<p>Policies may be created (uploaded) via the CLI or via the API. To create a new
policy in OpenBao:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao policy write policy-name policy-file.hcl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data &#x27;{&quot;policy&quot;:&quot;path \&quot;...\&quot; {...} &quot;}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/sys/policy/policy-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In both examples, the name of the policy is &quot;policy-name&quot;. You can think of this
name as a pointer or symlink to the policy ACLs. Tokens are attached policies by
name, which are then mapped to the set of rules corresponding to that name.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-policies">Updating policies<a href="#updating-policies" class="hash-link" aria-label="Direct link to Updating policies" title="Direct link to Updating policies">​</a></h3>
<p>Existing policies may be updated to change permissions via the CLI or via the
API. To update an existing policy in OpenBao, follow the same steps as creating a
policy, but use an existing policy name:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write sys/policy/my-existing-policy policy=@updated-policy.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data &#x27;{&quot;policy&quot;:&quot;path \&quot;...\&quot; {...} &quot;}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/sys/policy/my-existing-policy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deleting-policies">Deleting policies<a href="#deleting-policies" class="hash-link" aria-label="Direct link to Deleting policies" title="Direct link to Deleting policies">​</a></h3>
<p>Existing policies may be deleted via the CLI or API. To delete a policy:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao delete sys/policy/policy-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or via the API:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --header &quot;X-Vault-Token: ...&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  https://openbao.hashicorp.rocks/v1/sys/policy/policy-name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is an idempotent operation. OpenBao will not return an error when deleting a
policy that does not exist.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="associating-policies">Associating policies<a href="#associating-policies" class="hash-link" aria-label="Direct link to Associating policies" title="Direct link to Associating policies">​</a></h2>
<p>OpenBao can automatically associate a set of policies to a token based on an
authorization. This configuration varies significantly between authentication
backends. For simplicity, this example will use OpenBao&#x27;s built-in userpass
auth method.</p>
<p>An OpenBao administrator or someone from the security team would create the user in
OpenBao with a list of associated policies:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/userpass/users/sethvargo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    password=&quot;s3cr3t!&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    policies=&quot;dev-readonly,logs&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This creates an authentication mapping to the policy such that, when the user
authenticates successfully to OpenBao, they will be given a token which has the list
of policies attached.</p>
<p>The user wishing to authenticate would run</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao login -method=&quot;userpass&quot; username=&quot;sethvargo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password (will be hidden): ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the provided information is correct, OpenBao will generate a token, assign the
list of configured policies to the token, and return that token to the
authenticated user.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="root-protected-api-endpoints">Root protected API endpoints<a href="#root-protected-api-endpoints" class="hash-link" aria-label="Direct link to Root protected API endpoints" title="Direct link to Root protected API endpoints">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note:</strong> OpenBao treats the HTTP POST and PUT verbs as equivalent, so for each mention
of POST in the table above, PUT may also be used. OpenBao uses the non-standard LIST HTTP
verb, but also allows list requests to be made using the GET verb along with <code>?list=true</code>
as a query parameter, so for each mention of LIST in the table above, GET with <code>?list=true</code>
may also be used.</p></div></div>
<p>The following paths requires a root token or <code>sudo</code> capability in the policy:</p>
<table><thead><tr><th>Path</th><th>HTTP verb</th><th>Description</th></tr></thead><tbody><tr><td><a href="/openbao/api-docs/auth/token/#list-accessors">auth/token/accessors</a></td><td>LIST</td><td>List token accessors for all current OpenBao service tokens</td></tr><tr><td><a href="/openbao/api-docs/auth/token/#create-token">auth/token/create</a></td><td>POST</td><td>Create a periodic or an orphan token (<code>period</code> or <code>no_parent</code>) option</td></tr><tr><td><a href="/openbao/api-docs/secret/pki/#delete-all-issuers-and-keys">pki/root</a></td><td>DELETE</td><td>Delete the current CA key (<a href="/openbao/docs/secrets/pki/">pki secrets engine</a>)</td></tr><tr><td><a href="/openbao/api-docs/secret/pki/#sign-self-issued">pki/root/sign-self-issued</a></td><td>POST</td><td>Use the configured CA certificate to sign a self-issued certificate (<a href="/openbao/docs/secrets/pki/">pki secrets engine</a>)</td></tr><tr><td><a href="/openbao/api-docs/system/audit/">sys/audit</a></td><td>GET</td><td>List enabled audit devices</td></tr><tr><td><a href="/openbao/api-docs/system/audit/">sys/audit/<!-- -->:path</a></td><td>POST, DELETE</td><td>Enable or remove an audit device</td></tr><tr><td><a href="/openbao/api-docs/system/auth/">sys/auth/<!-- -->:path</a></td><td>GET, POST, DELETE</td><td>Manage the auth methods (enable, read, and delete)</td></tr><tr><td><a href="/openbao/api-docs/system/auth/#tune-auth-method">sys/auth/<!-- -->:path<!-- -->/tune</a></td><td>GET, POST</td><td>Manage the auth methods (enable, read, delete, and tune)</td></tr><tr><td><a href="/openbao/api-docs/system/config-auditing/">sys/config/auditing/request-headers</a></td><td>GET</td><td>List the request headers that are configured to be audited</td></tr><tr><td><a href="/openbao/api-docs/system/config-auditing/">sys/config/auditing/request-headers/<!-- -->:name</a></td><td>GET, POST, DELETE</td><td>Manage the auditing headers (create, update, read and delete)</td></tr><tr><td><a href="/openbao/api-docs/system/config-cors/">sys/config/cors</a></td><td>GET, POST, DELETE</td><td>Configure CORS setting</td></tr><tr><td><a href="/openbao/api-docs/system/config-ui/">sys/config/ui/headers</a></td><td>GET, LIST</td><td>Configure the UI settings</td></tr><tr><td><a href="/openbao/api-docs/system/config-ui/#name">sys/config/ui/headers/<!-- -->:name</a></td><td>POST, DELETE</td><td>Configure custom HTTP headers to be served with the UI</td></tr><tr><td><a href="/openbao/api-docs/system/inspect/router/">sys/internal/inspect/router/<!-- -->:tag</a></td><td>GET</td><td>Inspect the internal components of OpenBao&#x27;s router. <code>tag</code> must be one of root, uuid, accessor, or storage</td></tr><tr><td><a href="/openbao/api-docs/system/leases/#list-leases">sys/leases/lookup/<!-- -->:prefix</a></td><td>LIST</td><td>List lease IDs</td></tr><tr><td><a href="/openbao/api-docs/system/leases/#revoke-force">sys/leases/revoke-force/<!-- -->:prefix</a></td><td>POST</td><td>Revoke all secrets or tokens ignoring backend errors</td></tr><tr><td><a href="/openbao/api-docs/system/leases/#revoke-prefix">sys/leases/revoke-prefix/<!-- -->:prefix</a></td><td>POST</td><td>Revoke all secrets generated under a given prefix</td></tr><tr><td><a href="/openbao/api-docs/system/plugins-catalog/#register-plugin">sys/plugins/catalog/<!-- -->:type<!-- -->/<!-- -->:name</a></td><td>GET, POST, DELETE</td><td>Register a new plugin, or read/remove an existing plugin</td></tr><tr><td><a href="/openbao/api-docs/system/raw/">sys/raw<!-- -->:path</a></td><td>GET, POST, DELETE</td><td>Used to access the raw underlying store in OpenBao</td></tr><tr><td><a href="/openbao/api-docs/system/raw/#list-raw">sys/raw<!-- -->:prefix</a></td><td>GET, LIST</td><td>Returns a list keys for a given path prefix</td></tr><tr><td><a href="/openbao/api-docs/system/remount/">sys/remount</a></td><td>POST</td><td>Moves an already-mounted backend to a new mount point</td></tr><tr><td><a href="/openbao/api-docs/system/rotate/">sys/rotate</a></td><td>POST</td><td>Trigger a rotation of the backend encryption key</td></tr><tr><td><a href="/openbao/api-docs/system/seal/">sys/seal</a></td><td>POST</td><td>Seals the OpenBao</td></tr><tr><td><a href="/openbao/api-docs/system/step-down/">sys/step-down</a></td><td>POST</td><td>Forces a node to give up active status</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tokens">Tokens<a href="#tokens" class="hash-link" aria-label="Direct link to Tokens" title="Direct link to Tokens">​</a></h3>
<p>Tokens have two sets of policies: identity policies, which are computed
based on the entity and its groups, and token policies, which are either defined
based on the login method or, in the case of explicit token creates via the API,
are an input to the token creation.  What follows concerns token policies
exclusively: a token&#x27;s identity policies cannot be controlled except by modifying
the underlying entities, groups, and group memberships.</p>
<p>Tokens are associated with their policies at creation time. For example:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao token create -policy=dev-readonly -policy=logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Normally the only policies that may be specified are those which are present
in the current token&#x27;s (i.e. the new token&#x27;s parent&#x27;s) token policies.
However, root users can assign any policies.</p>
<p>There is no way to modify the policies associated with a token once the token
has been issued. The token must be revoked and a new one acquired to receive a
new set of policies.</p>
<p>However, the <em>contents</em> of policies are parsed in real-time whenever the token is used.
As a result, if a policy is modified, the modified rules will be in force the
next time a token, with that policy attached, is used to make a call to OpenBao.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/docs/concepts/policies.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/docs/concepts/response-wrapping/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Response wrapping</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/docs/concepts/password-policies/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Password policies</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#policy-authorization-workflow" class="table-of-contents__link toc-highlight">Policy-authorization workflow</a></li><li><a href="#policy-syntax" class="table-of-contents__link toc-highlight">Policy syntax</a><ul><li><a href="#capabilities" class="table-of-contents__link toc-highlight">Capabilities</a></li></ul></li><li><a href="#templated-policies" class="table-of-contents__link toc-highlight">Templated policies</a><ul><li><a href="#parameters" class="table-of-contents__link toc-highlight">Parameters</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#fine-grained-control" class="table-of-contents__link toc-highlight">Fine-grained control</a><ul><li><a href="#parameter-constraints" class="table-of-contents__link toc-highlight">Parameter constraints</a></li><li><a href="#required-response-wrapping-ttls" class="table-of-contents__link toc-highlight">Required response wrapping TTLs</a></li></ul></li><li><a href="#built-in-policies" class="table-of-contents__link toc-highlight">Built-in policies</a><ul><li><a href="#default-policy" class="table-of-contents__link toc-highlight">Default policy</a></li><li><a href="#root-policy" class="table-of-contents__link toc-highlight">Root policy</a></li></ul></li><li><a href="#managing-policies" class="table-of-contents__link toc-highlight">Managing policies</a><ul><li><a href="#listing-policies" class="table-of-contents__link toc-highlight">Listing policies</a></li><li><a href="#creating-policies" class="table-of-contents__link toc-highlight">Creating policies</a></li><li><a href="#updating-policies" class="table-of-contents__link toc-highlight">Updating policies</a></li><li><a href="#deleting-policies" class="table-of-contents__link toc-highlight">Deleting policies</a></li></ul></li><li><a href="#associating-policies" class="table-of-contents__link toc-highlight">Associating policies</a></li><li><a href="#root-protected-api-endpoints" class="table-of-contents__link toc-highlight">Root protected API endpoints</a><ul><li><a href="#tokens" class="table-of-contents__link toc-highlight">Tokens</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OpenBao a Series of LF Projects, LLC <br> For web site terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">lfprojects.org</a>. <br>  OpenBao is a <a href="https://wiki.lfedge.org/display/LE/Stage+1%3A+At+Large">Stage One project</a> at <a href="https://www.lfedge.org/"><img src="/openbao/img/lfedge-logo.svg" alt="LF Edge Logo" width="90px"></a>.</div></div></div></footer></div>
</body>
</html>