<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-auth/ldap" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">LDAP auth method | OpenBao</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://janma.github.io/openbao/docs/auth/ldap/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="LDAP auth method | OpenBao"><meta data-rh="true" name="description" content="The &quot;ldap&quot; auth method allows users to authenticate with OpenBao using LDAP
credentials."><meta data-rh="true" property="og:description" content="The &quot;ldap&quot; auth method allows users to authenticate with OpenBao using LDAP
credentials."><link data-rh="true" rel="icon" href="/openbao/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://janma.github.io/openbao/docs/auth/ldap/"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/auth/ldap/" hreflang="en"><link data-rh="true" rel="alternate" href="https://janma.github.io/openbao/docs/auth/ldap/" hreflang="x-default"><link rel="stylesheet" href="/openbao/assets/css/styles.21d6cb17.css">
<script src="/openbao/assets/js/runtime~main.6f3294b2.js" defer="defer"></script>
<script src="/openbao/assets/js/main.44d7b642.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#ffba00;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">The documentation is still work in progress. If you find any mistakes, please open an <a href="https://github.com/openbao/openbao/issues" target="_blank">issue</a></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openbao/"><div class="navbar__logo"><img src="/openbao/img/logo-black.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/openbao/img/logo-white.svg" alt="OpenBao Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">OpenBao</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/openbao/docs/">Docs</a><a class="navbar__item navbar__link" href="/openbao/api-docs/">API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://github.com/openbao/openbao/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://chat.lfx.linuxfoundation.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Chat Server<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wiki.lfedge.org/display/OH/OpenBao+%28Hashicorp+Vault+Fork+effort%29+FAQ" target="_blank" rel="noopener noreferrer" class="dropdown__link">Wiki<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/openbao/openbao" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/what-is-openbao/">What is OpenBao?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/use-cases/">Use cases</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/get-started/developer-qs/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/browser-support/">Browser Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/install/">Installing OpenBao</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/internals/">Internals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/concepts/">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/configuration/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/commands/">Commands (CLI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/agent-and-proxy/">OpenBao Agent and Proxy</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/secrets/">Secret Engines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/openbao/docs/auth/">Auth Methods</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/approle/">AppRole</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/openbao/docs/auth/jwt/">JWT/OIDC</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/kerberos/">Kerberos</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/kubernetes/">Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openbao/docs/auth/ldap/">LDAP</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/openbao/docs/auth/login-mfa/">Login MFA</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/radius/">RADIUS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/cert/">TLS Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/token/">Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openbao/docs/auth/userpass/">Username and Password</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/audit/">Audit Devices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/plugins/">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/upgrading/">Upgrade Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/release-notes/">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/deprecation/">Deprecation Notices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/policies/">Policies</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/contributing/">Contributing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/rfcs/">RFCs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/openbao/docs/faq/">FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/openbao/docs/glossary/">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/openbao/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Auth Methods</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">LDAP</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>LDAP auth method</h1>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>Note</strong>: This engine can use external X.509 certificates as part of TLS or signature validation.
Verifying signatures against X.509 certificates that use SHA-1 is deprecated and is no longer
usable without a workaround. See the
<a href="/openbao/docs/deprecation/faq/#q-what-is-the-impact-of-removing-support-for-x-509-certificates-with-signatures-that-use-sha-1">deprecation FAQ</a>
for more information.</p></div></div>
<p>The <code>ldap</code> auth method allows authentication using an existing LDAP
server and user/password credentials. This allows OpenBao to be integrated
into environments using LDAP without duplicating the user/pass configuration
in multiple places.</p>
<p>The mapping of groups and users in LDAP to OpenBao policies is managed by using
the <code>users/</code> and <code>groups/</code> paths.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-on-escaping">A note on escaping<a href="#a-note-on-escaping" class="hash-link" aria-label="Direct link to A note on escaping" title="Direct link to A note on escaping">​</a></h2>
<p><strong>It is up to the administrator</strong> to provide properly escaped DNs. This
includes the user DN, bind DN for search, and so on.</p>
<p>The only DN escaping performed by this method is on usernames given at login
time when they are inserted into the final bind DN, and uses escaping rules
defined in RFC 4514.</p>
<p>Additionally, Active Directory has escaping rules that differ slightly from the
RFC; in particular it requires escaping of &#x27;#&#x27; regardless of position in the DN
(the RFC only requires it to be escaped when it is the first character), and
&#x27;=&#x27;, which the RFC indicates can be escaped with a backslash, but does not
contain in its set of required escapes. If you are using Active Directory and
these appear in your usernames, please ensure that they are escaped, in
addition to being properly escaped in your configured DNs.</p>
<p>For reference, see <a href="https://www.ietf.org/rfc/rfc4514.txt" target="_blank" rel="noopener noreferrer">RFC 4514</a> and this
<a href="http://social.technet.microsoft.com/wiki/contents/articles/5312.active-directory-characters-to-escape.aspx" target="_blank" rel="noopener noreferrer">TechNet post on characters to escape in Active
Directory</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="via-the-cli">Via the CLI<a href="#via-the-cli" class="hash-link" aria-label="Direct link to Via the CLI" title="Direct link to Via the CLI">​</a></h3>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao login -method=ldap username=mitchellh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password (will be hidden):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully authenticated! The policies that are associated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with this token are listed below:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">admins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="via-the-api">Via the API<a href="#via-the-api" class="hash-link" aria-label="Direct link to Via the API" title="Direct link to Via the API">​</a></h3>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &#x27;{&quot;password&quot;: &quot;foo&quot;}&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http://127.0.0.1:8200/v1/auth/ldap/login/mitchellh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response will be in JSON. For example:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;lease_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;renewable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;lease_duration&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;auth&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;client_token&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;c4f280f6-fdb2-18eb-89d3-589e2e834cdb&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;policies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;admins&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;metadata&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string-property property" style="color:#36acaa">&quot;username&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mitchellh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;lease_duration&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;renewable&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>Auth methods must be configured in advance before users or machines can
authenticate. These steps are usually completed by an operator or configuration
management tool.</p>
<ol>
<li>
<p>Enable the ldap auth method:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao auth enable ldap</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure connection details for your LDAP server, information on how to
authenticate users, and instructions on how to query for group membership. The
configuration options are categorized and detailed below.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-parameters">Connection parameters<a href="#connection-parameters" class="hash-link" aria-label="Direct link to Connection parameters" title="Direct link to Connection parameters">​</a></h3>
<ul>
<li><code>url</code> (string, required) - The LDAP server to connect to. Examples: <code>ldap://ldap.myorg.com</code>, <code>ldaps://ldap.myorg.com:636</code>. This can also be a comma-delineated list of URLs, e.g. <code>ldap://ldap.myorg.com,ldaps://ldap.myorg.com:636</code>, in which case the servers will be tried in-order if there are errors during the connection process.</li>
<li><code>starttls</code> (bool, optional) - If true, issues a <code>StartTLS</code> command after establishing an unencrypted connection.</li>
<li><code>insecure_tls</code> - (bool, optional) - If true, skips LDAP server SSL certificate verification - insecure, use with caution!</li>
<li><code>certificate</code> - (string, optional) - CA certificate to use when verifying LDAP server certificate, must be x509 PEM encoded.</li>
<li><code>client_tls_cert</code> - (string, optional) - Client certificate to provide to the LDAP server, must be x509 PEM encoded.</li>
<li><code>client_tls_key</code> - (string, optional) - Client certificate key to provide to the LDAP server, must be x509 PEM encoded.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="binding-parameters">Binding parameters<a href="#binding-parameters" class="hash-link" aria-label="Direct link to Binding parameters" title="Direct link to Binding parameters">​</a></h3>
<p>There are two alternate methods of resolving the user object used to authenticate the end user: <em>Search</em> or <em>User Principal Name</em>. When using <em>Search</em>, the bind can be either anonymous or authenticated. User Principal Name is a method of specifying users supported by Active Directory. More information on UPN can be found <a href="https://msdn.microsoft.com/en-us/library/ms677605(v=vs.85).aspx#userPrincipalName" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="binding---authenticated-search">Binding - authenticated search<a href="#binding---authenticated-search" class="hash-link" aria-label="Direct link to Binding - authenticated search" title="Direct link to Binding - authenticated search">​</a></h4>
<ul>
<li><code>binddn</code> (string, optional) - Distinguished name of object to bind when performing user and group search. Example: <code>cn=openbao,ou=Users,dc=example,dc=com</code></li>
<li><code>bindpass</code> (string, optional) - Password to use along with <code>binddn</code> when performing user search.</li>
<li><code>userdn</code> (string, optional) - Base DN under which to perform user search. Example: <code>ou=Users,dc=example,dc=com</code></li>
<li><code>userattr</code> (string, optional) - Attribute on user attribute object matching the username passed when authenticating. Examples: <code>sAMAccountName</code>, <code>cn</code>, <code>uid</code></li>
<li><code>userfilter</code> (string, optional) - Go template used to construct a ldap user search filter. The template can access the following context variables: [<code>UserAttr</code>, <code>Username</code>]. The default userfilter is <code>({{.UserAttr}}={{.Username}})</code> or <code>(userPrincipalName={{.Username}}@UPNDomain)</code> if the <code>upndomain</code> parameter is set. The user search filter can be used to restrict what user can attempt to log in. For example, to limit login to users that are not contractors, you could write <code>(&amp;(objectClass=user)({{.UserAttr}}={{.Username}})(!(employeeType=Contractor)))</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>When specifying a <code>userfilter</code>, either the templated value <code>{{.UserAttr}}</code> or
the literal value that matches <code>userattr</code> should be present in the filter to
ensure that the search returns a unique result that takes <code>userattr</code> into
consideration for entity alias mapping purposes and avoid possible collisions on login.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="binding---anonymous-search">Binding - anonymous search<a href="#binding---anonymous-search" class="hash-link" aria-label="Direct link to Binding - anonymous search" title="Direct link to Binding - anonymous search">​</a></h4>
<ul>
<li><code>discoverdn</code> (bool, optional) - If true, use anonymous bind to discover the bind DN of a user</li>
<li><code>userdn</code> (string, optional) - Base DN under which to perform user search. Example: <code>ou=Users,dc=example,dc=com</code></li>
<li><code>userattr</code> (string, optional) - Attribute on user attribute object matching the username passed when authenticating. Examples: <code>sAMAccountName</code>, <code>cn</code>, <code>uid</code></li>
<li><code>userfilter</code> (string, optional) - Go template used to construct a ldap user search filter. The template can access the following context variables: [<code>UserAttr</code>, <code>Username</code>]. The default userfilter is <code>({{.UserAttr}}={{.Username}})</code> or <code>(userPrincipalName={{.Username}}@UPNDomain)</code> if the <code>upndomain</code> parameter is set. The user search filter can be used to restrict what user can attempt to log in. For example, to limit login to users that are not contractors, you could write <code>(&amp;(objectClass=user)({{.UserAttr}}={{.Username}})(!(employeeType=Contractor)))</code>.</li>
<li><code>deny_null_bind</code> (bool, optional) - This option prevents users from bypassing authentication when providing an empty password. The default is <code>true</code>.</li>
<li><code>anonymous_group_search</code> (bool, optional) - Use anonymous binds when performing LDAP group searches. Defaults to <code>false</code>.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>When specifying a <code>userfilter</code>, either the templated value <code>{{.UserAttr}}</code> or
the literal value that matches <code>userattr</code> should be present in the filter to
ensure that the search returns a unique result that takes <code>userattr</code> into
consideration for entity alias mapping purposes and avoid possible collisions on login.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="alias-dereferencing">Alias dereferencing<a href="#alias-dereferencing" class="hash-link" aria-label="Direct link to Alias dereferencing" title="Direct link to Alias dereferencing">​</a></h4>
<ul>
<li><code>dereference_aliases</code> (string, optional) - Control how aliases are dereferenced when performing the search. Possible values are: <code>never</code>, <code>finding</code>, <code>searching</code>, and <code>always</code>. <code>finding</code> will only dereference aliases during name resolution of the base. <code>searching</code> will dereference aliases after name resolution.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="binding---user-principal-name-ad">Binding - user principal name (AD)<a href="#binding---user-principal-name-ad" class="hash-link" aria-label="Direct link to Binding - user principal name (AD)" title="Direct link to Binding - user principal name (AD)">​</a></h4>
<ul>
<li><code>upndomain</code> (string, optional) - userPrincipalDomain used to construct the UPN string for the authenticating user. The constructed UPN will appear as <code>[username]@UPNDomain</code>. Example: <code>example.com</code>, which will cause OpenBao to bind as <code>username@example.com</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="group-membership-resolution">Group membership resolution<a href="#group-membership-resolution" class="hash-link" aria-label="Direct link to Group membership resolution" title="Direct link to Group membership resolution">​</a></h3>
<p>Once a user has been authenticated, the LDAP auth method must know how to resolve which groups the user is a member of. The configuration for this can vary depending on your LDAP server and your directory schema. There are two main strategies when resolving group membership - the first is searching for the authenticated user object and following an attribute to groups it is a member of. The second is to search for group objects of which the authenticated user is a member of. Both methods are supported.</p>
<ul>
<li><code>groupfilter</code> (string, optional) - Go template used when constructing the group membership query. The template can access the following context variables: [<code>UserDN</code>, <code>Username</code>]. The default is <code>(|(memberUid={{.Username}})(member={{.UserDN}})(uniqueMember={{.UserDN}}))</code>, which is compatible with several common directory schemas. To support nested group resolution for Active Directory, instead use the following query: <code>(&amp;(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))</code>.</li>
<li><code>groupdn</code> (string, required) - LDAP search base to use for group membership search. This can be the root containing either groups or users. Example: <code>ou=Groups,dc=example,dc=com</code></li>
<li><code>groupattr</code> (string, optional) - LDAP attribute to follow on objects returned by <code>groupfilter</code> in order to enumerate user group membership. Examples: for groupfilter queries returning <em>group</em> objects, use: <code>cn</code>. For queries returning <em>user</em> objects, use: <code>memberOf</code>. The default is <code>cn</code>.</li>
</ul>
<p><em>Note</em>: When using <em>Authenticated Search</em> for binding parameters (see above) the distinguished name defined for <code>binddn</code> is used for the group search. Otherwise, the authenticating user is used to perform the group search.</p>
<p>Use <code>bao path-help</code> for more details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">​</a></h3>
<ul>
<li><code>username_as_alias</code> (bool, optional) - If set to true, forces the auth method to use the username passed by the user as the alias name.</li>
<li><code>max_page_size</code> (int, optional) - If set to a value greater than 0, the LDAP backend will use the LDAP server&#x27;s paged search control to request pages of up to the given size. This can be used to avoid hitting the LDAP server&#x27;s maximum result size limit. Otherwise, the LDAP backend will not use the paged search control.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples:<a href="#examples" class="hash-link" aria-label="Direct link to Examples:" title="Direct link to Examples:">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-1">Scenario 1<a href="#scenario-1" class="hash-link" aria-label="Direct link to Scenario 1" title="Direct link to Scenario 1">​</a></h3>
<ul>
<li>LDAP server running on <code>ldap.example.com</code>, port 389.</li>
<li>Server supports <code>STARTTLS</code> command to initiate encryption on the standard port.</li>
<li>CA Certificate stored in file named <code>ldap_ca_cert.pem</code></li>
<li>Server is Active Directory supporting the userPrincipalName attribute. Users are identified as <code>username@example.com</code>.</li>
<li>Groups are nested, we will use <code>LDAP_MATCHING_RULE_IN_CHAIN</code> to walk the ancestry graph.</li>
<li>Group search will start under <code>ou=Groups,dc=example,dc=com</code>. For all group objects under that path, the <code>member</code> attribute will be checked for a match against the authenticated user.</li>
<li>Group names are identified using their <code>cn</code> attribute.</li>
</ul>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url=&quot;ldap://ldap.example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userdn=&quot;ou=Users,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupdn=&quot;ou=Groups,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupfilter=&quot;(&amp;(objectClass=group)(member:1.2.840.113556.1.4.1941:={{.UserDN}}))&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupattr=&quot;cn&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    upndomain=&quot;example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate=@ldap_ca_cert.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    insecure_tls=false \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    starttls=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-2">Scenario 2<a href="#scenario-2" class="hash-link" aria-label="Direct link to Scenario 2" title="Direct link to Scenario 2">​</a></h3>
<ul>
<li>LDAP server running on <code>ldap.example.com</code>, port 389.</li>
<li>Server supports <code>STARTTLS</code> command to initiate encryption on the standard port.</li>
<li>CA Certificate stored in file named <code>ldap_ca_cert.pem</code></li>
<li>Server does not allow anonymous binds for performing user search.</li>
<li>Bind account used for searching is <code>cn=openbao,ou=users,dc=example,dc=com</code> with password <code>My$ecrt3tP4ss</code>.</li>
<li>User objects are under the <code>ou=Users,dc=example,dc=com</code> organizational unit.</li>
<li>Username passed to openbao when authenticating maps to the <code>sAMAccountName</code> attribute.</li>
<li>Group membership will be resolved via the <code>memberOf</code> attribute of <em>user</em> objects. That search will begin under <code>ou=Users,dc=example,dc=com</code>.</li>
</ul>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url=&quot;ldap://ldap.example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userattr=sAMAccountName \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userdn=&quot;ou=Users,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupdn=&quot;ou=Users,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupfilter=&quot;(&amp;(objectClass=person)(uid={{.Username}}))&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupattr=&quot;memberOf&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    binddn=&quot;cn=openbao,ou=users,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bindpass=&#x27;My$ecrt3tP4ss&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate=@ldap_ca_cert.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    insecure_tls=false \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    starttls=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-3">Scenario 3<a href="#scenario-3" class="hash-link" aria-label="Direct link to Scenario 3" title="Direct link to Scenario 3">​</a></h3>
<ul>
<li>LDAP server running on <code>ldap.example.com</code>, port 636 (LDAPS)</li>
<li>CA Certificate stored in file named <code>ldap_ca_cert.pem</code></li>
<li>User objects are under the <code>ou=Users,dc=example,dc=com</code> organizational unit.</li>
<li>Username passed to OpenBao when authenticating maps to the <code>uid</code> attribute.</li>
<li>User bind DN will be auto-discovered using anonymous binding.</li>
<li>Group membership will be resolved via any one of <code>memberUid</code>, <code>member</code>, or <code>uniqueMember</code> attributes. That search will begin under <code>ou=Groups,dc=example,dc=com</code>.</li>
<li>Group names are identified using the <code>cn</code> attribute.</li>
</ul>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/config \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url=&quot;ldaps://ldap.example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userattr=&quot;uid&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    userdn=&quot;ou=Users,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    discoverdn=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    groupdn=&quot;ou=Groups,dc=example,dc=com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate=@ldap_ca_cert.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    insecure_tls=false \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    starttls=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ldap-group---policy-mapping">LDAP group -&gt; policy mapping<a href="#ldap-group---policy-mapping" class="hash-link" aria-label="Direct link to LDAP group -&gt; policy mapping" title="Direct link to LDAP group -&gt; policy mapping">​</a></h2>
<p>Next we want to create a mapping from an LDAP group to an OpenBao policy:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/groups/scientists policies=foo,bar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This maps the LDAP group &quot;scientists&quot; to the &quot;foo&quot; and &quot;bar&quot; OpenBao policies.
We can also add specific LDAP users to additional (potentially non-LDAP)
groups. Note that policies can also be specified on LDAP users as well.</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/groups/engineers policies=foobar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ bao write auth/ldap/users/tesla groups=engineers policies=zoobar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This adds the LDAP user &quot;tesla&quot; to the &quot;engineers&quot; group, which maps to
the &quot;foobar&quot; OpenBao policy. User &quot;tesla&quot; itself is associated with &quot;zoobar&quot;
policy.</p>
<p>Finally, we can test this by authenticating:</p>
<div class="language-shell-session codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell-session codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ bao login -method=ldap username=tesla</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password (will be hidden):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Successfully authenticated! The policies that are associated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with this token are listed below:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">default, foobar, zoobar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="note-on-policy-mapping">Note on policy mapping<a href="#note-on-policy-mapping" class="hash-link" aria-label="Direct link to Note on policy mapping" title="Direct link to Note on policy mapping">​</a></h2>
<p>It should be noted that user -&gt; policy mapping happens at token creation time. And changes in group membership on the LDAP server will not affect tokens that have already been provisioned. To see these changes, old tokens should be revoked and the user should be asked to reauthenticate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-lockout">User lockout<a href="#user-lockout" class="hash-link" aria-label="Direct link to User lockout" title="Direct link to User lockout">​</a></h2>
<p>If a user provides bad credentials several times in quick succession,
OpenBao will stop trying to validate their credentials for a while, instead returning immediately
with a permission denied error. We call this behavior &quot;user lockout&quot;. The time for which
a user will be locked out is called “lockout duration”. The user will be able to login after the lockout
duration has passed. The number of failed login attempts after which the user is locked out is called
“lockout threshold”. The lockout threshold counter is reset to zero after a few minutes without login attempts,
or upon a successful login attempt. The duration after which the counter will be reset to zero
after no login attempts is called &quot;lockout counter reset&quot;. This can defeat both automated and targeted requests
i.e, user-based password guessing attacks as well as automated attacks.</p>
<p>The user lockout feature is enabled by default. The default values for &quot;lockout threshold&quot; is 5 attempts,
&quot;lockout duration&quot; is 15 minutes, &quot;lockout counter reset&quot; is 15 minutes.</p>
<p>The user lockout feature can be disabled as follows:</p>
<ul>
<li>It can be disabled globally using environment variable <code>VAULT_DISABLE_USER_LOCKOUT</code>.</li>
<li>It can be disabled for all supported auth methods (ldap, userpass and approle) or a specific supported auth method using the <code>disable_lockout</code>
parameter within <code>user_lockout</code> stanza in configuration file.
Please see <a href="/openbao/docs/configuration/user-lockout/#user_lockout-stanza">user lockout configuration</a> for more details.</li>
<li>It can be disabled for a specific auth mount using &quot;auth tune&quot;. Please see <a href="/openbao/docs/commands/auth/tune/">auth tune command</a>
or <a href="/openbao/api-docs/system/auth/#tune-auth-method">auth tune api</a> for more details.</li>
</ul>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p><strong>NOTE</strong>: This feature is only supported by the userpass, ldap, and approle auth methods.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API">​</a></h2>
<p>The LDAP auth method has a full HTTP API. Please see the
<a href="/openbao/api-docs/auth/ldap/">LDAP auth method API</a> for more
details.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/openbao/openbao/tree/main/website/content/docs/auth/ldap.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/openbao/docs/auth/kubernetes/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/openbao/docs/auth/login-mfa/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-note-on-escaping" class="table-of-contents__link toc-highlight">A note on escaping</a></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a><ul><li><a href="#via-the-cli" class="table-of-contents__link toc-highlight">Via the CLI</a></li><li><a href="#via-the-api" class="table-of-contents__link toc-highlight">Via the API</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#connection-parameters" class="table-of-contents__link toc-highlight">Connection parameters</a></li><li><a href="#binding-parameters" class="table-of-contents__link toc-highlight">Binding parameters</a></li><li><a href="#group-membership-resolution" class="table-of-contents__link toc-highlight">Group membership resolution</a></li><li><a href="#other" class="table-of-contents__link toc-highlight">Other</a></li></ul></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples:</a><ul><li><a href="#scenario-1" class="table-of-contents__link toc-highlight">Scenario 1</a></li><li><a href="#scenario-2" class="table-of-contents__link toc-highlight">Scenario 2</a></li><li><a href="#scenario-3" class="table-of-contents__link toc-highlight">Scenario 3</a></li></ul></li><li><a href="#ldap-group---policy-mapping" class="table-of-contents__link toc-highlight">LDAP group -&gt; policy mapping</a></li><li><a href="#note-on-policy-mapping" class="table-of-contents__link toc-highlight">Note on policy mapping</a></li><li><a href="#user-lockout" class="table-of-contents__link toc-highlight">User lockout</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OpenBao a Series of LF Projects, LLC <br> For web site terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org">lfprojects.org</a>. <br>  OpenBao is a <a href="https://wiki.lfedge.org/display/LE/Stage+1%3A+At+Large">Stage One project</a> at <a href="https://www.lfedge.org/"><img src="/openbao/img/lfedge-logo.svg" alt="LF Edge Logo" width="90px"></a>.</div></div></div></footer></div>
</body>
</html>